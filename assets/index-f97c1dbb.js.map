{"version":3,"file":"index-f97c1dbb.js","sources":["../../node_modules/excalibur/build/esm/excalibur.js","../../node_modules/@excaliburjs/plugin-tiled/dist/excalibur-tiled.min.js","../../img/Solaria Demo Pack Update 03/Solaria Demo Pack Update 03/16x16/Sprites/Hero 01.png?url","../../img/Solaria Demo Pack Update 03/Solaria Demo Pack Update 03/16x16/Tilesets/Solaria Demo Update 01.png?url","../../res/first-level.tmx?url","../../res/tileset.tsx?url","../../res/tileset.tssx?url","../../src/resources.ts","../../src/config.ts","../../src/player.ts","../../src/main.ts"],"sourcesContent":["/*!\n * excalibur - 0.28.0 - 2023-8-10\n * https://github.com/excaliburjs/Excalibur\n * Copyright (c) 2023 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>\n * Licensed BSD-2-Clause\n * @preserve\n */\n/******/ var __webpack_modules__ = ({\n\n/***/ 4662:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n__webpack_require__(3430);\nvar entryUnbind = __webpack_require__(8791);\n\nmodule.exports = entryUnbind('Array', 'sort');\n\n\n/***/ }),\n\n/***/ 8343:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n__webpack_require__(4769);\nvar path = __webpack_require__(9276);\n\nmodule.exports = path.Object.keys;\n\n\n/***/ }),\n\n/***/ 7111:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(6733);\nvar tryToString = __webpack_require__(9821);\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n\n\n/***/ }),\n\n/***/ 1176:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isObject = __webpack_require__(5052);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n\n\n/***/ }),\n\n/***/ 9540:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIndexedObject = __webpack_require__(905);\nvar toAbsoluteIndex = __webpack_require__(3231);\nvar lengthOfArrayLike = __webpack_require__(9646);\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n\n\n/***/ }),\n\n/***/ 6038:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(4229);\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n\n\n/***/ }),\n\n/***/ 9794:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toAbsoluteIndex = __webpack_require__(3231);\nvar lengthOfArrayLike = __webpack_require__(9646);\nvar createProperty = __webpack_require__(2324);\n\nvar $Array = Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = $Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 3867:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar arraySlice = __webpack_require__(9794);\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n\n\n/***/ }),\n\n/***/ 7079:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n\n\n/***/ }),\n\n/***/ 1589:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(1601);\nvar isCallable = __webpack_require__(6733);\nvar classofRaw = __webpack_require__(7079);\nvar wellKnownSymbol = __webpack_require__(95);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n\n\n/***/ }),\n\n/***/ 7081:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar hasOwn = __webpack_require__(8270);\nvar ownKeys = __webpack_require__(4826);\nvar getOwnPropertyDescriptorModule = __webpack_require__(7933);\nvar definePropertyModule = __webpack_require__(1787);\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\n\n/***/ }),\n\n/***/ 5762:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar definePropertyModule = __webpack_require__(1787);\nvar createPropertyDescriptor = __webpack_require__(5358);\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n\n/***/ 5358:\n/***/ ((module) => {\n\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n\n/***/ 2324:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toPropertyKey = __webpack_require__(9310);\nvar definePropertyModule = __webpack_require__(1787);\nvar createPropertyDescriptor = __webpack_require__(5358);\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n\n\n/***/ }),\n\n/***/ 4768:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(6733);\nvar definePropertyModule = __webpack_require__(1787);\nvar makeBuiltIn = __webpack_require__(6039);\nvar defineGlobalProperty = __webpack_require__(8400);\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n\n\n/***/ }),\n\n/***/ 8400:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n\n\n/***/ }),\n\n/***/ 9563:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar tryToString = __webpack_require__(9821);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n\n\n/***/ }),\n\n/***/ 7400:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(4229);\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n\n\n/***/ }),\n\n/***/ 3777:\n/***/ ((module) => {\n\n\nvar documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n\n\n/***/ }),\n\n/***/ 2635:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar isObject = __webpack_require__(5052);\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n\n/***/ 2671:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar userAgent = __webpack_require__(598);\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n\n\n/***/ }),\n\n/***/ 8506:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar UA = __webpack_require__(598);\n\nmodule.exports = /MSIE|Trident/.test(UA);\n\n\n/***/ }),\n\n/***/ 598:\n/***/ ((module) => {\n\n\nmodule.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';\n\n\n/***/ }),\n\n/***/ 5884:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar userAgent = __webpack_require__(598);\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n\n\n/***/ }),\n\n/***/ 9811:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar userAgent = __webpack_require__(598);\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n\n\n/***/ }),\n\n/***/ 8791:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar uncurryThis = __webpack_require__(5968);\n\nmodule.exports = function (CONSTRUCTOR, METHOD) {\n  return uncurryThis(global[CONSTRUCTOR].prototype[METHOD]);\n};\n\n\n/***/ }),\n\n/***/ 3837:\n/***/ ((module) => {\n\n\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\n\n/***/ }),\n\n/***/ 3103:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar getOwnPropertyDescriptor = (__webpack_require__(7933).f);\nvar createNonEnumerableProperty = __webpack_require__(5762);\nvar defineBuiltIn = __webpack_require__(4768);\nvar defineGlobalProperty = __webpack_require__(8400);\nvar copyConstructorProperties = __webpack_require__(7081);\nvar isForced = __webpack_require__(6541);\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n\n\n/***/ }),\n\n/***/ 4229:\n/***/ ((module) => {\n\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n/***/ }),\n\n/***/ 7188:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(4229);\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\n\n/***/ }),\n\n/***/ 266:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_BIND = __webpack_require__(7188);\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n\n\n/***/ }),\n\n/***/ 1805:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar hasOwn = __webpack_require__(8270);\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\n\n/***/ }),\n\n/***/ 5968:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_BIND = __webpack_require__(7188);\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n\n\n/***/ }),\n\n/***/ 1333:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar isCallable = __webpack_require__(6733);\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n\n\n/***/ }),\n\n/***/ 5300:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aCallable = __webpack_require__(7111);\nvar isNullOrUndefined = __webpack_require__(9650);\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n\n\n/***/ }),\n\n/***/ 9859:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\nvar check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof __webpack_require__.g == 'object' && __webpack_require__.g) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || this || Function('return this')();\n\n\n/***/ }),\n\n/***/ 8270:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\nvar toObject = __webpack_require__(2991);\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n\n\n/***/ }),\n\n/***/ 5977:\n/***/ ((module) => {\n\n\nmodule.exports = {};\n\n\n/***/ }),\n\n/***/ 4394:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar fails = __webpack_require__(4229);\nvar createElement = __webpack_require__(2635);\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n\n\n/***/ }),\n\n/***/ 9337:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\nvar fails = __webpack_require__(4229);\nvar classof = __webpack_require__(7079);\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n\n\n/***/ }),\n\n/***/ 8511:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\nvar isCallable = __webpack_require__(6733);\nvar store = __webpack_require__(5353);\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n\n\n/***/ }),\n\n/***/ 6407:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_WEAK_MAP = __webpack_require__(1180);\nvar global = __webpack_require__(9859);\nvar isObject = __webpack_require__(5052);\nvar createNonEnumerableProperty = __webpack_require__(5762);\nvar hasOwn = __webpack_require__(8270);\nvar shared = __webpack_require__(5353);\nvar sharedKey = __webpack_require__(4399);\nvar hiddenKeys = __webpack_require__(5977);\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\n\n/***/ }),\n\n/***/ 6733:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $documentAll = __webpack_require__(3777);\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n\n\n/***/ }),\n\n/***/ 6541:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(4229);\nvar isCallable = __webpack_require__(6733);\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n\n\n/***/ }),\n\n/***/ 9650:\n/***/ ((module) => {\n\n\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n\n\n/***/ }),\n\n/***/ 5052:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(6733);\nvar $documentAll = __webpack_require__(3777);\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n\n\n/***/ }),\n\n/***/ 4231:\n/***/ ((module) => {\n\n\nmodule.exports = false;\n\n\n/***/ }),\n\n/***/ 9395:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar getBuiltIn = __webpack_require__(1333);\nvar isCallable = __webpack_require__(6733);\nvar isPrototypeOf = __webpack_require__(1321);\nvar USE_SYMBOL_AS_UID = __webpack_require__(6969);\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n\n\n/***/ }),\n\n/***/ 9646:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toLength = __webpack_require__(4237);\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n\n\n/***/ }),\n\n/***/ 6039:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\nvar fails = __webpack_require__(4229);\nvar isCallable = __webpack_require__(6733);\nvar hasOwn = __webpack_require__(8270);\nvar DESCRIPTORS = __webpack_require__(7400);\nvar CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(1805).CONFIGURABLE);\nvar inspectSource = __webpack_require__(8511);\nvar InternalStateModule = __webpack_require__(6407);\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n\n\n/***/ }),\n\n/***/ 917:\n/***/ ((module) => {\n\n\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n\n\n/***/ }),\n\n/***/ 1787:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar IE8_DOM_DEFINE = __webpack_require__(4394);\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(7137);\nvar anObject = __webpack_require__(1176);\nvar toPropertyKey = __webpack_require__(9310);\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 7933:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar call = __webpack_require__(266);\nvar propertyIsEnumerableModule = __webpack_require__(9195);\nvar createPropertyDescriptor = __webpack_require__(5358);\nvar toIndexedObject = __webpack_require__(905);\nvar toPropertyKey = __webpack_require__(9310);\nvar hasOwn = __webpack_require__(8270);\nvar IE8_DOM_DEFINE = __webpack_require__(4394);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n\n\n/***/ }),\n\n/***/ 8151:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar internalObjectKeys = __webpack_require__(140);\nvar enumBugKeys = __webpack_require__(3837);\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, exports) => {\n\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n\n/***/ 1321:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n\n\n/***/ }),\n\n/***/ 140:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\nvar hasOwn = __webpack_require__(8270);\nvar toIndexedObject = __webpack_require__(905);\nvar indexOf = (__webpack_require__(9540).indexOf);\nvar hiddenKeys = __webpack_require__(5977);\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 5632:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar internalObjectKeys = __webpack_require__(140);\nvar enumBugKeys = __webpack_require__(3837);\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n\n\n/***/ }),\n\n/***/ 9195:\n/***/ ((__unused_webpack_module, exports) => {\n\n\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\n\n/***/ }),\n\n/***/ 2914:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(266);\nvar isCallable = __webpack_require__(6733);\nvar isObject = __webpack_require__(5052);\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n\n/***/ 4826:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar getBuiltIn = __webpack_require__(1333);\nvar uncurryThis = __webpack_require__(5968);\nvar getOwnPropertyNamesModule = __webpack_require__(8151);\nvar getOwnPropertySymbolsModule = __webpack_require__(894);\nvar anObject = __webpack_require__(1176);\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n\n\n/***/ }),\n\n/***/ 9276:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\n\nmodule.exports = global;\n\n\n/***/ }),\n\n/***/ 8885:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isNullOrUndefined = __webpack_require__(9650);\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 4399:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar shared = __webpack_require__(3036);\nvar uid = __webpack_require__(1441);\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n\n/***/ }),\n\n/***/ 5353:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar defineGlobalProperty = __webpack_require__(8400);\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n\n\n/***/ }),\n\n/***/ 3036:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar IS_PURE = __webpack_require__(4231);\nvar store = __webpack_require__(5353);\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.32.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2023 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\n\n/***/ }),\n\n/***/ 4860:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = __webpack_require__(5884);\nvar fails = __webpack_require__(4229);\nvar global = __webpack_require__(9859);\n\nvar $String = global.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\n\n/***/ }),\n\n/***/ 3231:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIntegerOrInfinity = __webpack_require__(3329);\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n\n\n/***/ }),\n\n/***/ 905:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = __webpack_require__(9337);\nvar requireObjectCoercible = __webpack_require__(8885);\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n\n\n/***/ }),\n\n/***/ 3329:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar trunc = __webpack_require__(917);\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\n\n/***/ }),\n\n/***/ 4237:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIntegerOrInfinity = __webpack_require__(3329);\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\n\n/***/ }),\n\n/***/ 2991:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar requireObjectCoercible = __webpack_require__(8885);\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n\n\n/***/ }),\n\n/***/ 2066:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(266);\nvar isObject = __webpack_require__(5052);\nvar isSymbol = __webpack_require__(9395);\nvar getMethod = __webpack_require__(5300);\nvar ordinaryToPrimitive = __webpack_require__(2914);\nvar wellKnownSymbol = __webpack_require__(95);\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\n\n/***/ }),\n\n/***/ 9310:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toPrimitive = __webpack_require__(2066);\nvar isSymbol = __webpack_require__(9395);\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\n\n/***/ }),\n\n/***/ 1601:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar wellKnownSymbol = __webpack_require__(95);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n\n\n/***/ }),\n\n/***/ 3326:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classof = __webpack_require__(1589);\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\n\n/***/ }),\n\n/***/ 9821:\n/***/ ((module) => {\n\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\n\n/***/ }),\n\n/***/ 1441:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(5968);\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n\n\n/***/ }),\n\n/***/ 6969:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = __webpack_require__(4860);\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n\n\n/***/ }),\n\n/***/ 7137:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar fails = __webpack_require__(4229);\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n\n\n/***/ }),\n\n/***/ 1180:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar isCallable = __webpack_require__(6733);\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n\n\n/***/ }),\n\n/***/ 95:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar global = __webpack_require__(9859);\nvar shared = __webpack_require__(3036);\nvar hasOwn = __webpack_require__(8270);\nvar uid = __webpack_require__(1441);\nvar NATIVE_SYMBOL = __webpack_require__(4860);\nvar USE_SYMBOL_AS_UID = __webpack_require__(6969);\n\nvar Symbol = global.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n\n\n/***/ }),\n\n/***/ 3430:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(3103);\nvar uncurryThis = __webpack_require__(5968);\nvar aCallable = __webpack_require__(7111);\nvar toObject = __webpack_require__(2991);\nvar lengthOfArrayLike = __webpack_require__(9646);\nvar deletePropertyOrThrow = __webpack_require__(9563);\nvar toString = __webpack_require__(3326);\nvar fails = __webpack_require__(4229);\nvar internalSort = __webpack_require__(3867);\nvar arrayMethodIsStrict = __webpack_require__(6038);\nvar FF = __webpack_require__(2671);\nvar IE_OR_EDGE = __webpack_require__(8506);\nvar V8 = __webpack_require__(5884);\nvar WEBKIT = __webpack_require__(9811);\n\nvar test = [];\nvar nativeSort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = lengthOfArrayLike(items);\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n\n    return array;\n  }\n});\n\n\n/***/ }),\n\n/***/ 4769:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(3103);\nvar toObject = __webpack_require__(2991);\nvar nativeKeys = __webpack_require__(5632);\nvar fails = __webpack_require__(4229);\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n\n\n/***/ }),\n\n/***/ 1388:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(272);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2609);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* Buttons styles start */\r\n\r\nbutton#excalibur-play {\r\n  display: inline-block;\r\n  position: relative;\r\n  z-index: 999;\r\n  border-radius: 6px;\r\n  border: none;\r\n  /*border: 3px solid;\r\n    border-color: white;\r\n    box-shadow: 0 0 10px #ccc;*/\r\n  padding: 1rem 1.5rem 1rem 4rem;\r\n  margin: 0;\r\n  text-decoration: none;\r\n  background: #00b233;\r\n  color: #ffffff;\r\n  font-family: sans-serif;\r\n  font-size: 2rem;\r\n  white-space: nowrap;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  transition: background 250ms ease-in-out, transform 150ms ease;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n\r\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r\n  animation: excalibur-button-fadein 200ms;\r\n}\r\n\r\n/*\r\nbutton#excalibur-play {\r\n  display: none;\r\n}*/\r\n\r\nbutton#excalibur-play:after {\r\n  position: absolute;\r\n  content: '';\r\n  border: 8px solid;\r\n  border-color: transparent transparent transparent white;\r\n  left: 35px;\r\n  top: 24px;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\nbutton#excalibur-play:before {\r\n  position: absolute;\r\n  content: '';\r\n  border: 3px solid;\r\n  left: 19px;\r\n  top: 14px;\r\n  border-radius: 20px;\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\nbutton#excalibur-play:hover,\r\nbutton#excalibur-play:focus {\r\n  background: #00982c;\r\n}\r\n\r\nbutton#excalibur-play:focus {\r\n  outline: 1px solid #fff;\r\n  outline-offset: -4px;\r\n}\r\n\r\nbutton#excalibur-play:active {\r\n  transform: scale(0.99);\r\n}\r\n\r\n@keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Firefox < 16 */\r\n@-moz-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Safari, Chrome and Opera > 12.1 */\r\n@-webkit-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Internet Explorer */\r\n@-ms-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Opera < 12.1 */\r\n@-o-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./Loader.css\"],\"names\":[],\"mappings\":\"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\"/* Buttons styles start */\\r\\n\\r\\nbutton#excalibur-play {\\r\\n  display: inline-block;\\r\\n  position: relative;\\r\\n  z-index: 999;\\r\\n  border-radius: 6px;\\r\\n  border: none;\\r\\n  /*border: 3px solid;\\r\\n    border-color: white;\\r\\n    box-shadow: 0 0 10px #ccc;*/\\r\\n  padding: 1rem 1.5rem 1rem 4rem;\\r\\n  margin: 0;\\r\\n  text-decoration: none;\\r\\n  background: #00b233;\\r\\n  color: #ffffff;\\r\\n  font-family: sans-serif;\\r\\n  font-size: 2rem;\\r\\n  white-space: nowrap;\\r\\n  line-height: 1;\\r\\n  cursor: pointer;\\r\\n  text-align: center;\\r\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n\\r\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\r\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\r\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\r\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\r\\n  animation: excalibur-button-fadein 200ms;\\r\\n}\\r\\n\\r\\n/*\\r\\nbutton#excalibur-play {\\r\\n  display: none;\\r\\n}*/\\r\\n\\r\\nbutton#excalibur-play:after {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 8px solid;\\r\\n  border-color: transparent transparent transparent white;\\r\\n  left: 35px;\\r\\n  top: 24px;\\r\\n  width: 0;\\r\\n  height: 0;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:before {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 3px solid;\\r\\n  left: 19px;\\r\\n  top: 14px;\\r\\n  border-radius: 20px;\\r\\n  width: 30px;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:hover,\\r\\nbutton#excalibur-play:focus {\\r\\n  background: #00982c;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:focus {\\r\\n  outline: 1px solid #fff;\\r\\n  outline-offset: -4px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:active {\\r\\n  transform: scale(0.99);\\r\\n}\\r\\n\\r\\n@keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Firefox < 16 */\\r\\n@-moz-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Safari, Chrome and Opera > 12.1 */\\r\\n@-webkit-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Internet Explorer */\\r\\n@-ms-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Opera < 12.1 */\\r\\n@-o-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 7379:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(272);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2609);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\r\n#ex-toast-container {\r\n  position: absolute;\r\n  height: 0;\r\n  min-width: 50%;\r\n  left: 50%;\r\n  top: 0;\r\n}\r\n\r\n.ex-toast-message {\r\n  left: -50%;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n\r\n  padding: 10px;\r\n  margin-top: 5px;\r\n  font-size: 18px;\r\n  font-family: sans-serif;\r\n  border-radius: 6px;\r\n  border: 3px solid #b7b779;\r\n  background-color: rgb(253, 253, 192);\r\n}\r\n\r\n\r\n.ex-toast-message button {\r\n  align-self: flex-start;\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./Util/Toaster.css\"],\"names\":[],\"mappings\":\";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB\",\"sourcesContent\":[\"\\r\\n#ex-toast-container {\\r\\n  position: absolute;\\r\\n  height: 0;\\r\\n  min-width: 50%;\\r\\n  left: 50%;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ex-toast-message {\\r\\n  left: -50%;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n\\r\\n\\r\\n  padding: 10px;\\r\\n  margin-top: 5px;\\r\\n  font-size: 18px;\\r\\n  font-family: sans-serif;\\r\\n  border-radius: 6px;\\r\\n  border: 3px solid #b7b779;\\r\\n  background-color: rgb(253, 253, 192);\\r\\n}\\r\\n\\r\\n\\r\\n.ex-toast-message button {\\r\\n  align-self: flex-start;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 2609:\n/***/ ((module) => {\n\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};\n\n/***/ }),\n\n/***/ 272:\n/***/ ((module) => {\n\n\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};\n\n/***/ })\n\n/******/ });\n/************************************************************************/\n/******/ // The module cache\n/******/ var __webpack_module_cache__ = {};\n/******/ \n/******/ // The require function\n/******/ function __webpack_require__(moduleId) {\n/******/ \t// Check if module is in cache\n/******/ \tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \tif (cachedModule !== undefined) {\n/******/ \t\treturn cachedModule.exports;\n/******/ \t}\n/******/ \t// Create a new module (and put it into the cache)\n/******/ \tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\tid: moduleId,\n/******/ \t\t// no module.loaded needed\n/******/ \t\texports: {}\n/******/ \t};\n/******/ \n/******/ \t// Execute the module function\n/******/ \t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \n/******/ \t// Return the exports of the module\n/******/ \treturn module.exports;\n/******/ }\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/compat get default export */\n/******/ (() => {\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = (module) => {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t() => (module['default']) :\n/******/ \t\t\t() => (module);\n/******/ \t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\treturn getter;\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/global */\n/******/ (() => {\n/******/ \t__webpack_require__.g = (function() {\n/******/ \t\tif (typeof globalThis === 'object') return globalThis;\n/******/ \t\ttry {\n/******/ \t\t\treturn this || new Function('return this')();\n/******/ \t\t} catch (e) {\n/******/ \t\t\tif (typeof window === 'object') return window;\n/******/ \t\t}\n/******/ \t})();\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/make namespace object */\n/******/ (() => {\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = (exports) => {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n(() => {\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  fWn: () => (/* reexport */ ActionContext),\n  Ia8: () => (/* reexport */ ActionQueue),\n  rqv: () => (/* reexport */ ActionSequence),\n  hLI: () => (/* reexport */ ActionsComponent),\n  yyv: () => (/* reexport */ ActionsSystem),\n  tX5: () => (/* reexport */ ActivateEvent),\n  vtX: () => (/* reexport */ Actor),\n  r7K: () => (/* reexport */ AddedComponent),\n  lCh: () => (/* reexport */ AddedEntity),\n  cE4: () => (/* reexport */ AffineMatrix),\n  fwF: () => (/* reexport */ Animation),\n  sce: () => (/* reexport */ AnimationDirection),\n  AQ6: () => (/* reexport */ AnimationEvents),\n  _c7: () => (/* reexport */ AnimationStrategy),\n  KUs: () => (/* reexport */ ArcadeSolver),\n  Ajp: () => (/* reexport */ AudioContextFactory),\n  dkO: () => (/* reexport */ Axes),\n  RDh: () => (/* reexport */ Axis),\n  _H9: () => (/* reexport */ BaseAlign),\n  mxs: () => (/* reexport */ Blink),\n  OmD: () => (/* reexport */ BodyComponent),\n  kBf: () => (/* reexport */ BoundingBox),\n  C4F: () => (/* reexport */ BroadphaseStrategy),\n  NQt: () => (/* reexport */ BrowserComponent),\n  JjN: () => (/* reexport */ BrowserEvents),\n  EK_: () => (/* reexport */ Buttons),\n  V1s: () => (/* reexport */ Camera),\n  xHm: () => (/* reexport */ CameraEvents),\n  Xz7: () => (/* reexport */ Canvas),\n  Cdc: () => (/* reexport */ Circle),\n  FKn: () => (/* reexport */ CircleCollider),\n  SUY: () => (/* reexport */ Clock),\n  ab2: () => (/* reexport */ ClosestLine),\n  GfZ: () => (/* reexport */ ClosestLineJumpTable),\n  YMS: () => (/* reexport */ Collider),\n  oyv: () => (/* reexport */ ColliderComponent),\n  aUb: () => (/* reexport */ CollisionContact),\n  SdD: () => (/* reexport */ CollisionEndEvent),\n  JUv: () => (/* reexport */ CollisionGroup),\n  jEj: () => (/* reexport */ CollisionGroupManager),\n  TFq: () => (/* reexport */ CollisionJumpTable),\n  HDU: () => (/* reexport */ CollisionPostSolveEvent),\n  R_y: () => (/* reexport */ CollisionPreSolveEvent),\n  ydN: () => (/* reexport */ CollisionResolutionStrategy),\n  t50: () => (/* reexport */ CollisionStartEvent),\n  s$$: () => (/* reexport */ CollisionSystem),\n  v2G: () => (/* reexport */ CollisionType),\n  Ilk: () => (/* reexport */ Color),\n  s9i: () => (/* reexport */ ColorBlindFlags),\n  dxL: () => (/* reexport */ ColorBlindnessMode),\n  LLX: () => (/* reexport */ ColorBlindnessPostProcessor),\n  wA2: () => (/* reexport */ Component),\n  R_p: () => (/* reexport */ CompositeCollider),\n  IQ$: () => (/* reexport */ Configurable),\n  I5F: () => (/* reexport */ ConsoleAppender),\n  X8$: () => (/* reexport */ ContactConstraintPoint),\n  FR6: () => (/* reexport */ ContactEndEvent),\n  U8o: () => (/* reexport */ ContactStartEvent),\n  kbG: () => (/* reexport */ CoordPlane),\n  iS_: () => (/* reexport */ DeactivateEvent),\n  cGG: () => (/* reexport */ Debug),\n  RPN: () => (/* reexport */ DebugGraphicsComponent),\n  skb: () => (/* reexport */ DebugSystem),\n  SLU: () => (/* reexport */ DebugText),\n  RdJ: () => (/* reexport */ DegreeOfFreedom),\n  cNu: () => (/* reexport */ Delay),\n  gU7: () => (/* reexport */ Detector),\n  LSk: () => (/* reexport */ Die),\n  Nmp: () => (/* reexport */ Direction),\n  d1Y: () => (/* reexport */ DisplayMode),\n  xrL: () => (/* reexport */ DynamicTree),\n  sRW: () => (/* reexport */ DynamicTreeCollisionProcessor),\n  cmV: () => (/* binding */ EX_VERSION),\n  qWz: () => (/* reexport */ EaseBy),\n  N0Q: () => (/* reexport */ EaseTo),\n  q8b: () => (/* reexport */ EasingFunctions),\n  ynB: () => (/* reexport */ EdgeCollider),\n  jT9: () => (/* reexport */ ElasticToActorStrategy),\n  wAz: () => (/* reexport */ EmitterType),\n  D4V: () => (/* reexport */ Engine),\n  NLr: () => (/* reexport */ EngineEvents),\n  N6H: () => (/* reexport */ EnterTriggerEvent),\n  W1A: () => (/* reexport */ EnterViewPortEvent),\n  JHW: () => (/* reexport */ Entity),\n  ZZ$: () => (/* reexport */ EntityEvents),\n  v2K: () => (/* reexport */ EntityManager),\n  pBf: () => (/* reexport */ EventDispatcher),\n  vpe: () => (/* reexport */ EventEmitter),\n  GMl: () => (/* reexport */ EventTypes),\n  zW2: () => (/* reexport */ Events_namespaceObject),\n  B0K: () => (/* reexport */ ExResponse),\n  Nv7: () => (/* reexport */ ExcaliburGraphicsContext2DCanvas),\n  C_p: () => (/* reexport */ ExcaliburGraphicsContextWebGL),\n  MUA: () => (/* reexport */ ExitTriggerEvent),\n  xqU: () => (/* reexport */ ExitViewPortEvent),\n  pTp: () => (/* reexport */ Fade),\n  vUK: () => (/* reexport */ Flags),\n  j9l: () => (/* reexport */ Follow),\n  Zxw: () => (/* reexport */ Font),\n  v51: () => (/* reexport */ FontCache),\n  Hdx: () => (/* reexport */ FontStyle),\n  Z$d: () => (/* reexport */ FontUnit),\n  iqV: () => (/* reexport */ FpsSampler),\n  o$7: () => (/* reexport */ FrameStats),\n  olM: () => (/* reexport */ Future),\n  Zm$: () => (/* reexport */ GameEvent),\n  $QH: () => (/* reexport */ GameStartEvent),\n  i78: () => (/* reexport */ GameStopEvent),\n  nJg: () => (/* reexport */ Gamepad),\n  h6u: () => (/* reexport */ GamepadAxisEvent),\n  hts: () => (/* reexport */ GamepadButtonEvent),\n  j88: () => (/* reexport */ GamepadConnectEvent),\n  VME: () => (/* reexport */ GamepadDisconnectEvent),\n  fy2: () => (/* reexport */ Gamepads),\n  nt: () => (/* reexport */ Gif),\n  Ukr: () => (/* reexport */ GlobalCoordinates),\n  zsu: () => (/* reexport */ Graphic),\n  oA6: () => (/* reexport */ GraphicsComponent),\n  TVh: () => (/* reexport */ GraphicsGroup),\n  TwZ: () => (/* reexport */ GraphicsLayer),\n  GTT: () => (/* reexport */ GraphicsLayers),\n  xxj: () => (/* reexport */ GraphicsSystem),\n  XdK: () => (/* reexport */ HiddenEvent),\n  Jmb: () => (/* reexport */ ImageFiltering),\n  cXo: () => (/* reexport */ ImageSource),\n  Dm5: () => (/* reexport */ InitializeEvent),\n  IIB: () => (/* reexport */ Input_Index_namespaceObject),\n  ebW: () => (/* reexport */ InputMapper),\n  zI0: () => (/* reexport */ Integrator),\n  LYD: () => (/* reexport */ IsometricEntityComponent),\n  cEG: () => (/* reexport */ IsometricEntitySystem),\n  SEl: () => (/* reexport */ IsometricMap),\n  t9V: () => (/* reexport */ IsometricTile),\n  ez5: () => (/* reexport */ KeyEvent),\n  N1d: () => (/* reexport */ Keyboard),\n  R8U: () => (/* reexport */ Keys),\n  SKZ: () => (/* reexport */ KillEvent),\n  __J: () => (/* reexport */ Label),\n  RI$: () => (/* reexport */ LimitCameraBoundsStrategy),\n  x12: () => (/* reexport */ Line),\n  ccz: () => (/* reexport */ LineSegment),\n  aNw: () => (/* reexport */ Loader),\n  XrL: () => (/* reexport */ LoaderEvents),\n  xwn: () => (/* reexport */ LockCameraToActorAxisStrategy),\n  dNK: () => (/* reexport */ LockCameraToActorStrategy),\n  ini: () => (/* reexport */ LogLevel),\n  YdH: () => (/* reexport */ Logger),\n  F5T: () => (/* reexport */ Material),\n  y3G: () => (/* reexport */ Matrix),\n  l57: () => (/* reexport */ MatrixLocations),\n  xn0: () => (/* reexport */ MediaEvent),\n  t2V: () => (/* reexport */ Meet),\n  uxB: () => (/* reexport */ MotionComponent),\n  cpd: () => (/* reexport */ MotionSystem),\n  fiy: () => (/* reexport */ MoveBy),\n  $XZ: () => (/* reexport */ MoveTo),\n  UG6: () => (/* reexport */ NativePointerButton),\n  uqK: () => (/* reexport */ NativeSoundEvent),\n  STE: () => (/* reexport */ NativeSoundProcessedEvent),\n  y$z: () => (/* reexport */ Observable),\n  mAD: () => (/* reexport */ OffscreenSystem),\n  sOq: () => (/* reexport */ Pair),\n  hUw: () => (/* reexport */ ParallaxComponent),\n  _0G: () => (/* reexport */ ParallelActions),\n  Sqs: () => (/* reexport */ ParseGif),\n  hpZ: () => (/* reexport */ Particle),\n  Vol: () => (/* reexport */ ParticleEmitter),\n  vYX: () => (/* reexport */ ParticleTransform),\n  wIZ: () => (/* reexport */ Physics),\n  cBi: () => (/* reexport */ PhysicsStats),\n  c30: () => (/* reexport */ PhysicsWorld),\n  MPV: () => (/* reexport */ PointerButton),\n  RFv: () => (/* reexport */ PointerComponent),\n  Ux6: () => (/* reexport */ PointerEvent),\n  rxy: () => (/* reexport */ PointerEventReceiver),\n  I$c: () => (/* reexport */ PointerScope),\n  kfC: () => (/* reexport */ PointerSystem),\n  VjY: () => (/* reexport */ PointerType),\n  mgq: () => (/* reexport */ Polygon),\n  YVA: () => (/* reexport */ PolygonCollider),\n  Kgp: () => (/* reexport */ Pool),\n  HH$: () => (/* reexport */ PostCollisionEvent),\n  M_d: () => (/* reexport */ PostDebugDrawEvent),\n  rgh: () => (/* reexport */ PostDrawEvent),\n  Ra6: () => (/* reexport */ PostFrameEvent),\n  KhR: () => (/* reexport */ PostKillEvent),\n  BS5: () => (/* reexport */ PostUpdateEvent),\n  xhz: () => (/* reexport */ PreCollisionEvent),\n  xOq: () => (/* reexport */ PreDebugDrawEvent),\n  a9j: () => (/* reexport */ PreDrawEvent),\n  bHk: () => (/* reexport */ PreFrameEvent),\n  CgK: () => (/* reexport */ PreKillEvent),\n  cuY: () => (/* reexport */ PreUpdateEvent),\n  kvE: () => (/* reexport */ Projection),\n  SBu: () => (/* reexport */ QuadIndexBuffer),\n  AE_: () => (/* reexport */ Query),\n  ctO: () => (/* reexport */ QueryManager),\n  OLH: () => (/* reexport */ RadiusAroundActorStrategy),\n  kky: () => (/* reexport */ Random),\n  nSF: () => (/* reexport */ Raster),\n  zHn: () => (/* reexport */ Ray),\n  zwx: () => (/* reexport */ RealisticSolver),\n  AeJ: () => (/* reexport */ Rectangle),\n  hLz: () => (/* reexport */ RemovedComponent),\n  D9g: () => (/* reexport */ RemovedEntity),\n  wA: () => (/* reexport */ Repeat),\n  jhr: () => (/* reexport */ RepeatForever),\n  GVs: () => (/* reexport */ Resolution),\n  _zO: () => (/* reexport */ Resource),\n  LXZ: () => (/* reexport */ ResourceEvents),\n  w6$: () => (/* reexport */ RotateBy),\n  mhV: () => (/* reexport */ RotateTo),\n  MOD: () => (/* reexport */ RotationType),\n  kwd: () => (/* reexport */ ScaleBy),\n  Lmr: () => (/* reexport */ ScaleTo),\n  xsS: () => (/* reexport */ Scene),\n  K5l: () => (/* reexport */ SceneEvents),\n  lLr: () => (/* reexport */ Screen),\n  Z$r: () => (/* reexport */ ScreenAppender),\n  IXb: () => (/* reexport */ ScreenElement),\n  SGH: () => (/* reexport */ ScreenShader),\n  SMj: () => (/* reexport */ ScrollPreventionMode),\n  L34: () => (/* reexport */ Semaphore),\n  exe: () => (/* reexport */ Shader),\n  bnF: () => (/* reexport */ Shape),\n  MFA: () => (/* reexport */ Side),\n  $uU: () => (/* reexport */ Sound),\n  Sap: () => (/* reexport */ SoundEvents),\n  jyi: () => (/* reexport */ Sprite),\n  E03: () => (/* reexport */ SpriteFont),\n  V6q: () => (/* reexport */ SpriteSheet),\n  rg2: () => (/* reexport */ StandardClock),\n  DVW: () => (/* reexport */ StateMachine),\n  nVo: () => (/* reexport */ StrategyContainer),\n  F6N: () => (/* reexport */ Stream),\n  xP7: () => (/* reexport */ System),\n  Odq: () => (/* reexport */ SystemManager),\n  Zif: () => (/* reexport */ SystemType),\n  ZGJ: () => (/* reexport */ TagComponent),\n  MJk: () => (/* reexport */ TestClock),\n  xvT: () => (/* reexport */ Text),\n  PHM: () => (/* reexport */ TextAlign),\n  dpR: () => (/* reexport */ TextureLoader),\n  n9L: () => (/* reexport */ Tile),\n  KwO: () => (/* reexport */ TileMap),\n  SxM: () => (/* reexport */ TileMapEvents),\n  B7y: () => (/* reexport */ Timer),\n  x7r: () => (/* reexport */ Toaster),\n  wx7: () => (/* reexport */ Transform),\n  Uvn: () => (/* reexport */ TransformComponent),\n  OFT: () => (/* reexport */ TreeNode),\n  xzN: () => (/* reexport */ Trigger),\n  CcZ: () => (/* reexport */ TriggerEvents),\n  M5Z: () => (/* reexport */ TwoPI),\n  ZrN: () => (/* reexport */ Util_Index_namespaceObject),\n  OWs: () => (/* reexport */ Vector),\n  dF9: () => (/* reexport */ VectorView),\n  oZy: () => (/* reexport */ VertexBuffer),\n  rD2: () => (/* reexport */ VertexLayout),\n  VHo: () => (/* reexport */ VisibleEvent),\n  ohE: () => (/* reexport */ WebAudio),\n  R$E: () => (/* reexport */ WebAudioInstance),\n  xQN: () => (/* reexport */ WheelDeltaMode),\n  AdJ: () => (/* reexport */ WheelEvent),\n  q3I: () => (/* reexport */ World),\n  Pab: () => (/* reexport */ canonicalizeAngle),\n  uZ5: () => (/* reexport */ clamp),\n  McK: () => (/* reexport */ createId),\n  F9c: () => (/* reexport */ frac),\n  k0b: () => (/* reexport */ hasGraphicsTick),\n  hnT: () => (/* reexport */ hasOnInitialize),\n  RSJ: () => (/* reexport */ hasOnPostUpdate),\n  Mku: () => (/* reexport */ hasOnPreUpdate),\n  h90: () => (/* reexport */ hasPostDraw),\n  rms: () => (/* reexport */ hasPreDraw),\n  ErP: () => (/* reexport */ has_initialize),\n  aVg: () => (/* reexport */ has_postupdate),\n  lPc: () => (/* reexport */ has_preupdate),\n  Z8E: () => (/* reexport */ isAddedComponent),\n  _N2: () => (/* reexport */ isAddedSystemEntity),\n  yFn: () => (/* reexport */ isRemoveSystemEntity),\n  lNv: () => (/* reexport */ isRemovedComponent),\n  cu9: () => (/* reexport */ isScreenElement),\n  MZQ: () => (/* reexport */ maxMessages),\n  FUM: () => (/* reexport */ obsolete),\n  BxR: () => (/* reexport */ pixelSnapEpsilon),\n  vdf: () => (/* reexport */ randomInRange),\n  iaL: () => (/* reexport */ randomIntInRange),\n  w6H: () => (/* reexport */ range),\n  Q4c: () => (/* reexport */ resetObsoleteCounter),\n  Xxe: () => (/* reexport */ sign),\n  Uxb: () => (/* reexport */ toDegrees),\n  Yr5: () => (/* reexport */ toRadians),\n  Bhw: () => (/* reexport */ vec),\n  yOA: () => (/* reexport */ webgl_util_namespaceObject)\n});\n\n// NAMESPACE OBJECT: ./Events.ts\nvar Events_namespaceObject = {};\n__webpack_require__.r(Events_namespaceObject);\n__webpack_require__.d(Events_namespaceObject, {\n  ActivateEvent: () => (ActivateEvent),\n  CollisionEndEvent: () => (CollisionEndEvent),\n  CollisionPostSolveEvent: () => (CollisionPostSolveEvent),\n  CollisionPreSolveEvent: () => (CollisionPreSolveEvent),\n  CollisionStartEvent: () => (CollisionStartEvent),\n  ContactEndEvent: () => (ContactEndEvent),\n  ContactStartEvent: () => (ContactStartEvent),\n  DeactivateEvent: () => (DeactivateEvent),\n  EnterTriggerEvent: () => (EnterTriggerEvent),\n  EnterViewPortEvent: () => (EnterViewPortEvent),\n  EventTypes: () => (EventTypes),\n  ExitTriggerEvent: () => (ExitTriggerEvent),\n  ExitViewPortEvent: () => (ExitViewPortEvent),\n  GameEvent: () => (GameEvent),\n  GameStartEvent: () => (GameStartEvent),\n  GameStopEvent: () => (GameStopEvent),\n  GamepadAxisEvent: () => (GamepadAxisEvent),\n  GamepadButtonEvent: () => (GamepadButtonEvent),\n  GamepadConnectEvent: () => (GamepadConnectEvent),\n  GamepadDisconnectEvent: () => (GamepadDisconnectEvent),\n  HiddenEvent: () => (HiddenEvent),\n  InitializeEvent: () => (InitializeEvent),\n  KillEvent: () => (KillEvent),\n  PostCollisionEvent: () => (PostCollisionEvent),\n  PostDebugDrawEvent: () => (PostDebugDrawEvent),\n  PostDrawEvent: () => (PostDrawEvent),\n  PostFrameEvent: () => (PostFrameEvent),\n  PostKillEvent: () => (PostKillEvent),\n  PostUpdateEvent: () => (PostUpdateEvent),\n  PreCollisionEvent: () => (PreCollisionEvent),\n  PreDebugDrawEvent: () => (PreDebugDrawEvent),\n  PreDrawEvent: () => (PreDrawEvent),\n  PreFrameEvent: () => (PreFrameEvent),\n  PreKillEvent: () => (PreKillEvent),\n  PreUpdateEvent: () => (PreUpdateEvent),\n  VisibleEvent: () => (VisibleEvent)\n});\n\n// NAMESPACE OBJECT: ./Graphics/Context/webgl-util.ts\nvar webgl_util_namespaceObject = {};\n__webpack_require__.r(webgl_util_namespaceObject);\n__webpack_require__.d(webgl_util_namespaceObject, {\n  getAttributeComponentSize: () => (getAttributeComponentSize),\n  getAttributePointerType: () => (getAttributePointerType),\n  getGlTypeSizeBytes: () => (getGlTypeSizeBytes)\n});\n\n// NAMESPACE OBJECT: ./Util/DrawUtil.ts\nvar DrawUtil_namespaceObject = {};\n__webpack_require__.r(DrawUtil_namespaceObject);\n__webpack_require__.d(DrawUtil_namespaceObject, {\n  circle: () => (circle),\n  line: () => (line),\n  point: () => (point),\n  roundRect: () => (roundRect),\n  vector: () => (vector)\n});\n\n// NAMESPACE OBJECT: ./Input/Index.ts\nvar Input_Index_namespaceObject = {};\n__webpack_require__.r(Input_Index_namespaceObject);\n__webpack_require__.d(Input_Index_namespaceObject, {\n  Axes: () => (Axes),\n  Buttons: () => (Buttons),\n  Gamepad: () => (Gamepad),\n  Gamepads: () => (Gamepads),\n  KeyEvent: () => (KeyEvent),\n  Keyboard: () => (Keyboard),\n  Keys: () => (Keys),\n  NativePointerButton: () => (NativePointerButton),\n  PointerButton: () => (PointerButton),\n  PointerComponent: () => (PointerComponent),\n  PointerEvent: () => (PointerEvent),\n  PointerEventReceiver: () => (PointerEventReceiver),\n  PointerScope: () => (PointerScope),\n  PointerSystem: () => (PointerSystem),\n  PointerType: () => (PointerType),\n  WheelDeltaMode: () => (WheelDeltaMode),\n  WheelEvent: () => (WheelEvent)\n});\n\n// NAMESPACE OBJECT: ./Util/Index.ts\nvar Util_Index_namespaceObject = {};\n__webpack_require__.r(Util_Index_namespaceObject);\n__webpack_require__.d(Util_Index_namespaceObject, {\n  ConsoleAppender: () => (ConsoleAppender),\n  DrawUtil: () => (DrawUtil_namespaceObject),\n  EasingFunctions: () => (EasingFunctions),\n  LogLevel: () => (LogLevel),\n  Logger: () => (Logger),\n  Observable: () => (Observable),\n  ScreenAppender: () => (ScreenAppender),\n  addItemToArray: () => (addItemToArray),\n  contains: () => (contains),\n  delay: () => (delay),\n  fail: () => (fail),\n  getPosition: () => (getPosition),\n  removeItemFromArray: () => (removeItemFromArray)\n});\n\n// EXTERNAL MODULE: ../../node_modules/core-js/es/array/sort.js\nvar sort = __webpack_require__(4662);\n// EXTERNAL MODULE: ../../node_modules/core-js/es/object/keys.js\nvar keys = __webpack_require__(8343);\n;// CONCATENATED MODULE: ./Polyfill.ts\n\r\n\r\n/**\r\n * Polyfill adding function\r\n */\r\nfunction polyfill() {\r\n    /* istanbul ignore next */\r\n    if (typeof window === 'undefined') {\r\n        window = {\r\n            audioContext: function () {\r\n                return;\r\n            }\r\n        };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\r\n        window.requestAnimationFrame =\r\n            window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                function (callback) {\r\n                    window.setInterval(callback, 1000 / 60);\r\n                };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\r\n        window.cancelAnimationFrame =\r\n            window.webkitCancelAnimationFrame ||\r\n                window.mozCancelAnimationFrame ||\r\n                function () {\r\n                    return;\r\n                };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.AudioContext) {\r\n        if (window.webkitAudioContext) {\r\n            const ctx = window.webkitAudioContext;\r\n            const replaceMe = ctx.prototype.decodeAudioData;\r\n            window.webkitAudioContext.prototype.decodeAudioData = function (arrayBuffer) {\r\n                return new Promise((resolve, reject) => {\r\n                    replaceMe.call(this, arrayBuffer, resolve, reject);\r\n                });\r\n            };\r\n        }\r\n        window.AudioContext =\r\n            window.AudioContext ||\r\n                window.webkitAudioContext ||\r\n                window.mozAudioContext ||\r\n                window.msAudioContext ||\r\n                window.oAudioContext;\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.devicePixelRatio) {\r\n        window.devicePixelRatio = window.devicePixelRatio || 1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Flags.ts\n/**\r\n * Flags is a feature flag implementation for Excalibur. They can only be operated **before [[Engine]] construction**\r\n * after which they are frozen and are read-only.\r\n *\r\n * Flags are used to enable experimental or preview features in Excalibur.\r\n */\r\nclass Flags {\r\n    /**\r\n     * Force excalibur to load the Canvas 2D graphics context fallback\r\n     *\r\n     * @warning not all features of excalibur are supported in the Canvas 2D fallback\r\n     */\r\n    static useCanvasGraphicsContext() {\r\n        Flags.enable('use-canvas-context');\r\n    }\r\n    /**\r\n     * Freeze all flag modifications making them readonly\r\n     */\r\n    static freeze() {\r\n        Flags._FROZEN = true;\r\n    }\r\n    /**\r\n     * Resets internal flag state, not meant to be called by users. Only used for testing.\r\n     *\r\n     * Calling this in your game is UNSUPPORTED\r\n     * @internal\r\n     */\r\n    static _reset() {\r\n        Flags._FROZEN = false;\r\n        Flags._FLAGS = {};\r\n    }\r\n    /**\r\n     * Enable a specific feature flag by name. **Note: can only be set before [[Engine]] constructor time**\r\n     * @param flagName\r\n     */\r\n    static enable(flagName) {\r\n        if (this._FROZEN) {\r\n            throw Error('Feature flags can only be enabled before Engine constructor time');\r\n        }\r\n        Flags._FLAGS[flagName] = true;\r\n    }\r\n    /**\r\n     * Disable a specific feature flag by name. **Note: can only be set before [[Engine]] constructor time**\r\n     * @param flagName\r\n     */\r\n    static disable(flagName) {\r\n        if (this._FROZEN) {\r\n            throw Error('Feature flags can only be disabled before Engine constructor time');\r\n        }\r\n        Flags._FLAGS[flagName] = false;\r\n    }\r\n    /**\r\n     * Check if a flag is enabled. If the flag is disabled or does not exist `false` is returned\r\n     * @param flagName\r\n     */\r\n    static isEnabled(flagName) {\r\n        return !!Flags._FLAGS[flagName];\r\n    }\r\n    /**\r\n     * Show a list of currently known flags\r\n     */\r\n    static show() {\r\n        return Object.keys(Flags._FLAGS);\r\n    }\r\n}\r\nFlags._FROZEN = false;\r\nFlags._FLAGS = {};\r\n\n;// CONCATENATED MODULE: ./Id.ts\n/**\r\n * Create a branded ID type from a number\r\n */\r\nfunction createId(type, value) {\r\n    return { type, value };\r\n}\r\n;\r\n\n;// CONCATENATED MODULE: ./EventEmitter.ts\n/**\r\n * Excalibur's typed event emitter, this allows events to be sent with any string to Type mapping\r\n */\r\nclass EventEmitter {\r\n    constructor() {\r\n        this._paused = false;\r\n        this._listeners = {};\r\n        this._listenersOnce = {};\r\n        this._pipes = [];\r\n    }\r\n    clear() {\r\n        this._listeners = {};\r\n        this._listenersOnce = {};\r\n        this._pipes.length = 0;\r\n    }\r\n    on(eventName, handler) {\r\n        var _a;\r\n        this._listeners[eventName] = (_a = this._listeners[eventName]) !== null && _a !== void 0 ? _a : [];\r\n        this._listeners[eventName].push(handler);\r\n        return {\r\n            close: () => this.off(eventName, handler)\r\n        };\r\n    }\r\n    once(eventName, handler) {\r\n        var _a;\r\n        this._listenersOnce[eventName] = (_a = this._listenersOnce[eventName]) !== null && _a !== void 0 ? _a : [];\r\n        this._listenersOnce[eventName].push(handler);\r\n        return {\r\n            close: () => this.off(eventName, handler)\r\n        };\r\n    }\r\n    off(eventName, handler) {\r\n        var _a, _b, _c, _d;\r\n        if (handler) {\r\n            const listenerIndex = (_a = this._listeners[eventName]) === null || _a === void 0 ? void 0 : _a.indexOf(handler);\r\n            if (listenerIndex > -1) {\r\n                (_b = this._listeners[eventName]) === null || _b === void 0 ? void 0 : _b.splice(listenerIndex, 1);\r\n            }\r\n            const onceIndex = (_c = this._listenersOnce[eventName]) === null || _c === void 0 ? void 0 : _c.indexOf(handler);\r\n            if (onceIndex > -1) {\r\n                (_d = this._listenersOnce[eventName]) === null || _d === void 0 ? void 0 : _d.splice(onceIndex, 1);\r\n            }\r\n        }\r\n        else {\r\n            delete this._listeners[eventName];\r\n        }\r\n    }\r\n    emit(eventName, event) {\r\n        var _a;\r\n        if (this._paused) {\r\n            return;\r\n        }\r\n        (_a = this._listeners[eventName]) === null || _a === void 0 ? void 0 : _a.forEach((fn) => fn(event));\r\n        const onces = this._listenersOnce[eventName];\r\n        this._listenersOnce[eventName] = [];\r\n        if (onces) {\r\n            onces.forEach((fn) => fn(event));\r\n        }\r\n        this._pipes.forEach((pipe) => {\r\n            pipe.emit(eventName, event);\r\n        });\r\n    }\r\n    pipe(emitter) {\r\n        if (this === emitter) {\r\n            throw Error('Cannot pipe to self');\r\n        }\r\n        this._pipes.push(emitter);\r\n        return {\r\n            close: () => {\r\n                const i = this._pipes.indexOf(emitter);\r\n                if (i > -1) {\r\n                    this._pipes.splice(i, 1);\r\n                }\r\n            }\r\n        };\r\n    }\r\n    unpipe(emitter) {\r\n        const i = this._pipes.indexOf(emitter);\r\n        if (i > -1) {\r\n            this._pipes.splice(i, 1);\r\n        }\r\n    }\r\n    pause() {\r\n        this._paused = true;\r\n    }\r\n    unpause() {\r\n        this._paused = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Events.ts\nvar EventTypes;\r\n(function (EventTypes) {\r\n    EventTypes[\"Kill\"] = \"kill\";\r\n    EventTypes[\"PreKill\"] = \"prekill\";\r\n    EventTypes[\"PostKill\"] = \"postkill\";\r\n    EventTypes[\"PreDraw\"] = \"predraw\";\r\n    EventTypes[\"PostDraw\"] = \"postdraw\";\r\n    EventTypes[\"PreDebugDraw\"] = \"predebugdraw\";\r\n    EventTypes[\"PostDebugDraw\"] = \"postdebugdraw\";\r\n    EventTypes[\"PreUpdate\"] = \"preupdate\";\r\n    EventTypes[\"PostUpdate\"] = \"postupdate\";\r\n    EventTypes[\"PreFrame\"] = \"preframe\";\r\n    EventTypes[\"PostFrame\"] = \"postframe\";\r\n    EventTypes[\"PreCollision\"] = \"precollision\";\r\n    EventTypes[\"CollisionStart\"] = \"collisionstart\";\r\n    EventTypes[\"CollisionEnd\"] = \"collisionend\";\r\n    EventTypes[\"PostCollision\"] = \"postcollision\";\r\n    EventTypes[\"Initialize\"] = \"initialize\";\r\n    EventTypes[\"Activate\"] = \"activate\";\r\n    EventTypes[\"Deactivate\"] = \"deactivate\";\r\n    EventTypes[\"ExitViewport\"] = \"exitviewport\";\r\n    EventTypes[\"EnterViewport\"] = \"enterviewport\";\r\n    EventTypes[\"ExitTrigger\"] = \"exit\";\r\n    EventTypes[\"EnterTrigger\"] = \"enter\";\r\n    EventTypes[\"Connect\"] = \"connect\";\r\n    EventTypes[\"Disconnect\"] = \"disconnect\";\r\n    EventTypes[\"Button\"] = \"button\";\r\n    EventTypes[\"Axis\"] = \"axis\";\r\n    EventTypes[\"Visible\"] = \"visible\";\r\n    EventTypes[\"Hidden\"] = \"hidden\";\r\n    EventTypes[\"Start\"] = \"start\";\r\n    EventTypes[\"Stop\"] = \"stop\";\r\n    EventTypes[\"PointerUp\"] = \"pointerup\";\r\n    EventTypes[\"PointerDown\"] = \"pointerdown\";\r\n    EventTypes[\"PointerMove\"] = \"pointermove\";\r\n    EventTypes[\"PointerEnter\"] = \"pointerenter\";\r\n    EventTypes[\"PointerLeave\"] = \"pointerleave\";\r\n    EventTypes[\"PointerCancel\"] = \"pointercancel\";\r\n    EventTypes[\"PointerWheel\"] = \"pointerwheel\";\r\n    EventTypes[\"Up\"] = \"up\";\r\n    EventTypes[\"Down\"] = \"down\";\r\n    EventTypes[\"Move\"] = \"move\";\r\n    EventTypes[\"Enter\"] = \"enter\";\r\n    EventTypes[\"Leave\"] = \"leave\";\r\n    EventTypes[\"Cancel\"] = \"cancel\";\r\n    EventTypes[\"Wheel\"] = \"wheel\";\r\n    EventTypes[\"Press\"] = \"press\";\r\n    EventTypes[\"Release\"] = \"release\";\r\n    EventTypes[\"Hold\"] = \"hold\";\r\n    EventTypes[\"PointerDragStart\"] = \"pointerdragstart\";\r\n    EventTypes[\"PointerDragEnd\"] = \"pointerdragend\";\r\n    EventTypes[\"PointerDragEnter\"] = \"pointerdragenter\";\r\n    EventTypes[\"PointerDragLeave\"] = \"pointerdragleave\";\r\n    EventTypes[\"PointerDragMove\"] = \"pointerdragmove\";\r\n})(EventTypes || (EventTypes = {}));\r\n/**\r\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\r\n * some events are unique to a type, others are not.\r\n *\r\n */\r\nclass GameEvent {\r\n    constructor() {\r\n        this._bubbles = true;\r\n    }\r\n    /**\r\n     * If set to false, prevents event from propagating to other actors. If true it will be propagated\r\n     * to all actors that apply.\r\n     */\r\n    get bubbles() {\r\n        return this._bubbles;\r\n    }\r\n    set bubbles(value) {\r\n        this._bubbles = value;\r\n    }\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    stopPropagation() {\r\n        this.bubbles = false;\r\n    }\r\n}\r\n/**\r\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\r\n */\r\nclass KillEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'prekill' event is emitted directly before an actor is killed.\r\n */\r\nclass PreKillEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postkill' event is emitted directly after the actor is killed.\r\n */\r\nclass PostKillEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'start' event is emitted on engine when has started and is ready for interaction.\r\n */\r\nclass GameStartEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\r\n */\r\nclass GameStopEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nclass PreDrawEvent extends GameEvent {\r\n    constructor(ctx, delta, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nclass PostDrawEvent extends GameEvent {\r\n    constructor(ctx, delta, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\r\n */\r\nclass PreDebugDrawEvent extends GameEvent {\r\n    constructor(ctx, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\r\n */\r\nclass PostDebugDrawEvent extends GameEvent {\r\n    constructor(ctx, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\r\n */\r\nclass PreUpdateEvent extends GameEvent {\r\n    constructor(engine, delta, target) {\r\n        super();\r\n        this.engine = engine;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\r\n */\r\nclass PostUpdateEvent extends GameEvent {\r\n    constructor(engine, delta, target) {\r\n        super();\r\n        this.engine = engine;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'preframe' event is emitted on the engine, before the frame begins.\r\n */\r\nclass PreFrameEvent extends GameEvent {\r\n    constructor(engine, prevStats) {\r\n        super();\r\n        this.engine = engine;\r\n        this.prevStats = prevStats;\r\n        this.target = engine;\r\n    }\r\n}\r\n/**\r\n * The 'postframe' event is emitted on the engine, after a frame ends.\r\n */\r\nclass PostFrameEvent extends GameEvent {\r\n    constructor(engine, stats) {\r\n        super();\r\n        this.engine = engine;\r\n        this.stats = stats;\r\n        this.target = engine;\r\n    }\r\n}\r\n/**\r\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\r\n */\r\nclass GamepadConnectEvent extends GameEvent {\r\n    constructor(index, gamepad) {\r\n        super();\r\n        this.index = index;\r\n        this.gamepad = gamepad;\r\n        this.target = gamepad;\r\n    }\r\n}\r\n/**\r\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\r\n */\r\nclass GamepadDisconnectEvent extends GameEvent {\r\n    constructor(index, gamepad) {\r\n        super();\r\n        this.index = index;\r\n        this.gamepad = gamepad;\r\n        this.target = gamepad;\r\n    }\r\n}\r\n/**\r\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nclass GamepadButtonEvent extends GameEvent {\r\n    /**\r\n     * @param button  The Gamepad button\r\n     * @param value   A numeric value between 0 and 1\r\n     */\r\n    constructor(button, value, target) {\r\n        super();\r\n        this.button = button;\r\n        this.value = value;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nclass GamepadAxisEvent extends GameEvent {\r\n    /**\r\n     * @param axis  The Gamepad axis\r\n     * @param value A numeric value between -1 and 1\r\n     */\r\n    constructor(axis, value, target) {\r\n        super();\r\n        this.axis = axis;\r\n        this.value = value;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event received by the [[Engine]] when the browser window is visible on a screen.\r\n */\r\nclass VisibleEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\r\n */\r\nclass HiddenEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\r\n */\r\nclass PreCollisionEvent extends GameEvent {\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that will collided with the current actor\r\n     * @param side          The side that will be collided with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    constructor(actor, other, side, intersection) {\r\n        super();\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.target = actor;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\r\n */\r\nclass PostCollisionEvent extends GameEvent {\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that did collide with the current actor\r\n     * @param side          The side that did collide with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    constructor(actor, other, side, intersection) {\r\n        super();\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.target = actor;\r\n    }\r\n    get actor() {\r\n        return this.target;\r\n    }\r\n    set actor(actor) {\r\n        this.target = actor;\r\n    }\r\n}\r\nclass ContactStartEvent {\r\n    constructor(target, other, contact) {\r\n        this.target = target;\r\n        this.other = other;\r\n        this.contact = contact;\r\n    }\r\n}\r\nclass ContactEndEvent {\r\n    constructor(target, other) {\r\n        this.target = target;\r\n        this.other = other;\r\n    }\r\n}\r\nclass CollisionPreSolveEvent {\r\n    constructor(target, other, side, intersection, contact) {\r\n        this.target = target;\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.contact = contact;\r\n    }\r\n}\r\nclass CollisionPostSolveEvent {\r\n    constructor(target, other, side, intersection, contact) {\r\n        this.target = target;\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.contact = contact;\r\n    }\r\n}\r\n/**\r\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\r\n */\r\nclass CollisionStartEvent extends GameEvent {\r\n    /**\r\n     *\r\n     * @param actor\r\n     * @param other\r\n     * @param contact\r\n     */\r\n    constructor(actor, other, contact) {\r\n        super();\r\n        this.other = other;\r\n        this.contact = contact;\r\n        this.target = actor;\r\n    }\r\n    get actor() {\r\n        return this.target;\r\n    }\r\n    set actor(actor) {\r\n        this.target = actor;\r\n    }\r\n}\r\n/**\r\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\r\n */\r\nclass CollisionEndEvent extends GameEvent {\r\n    /**\r\n     *\r\n     */\r\n    constructor(actor, other) {\r\n        super();\r\n        this.other = other;\r\n        this.target = actor;\r\n    }\r\n    get actor() {\r\n        return this.target;\r\n    }\r\n    set actor(actor) {\r\n        this.target = actor;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor]], [[Scene]], and [[Engine]] only once before the first update call\r\n */\r\nclass InitializeEvent extends GameEvent {\r\n    /**\r\n     * @param engine  The reference to the current engine\r\n     */\r\n    constructor(engine, target) {\r\n        super();\r\n        this.engine = engine;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on a [[Scene]] on activation\r\n */\r\nclass ActivateEvent extends GameEvent {\r\n    /**\r\n     * @param context  The context for the scene activation\r\n     */\r\n    constructor(context, target) {\r\n        super();\r\n        this.context = context;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on a [[Scene]] on deactivation\r\n */\r\nclass DeactivateEvent extends GameEvent {\r\n    /**\r\n     * @param context  The context for the scene deactivation\r\n     */\r\n    constructor(context, target) {\r\n        super();\r\n        this.context = context;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nclass ExitViewPortEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nclass EnterViewPortEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\nclass EnterTriggerEvent extends GameEvent {\r\n    constructor(target, actor) {\r\n        super();\r\n        this.target = target;\r\n        this.actor = actor;\r\n    }\r\n}\r\nclass ExitTriggerEvent extends GameEvent {\r\n    constructor(target, actor) {\r\n        super();\r\n        this.target = target;\r\n        this.actor = actor;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/Gamepad.ts\n\r\n\r\nconst GamepadEvents = {\r\n    GamepadConnect: 'connect',\r\n    GamepadDisconnect: 'disconnect',\r\n    GamepadButton: 'button',\r\n    GamepadAxis: 'axis'\r\n};\r\n/**\r\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\r\n * to provide controller support for your games.\r\n */\r\nclass Gamepads {\r\n    constructor() {\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * Whether or not to poll for Gamepad input (default: `false`)\r\n         */\r\n        this.enabled = false;\r\n        /**\r\n         * Whether or not Gamepad API is supported\r\n         */\r\n        this.supported = !!navigator.getGamepads;\r\n        this._gamePadTimeStamps = [0, 0, 0, 0];\r\n        this._oldPads = [];\r\n        this._pads = [];\r\n        this._initSuccess = false;\r\n        this._navigator = navigator;\r\n        this._minimumConfiguration = null;\r\n    }\r\n    init() {\r\n        if (!this.supported) {\r\n            return;\r\n        }\r\n        if (this._initSuccess) {\r\n            return;\r\n        }\r\n        // In Chrome, this will return 4 undefined items until a button is pressed\r\n        // In FF, this will not return any items until a button is pressed\r\n        this._oldPads = this._clonePads(this._navigator.getGamepads());\r\n        if (this._oldPads.length && this._oldPads[0]) {\r\n            this._initSuccess = true;\r\n        }\r\n    }\r\n    /**\r\n     * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\r\n     * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\r\n     * all other controllers with more axis or buttons are valid as well. If no minimum\r\n     * configuration is set all pads are valid.\r\n     */\r\n    setMinimumGamepadConfiguration(config) {\r\n        this._enableAndUpdate(); // if config is used, implicitly enable\r\n        this._minimumConfiguration = config;\r\n    }\r\n    /**\r\n     * When implicitly enabled, set the enabled flag and run an update so information is updated\r\n     */\r\n    _enableAndUpdate() {\r\n        if (!this.enabled) {\r\n            this.enabled = true;\r\n            this.update();\r\n        }\r\n    }\r\n    /**\r\n     * Checks a navigator gamepad against the minimum configuration if present.\r\n     */\r\n    _isGamepadValid(pad) {\r\n        if (!this._minimumConfiguration) {\r\n            return true;\r\n        }\r\n        if (!pad) {\r\n            return false;\r\n        }\r\n        const axesLength = pad.axes.filter((value) => {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        const buttonLength = pad.buttons.filter((value) => {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        this.events.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Updates Gamepad state and publishes Gamepad events\r\n     */\r\n    update() {\r\n        if (!this.enabled || !this.supported) {\r\n            return;\r\n        }\r\n        this.init();\r\n        const gamepads = this._navigator.getGamepads();\r\n        for (let i = 0; i < gamepads.length; i++) {\r\n            if (!gamepads[i]) {\r\n                const gamepad = this.at(i);\r\n                // If was connected, but now isn't emit the disconnect event\r\n                if (gamepad.connected) {\r\n                    this.events.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\r\n                }\r\n                // Reset connection status\r\n                gamepad.connected = false;\r\n                continue;\r\n            }\r\n            else {\r\n                if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\r\n                    this.events.emit('connect', new GamepadConnectEvent(i, this.at(i)));\r\n                }\r\n                // Set connection status\r\n                this.at(i).connected = true;\r\n            }\r\n            this.at(i).update();\r\n            // Only supported in Chrome\r\n            if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\r\n                continue;\r\n            }\r\n            this._gamePadTimeStamps[i] = gamepads[i].timestamp;\r\n            // Add reference to navigator gamepad\r\n            this.at(i).navigatorGamepad = gamepads[i];\r\n            // Buttons\r\n            let b, bi, a, ai, value;\r\n            for (b in Buttons) {\r\n                bi = Buttons[b];\r\n                if (typeof bi === 'number') {\r\n                    if (gamepads[i].buttons[bi]) {\r\n                        value = gamepads[i].buttons[bi].value;\r\n                        if (value !== this._oldPads[i].getButton(bi)) {\r\n                            if (gamepads[i].buttons[bi].pressed) {\r\n                                this.at(i).updateButton(bi, value);\r\n                                this.at(i).events.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\r\n                            }\r\n                            else {\r\n                                this.at(i).updateButton(bi, 0);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Axes\r\n            for (a in Axes) {\r\n                ai = Axes[a];\r\n                if (typeof ai === 'number') {\r\n                    value = gamepads[i].axes[ai];\r\n                    if (value !== this._oldPads[i].getAxes(ai)) {\r\n                        this.at(i).updateAxes(ai, value);\r\n                        this.at(i).events.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\r\n                    }\r\n                }\r\n            }\r\n            this._oldPads[i] = this._clonePad(gamepads[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\r\n     */\r\n    at(index) {\r\n        this._enableAndUpdate(); // implicitly enable gamepads when at() is called\r\n        if (index >= this._pads.length) {\r\n            // Ensure there is a pad to retrieve\r\n            for (let i = this._pads.length - 1, max = index; i < max; i++) {\r\n                this._pads.push(new Gamepad());\r\n                this._oldPads.push(new Gamepad());\r\n            }\r\n        }\r\n        return this._pads[index];\r\n    }\r\n    /**\r\n     * Returns a list of all valid gamepads that meet the minimum configuration requirement.\r\n     */\r\n    getValidGamepads() {\r\n        this._enableAndUpdate();\r\n        const result = [];\r\n        for (let i = 0; i < this._pads.length; i++) {\r\n            if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\r\n                result.push(this.at(i));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Gets the number of connected gamepads\r\n     */\r\n    count() {\r\n        return this._pads.filter((p) => p.connected).length;\r\n    }\r\n    _clonePads(pads) {\r\n        const arr = [];\r\n        for (let i = 0, len = pads.length; i < len; i++) {\r\n            arr.push(this._clonePad(pads[i]));\r\n        }\r\n        return arr;\r\n    }\r\n    /**\r\n     * Fastest way to clone a known object is to do it yourself\r\n     */\r\n    _clonePad(pad) {\r\n        let i, len;\r\n        const clonedPad = new Gamepad();\r\n        if (!pad) {\r\n            return clonedPad;\r\n        }\r\n        for (i = 0, len = pad.buttons.length; i < len; i++) {\r\n            if (pad.buttons[i]) {\r\n                clonedPad.updateButton(i, pad.buttons[i].value);\r\n            }\r\n        }\r\n        for (i = 0, len = pad.axes.length; i < len; i++) {\r\n            clonedPad.updateAxes(i, pad.axes[i]);\r\n        }\r\n        return clonedPad;\r\n    }\r\n}\r\n/**\r\n * The minimum value an axis has to move before considering it a change\r\n */\r\nGamepads.MinAxisMoveThreshold = 0.05;\r\n/**\r\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\r\n * for more information on handling controller input.\r\n */\r\nclass Gamepad {\r\n    constructor() {\r\n        this.events = new EventEmitter();\r\n        this.connected = false;\r\n        this._axes = new Array(4);\r\n        this._buttons = new Array(16);\r\n        this._buttonsUp = new Array(16);\r\n        this._buttonsDown = new Array(16);\r\n        for (let i = 0; i < this._buttons.length; i++) {\r\n            this._buttons[i] = 0;\r\n        }\r\n        for (let i = 0; i < this._axes.length; i++) {\r\n            this._axes[i] = 0;\r\n        }\r\n    }\r\n    update() {\r\n        // Reset buttonsDown and buttonsUp after update is complete\r\n        this._buttonsDown = new Array(16);\r\n        this._buttonsUp = new Array(16);\r\n    }\r\n    /**\r\n     * Whether or not the given button is pressed\r\n     *\r\n     * @deprecated will be removed in v0.28.0. Use isButtonHeld instead\r\n     * @param button     The button to query\r\n     * @param threshold  The threshold over which the button is considered to be pressed\r\n     */\r\n    isButtonPressed(button, threshold = 1) {\r\n        return this._buttons[button] >= threshold;\r\n    }\r\n    /**\r\n     * Tests if a certain button is held down. This is persisted between frames.\r\n     *\r\n     * @param button     The button to query\r\n     * @param threshold  The threshold over which the button is considered to be pressed\r\n     */\r\n    isButtonHeld(button, threshold = 1) {\r\n        return this._buttons[button] >= threshold;\r\n    }\r\n    /**\r\n     * Tests if a certain button was just pressed this frame. This is cleared at the end of the update frame.\r\n     *\r\n     * @param button Test whether a button was just pressed\r\n     * @param threshold  The threshold over which the button is considered to be pressed\r\n     */\r\n    wasButtonPressed(button, threshold = 1) {\r\n        return this._buttonsDown[button] >= threshold;\r\n    }\r\n    /**\r\n     * Tests if a certain button was just released this frame. This is cleared at the end of the update frame.\r\n     *\r\n     * @param button  Test whether a button was just released\r\n     */\r\n    wasButtonReleased(button) {\r\n        return Boolean(this._buttonsUp[button]);\r\n    }\r\n    /**\r\n     * Gets the given button value between 0 and 1\r\n     */\r\n    getButton(button) {\r\n        return this._buttons[button];\r\n    }\r\n    /**\r\n     * Gets the given axis value between -1 and 1. Values below\r\n     * [[MinAxisMoveThreshold]] are considered 0.\r\n     */\r\n    getAxes(axes) {\r\n        const value = this._axes[axes];\r\n        if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n    updateButton(buttonIndex, value) {\r\n        // button was just released\r\n        if (value === 0 && this._buttons[buttonIndex]) {\r\n            this._buttonsUp[buttonIndex] = 1;\r\n            // button was just pressed\r\n        }\r\n        else {\r\n            this._buttonsDown[buttonIndex] = value;\r\n        }\r\n        this._buttons[buttonIndex] = value;\r\n    }\r\n    updateAxes(axesIndex, value) {\r\n        this._axes[axesIndex] = value;\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n}\r\n/**\r\n * Gamepad Buttons enumeration\r\n */\r\nvar Buttons;\r\n(function (Buttons) {\r\n    /**\r\n     * Face 1 button (e.g. A)\r\n     */\r\n    Buttons[Buttons[\"Face1\"] = 0] = \"Face1\";\r\n    /**\r\n     * Face 2 button (e.g. B)\r\n     */\r\n    Buttons[Buttons[\"Face2\"] = 1] = \"Face2\";\r\n    /**\r\n     * Face 3 button (e.g. X)\r\n     */\r\n    Buttons[Buttons[\"Face3\"] = 2] = \"Face3\";\r\n    /**\r\n     * Face 4 button (e.g. Y)\r\n     */\r\n    Buttons[Buttons[\"Face4\"] = 3] = \"Face4\";\r\n    /**\r\n     * Left bumper button\r\n     */\r\n    Buttons[Buttons[\"LeftBumper\"] = 4] = \"LeftBumper\";\r\n    /**\r\n     * Right bumper button\r\n     */\r\n    Buttons[Buttons[\"RightBumper\"] = 5] = \"RightBumper\";\r\n    /**\r\n     * Left trigger button\r\n     */\r\n    Buttons[Buttons[\"LeftTrigger\"] = 6] = \"LeftTrigger\";\r\n    /**\r\n     * Right trigger button\r\n     */\r\n    Buttons[Buttons[\"RightTrigger\"] = 7] = \"RightTrigger\";\r\n    /**\r\n     * Select button\r\n     */\r\n    Buttons[Buttons[\"Select\"] = 8] = \"Select\";\r\n    /**\r\n     * Start button\r\n     */\r\n    Buttons[Buttons[\"Start\"] = 9] = \"Start\";\r\n    /**\r\n     * Left analog stick press (e.g. L3)\r\n     */\r\n    Buttons[Buttons[\"LeftStick\"] = 10] = \"LeftStick\";\r\n    /**\r\n     * Right analog stick press (e.g. R3)\r\n     */\r\n    Buttons[Buttons[\"RightStick\"] = 11] = \"RightStick\";\r\n    /**\r\n     * D-pad up\r\n     */\r\n    Buttons[Buttons[\"DpadUp\"] = 12] = \"DpadUp\";\r\n    /**\r\n     * D-pad down\r\n     */\r\n    Buttons[Buttons[\"DpadDown\"] = 13] = \"DpadDown\";\r\n    /**\r\n     * D-pad left\r\n     */\r\n    Buttons[Buttons[\"DpadLeft\"] = 14] = \"DpadLeft\";\r\n    /**\r\n     * D-pad right\r\n     */\r\n    Buttons[Buttons[\"DpadRight\"] = 15] = \"DpadRight\";\r\n})(Buttons || (Buttons = {}));\r\n/**\r\n * Gamepad Axes enumeration\r\n */\r\nvar Axes;\r\n(function (Axes) {\r\n    /**\r\n     * Left analogue stick X direction\r\n     */\r\n    Axes[Axes[\"LeftStickX\"] = 0] = \"LeftStickX\";\r\n    /**\r\n     * Left analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"LeftStickY\"] = 1] = \"LeftStickY\";\r\n    /**\r\n     * Right analogue stick X direction\r\n     */\r\n    Axes[Axes[\"RightStickX\"] = 2] = \"RightStickX\";\r\n    /**\r\n     * Right analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"RightStickY\"] = 3] = \"RightStickY\";\r\n})(Axes || (Axes = {}));\r\n\n;// CONCATENATED MODULE: ./Util/Log.ts\n/* eslint-disable no-console */\r\n/**\r\n * Logging level that Excalibur will tag\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\r\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\r\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\r\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\r\n    LogLevel[LogLevel[\"Fatal\"] = 4] = \"Fatal\";\r\n})(LogLevel || (LogLevel = {}));\r\n/**\r\n * Static singleton that represents the logging facility for Excalibur.\r\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\r\n * Derive from [[Appender]] to create your own logging appenders.\r\n */\r\nclass Logger {\r\n    constructor() {\r\n        this._appenders = [];\r\n        /**\r\n         * Gets or sets the default logging level. Excalibur will only log\r\n         * messages if equal to or above this level. Default: [[LogLevel.Info]]\r\n         */\r\n        this.defaultLevel = LogLevel.Info;\r\n        if (Logger._INSTANCE) {\r\n            throw new Error('Logger is a singleton');\r\n        }\r\n        Logger._INSTANCE = this;\r\n        // Default console appender\r\n        Logger._INSTANCE.addAppender(new ConsoleAppender());\r\n        return Logger._INSTANCE;\r\n    }\r\n    /**\r\n     * Gets the current static instance of Logger\r\n     */\r\n    static getInstance() {\r\n        if (Logger._INSTANCE == null) {\r\n            Logger._INSTANCE = new Logger();\r\n        }\r\n        return Logger._INSTANCE;\r\n    }\r\n    /**\r\n     * Adds a new [[Appender]] to the list of appenders to write to\r\n     */\r\n    addAppender(appender) {\r\n        this._appenders.push(appender);\r\n    }\r\n    /**\r\n     * Clears all appenders from the logger\r\n     */\r\n    clearAppenders() {\r\n        this._appenders.length = 0;\r\n    }\r\n    /**\r\n     * Logs a message at a given LogLevel\r\n     * @param level  The LogLevel`to log the message at\r\n     * @param args   An array of arguments to write to an appender\r\n     */\r\n    _log(level, args) {\r\n        if (level == null) {\r\n            level = this.defaultLevel;\r\n        }\r\n        const len = this._appenders.length;\r\n        for (let i = 0; i < len; i++) {\r\n            if (level >= this.defaultLevel) {\r\n                this._appenders[i].log(level, args);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Debug]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    debug(...args) {\r\n        this._log(LogLevel.Debug, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Info]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    info(...args) {\r\n        this._log(LogLevel.Info, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Warn]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    warn(...args) {\r\n        this._log(LogLevel.Warn, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Error]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    error(...args) {\r\n        this._log(LogLevel.Error, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Fatal]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    fatal(...args) {\r\n        this._log(LogLevel.Fatal, args);\r\n    }\r\n}\r\nLogger._INSTANCE = null;\r\n/**\r\n * Console appender for browsers (i.e. `console.log`)\r\n */\r\nclass ConsoleAppender {\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    log(level, args) {\r\n        // Check for console support\r\n        if (!console && !console.log && console.warn && console.error) {\r\n            // todo maybe do something better than nothing\r\n            return;\r\n        }\r\n        // Create a new console args array\r\n        const consoleArgs = [];\r\n        consoleArgs.unshift.apply(consoleArgs, args);\r\n        consoleArgs.unshift('[' + LogLevel[level] + '] : ');\r\n        if (level < LogLevel.Warn) {\r\n            // Call .log for Debug/Info\r\n            if (console.log.apply) {\r\n                // this is required on some older browsers that don't support apply on console.log :(\r\n                console.log.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.log(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else if (level < LogLevel.Error) {\r\n            // Call .warn for Warn\r\n            if (console.warn.apply) {\r\n                console.warn.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.warn(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else {\r\n            // Call .error for Error/Fatal\r\n            if (console.error.apply) {\r\n                console.error.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.error(consoleArgs.join(' '));\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * On-screen (canvas) appender\r\n */\r\nclass ScreenAppender {\r\n    /**\r\n     * @param width   Width of the screen appender in pixels\r\n     * @param height  Height of the screen appender in pixels\r\n     */\r\n    constructor(width, height) {\r\n        // @todo Clean this up\r\n        this._messages = [];\r\n        this._canvas = document.createElement('canvas');\r\n        this._canvas.width = width || window.innerWidth;\r\n        this._canvas.height = height || window.innerHeight;\r\n        this._canvas.style.position = 'absolute';\r\n        // eslint-disable-next-line\r\n        this._ctx = this._canvas.getContext('2d'); // eslint-disable-line\r\n        document.body.appendChild(this._canvas);\r\n    }\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    log(level, args) {\r\n        const message = args.join(',');\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\r\n        let pos = 10;\r\n        let opacity = 1.0;\r\n        for (let i = 0; i < this._messages.length; i++) {\r\n            this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\r\n            this._ctx.fillText(this._messages[i], 200, pos);\r\n            pos += 10;\r\n            opacity = opacity > 0 ? opacity - 0.05 : 0;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/IFrame.ts\n/**\r\n * Checks if excalibur is in a x-origin iframe\r\n */\r\nfunction isCrossOriginIframe() {\r\n    try {\r\n        // Try and listen to events on top window frame if within an iframe.\r\n        //\r\n        // See https://github.com/excaliburjs/Excalibur/issues/1294\r\n        //\r\n        // Attempt to add an event listener, which triggers a DOMException on\r\n        // cross-origin iframes\r\n        const noop = () => {\r\n            return;\r\n        };\r\n        window.top.addEventListener('blur', noop);\r\n        window.top.removeEventListener('blur', noop);\r\n    }\r\n    catch (_a) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/Keyboard.ts\n\r\n\r\n\r\n\r\n/**\r\n * Enum representing physical input key codes\r\n */\r\nvar Keys;\r\n(function (Keys) {\r\n    // NUMPAD\r\n    Keys[\"Num0\"] = \"Numpad0\";\r\n    Keys[\"Num1\"] = \"Numpad1\";\r\n    Keys[\"Num2\"] = \"Numpad2\";\r\n    Keys[\"Num3\"] = \"Numpad3\";\r\n    Keys[\"Num4\"] = \"Numpad4\";\r\n    Keys[\"Num5\"] = \"Numpad5\";\r\n    Keys[\"Num6\"] = \"Numpad6\";\r\n    Keys[\"Num7\"] = \"Numpad7\";\r\n    Keys[\"Num8\"] = \"Numpad8\";\r\n    Keys[\"Num9\"] = \"Numpad9\";\r\n    Keys[\"NumAdd\"] = \"NumpadAdd\";\r\n    Keys[\"NumSubtract\"] = \"NumpadSubtract\";\r\n    Keys[\"NumMultiply\"] = \"NumpadMultiply\";\r\n    Keys[\"NumDivide\"] = \"NumpadDivide\";\r\n    // NumComma = 'NumpadComma', // not x-browser\r\n    Keys[\"NumDecimal\"] = \"NumpadDecimal\";\r\n    Keys[\"Numpad0\"] = \"Numpad0\";\r\n    Keys[\"Numpad1\"] = \"Numpad1\";\r\n    Keys[\"Numpad2\"] = \"Numpad2\";\r\n    Keys[\"Numpad3\"] = \"Numpad3\";\r\n    Keys[\"Numpad4\"] = \"Numpad4\";\r\n    Keys[\"Numpad5\"] = \"Numpad5\";\r\n    Keys[\"Numpad6\"] = \"Numpad6\";\r\n    Keys[\"Numpad7\"] = \"Numpad7\";\r\n    Keys[\"Numpad8\"] = \"Numpad8\";\r\n    Keys[\"Numpad9\"] = \"Numpad9\";\r\n    Keys[\"NumpadAdd\"] = \"NumpadAdd\";\r\n    Keys[\"NumpadSubtract\"] = \"NumpadSubtract\";\r\n    Keys[\"NumpadMultiply\"] = \"NumpadMultiply\";\r\n    Keys[\"NumpadDivide\"] = \"NumpadDivide\";\r\n    // NumpadComma = 'NumpadComma', // not x-browser\r\n    Keys[\"NumpadDecimal\"] = \"NumpadDecimal\";\r\n    // MODIFIERS\r\n    Keys[\"NumLock\"] = \"NumLock\";\r\n    Keys[\"ShiftLeft\"] = \"ShiftLeft\";\r\n    Keys[\"ShiftRight\"] = \"ShiftRight\";\r\n    Keys[\"AltLeft\"] = \"AltLeft\";\r\n    Keys[\"AltRight\"] = \"AltRight\";\r\n    Keys[\"ControlLeft\"] = \"ControlLeft\";\r\n    Keys[\"ControlRight\"] = \"ControlRight\";\r\n    Keys[\"MetaLeft\"] = \"MetaLeft\";\r\n    Keys[\"MetaRight\"] = \"MetaRight\";\r\n    // NUMBERS\r\n    Keys[\"Key0\"] = \"Digit0\";\r\n    Keys[\"Key1\"] = \"Digit1\";\r\n    Keys[\"Key2\"] = \"Digit2\";\r\n    Keys[\"Key3\"] = \"Digit3\";\r\n    Keys[\"Key4\"] = \"Digit4\";\r\n    Keys[\"Key5\"] = \"Digit5\";\r\n    Keys[\"Key6\"] = \"Digit6\";\r\n    Keys[\"Key7\"] = \"Digit7\";\r\n    Keys[\"Key8\"] = \"Digit8\";\r\n    Keys[\"Key9\"] = \"Digit9\";\r\n    Keys[\"Digit0\"] = \"Digit0\";\r\n    Keys[\"Digit1\"] = \"Digit1\";\r\n    Keys[\"Digit2\"] = \"Digit2\";\r\n    Keys[\"Digit3\"] = \"Digit3\";\r\n    Keys[\"Digit4\"] = \"Digit4\";\r\n    Keys[\"Digit5\"] = \"Digit5\";\r\n    Keys[\"Digit6\"] = \"Digit6\";\r\n    Keys[\"Digit7\"] = \"Digit7\";\r\n    Keys[\"Digit8\"] = \"Digit8\";\r\n    Keys[\"Digit9\"] = \"Digit9\";\r\n    // FUNCTION KEYS\r\n    Keys[\"F1\"] = \"F1\";\r\n    Keys[\"F2\"] = \"F2\";\r\n    Keys[\"F3\"] = \"F3\";\r\n    Keys[\"F4\"] = \"F4\";\r\n    Keys[\"F5\"] = \"F5\";\r\n    Keys[\"F6\"] = \"F6\";\r\n    Keys[\"F7\"] = \"F7\";\r\n    Keys[\"F8\"] = \"F8\";\r\n    Keys[\"F9\"] = \"F9\";\r\n    Keys[\"F10\"] = \"F10\";\r\n    Keys[\"F11\"] = \"F11\";\r\n    Keys[\"F12\"] = \"F12\";\r\n    // LETTERS\r\n    Keys[\"A\"] = \"KeyA\";\r\n    Keys[\"B\"] = \"KeyB\";\r\n    Keys[\"C\"] = \"KeyC\";\r\n    Keys[\"D\"] = \"KeyD\";\r\n    Keys[\"E\"] = \"KeyE\";\r\n    Keys[\"F\"] = \"KeyF\";\r\n    Keys[\"G\"] = \"KeyG\";\r\n    Keys[\"H\"] = \"KeyH\";\r\n    Keys[\"I\"] = \"KeyI\";\r\n    Keys[\"J\"] = \"KeyJ\";\r\n    Keys[\"K\"] = \"KeyK\";\r\n    Keys[\"L\"] = \"KeyL\";\r\n    Keys[\"M\"] = \"KeyM\";\r\n    Keys[\"N\"] = \"KeyN\";\r\n    Keys[\"O\"] = \"KeyO\";\r\n    Keys[\"P\"] = \"KeyP\";\r\n    Keys[\"Q\"] = \"KeyQ\";\r\n    Keys[\"R\"] = \"KeyR\";\r\n    Keys[\"S\"] = \"KeyS\";\r\n    Keys[\"T\"] = \"KeyT\";\r\n    Keys[\"U\"] = \"KeyU\";\r\n    Keys[\"V\"] = \"KeyV\";\r\n    Keys[\"W\"] = \"KeyW\";\r\n    Keys[\"X\"] = \"KeyX\";\r\n    Keys[\"Y\"] = \"KeyY\";\r\n    Keys[\"Z\"] = \"KeyZ\";\r\n    Keys[\"KeyA\"] = \"KeyA\";\r\n    Keys[\"KeyB\"] = \"KeyB\";\r\n    Keys[\"KeyC\"] = \"KeyC\";\r\n    Keys[\"KeyD\"] = \"KeyD\";\r\n    Keys[\"KeyE\"] = \"KeyE\";\r\n    Keys[\"KeyF\"] = \"KeyF\";\r\n    Keys[\"KeyG\"] = \"KeyG\";\r\n    Keys[\"KeyH\"] = \"KeyH\";\r\n    Keys[\"KeyI\"] = \"KeyI\";\r\n    Keys[\"KeyJ\"] = \"KeyJ\";\r\n    Keys[\"KeyK\"] = \"KeyK\";\r\n    Keys[\"KeyL\"] = \"KeyL\";\r\n    Keys[\"KeyM\"] = \"KeyM\";\r\n    Keys[\"KeyN\"] = \"KeyN\";\r\n    Keys[\"KeyO\"] = \"KeyO\";\r\n    Keys[\"KeyP\"] = \"KeyP\";\r\n    Keys[\"KeyQ\"] = \"KeyQ\";\r\n    Keys[\"KeyR\"] = \"KeyR\";\r\n    Keys[\"KeyS\"] = \"KeyS\";\r\n    Keys[\"KeyT\"] = \"KeyT\";\r\n    Keys[\"KeyU\"] = \"KeyU\";\r\n    Keys[\"KeyV\"] = \"KeyV\";\r\n    Keys[\"KeyW\"] = \"KeyW\";\r\n    Keys[\"KeyX\"] = \"KeyX\";\r\n    Keys[\"KeyY\"] = \"KeyY\";\r\n    Keys[\"KeyZ\"] = \"KeyZ\";\r\n    // SYMBOLS\r\n    Keys[\"Semicolon\"] = \"Semicolon\";\r\n    Keys[\"Quote\"] = \"Quote\";\r\n    Keys[\"Comma\"] = \"Comma\";\r\n    Keys[\"Minus\"] = \"Minus\";\r\n    Keys[\"Period\"] = \"Period\";\r\n    Keys[\"Slash\"] = \"Slash\";\r\n    Keys[\"Equal\"] = \"Equal\";\r\n    Keys[\"BracketLeft\"] = \"BracketLeft\";\r\n    Keys[\"Backslash\"] = \"Backslash\";\r\n    Keys[\"BracketRight\"] = \"BracketRight\";\r\n    Keys[\"Backquote\"] = \"Backquote\";\r\n    // DIRECTIONS\r\n    Keys[\"Up\"] = \"ArrowUp\";\r\n    Keys[\"Down\"] = \"ArrowDown\";\r\n    Keys[\"Left\"] = \"ArrowLeft\";\r\n    Keys[\"Right\"] = \"ArrowRight\";\r\n    Keys[\"ArrowUp\"] = \"ArrowUp\";\r\n    Keys[\"ArrowDown\"] = \"ArrowDown\";\r\n    Keys[\"ArrowLeft\"] = \"ArrowLeft\";\r\n    Keys[\"ArrowRight\"] = \"ArrowRight\";\r\n    // OTHER\r\n    Keys[\"Space\"] = \"Space\";\r\n    Keys[\"Backspace\"] = \"Backspace\";\r\n    Keys[\"Delete\"] = \"Delete\";\r\n    Keys[\"Esc\"] = \"Escape\";\r\n    Keys[\"Escape\"] = \"Escape\";\r\n    Keys[\"Enter\"] = \"Enter\";\r\n    Keys[\"NumpadEnter\"] = \"NumpadEnter\";\r\n    Keys[\"ContextMenu\"] = \"ContextMenu\";\r\n})(Keys || (Keys = {}));\r\n/**\r\n * Event thrown on a game object for a key event\r\n */\r\nclass KeyEvent extends GameEvent {\r\n    /**\r\n     * @param key  The key responsible for throwing the event\r\n     * @param value The key's typed value the browser detected\r\n     * @param originalEvent The original keyboard event that Excalibur handled\r\n     */\r\n    constructor(key, value, originalEvent) {\r\n        super();\r\n        this.key = key;\r\n        this.value = value;\r\n        this.originalEvent = originalEvent;\r\n    }\r\n}\r\nconst KeyEvents = {\r\n    Press: 'press',\r\n    Hold: 'hold',\r\n    Release: 'release'\r\n};\r\n/**\r\n * Provides keyboard support for Excalibur.\r\n */\r\nclass Keyboard {\r\n    constructor() {\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * Keys that are currently held down\r\n         */\r\n        this._keys = [];\r\n        /**\r\n         * Keys up in the current frame\r\n         */\r\n        this._keysUp = [];\r\n        /**\r\n         * Keys down in the current frame\r\n         */\r\n        this._keysDown = [];\r\n        this._releaseAllKeys = (ev) => {\r\n            for (const code of this._keys) {\r\n                const keyEvent = new KeyEvent(code, ev.key, ev);\r\n                this.events.emit('up', keyEvent);\r\n                this.events.emit('release', keyEvent);\r\n            }\r\n            this._keysUp = Array.from((new Set(this._keys.concat(this._keysUp))));\r\n            this._keys.length = 0;\r\n        };\r\n        this._handleKeyDown = (ev) => {\r\n            // handle macos meta key issue\r\n            // https://github.com/excaliburjs/Excalibur/issues/2608\r\n            if (!ev.metaKey && (this._keys.includes(Keys.MetaLeft) || this._keys.includes(Keys.MetaRight))) {\r\n                this._releaseAllKeys(ev);\r\n            }\r\n            const code = ev.code;\r\n            if (this._keys.indexOf(code) === -1) {\r\n                this._keys.push(code);\r\n                this._keysDown.push(code);\r\n                const keyEvent = new KeyEvent(code, ev.key, ev);\r\n                this.events.emit('down', keyEvent);\r\n                this.events.emit('press', keyEvent);\r\n            }\r\n        };\r\n        this._handleKeyUp = (ev) => {\r\n            const code = ev.code;\r\n            const key = this._keys.indexOf(code);\r\n            this._keys.splice(key, 1);\r\n            this._keysUp.push(code);\r\n            const keyEvent = new KeyEvent(code, ev.key, ev);\r\n            // alias the old api, we may want to deprecate this in the future\r\n            this.events.emit('up', keyEvent);\r\n            this.events.emit('release', keyEvent);\r\n            // handle macos meta key issue\r\n            // https://github.com/excaliburjs/Excalibur/issues/2608\r\n            if (ev.key === 'Meta') {\r\n                this._releaseAllKeys(ev);\r\n            }\r\n        };\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Initialize Keyboard event listeners\r\n     */\r\n    init(keyboardOptions) {\r\n        let { global } = keyboardOptions;\r\n        const { grabWindowFocus } = keyboardOptions;\r\n        if (!global) {\r\n            if (isCrossOriginIframe()) {\r\n                global = window;\r\n                // Workaround for iframes like for itch.io or codesandbox\r\n                // https://www.reddit.com/r/gamemaker/comments/kfs5cs/keyboard_inputs_no_longer_working_in_html5_game/\r\n                // https://forum.gamemaker.io/index.php?threads/solved-keyboard-issue-on-itch-io.87336/\r\n                if (grabWindowFocus) {\r\n                    window.focus();\r\n                }\r\n                Logger.getInstance().warn('Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus');\r\n            }\r\n            else {\r\n                global = window.top;\r\n            }\r\n        }\r\n        global.addEventListener('blur', () => {\r\n            this._keys.length = 0; // empties array efficiently\r\n        });\r\n        // key up is on window because canvas cannot have focus\r\n        global.addEventListener('keyup', this._handleKeyUp);\r\n        // key down is on window because canvas cannot have focus\r\n        global.addEventListener('keydown', this._handleKeyDown);\r\n    }\r\n    update() {\r\n        // Reset keysDown and keysUp after update is complete\r\n        this._keysDown.length = 0;\r\n        this._keysUp.length = 0;\r\n        // Emit synthetic \"hold\" event\r\n        for (let i = 0; i < this._keys.length; i++) {\r\n            this.events.emit('hold', new KeyEvent(this._keys[i]));\r\n        }\r\n    }\r\n    /**\r\n     * Gets list of keys being pressed down\r\n     */\r\n    getKeys() {\r\n        return this._keys;\r\n    }\r\n    /**\r\n     * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\r\n     * @param key Test whether a key was just pressed\r\n     */\r\n    wasPressed(key) {\r\n        return this._keysDown.indexOf(key) > -1;\r\n    }\r\n    /**\r\n     * Tests if a certain key is held down. This is persisted between frames.\r\n     * @param key  Test whether a key is held down\r\n     */\r\n    isHeld(key) {\r\n        return this._keys.indexOf(key) > -1;\r\n    }\r\n    /**\r\n     * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\r\n     * @param key  Test whether a key was just released\r\n     */\r\n    wasReleased(key) {\r\n        return this._keysUp.indexOf(key) > -1;\r\n    }\r\n    /**\r\n     * Trigger a manual key event\r\n     * @param type\r\n     * @param key\r\n     * @param character\r\n     */\r\n    triggerEvent(type, key, character) {\r\n        if (type === 'down') {\r\n            this._handleKeyDown(new KeyboardEvent('keydown', {\r\n                code: key,\r\n                key: character !== null && character !== void 0 ? character : null\r\n            }));\r\n        }\r\n        if (type === 'up') {\r\n            this._handleKeyUp(new KeyboardEvent('keyup', {\r\n                code: key,\r\n                key: character !== null && character !== void 0 ? character : null\r\n            }));\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerScope.ts\n/**\r\n * Determines the scope of handling mouse/touch events.\r\n */\r\nvar PointerScope;\r\n(function (PointerScope) {\r\n    /**\r\n     * Handle events on the `canvas` element only. Events originating outside the\r\n     * `canvas` will not be handled.\r\n     */\r\n    PointerScope[\"Canvas\"] = \"Canvas\";\r\n    /**\r\n     * Handles events on the entire document. All events will be handled by Excalibur.\r\n     */\r\n    PointerScope[\"Document\"] = \"Document\";\r\n})(PointerScope || (PointerScope = {}));\r\n\n;// CONCATENATED MODULE: ./Math/Random.ts\n/**\r\n * @module\r\n * Pseudo-Random Utility\r\n *\r\n * A pseudo-random utility to add seeded random support for help in\r\n * generating things like terrain or reproducible randomness. Uses the\r\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\r\n */\r\n/**\r\n * 32-bit mask\r\n */\r\nconst BITMASK32 = 0xffffffff;\r\n/**\r\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\r\n * of numbers each time it is called.\r\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\r\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\r\n *\r\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\r\n */\r\nclass Random {\r\n    /**\r\n     * If no seed is specified, the Date.now() is used\r\n     */\r\n    constructor(seed) {\r\n        this.seed = seed;\r\n        // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\r\n        this._lowerMask = 0x7fffffff; // 31 bits same as _r\r\n        this._upperMask = 0x80000000; // 34 high bits\r\n        // Word size, 64 bits\r\n        this._w = 32;\r\n        // Degree of recurrence\r\n        this._n = 624;\r\n        // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\r\n        this._m = 397;\r\n        // coefficients of teh rational normal form twist matrix\r\n        this._a = 0x9908b0df;\r\n        // tempering bit shifts and masks\r\n        this._u = 11;\r\n        this._s = 7;\r\n        this._b = 0x9d2c5680;\r\n        this._t = 15;\r\n        this._c = 0xefc60000;\r\n        this._l = 18;\r\n        this._f = 1812433253;\r\n        this._mt = new Array(this._n);\r\n        // need to mask to support higher bit machines\r\n        this._mt[0] = (seed || Date.now()) >>> 0;\r\n        for (let i = 1; i < this._n; i++) {\r\n            const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\r\n            // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\r\n            this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\r\n        }\r\n        this._index = this._n;\r\n    }\r\n    /**\r\n     * Apply the twist\r\n     */\r\n    _twist() {\r\n        const mag01 = [0x0, this._a];\r\n        let y = 0, i = 0;\r\n        for (; i < this._n - this._m; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        for (; i < this._n - 1; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\r\n        this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        this._index = 0;\r\n    }\r\n    /**\r\n     * Return next 32 bit integer number in sequence\r\n     */\r\n    nextInt() {\r\n        if (this._index >= this._n) {\r\n            this._twist();\r\n        }\r\n        let y = this._mt[this._index++];\r\n        y ^= y >>> this._u;\r\n        y ^= (y << this._s) & this._b;\r\n        y ^= (y << this._t) & this._c;\r\n        y ^= y >>> this._l;\r\n        return y >>> 0;\r\n    }\r\n    /**\r\n     * Return a random floating point number between [0, 1)\r\n     */\r\n    next() {\r\n        return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\r\n    }\r\n    /**\r\n     * Return a random floating point in range [min, max) min is included, max is not included\r\n     */\r\n    floating(min, max) {\r\n        return (max - min) * this.next() + min;\r\n    }\r\n    /**\r\n     * Return a random integer in range [min, max] min is included, max is included.\r\n     * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\r\n     */\r\n    integer(min, max) {\r\n        return Math.floor((max - min + 1) * this.next() + min);\r\n    }\r\n    /**\r\n     * Returns true or false randomly with 50/50 odds by default.\r\n     * By default the likelihood of returning a true is .5 (50%).\r\n     * @param likelihood takes values between [0, 1]\r\n     */\r\n    bool(likelihood = 0.5) {\r\n        return this.next() <= likelihood;\r\n    }\r\n    /**\r\n     * Returns one element from an array at random\r\n     */\r\n    pickOne(array) {\r\n        return array[this.integer(0, array.length - 1)];\r\n    }\r\n    /**\r\n     * Returns a new array random picking elements from the original\r\n     * @param array Original array to pick from\r\n     * @param numPicks can be any positive number\r\n     * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\r\n     * just that it is possible)\r\n     */\r\n    pickSet(array, numPicks, allowDuplicates = false) {\r\n        if (allowDuplicates) {\r\n            return this._pickSetWithDuplicates(array, numPicks);\r\n        }\r\n        else {\r\n            return this._pickSetWithoutDuplicates(array, numPicks);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a new array randomly picking elements in the original (not reused)\r\n     * @param array Array to pick elements out of\r\n     * @param numPicks must be less than or equal to the number of elements in the array.\r\n     */\r\n    _pickSetWithoutDuplicates(array, numPicks) {\r\n        if (numPicks > array.length || numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\r\n        }\r\n        if (numPicks === array.length) {\r\n            return array;\r\n        }\r\n        const result = new Array(numPicks);\r\n        let currentPick = 0;\r\n        const tempArray = array.slice(0);\r\n        while (currentPick < numPicks) {\r\n            const index = this.integer(0, tempArray.length - 1);\r\n            result[currentPick++] = tempArray[index];\r\n            tempArray.splice(index, 1);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns a new array random picking elements from the original allowing duplicates\r\n     * @param array Array to pick elements out of\r\n     * @param numPicks can be any positive number\r\n     */\r\n    _pickSetWithDuplicates(array, numPicks) {\r\n        // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\r\n        if (numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\r\n        }\r\n        const result = new Array(numPicks);\r\n        for (let i = 0; i < numPicks; i++) {\r\n            result[i] = this.pickOne(array);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\r\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\r\n     */\r\n    shuffle(array) {\r\n        const tempArray = array.slice(0);\r\n        let swap = null;\r\n        for (let i = 0; i < tempArray.length - 2; i++) {\r\n            const randomIndex = this.integer(i, tempArray.length - 1);\r\n            swap = tempArray[i];\r\n            tempArray[i] = tempArray[randomIndex];\r\n            tempArray[randomIndex] = swap;\r\n        }\r\n        return tempArray;\r\n    }\r\n    /**\r\n     * Generate a list of random integer numbers\r\n     * @param length the length of the final array\r\n     * @param min the minimum integer number to generate inclusive\r\n     * @param max the maximum integer number to generate inclusive\r\n     */\r\n    range(length, min, max) {\r\n        const result = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            result[i] = this.integer(min, max);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns the result of a d4 dice roll\r\n     */\r\n    d4() {\r\n        return this.integer(1, 4);\r\n    }\r\n    /**\r\n     * Returns the result of a d6 dice roll\r\n     */\r\n    d6() {\r\n        return this.integer(1, 6);\r\n    }\r\n    /**\r\n     * Returns the result of a d8 dice roll\r\n     */\r\n    d8() {\r\n        return this.integer(1, 8);\r\n    }\r\n    /**\r\n     * Returns the result of a d10 dice roll\r\n     */\r\n    d10() {\r\n        return this.integer(1, 10);\r\n    }\r\n    /**\r\n     * Returns the result of a d12 dice roll\r\n     */\r\n    d12() {\r\n        return this.integer(1, 12);\r\n    }\r\n    /**\r\n     * Returns the result of a d20 dice roll\r\n     */\r\n    d20() {\r\n        return this.integer(1, 20);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/util.ts\n\r\n/**\r\n * Two PI constant\r\n */\r\nconst TwoPI = Math.PI * 2;\r\n/**\r\n * Returns the fractional part of a number\r\n * @param x\r\n */\r\nfunction frac(x) {\r\n    if (x >= 0) {\r\n        return x - Math.floor(x);\r\n    }\r\n    else {\r\n        return x - Math.ceil(x);\r\n    }\r\n}\r\n/**\r\n * Returns the sign of a number, if 0 returns 0\r\n */\r\nfunction sign(val) {\r\n    if (val === 0) {\r\n        return 0;\r\n    }\r\n    return val < 0 ? -1 : 1;\r\n}\r\n;\r\n/**\r\n * Clamps a value between a min and max inclusive\r\n */\r\nfunction clamp(val, min, max) {\r\n    return Math.min(Math.max(min, val), max);\r\n}\r\n/**\r\n * Convert an angle to be the equivalent in the range [0, 2PI]\r\n */\r\nfunction canonicalizeAngle(angle) {\r\n    let tmpAngle = angle;\r\n    if (angle > TwoPI) {\r\n        while (tmpAngle > TwoPI) {\r\n            tmpAngle -= TwoPI;\r\n        }\r\n    }\r\n    if (angle < 0) {\r\n        while (tmpAngle < 0) {\r\n            tmpAngle += TwoPI;\r\n        }\r\n    }\r\n    return tmpAngle;\r\n}\r\n/**\r\n * Convert radians to degrees\r\n */\r\nfunction toDegrees(radians) {\r\n    return (180 / Math.PI) * radians;\r\n}\r\n/**\r\n * Convert degrees to radians\r\n */\r\nfunction toRadians(degrees) {\r\n    return (degrees / 180) * Math.PI;\r\n}\r\n/**\r\n * Generate a range of numbers\r\n * For example: range(0, 5) -> [0, 1, 2, 3, 4, 5]\r\n * @param from inclusive\r\n * @param to inclusive\r\n */\r\nconst range = (from, to) => Array.from(new Array(to - from + 1), (_x, i) => i + from);\r\n/**\r\n * Find a random floating point number in range\r\n */\r\nfunction randomInRange(min, max, random = new Random()) {\r\n    return random ? random.floating(min, max) : min + Math.random() * (max - min);\r\n}\r\n/**\r\n * Find a random integer in a range\r\n */\r\nfunction randomIntInRange(min, max, random = new Random()) {\r\n    return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/vector.ts\n\r\n/**\r\n * A 2D vector on a plane.\r\n */\r\nclass Vector {\r\n    /**\r\n     * A (0, 0) vector\r\n     */\r\n    static get Zero() {\r\n        return new Vector(0, 0);\r\n    }\r\n    /**\r\n     * A (1, 1) vector\r\n     */\r\n    static get One() {\r\n        return new Vector(1, 1);\r\n    }\r\n    /**\r\n     * A (0.5, 0.5) vector\r\n     */\r\n    static get Half() {\r\n        return new Vector(0.5, 0.5);\r\n    }\r\n    /**\r\n     * A unit vector pointing up (0, -1)\r\n     */\r\n    static get Up() {\r\n        return new Vector(0, -1);\r\n    }\r\n    /**\r\n     * A unit vector pointing down (0, 1)\r\n     */\r\n    static get Down() {\r\n        return new Vector(0, 1);\r\n    }\r\n    /**\r\n     * A unit vector pointing left (-1, 0)\r\n     */\r\n    static get Left() {\r\n        return new Vector(-1, 0);\r\n    }\r\n    /**\r\n     * A unit vector pointing right (1, 0)\r\n     */\r\n    static get Right() {\r\n        return new Vector(1, 0);\r\n    }\r\n    /**\r\n     * Returns a vector of unit length in the direction of the specified angle in Radians.\r\n     * @param angle The angle to generate the vector\r\n     */\r\n    static fromAngle(angle) {\r\n        return new Vector(Math.cos(angle), Math.sin(angle));\r\n    }\r\n    /**\r\n     * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\r\n     */\r\n    static isValid(vec) {\r\n        if (vec === null || vec === undefined) {\r\n            return false;\r\n        }\r\n        if (isNaN(vec.x) || isNaN(vec.y)) {\r\n            return false;\r\n        }\r\n        if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Calculates distance between two Vectors\r\n     * @param vec1\r\n     * @param vec2\r\n     */\r\n    static distance(vec1, vec2) {\r\n        return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\r\n    }\r\n    static min(vec1, vec2) {\r\n        return new Vector(Math.min(vec1.x, vec2.x), Math.min(vec1.y, vec2.y));\r\n    }\r\n    static max(vec1, vec2) {\r\n        return new Vector(Math.max(vec1.x, vec2.x), Math.max(vec1.y, vec2.y));\r\n    }\r\n    /**\r\n     * @param x  X component of the Vector\r\n     * @param y  Y component of the Vector\r\n     */\r\n    constructor(x, y) {\r\n        this._x = 0;\r\n        this._y = 0;\r\n        this._x = x;\r\n        this._y = y;\r\n    }\r\n    /**\r\n     * Get the x component of the vector\r\n     */\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    /**\r\n     * Set the x component, THIS MUTATES the current vector. It is usually better to create a new vector.\r\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\r\n     */\r\n    set x(val) {\r\n        this._x = val;\r\n    }\r\n    /**\r\n     * Get the y component of the vector\r\n     */\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    /**\r\n     * Set the y component, THIS MUTATES the current vector. It is usually better to create a new vector.\r\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\r\n     */\r\n    set y(val) {\r\n        this._y = val;\r\n    }\r\n    /**\r\n     * Sets the x and y components at once, THIS MUTATES the current vector. It is usually better to create a new vector.\r\n     *\r\n     * @warning **Be very careful using this, mutating vectors can cause hard to find bugs**\r\n     */\r\n    setTo(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * Compares this point against another and tests for equality\r\n     * @param vector The other point to compare to\r\n     * @param tolerance Amount of euclidean distance off we are willing to tolerate\r\n     */\r\n    equals(vector, tolerance = 0.001) {\r\n        return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\r\n    }\r\n    /**\r\n     * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\r\n     * @param v  The other vector. Leave blank to use origin vector.\r\n     */\r\n    distance(v) {\r\n        if (!v) {\r\n            return Math.sqrt(this.x * this.x + this.y * this.y);\r\n        }\r\n        const deltaX = this.x - v.x;\r\n        const deltaY = this.y - v.y;\r\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\r\n    }\r\n    squareDistance(v) {\r\n        if (!v) {\r\n            v = Vector.Zero;\r\n        }\r\n        const deltaX = this.x - v.x;\r\n        const deltaY = this.y - v.y;\r\n        return deltaX * deltaX + deltaY * deltaY;\r\n    }\r\n    /**\r\n     * Clamps the current vector's magnitude mutating it\r\n     * @param magnitude\r\n     */\r\n    clampMagnitude(magnitude) {\r\n        const size = this.size;\r\n        const newSize = clamp(size, 0, magnitude);\r\n        this.size = newSize;\r\n        return this;\r\n    }\r\n    /**\r\n     * The size (magnitude) of the Vector\r\n     */\r\n    get size() {\r\n        return this.distance();\r\n    }\r\n    /**\r\n     * Setting the size mutates the current vector\r\n     *\r\n     * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\r\n     */\r\n    set size(newLength) {\r\n        const v = this.normalize().scale(newLength);\r\n        this.setTo(v.x, v.y);\r\n    }\r\n    /**\r\n     * Normalizes a vector to have a magnitude of 1.\r\n     */\r\n    normalize() {\r\n        const d = this.distance();\r\n        if (d > 0) {\r\n            return new Vector(this.x / d, this.y / d);\r\n        }\r\n        else {\r\n            return new Vector(0, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Returns the average (midpoint) between the current point and the specified\r\n     */\r\n    average(vec) {\r\n        return this.add(vec).scale(0.5);\r\n    }\r\n    scale(sizeOrScale, dest) {\r\n        const result = dest || new Vector(0, 0);\r\n        if (sizeOrScale instanceof Vector) {\r\n            result.x = this.x * sizeOrScale.x;\r\n            result.y = this.y * sizeOrScale.y;\r\n        }\r\n        else {\r\n            result.x = this.x * sizeOrScale;\r\n            result.y = this.y * sizeOrScale;\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Adds one vector to another\r\n     * @param v The vector to add\r\n     * @param dest Optionally copy the result into a provided vector\r\n     */\r\n    add(v, dest) {\r\n        if (dest) {\r\n            dest.x = this.x + v.x;\r\n            dest.y = this.y + v.y;\r\n            return dest;\r\n        }\r\n        return new Vector(this.x + v.x, this.y + v.y);\r\n    }\r\n    /**\r\n     * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\r\n     * @param v The vector to subtract\r\n     */\r\n    sub(v) {\r\n        return new Vector(this.x - v.x, this.y - v.y);\r\n    }\r\n    /**\r\n     * Adds one vector to this one modifying the original\r\n     * @param v The vector to add\r\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\r\n     */\r\n    addEqual(v) {\r\n        this.setTo(this.x + v.x, this.y + v.y);\r\n        return this;\r\n    }\r\n    /**\r\n     * Subtracts a vector from this one modifying the original\r\n     * @param v The vector to subtract\r\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\r\n     */\r\n    subEqual(v) {\r\n        this.setTo(this.x - v.x, this.y - v.y);\r\n        return this;\r\n    }\r\n    /**\r\n     * Scales this vector by a factor of size and modifies the original\r\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\r\n     */\r\n    scaleEqual(size) {\r\n        this.setTo(this.x * size, this.y * size);\r\n        return this;\r\n    }\r\n    /**\r\n     * Performs a dot product with another vector\r\n     * @param v  The vector to dot\r\n     */\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    cross(v) {\r\n        if (v instanceof Vector) {\r\n            return this.x * v.y - this.y * v.x;\r\n        }\r\n        else if (typeof v === 'number') {\r\n            return new Vector(v * this.y, -v * this.x);\r\n        }\r\n    }\r\n    static cross(num, vec) {\r\n        return new Vector(-num * vec.y, num * vec.x);\r\n    }\r\n    /**\r\n     * Returns the perpendicular vector to this one\r\n     */\r\n    perpendicular() {\r\n        return new Vector(this.y, -this.x);\r\n    }\r\n    /**\r\n     * Returns the normal vector to this one, same as the perpendicular of length 1\r\n     */\r\n    normal() {\r\n        return this.perpendicular().normalize();\r\n    }\r\n    /**\r\n     * Negate the current vector\r\n     */\r\n    negate() {\r\n        return this.scale(-1);\r\n    }\r\n    /**\r\n     * Returns the angle of this vector.\r\n     */\r\n    toAngle() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n    /**\r\n     * Rotates the current vector around a point by a certain number of\r\n     * degrees in radians\r\n     */\r\n    rotate(angle, anchor) {\r\n        if (!anchor) {\r\n            anchor = new Vector(0, 0);\r\n        }\r\n        const sinAngle = Math.sin(angle);\r\n        const cosAngle = Math.cos(angle);\r\n        const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\r\n        const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\r\n        return new Vector(x, y);\r\n    }\r\n    /**\r\n     * Creates new vector that has the same values as the previous.\r\n     */\r\n    clone(dest) {\r\n        const v = dest !== null && dest !== void 0 ? dest : new Vector(0, 0);\r\n        v.x = this.x;\r\n        v.y = this.y;\r\n        return v;\r\n    }\r\n    /**\r\n     * Returns a string representation of the vector.\r\n     */\r\n    toString(fixed) {\r\n        if (fixed) {\r\n            return `(${this.x.toFixed(fixed)}, ${this.y.toFixed(fixed)})`;\r\n        }\r\n        return `(${this.x}, ${this.y})`;\r\n    }\r\n}\r\n/**\r\n * Shorthand for creating new Vectors - returns a new Vector instance with the\r\n * provided X and Y components.\r\n *\r\n * @param x  X component of the Vector\r\n * @param y  Y component of the Vector\r\n */\r\nfunction vec(x, y) {\r\n    return new Vector(x, y);\r\n}\r\n\n;// CONCATENATED MODULE: ./Color.ts\n/**\r\n * Provides standard colors (e.g. [[Color.Black]])\r\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\r\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\r\n */\r\nclass Color {\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    constructor(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a != null ? a : 1;\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    static fromRGB(r, g, b, a) {\r\n        return new Color(r, g, b, a);\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from a rgb string\r\n     *\r\n     * @param string  CSS color string of the form rgba(255, 255, 255, 1) or rgb(255, 255, 255)\r\n     */\r\n    static fromRGBString(string) {\r\n        const rgbaRegEx = /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/i;\r\n        let match = null;\r\n        if ((match = string.match(rgbaRegEx))) {\r\n            const r = parseInt(match[1], 10);\r\n            const g = parseInt(match[2], 10);\r\n            const b = parseInt(match[3], 10);\r\n            let a = 1;\r\n            if (match[4]) {\r\n                a = parseFloat(match[4]);\r\n            }\r\n            return new Color(r, g, b, a);\r\n        }\r\n        else {\r\n            throw new Error('Invalid rgb/a string: ' + string);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from a hex string\r\n     *\r\n     * @param hex  CSS color string of the form #ffffff, the alpha component is optional\r\n     */\r\n    static fromHex(hex) {\r\n        const hexRegEx = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\r\n        let match = null;\r\n        if ((match = hex.match(hexRegEx))) {\r\n            const r = parseInt(match[1], 16);\r\n            const g = parseInt(match[2], 16);\r\n            const b = parseInt(match[3], 16);\r\n            let a = 1;\r\n            if (match[4]) {\r\n                a = parseInt(match[4], 16) / 255;\r\n            }\r\n            return new Color(r, g, b, a);\r\n        }\r\n        else {\r\n            throw new Error('Invalid hex string: ' + hex);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from hsla values\r\n     *\r\n     * @param h  Hue is represented [0-1]\r\n     * @param s  Saturation is represented [0-1]\r\n     * @param l  Luminance is represented [0-1]\r\n     * @param a  Alpha is represented [0-1]\r\n     */\r\n    static fromHSL(h, s, l, a = 1.0) {\r\n        const temp = new HSLColor(h, s, l, a);\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Lightens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to lighten by [0-1]\r\n     */\r\n    lighten(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l += (1 - temp.l) * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Darkens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to darken by [0-1]\r\n     */\r\n    darken(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l -= temp.l * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Saturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to saturate by [0-1]\r\n     */\r\n    saturate(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s += temp.s * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Desaturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to desaturate by [0-1]\r\n     */\r\n    desaturate(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s -= temp.s * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Multiplies a color by another, results in a darker color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    multiply(color) {\r\n        const newR = (((color.r / 255) * this.r) / 255) * 255;\r\n        const newG = (((color.g / 255) * this.g) / 255) * 255;\r\n        const newB = (((color.b / 255) * this.b) / 255) * 255;\r\n        const newA = color.a * this.a;\r\n        return new Color(newR, newG, newB, newA);\r\n    }\r\n    /**\r\n     * Screens a color by another, results in a lighter color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    screen(color) {\r\n        const color1 = color.invert();\r\n        const color2 = color.invert();\r\n        return color1.multiply(color2).invert();\r\n    }\r\n    /**\r\n     * Inverts the current color\r\n     */\r\n    invert() {\r\n        return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\r\n    }\r\n    /**\r\n     * Averages the current color with another\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    average(color) {\r\n        const newR = (color.r + this.r) / 2;\r\n        const newG = (color.g + this.g) / 2;\r\n        const newB = (color.b + this.b) / 2;\r\n        const newA = (color.a + this.a) / 2;\r\n        return new Color(newR, newG, newB, newA);\r\n    }\r\n    equal(color) {\r\n        return this.toString() === color.toString();\r\n    }\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     *\r\n     * @param format Color representation, accepts: rgb, hsl, or hex\r\n     */\r\n    toString(format = 'rgb') {\r\n        switch (format) {\r\n            case 'rgb':\r\n                return this.toRGBA();\r\n            case 'hsl':\r\n                return this.toHSLA();\r\n            case 'hex':\r\n                return this.toHex();\r\n            default:\r\n                throw new Error('Invalid Color format');\r\n        }\r\n    }\r\n    /**\r\n     * Returns Hex Value of a color component\r\n     * @param c color component\r\n     * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\n     */\r\n    _componentToHex(c) {\r\n        const hex = c.toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n    }\r\n    /**\r\n     * Return Hex representation of a color.\r\n     */\r\n    toHex() {\r\n        return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\r\n    }\r\n    /**\r\n     * Return RGBA representation of a color.\r\n     */\r\n    toRGBA() {\r\n        const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\r\n        if (this.a !== undefined || this.a !== null) {\r\n            return 'rgba(' + result + ', ' + String(this.a) + ')';\r\n        }\r\n        return 'rgb(' + result + ')';\r\n    }\r\n    /**\r\n     * Return HSLA representation of a color.\r\n     */\r\n    toHSLA() {\r\n        return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\r\n    }\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     */\r\n    fillStyle() {\r\n        return this.toString();\r\n    }\r\n    /**\r\n     * Returns a clone of the current color.\r\n     */\r\n    clone() {\r\n        return new Color(this.r, this.g, this.b, this.a);\r\n    }\r\n    /**\r\n     * Black (#000000)\r\n     */\r\n    static get Black() {\r\n        return Color.fromHex('#000000');\r\n    }\r\n    /**\r\n     * White (#FFFFFF)\r\n     */\r\n    static get White() {\r\n        return Color.fromHex('#FFFFFF');\r\n    }\r\n    /**\r\n     * Gray (#808080)\r\n     */\r\n    static get Gray() {\r\n        return Color.fromHex('#808080');\r\n    }\r\n    /**\r\n     * Light gray (#D3D3D3)\r\n     */\r\n    static get LightGray() {\r\n        return Color.fromHex('#D3D3D3');\r\n    }\r\n    /**\r\n     * Dark gray (#A9A9A9)\r\n     */\r\n    static get DarkGray() {\r\n        return Color.fromHex('#A9A9A9');\r\n    }\r\n    /**\r\n     * Yellow (#FFFF00)\r\n     */\r\n    static get Yellow() {\r\n        return Color.fromHex('#FFFF00');\r\n    }\r\n    /**\r\n     * Orange (#FFA500)\r\n     */\r\n    static get Orange() {\r\n        return Color.fromHex('#FFA500');\r\n    }\r\n    /**\r\n     * Red (#FF0000)\r\n     */\r\n    static get Red() {\r\n        return Color.fromHex('#FF0000');\r\n    }\r\n    /**\r\n     * Vermilion (#FF5B31)\r\n     */\r\n    static get Vermilion() {\r\n        return Color.fromHex('#FF5B31');\r\n    }\r\n    /**\r\n     * Rose (#FF007F)\r\n     */\r\n    static get Rose() {\r\n        return Color.fromHex('#FF007F');\r\n    }\r\n    /**\r\n     * Magenta (#FF00FF)\r\n     */\r\n    static get Magenta() {\r\n        return Color.fromHex('#FF00FF');\r\n    }\r\n    /**\r\n     * Violet (#7F00FF)\r\n     */\r\n    static get Violet() {\r\n        return Color.fromHex('#7F00FF');\r\n    }\r\n    /**\r\n     * Blue (#0000FF)\r\n     */\r\n    static get Blue() {\r\n        return Color.fromHex('#0000FF');\r\n    }\r\n    /**\r\n     * Azure (#007FFF)\r\n     */\r\n    static get Azure() {\r\n        return Color.fromHex('#007FFF');\r\n    }\r\n    /**\r\n     * Cyan (#00FFFF)\r\n     */\r\n    static get Cyan() {\r\n        return Color.fromHex('#00FFFF');\r\n    }\r\n    /**\r\n     * Viridian (#59978F)\r\n     */\r\n    static get Viridian() {\r\n        return Color.fromHex('#59978F');\r\n    }\r\n    /**\r\n     * Green (#00FF00)\r\n     */\r\n    static get Green() {\r\n        return Color.fromHex('#00FF00');\r\n    }\r\n    /**\r\n     * Chartreuse (#7FFF00)\r\n     */\r\n    static get Chartreuse() {\r\n        return Color.fromHex('#7FFF00');\r\n    }\r\n    /**\r\n     * Transparent (#FFFFFF00)\r\n     */\r\n    static get Transparent() {\r\n        return Color.fromHex('#FFFFFF00');\r\n    }\r\n    /**\r\n     * ExcaliburBlue (#176BAA)\r\n     */\r\n    static get ExcaliburBlue() {\r\n        return Color.fromHex('#176BAA');\r\n    }\r\n}\r\n/**\r\n * Internal HSL Color representation\r\n *\r\n * http://en.wikipedia.org/wiki/HSL_and_HSV\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n */\r\nclass HSLColor {\r\n    constructor(h, s, l, a) {\r\n        this.h = h;\r\n        this.s = s;\r\n        this.l = l;\r\n        this.a = a;\r\n    }\r\n    static hue2rgb(p, q, t) {\r\n        if (t < 0) {\r\n            t += 1;\r\n        }\r\n        if (t > 1) {\r\n            t -= 1;\r\n        }\r\n        if (t < 1 / 6) {\r\n            return p + (q - p) * 6 * t;\r\n        }\r\n        if (t < 1 / 2) {\r\n            return q;\r\n        }\r\n        if (t < 2 / 3) {\r\n            return p + (q - p) * (2 / 3 - t) * 6;\r\n        }\r\n        return p;\r\n    }\r\n    static fromRGBA(r, g, b, a) {\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        const max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h, s;\r\n        const l = (max + min) / 2;\r\n        if (max === min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            const d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return new HSLColor(h, s, l, a);\r\n    }\r\n    toRGBA() {\r\n        let r, g, b;\r\n        if (this.s === 0) {\r\n            r = g = b = this.l; // achromatic\r\n        }\r\n        else {\r\n            const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\r\n            const p = 2 * this.l - q;\r\n            r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\r\n            g = HSLColor.hue2rgb(p, q, this.h);\r\n            b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\r\n        }\r\n        return new Color(r * 255, g * 255, b * 255, this.a);\r\n    }\r\n    toString() {\r\n        const h = this.h.toFixed(0), s = this.s.toFixed(0), l = this.l.toFixed(0), a = this.a.toFixed(0);\r\n        return `hsla(${h}, ${s}, ${l}, ${a})`;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Side.ts\n\r\n/**\r\n * An enum that describes the sides of an axis aligned box for collision\r\n */\r\nvar Side;\r\n(function (Side) {\r\n    Side[\"None\"] = \"None\";\r\n    Side[\"Top\"] = \"Top\";\r\n    Side[\"Bottom\"] = \"Bottom\";\r\n    Side[\"Left\"] = \"Left\";\r\n    Side[\"Right\"] = \"Right\";\r\n})(Side || (Side = {}));\r\n(function (Side) {\r\n    /**\r\n     * Returns the opposite side from the current\r\n     */\r\n    function getOpposite(side) {\r\n        if (side === Side.Top) {\r\n            return Side.Bottom;\r\n        }\r\n        if (side === Side.Bottom) {\r\n            return Side.Top;\r\n        }\r\n        if (side === Side.Left) {\r\n            return Side.Right;\r\n        }\r\n        if (side === Side.Right) {\r\n            return Side.Left;\r\n        }\r\n        return Side.None;\r\n    }\r\n    Side.getOpposite = getOpposite;\r\n    /**\r\n     * Given a vector, return the Side most in that direction (via dot product)\r\n     */\r\n    function fromDirection(direction) {\r\n        const directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\r\n        const directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\r\n        let max = -Number.MAX_VALUE;\r\n        let maxIndex = -1;\r\n        for (let i = 0; i < directions.length; i++) {\r\n            if (directions[i].dot(direction) > max) {\r\n                max = directions[i].dot(direction);\r\n                maxIndex = i;\r\n            }\r\n        }\r\n        return directionEnum[maxIndex];\r\n    }\r\n    Side.fromDirection = fromDirection;\r\n})(Side || (Side = {}));\r\n\n;// CONCATENATED MODULE: ./Collision/BoundingBox.ts\n\r\n\r\n\r\n/**\r\n * Axis Aligned collision primitive for Excalibur.\r\n */\r\nclass BoundingBox {\r\n    /**\r\n     * Constructor allows passing of either an object with all coordinate components,\r\n     * or the coordinate components passed separately.\r\n     * @param leftOrOptions    Either x coordinate of the left edge or an options object\r\n     * containing the four coordinate components.\r\n     * @param top     y coordinate of the top edge\r\n     * @param right   x coordinate of the right edge\r\n     * @param bottom  y coordinate of the bottom edge\r\n     */\r\n    constructor(leftOrOptions = 0, top = 0, right = 0, bottom = 0) {\r\n        if (typeof leftOrOptions === 'object') {\r\n            this.left = leftOrOptions.left;\r\n            this.top = leftOrOptions.top;\r\n            this.right = leftOrOptions.right;\r\n            this.bottom = leftOrOptions.bottom;\r\n        }\r\n        else if (typeof leftOrOptions === 'number') {\r\n            this.left = leftOrOptions;\r\n            this.top = top;\r\n            this.right = right;\r\n            this.bottom = bottom;\r\n        }\r\n    }\r\n    /**\r\n     * Returns a new instance of [[BoundingBox]] that is a copy of the current instance\r\n     */\r\n    clone() {\r\n        return new BoundingBox(this.left, this.top, this.right, this.bottom);\r\n    }\r\n    /**\r\n     * Given bounding box A & B, returns the side relative to A when intersection is performed.\r\n     * @param intersection Intersection vector between 2 bounding boxes\r\n     */\r\n    static getSideFromIntersection(intersection) {\r\n        if (!intersection) {\r\n            return Side.None;\r\n        }\r\n        if (intersection) {\r\n            if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\r\n                if (intersection.x < 0) {\r\n                    return Side.Right;\r\n                }\r\n                return Side.Left;\r\n            }\r\n            else {\r\n                if (intersection.y < 0) {\r\n                    return Side.Bottom;\r\n                }\r\n                return Side.Top;\r\n            }\r\n        }\r\n        return Side.None;\r\n    }\r\n    static fromPoints(points) {\r\n        let minX = Infinity;\r\n        let minY = Infinity;\r\n        let maxX = -Infinity;\r\n        let maxY = -Infinity;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (points[i].x < minX) {\r\n                minX = points[i].x;\r\n            }\r\n            if (points[i].x > maxX) {\r\n                maxX = points[i].x;\r\n            }\r\n            if (points[i].y < minY) {\r\n                minY = points[i].y;\r\n            }\r\n            if (points[i].y > maxY) {\r\n                maxY = points[i].y;\r\n            }\r\n        }\r\n        return new BoundingBox(minX, minY, maxX, maxY);\r\n    }\r\n    static fromDimension(width, height, anchor = Vector.Half, pos = Vector.Zero) {\r\n        return new BoundingBox(-width * anchor.x + pos.x, -height * anchor.y + pos.y, width - width * anchor.x + pos.x, height - height * anchor.y + pos.y);\r\n    }\r\n    /**\r\n     * Returns the calculated width of the bounding box\r\n     */\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n    /**\r\n     * Returns the calculated height of the bounding box\r\n     */\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n    /**\r\n     * Return whether the bounding box has zero dimensions in height,width or both\r\n     */\r\n    hasZeroDimensions() {\r\n        return this.width === 0 || this.height === 0;\r\n    }\r\n    /**\r\n     * Returns the center of the bounding box\r\n     */\r\n    get center() {\r\n        return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\r\n    }\r\n    translate(pos) {\r\n        return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\r\n    }\r\n    /**\r\n     * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\r\n     * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\r\n     */\r\n    rotate(angle, point = Vector.Zero) {\r\n        const points = this.getPoints().map((p) => p.rotate(angle, point));\r\n        return BoundingBox.fromPoints(points);\r\n    }\r\n    /**\r\n     * Scale a bounding box by a scale factor, optionally provide a point\r\n     * @param scale\r\n     * @param point\r\n     */\r\n    scale(scale, point = Vector.Zero) {\r\n        const shifted = this.translate(point);\r\n        return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\r\n    }\r\n    /**\r\n     * Transform the axis aligned bounding box by a [[Matrix]], producing a new axis aligned bounding box\r\n     * @param matrix\r\n     */\r\n    transform(matrix) {\r\n        // inlined these calculations to not use vectors would speed it up slightly\r\n        // const matFirstColumn = vec(matrix.data[0], matrix.data[1]);\r\n        // const xa = matFirstColumn.scale(this.left);\r\n        const xa1 = matrix.data[0] * this.left;\r\n        const xa2 = matrix.data[1] * this.left;\r\n        // const xb = matFirstColumn.scale(this.right);\r\n        const xb1 = matrix.data[0] * this.right;\r\n        const xb2 = matrix.data[1] * this.right;\r\n        // const matSecondColumn = vec(matrix.data[2], matrix.data[3]);\r\n        // const ya = matSecondColumn.scale(this.top);\r\n        const ya1 = matrix.data[2] * this.top;\r\n        const ya2 = matrix.data[3] * this.top;\r\n        // const yb = matSecondColumn.scale(this.bottom);\r\n        const yb1 = matrix.data[2] * this.bottom;\r\n        const yb2 = matrix.data[3] * this.bottom;\r\n        const matrixPos = matrix.getPosition();\r\n        // const topLeft = Vector.min(xa, xb).add(Vector.min(ya, yb)).add(matrixPos);\r\n        // const bottomRight = Vector.max(xa, xb).add(Vector.max(ya, yb)).add(matrixPos);\r\n        const left = Math.min(xa1, xb1) + Math.min(ya1, yb1) + matrixPos.x;\r\n        const top = Math.min(xa2, xb2) + Math.min(ya2, yb2) + matrixPos.y;\r\n        const right = Math.max(xa1, xb1) + Math.max(ya1, yb1) + matrixPos.x;\r\n        const bottom = Math.max(xa2, xb2) + Math.max(ya2, yb2) + matrixPos.y;\r\n        return new BoundingBox({\r\n            left,\r\n            top,\r\n            right,\r\n            bottom //: bottomRight.y\r\n        });\r\n    }\r\n    /**\r\n     * Returns the perimeter of the bounding box\r\n     */\r\n    getPerimeter() {\r\n        const wx = this.width;\r\n        const wy = this.height;\r\n        return 2 * (wx + wy);\r\n    }\r\n    getPoints() {\r\n        const results = [];\r\n        results.push(new Vector(this.left, this.top));\r\n        results.push(new Vector(this.right, this.top));\r\n        results.push(new Vector(this.right, this.bottom));\r\n        results.push(new Vector(this.left, this.bottom));\r\n        return results;\r\n    }\r\n    /**\r\n     * Determines whether a ray intersects with a bounding box\r\n     */\r\n    rayCast(ray, farClipDistance = Infinity) {\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        let tmin = -Infinity;\r\n        let tmax = +Infinity;\r\n        const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        const tx1 = (this.left - ray.pos.x) * xinv;\r\n        const tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        const ty1 = (this.top - ray.pos.y) * yinv;\r\n        const ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\r\n    }\r\n    rayCastTime(ray, farClipDistance = Infinity) {\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        let tmin = -Infinity;\r\n        let tmax = +Infinity;\r\n        const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        const tx1 = (this.left - ray.pos.x) * xinv;\r\n        const tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        const ty1 = (this.top - ray.pos.y) * yinv;\r\n        const ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\r\n            return tmin;\r\n        }\r\n        return -1;\r\n    }\r\n    contains(val) {\r\n        if (val instanceof Vector) {\r\n            return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\r\n        }\r\n        else if (val instanceof BoundingBox) {\r\n            if (this.left <= val.left && this.top <= val.top && val.bottom <= this.bottom && val.right <= this.right) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Combines this bounding box and another together returning a new bounding box\r\n     * @param other  The bounding box to combine\r\n     */\r\n    combine(other) {\r\n        const compositeBB = new BoundingBox(Math.min(this.left, other.left), Math.min(this.top, other.top), Math.max(this.right, other.right), Math.max(this.bottom, other.bottom));\r\n        return compositeBB;\r\n    }\r\n    get dimensions() {\r\n        return new Vector(this.width, this.height);\r\n    }\r\n    /**\r\n     * Returns true if the bounding boxes overlap.\r\n     * @param other\r\n     * @param epsilon Optionally specify a small epsilon (default 0) as amount of overlap to ignore as overlap.\r\n     * This epsilon is useful in stable collision simulations.\r\n     */\r\n    overlaps(other, epsilon) {\r\n        const e = epsilon || 0;\r\n        if (other.hasZeroDimensions()) {\r\n            return this.contains(other);\r\n        }\r\n        if (this.hasZeroDimensions()) {\r\n            return other.contains(this);\r\n        }\r\n        const totalBoundingBox = this.combine(other);\r\n        return totalBoundingBox.width + e < other.width + this.width &&\r\n            totalBoundingBox.height + e < other.height + this.height;\r\n    }\r\n    /**\r\n     * Test wether this bounding box intersects with another returning\r\n     * the intersection vector that can be used to resolve the collision. If there\r\n     * is no intersection null is returned.\r\n     *\r\n     * @param other  Other [[BoundingBox]] to test intersection with\r\n     * @returns A Vector in the direction of the current BoundingBox, this <- other\r\n     */\r\n    intersect(other) {\r\n        const totalBoundingBox = this.combine(other);\r\n        // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\r\n        if (totalBoundingBox.width < other.width + this.width &&\r\n            totalBoundingBox.height < other.height + this.height &&\r\n            !totalBoundingBox.dimensions.equals(other.dimensions) &&\r\n            !totalBoundingBox.dimensions.equals(this.dimensions)) {\r\n            // collision\r\n            let overlapX = 0;\r\n            // right edge is between the other's left and right edge\r\n            /**\r\n             *     +-this-+\r\n             *     |      |\r\n             *     |    +-other-+\r\n             *     +----|-+     |\r\n             *          |       |\r\n             *          +-------+\r\n             *         <---\r\n             *          ^ overlap\r\n             */\r\n            if (this.right >= other.left && this.right <= other.right) {\r\n                overlapX = other.left - this.right;\r\n                // right edge is past the other's right edge\r\n                /**\r\n                 *     +-other-+\r\n                 *     |       |\r\n                 *     |    +-this-+\r\n                 *     +----|--+   |\r\n                 *          |      |\r\n                 *          +------+\r\n                 *          --->\r\n                 *          ^ overlap\r\n                 */\r\n            }\r\n            else {\r\n                overlapX = other.right - this.left;\r\n            }\r\n            let overlapY = 0;\r\n            // top edge is between the other's top and bottom edge\r\n            /**\r\n             *     +-other-+\r\n             *     |       |\r\n             *     |    +-this-+   | <- overlap\r\n             *     +----|--+   |   |\r\n             *          |      |  \\ /\r\n             *          +------+   '\r\n             */\r\n            if (this.top <= other.bottom && this.top >= other.top) {\r\n                overlapY = other.bottom - this.top;\r\n                // top edge is above the other top edge\r\n                /**\r\n                 *     +-this-+         .\r\n                 *     |      |        / \\\r\n                 *     |    +-other-+   | <- overlap\r\n                 *     +----|-+     |   |\r\n                 *          |       |\r\n                 *          +-------+\r\n                 */\r\n            }\r\n            else {\r\n                overlapY = other.top - this.bottom;\r\n            }\r\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n                return new Vector(overlapX, 0);\r\n            }\r\n            else {\r\n                return new Vector(0, overlapY);\r\n            }\r\n            // Case of total containment of one bounding box by another\r\n        }\r\n        else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\r\n            let overlapX = 0;\r\n            // this is wider than the other\r\n            if (this.width - other.width >= 0) {\r\n                // This right edge is closest to the others right edge\r\n                if (this.right - other.right <= other.left - this.left) {\r\n                    overlapX = other.left - this.right;\r\n                    // This left edge is closest to the others left edge\r\n                }\r\n                else {\r\n                    overlapX = other.right - this.left;\r\n                }\r\n                // other is wider than this\r\n            }\r\n            else {\r\n                // This right edge is closest to the others right edge\r\n                if (other.right - this.right <= this.left - other.left) {\r\n                    overlapX = this.left - other.right;\r\n                    // This left edge is closest to the others left edge\r\n                }\r\n                else {\r\n                    overlapX = this.right - other.left;\r\n                }\r\n            }\r\n            let overlapY = 0;\r\n            // this is taller than other\r\n            if (this.height - other.height >= 0) {\r\n                // The bottom edge is closest to the others bottom edge\r\n                if (this.bottom - other.bottom <= other.top - this.top) {\r\n                    overlapY = other.top - this.bottom;\r\n                }\r\n                else {\r\n                    overlapY = other.bottom - this.top;\r\n                }\r\n                // other is taller than this\r\n            }\r\n            else {\r\n                // The bottom edge is closest to the others bottom edge\r\n                if (other.bottom - this.bottom <= this.top - other.top) {\r\n                    overlapY = this.top - other.bottom;\r\n                }\r\n                else {\r\n                    overlapY = this.bottom - other.top;\r\n                }\r\n            }\r\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n                return new Vector(overlapX, 0);\r\n            }\r\n            else {\r\n                return new Vector(0, overlapY);\r\n            }\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\r\n     * @param bb The other actor to test\r\n     */\r\n    intersectWithSide(bb) {\r\n        const intersect = this.intersect(bb);\r\n        return BoundingBox.getSideFromIntersection(intersect);\r\n    }\r\n    /**\r\n     * Draw a debug bounding box\r\n     * @param ex\r\n     * @param color\r\n     */\r\n    draw(ex, color = Color.Yellow) {\r\n        ex.debug.drawRect(this.left, this.top, this.width, this.height, { color });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Future.ts\n/**\r\n * Future is a wrapper around a native browser Promise to allow resolving/rejecting at any time\r\n */\r\nclass Future {\r\n    constructor() {\r\n        this._isCompleted = false;\r\n        this.promise = new Promise((resolve, reject) => {\r\n            this._resolver = resolve;\r\n            this._rejecter = reject;\r\n        });\r\n    }\r\n    get isCompleted() {\r\n        return this._isCompleted;\r\n    }\r\n    resolve(value) {\r\n        if (this._isCompleted) {\r\n            return;\r\n        }\r\n        this._isCompleted = true;\r\n        this._resolver(value);\r\n    }\r\n    reject(error) {\r\n        if (this._isCompleted) {\r\n            return;\r\n        }\r\n        this._isCompleted = true;\r\n        this._rejecter(error);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Util.ts\n\r\n\r\n/**\r\n * Find the screen position of an HTML element\r\n */\r\nfunction getPosition(el) {\r\n    let oLeft = 0, oTop = 0;\r\n    const calcOffsetLeft = (parent) => {\r\n        oLeft += parent.offsetLeft;\r\n        if (parent.offsetParent) {\r\n            calcOffsetLeft(parent.offsetParent);\r\n        }\r\n    };\r\n    const calcOffsetTop = (parent) => {\r\n        oTop += parent.offsetTop;\r\n        if (parent.offsetParent) {\r\n            calcOffsetTop(parent.offsetParent);\r\n        }\r\n    };\r\n    calcOffsetLeft(el);\r\n    calcOffsetTop(el);\r\n    return new Vector(oLeft, oTop);\r\n}\r\n/**\r\n * Add an item to an array list if it doesn't already exist. Returns true if added, false if not and already exists in the array.\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nfunction addItemToArray(item, array) {\r\n    if (array.indexOf(item) === -1) {\r\n        array.push(item);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Remove an item from an list\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nfunction removeItemFromArray(item, array) {\r\n    let index = -1;\r\n    if ((index = array.indexOf(item)) > -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * See if an array contains something\r\n */\r\nfunction contains(array, obj) {\r\n    for (let i = 0; i < array.length; i++) {\r\n        if (array[i] === obj) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Used for exhaustive checks at compile time\r\n */\r\nfunction fail(message) {\r\n    throw new Error(message);\r\n}\r\n/**\r\n * Create a promise that resolves after a certain number of milliseconds\r\n *\r\n * It is strongly recommended you pass the excalibur clock so delays are bound to the\r\n * excalibur clock which would be unaffected by stop/pause.\r\n * @param milliseconds\r\n * @param clock\r\n */\r\nfunction delay(milliseconds, clock) {\r\n    var _a;\r\n    const future = new Future();\r\n    const schedule = (_a = clock === null || clock === void 0 ? void 0 : clock.schedule.bind(clock)) !== null && _a !== void 0 ? _a : setTimeout;\r\n    schedule(() => {\r\n        future.resolve();\r\n    }, milliseconds);\r\n    return future.promise;\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/matrix.ts\n\r\n\r\n\r\nvar MatrixLocations;\r\n(function (MatrixLocations) {\r\n    MatrixLocations[MatrixLocations[\"X\"] = 12] = \"X\";\r\n    MatrixLocations[MatrixLocations[\"Y\"] = 13] = \"Y\";\r\n})(MatrixLocations || (MatrixLocations = {}));\r\n/**\r\n * Excalibur Matrix helper for 4x4 matrices\r\n *\r\n * Useful for webgl 4x4 matrices\r\n */\r\nclass Matrix {\r\n    constructor() {\r\n        /**\r\n         *  4x4 matrix in column major order\r\n         *\r\n         * |         |         |          |          |\r\n         * | ------- | ------- | -------- | -------- |\r\n         * | data[0] | data[4] | data[8]  | data[12] |\r\n         * | data[1] | data[5] | data[9]  | data[13] |\r\n         * | data[2] | data[6] | data[10] | data[14] |\r\n         * | data[3] | data[7] | data[11] | data[15] |\r\n         *\r\n         */\r\n        this.data = new Float32Array(16);\r\n        this._scaleX = 1;\r\n        this._scaleSignX = 1;\r\n        this._scaleY = 1;\r\n        this._scaleSignY = 1;\r\n    }\r\n    /**\r\n     * Creates an orthographic (flat non-perspective) projection\r\n     * https://en.wikipedia.org/wiki/Orthographic_projection\r\n     * @param left\r\n     * @param right\r\n     * @param bottom\r\n     * @param top\r\n     * @param near\r\n     * @param far\r\n     */\r\n    static ortho(left, right, bottom, top, near, far) {\r\n        const mat = new Matrix();\r\n        mat.data[0] = 2 / (right - left);\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 2 / (top - bottom);\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = -2 / (far - near);\r\n        mat.data[11] = 0;\r\n        mat.data[12] = -(right + left) / (right - left);\r\n        mat.data[13] = -(top + bottom) / (top - bottom);\r\n        mat.data[14] = -(far + near) / (far - near);\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a new Matrix with the same data as the current 4x4\r\n     */\r\n    clone(dest) {\r\n        const mat = dest || new Matrix();\r\n        mat.data[0] = this.data[0];\r\n        mat.data[1] = this.data[1];\r\n        mat.data[2] = this.data[2];\r\n        mat.data[3] = this.data[3];\r\n        mat.data[4] = this.data[4];\r\n        mat.data[5] = this.data[5];\r\n        mat.data[6] = this.data[6];\r\n        mat.data[7] = this.data[7];\r\n        mat.data[8] = this.data[8];\r\n        mat.data[9] = this.data[9];\r\n        mat.data[10] = this.data[10];\r\n        mat.data[11] = this.data[11];\r\n        mat.data[12] = this.data[12];\r\n        mat.data[13] = this.data[13];\r\n        mat.data[14] = this.data[14];\r\n        mat.data[15] = this.data[15];\r\n        return mat;\r\n    }\r\n    /**\r\n     * Converts the current matrix into a DOMMatrix\r\n     *\r\n     * This is useful when working with the browser Canvas context\r\n     * @returns {DOMMatrix} DOMMatrix\r\n     */\r\n    toDOMMatrix() {\r\n        return new DOMMatrix([...this.data]);\r\n    }\r\n    static fromFloat32Array(data) {\r\n        const matrix = new Matrix();\r\n        matrix.data = data;\r\n        return matrix;\r\n    }\r\n    /**\r\n     * Creates a new identity matrix (a matrix that when applied does nothing)\r\n     */\r\n    static identity() {\r\n        const mat = new Matrix();\r\n        mat.data[0] = 1;\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 1;\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = 1;\r\n        mat.data[11] = 0;\r\n        mat.data[12] = 0;\r\n        mat.data[13] = 0;\r\n        mat.data[14] = 0;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Resets the current matrix to the identity matrix, mutating it\r\n     * @returns {Matrix} Current matrix as identity\r\n     */\r\n    reset() {\r\n        const mat = this;\r\n        mat.data[0] = 1;\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 1;\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = 1;\r\n        mat.data[11] = 0;\r\n        mat.data[12] = 0;\r\n        mat.data[13] = 0;\r\n        mat.data[14] = 0;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new translation matrix at the specified 3d point\r\n     * @param x\r\n     * @param y\r\n     */\r\n    static translation(x, y) {\r\n        const mat = Matrix.identity();\r\n        mat.data[12] = x;\r\n        mat.data[13] = y;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new scaling matrix with the specified scaling factor\r\n     * @param sx\r\n     * @param sy\r\n     */\r\n    static scale(sx, sy) {\r\n        const mat = Matrix.identity();\r\n        mat.data[0] = sx;\r\n        mat.data[5] = sy;\r\n        mat.data[10] = 1;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new rotation matrix with the specified angle\r\n     * @param angleRadians\r\n     */\r\n    static rotation(angleRadians) {\r\n        const mat = Matrix.identity();\r\n        mat.data[0] = Math.cos(angleRadians);\r\n        mat.data[4] = -Math.sin(angleRadians);\r\n        mat.data[1] = Math.sin(angleRadians);\r\n        mat.data[5] = Math.cos(angleRadians);\r\n        return mat;\r\n    }\r\n    multiply(vectorOrMatrix, dest) {\r\n        if (vectorOrMatrix instanceof Vector) {\r\n            const result = dest || new Vector(0, 0);\r\n            const vector = vectorOrMatrix;\r\n            // these shenanigans are to allow dest and vector to be the same instance\r\n            const resultX = vector.x * this.data[0] + vector.y * this.data[4] + this.data[12];\r\n            const resultY = vector.x * this.data[1] + vector.y * this.data[5] + this.data[13];\r\n            result.x = resultX;\r\n            result.y = resultY;\r\n            return result;\r\n        }\r\n        else {\r\n            const result = dest || new Matrix();\r\n            const other = vectorOrMatrix;\r\n            const a11 = this.data[0];\r\n            const a21 = this.data[1];\r\n            const a31 = this.data[2];\r\n            const a41 = this.data[3];\r\n            const a12 = this.data[4];\r\n            const a22 = this.data[5];\r\n            const a32 = this.data[6];\r\n            const a42 = this.data[7];\r\n            const a13 = this.data[8];\r\n            const a23 = this.data[9];\r\n            const a33 = this.data[10];\r\n            const a43 = this.data[11];\r\n            const a14 = this.data[12];\r\n            const a24 = this.data[13];\r\n            const a34 = this.data[14];\r\n            const a44 = this.data[15];\r\n            const b11 = other.data[0];\r\n            const b21 = other.data[1];\r\n            const b31 = other.data[2];\r\n            const b41 = other.data[3];\r\n            const b12 = other.data[4];\r\n            const b22 = other.data[5];\r\n            const b32 = other.data[6];\r\n            const b42 = other.data[7];\r\n            const b13 = other.data[8];\r\n            const b23 = other.data[9];\r\n            const b33 = other.data[10];\r\n            const b43 = other.data[11];\r\n            const b14 = other.data[12];\r\n            const b24 = other.data[13];\r\n            const b34 = other.data[14];\r\n            const b44 = other.data[15];\r\n            result.data[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n            result.data[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n            result.data[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n            result.data[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n            result.data[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n            result.data[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n            result.data[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n            result.data[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n            result.data[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n            result.data[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n            result.data[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n            result.data[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n            result.data[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n            result.data[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n            result.data[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n            result.data[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n            const s = this.getScale();\r\n            result._scaleSignX = sign(s.x) * sign(result._scaleSignX);\r\n            result._scaleSignY = sign(s.y) * sign(result._scaleSignY);\r\n            return result;\r\n        }\r\n    }\r\n    /**\r\n     * Applies translation to the current matrix mutating it\r\n     * @param x\r\n     * @param y\r\n     */\r\n    translate(x, y) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        const a13 = this.data[8];\r\n        const a23 = this.data[9];\r\n        const a33 = this.data[10];\r\n        const a43 = this.data[11];\r\n        const a14 = this.data[12];\r\n        const a24 = this.data[13];\r\n        const a34 = this.data[14];\r\n        const a44 = this.data[15];\r\n        // Doesn't change z\r\n        const z = 0;\r\n        const w = 1;\r\n        this.data[12] = a11 * x + a12 * y + a13 * z + a14 * w;\r\n        this.data[13] = a21 * x + a22 * y + a23 * z + a24 * w;\r\n        this.data[14] = a31 * x + a32 * y + a33 * z + a34 * w;\r\n        this.data[15] = a41 * x + a42 * y + a43 * z + a44 * w;\r\n        return this;\r\n    }\r\n    setPosition(x, y) {\r\n        this.data[12] = x;\r\n        this.data[13] = y;\r\n    }\r\n    getPosition() {\r\n        return vec(this.data[12], this.data[13]);\r\n    }\r\n    /**\r\n     * Applies rotation to the current matrix mutating it\r\n     * @param angle in Radians\r\n     */\r\n    rotate(angle) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        const sine = Math.sin(angle);\r\n        const cosine = Math.cos(angle);\r\n        this.data[0] = cosine * a11 + sine * a12;\r\n        this.data[1] = cosine * a21 + sine * a22;\r\n        this.data[2] = cosine * a31 + sine * a32;\r\n        this.data[3] = cosine * a41 + sine * a42;\r\n        this.data[4] = cosine * a12 - sine * a11;\r\n        this.data[5] = cosine * a22 - sine * a21;\r\n        this.data[6] = cosine * a32 - sine * a31;\r\n        this.data[7] = cosine * a42 - sine * a41;\r\n        return this;\r\n    }\r\n    /**\r\n     * Applies scaling to the current matrix mutating it\r\n     * @param x\r\n     * @param y\r\n     */\r\n    scale(x, y) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        this.data[0] = a11 * x;\r\n        this.data[1] = a21 * x;\r\n        this.data[2] = a31 * x;\r\n        this.data[3] = a41 * x;\r\n        this.data[4] = a12 * y;\r\n        this.data[5] = a22 * y;\r\n        this.data[6] = a32 * y;\r\n        this.data[7] = a42 * y;\r\n        return this;\r\n    }\r\n    setRotation(angle) {\r\n        const currentScale = this.getScale();\r\n        const sine = Math.sin(angle);\r\n        const cosine = Math.cos(angle);\r\n        this.data[0] = cosine * currentScale.x;\r\n        this.data[1] = sine * currentScale.y;\r\n        this.data[4] = -sine * currentScale.x;\r\n        this.data[5] = cosine * currentScale.y;\r\n    }\r\n    getRotation() {\r\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\r\n        return canonicalizeAngle(angle);\r\n    }\r\n    getScaleX() {\r\n        // absolute scale of the matrix (we lose sign so need to add it back)\r\n        const xscale = vec(this.data[0], this.data[4]).size;\r\n        return this._scaleSignX * xscale;\r\n    }\r\n    getScaleY() {\r\n        // absolute scale of the matrix (we lose sign so need to add it back)\r\n        const yscale = vec(this.data[1], this.data[5]).size;\r\n        return this._scaleSignY * yscale;\r\n    }\r\n    /**\r\n     * Get the scale of the matrix\r\n     */\r\n    getScale() {\r\n        return vec(this.getScaleX(), this.getScaleY());\r\n    }\r\n    setScaleX(val) {\r\n        if (this._scaleX === val) {\r\n            return;\r\n        }\r\n        this._scaleSignX = sign(val);\r\n        // negative scale acts like a 180 rotation, so flip\r\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[4] * this._scaleSignX).normalize();\r\n        this.data[0] = xscale.x * val;\r\n        this.data[4] = xscale.y * val;\r\n        this._scaleX = val;\r\n    }\r\n    setScaleY(val) {\r\n        if (this._scaleY === val) {\r\n            return;\r\n        }\r\n        this._scaleSignY = sign(val);\r\n        // negative scale acts like a 180 rotation, so flip\r\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[5] * this._scaleSignY).normalize();\r\n        this.data[1] = yscale.x * val;\r\n        this.data[5] = yscale.y * val;\r\n        this._scaleY = val;\r\n    }\r\n    setScale(scale) {\r\n        this.setScaleX(scale.x);\r\n        this.setScaleY(scale.y);\r\n    }\r\n    /**\r\n     * Determinant of the upper left 2x2 matrix\r\n     */\r\n    getBasisDeterminant() {\r\n        return this.data[0] * this.data[5] - this.data[1] * this.data[4];\r\n    }\r\n    /**\r\n     * Return the affine inverse, optionally store it in a target matrix.\r\n     *\r\n     * It's recommended you call .reset() the target unless you know what you're doing\r\n     * @param target\r\n     */\r\n    getAffineInverse(target) {\r\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\r\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\r\n        // Since we are actually only doing 2D transformations we can use this hack\r\n        // We don't actually use the 3rd or 4th dimension\r\n        const det = this.getBasisDeterminant();\r\n        const inverseDet = 1 / det; // todo zero check\r\n        const a = this.data[0];\r\n        const b = this.data[4];\r\n        const c = this.data[1];\r\n        const d = this.data[5];\r\n        const m = target || Matrix.identity();\r\n        // inverts rotation and scale\r\n        m.data[0] = d * inverseDet;\r\n        m.data[1] = -c * inverseDet;\r\n        m.data[4] = -b * inverseDet;\r\n        m.data[5] = a * inverseDet;\r\n        const tx = this.data[12];\r\n        const ty = this.data[13];\r\n        // invert translation\r\n        // transform translation into the matrix basis created by rot/scale\r\n        m.data[12] = -(tx * m.data[0] + ty * m.data[4]);\r\n        m.data[13] = -(tx * m.data[1] + ty * m.data[5]);\r\n        return m;\r\n    }\r\n    isIdentity() {\r\n        return (this.data[0] === 1 &&\r\n            this.data[1] === 0 &&\r\n            this.data[2] === 0 &&\r\n            this.data[3] === 0 &&\r\n            this.data[4] === 0 &&\r\n            this.data[5] === 1 &&\r\n            this.data[6] === 0 &&\r\n            this.data[7] === 0 &&\r\n            this.data[8] === 0 &&\r\n            this.data[9] === 0 &&\r\n            this.data[10] === 1 &&\r\n            this.data[11] === 0 &&\r\n            this.data[12] === 0 &&\r\n            this.data[13] === 0 &&\r\n            this.data[14] === 0 &&\r\n            this.data[15] === 1);\r\n    }\r\n    toString() {\r\n        return `\r\n[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]\r\n[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]\r\n[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]\r\n[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]\r\n`;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/affine-matrix.ts\n\r\n\r\n\r\nclass AffineMatrix {\r\n    constructor() {\r\n        /**\r\n         * |         |         |          |\r\n         * | ------- | ------- | -------- |\r\n         * | data[0] | data[2] | data[4]  |\r\n         * | data[1] | data[3] | data[5]  |\r\n         * |   0     |    0    |    1     |\r\n         */\r\n        this.data = new Float64Array(6);\r\n        this._scale = new Float64Array([1, 1]);\r\n        this._scaleSignX = 1;\r\n        this._scaleSignY = 1;\r\n    }\r\n    /**\r\n     * Converts the current matrix into a DOMMatrix\r\n     *\r\n     * This is useful when working with the browser Canvas context\r\n     * @returns {DOMMatrix} DOMMatrix\r\n     */\r\n    toDOMMatrix() {\r\n        return new DOMMatrix([...this.data]);\r\n    }\r\n    static identity() {\r\n        const mat = new AffineMatrix();\r\n        mat.data[0] = 1;\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 1;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 0;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new translation matrix at the specified 3d point\r\n     * @param x\r\n     * @param y\r\n     */\r\n    static translation(x, y) {\r\n        const mat = AffineMatrix.identity();\r\n        mat.data[4] = x;\r\n        mat.data[5] = y;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new scaling matrix with the specified scaling factor\r\n     * @param sx\r\n     * @param sy\r\n     */\r\n    static scale(sx, sy) {\r\n        const mat = AffineMatrix.identity();\r\n        mat.data[0] = sx;\r\n        mat.data[3] = sy;\r\n        mat._scale[0] = sx;\r\n        mat._scale[1] = sy;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new rotation matrix with the specified angle\r\n     * @param angleRadians\r\n     */\r\n    static rotation(angleRadians) {\r\n        const mat = AffineMatrix.identity();\r\n        mat.data[0] = Math.cos(angleRadians);\r\n        mat.data[1] = Math.sin(angleRadians);\r\n        mat.data[2] = -Math.sin(angleRadians);\r\n        mat.data[3] = Math.cos(angleRadians);\r\n        return mat;\r\n    }\r\n    setPosition(x, y) {\r\n        this.data[4] = x;\r\n        this.data[5] = y;\r\n    }\r\n    getPosition() {\r\n        return vec(this.data[4], this.data[5]);\r\n    }\r\n    /**\r\n     * Applies rotation to the current matrix mutating it\r\n     * @param angle in Radians\r\n     */\r\n    rotate(angle) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a12 = this.data[2];\r\n        const a22 = this.data[3];\r\n        const sine = Math.sin(angle);\r\n        const cosine = Math.cos(angle);\r\n        this.data[0] = cosine * a11 + sine * a12;\r\n        this.data[1] = cosine * a21 + sine * a22;\r\n        this.data[2] = cosine * a12 - sine * a11;\r\n        this.data[3] = cosine * a22 - sine * a21;\r\n        return this;\r\n    }\r\n    /**\r\n     * Applies translation to the current matrix mutating it\r\n     * @param x\r\n     * @param y\r\n     */\r\n    translate(x, y) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        // const a31 = 0;\r\n        const a12 = this.data[2];\r\n        const a22 = this.data[3];\r\n        // const a32 = 0;\r\n        const a13 = this.data[4];\r\n        const a23 = this.data[5];\r\n        // const a33 = 1;\r\n        // Doesn't change z\r\n        this.data[4] = a11 * x + a12 * y + a13;\r\n        this.data[5] = a21 * x + a22 * y + a23;\r\n        return this;\r\n    }\r\n    /**\r\n     * Applies scaling to the current matrix mutating it\r\n     * @param x\r\n     * @param y\r\n     */\r\n    scale(x, y) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a12 = this.data[2];\r\n        const a22 = this.data[3];\r\n        this.data[0] = a11 * x;\r\n        this.data[1] = a21 * x;\r\n        this.data[2] = a12 * y;\r\n        this.data[3] = a22 * y;\r\n        this._scale[0] = x;\r\n        this._scale[1] = y;\r\n        return this;\r\n    }\r\n    determinant() {\r\n        return this.data[0] * this.data[3] - this.data[1] * this.data[2];\r\n    }\r\n    /**\r\n     * Return the affine inverse, optionally store it in a target matrix.\r\n     *\r\n     * It's recommended you call .reset() the target unless you know what you're doing\r\n     * @param target\r\n     */\r\n    inverse(target) {\r\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\r\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\r\n        // Since we are actually only doing 2D transformations we can use this hack\r\n        // We don't actually use the 3rd or 4th dimension\r\n        const det = this.determinant();\r\n        const inverseDet = 1 / det; // TODO zero check\r\n        const a = this.data[0];\r\n        const b = this.data[2];\r\n        const c = this.data[1];\r\n        const d = this.data[3];\r\n        const m = target || AffineMatrix.identity();\r\n        // inverts rotation and scale\r\n        m.data[0] = d * inverseDet;\r\n        m.data[1] = -c * inverseDet;\r\n        m.data[2] = -b * inverseDet;\r\n        m.data[3] = a * inverseDet;\r\n        const tx = this.data[4];\r\n        const ty = this.data[5];\r\n        // invert translation\r\n        // transform translation into the matrix basis created by rot/scale\r\n        m.data[4] = -(tx * m.data[0] + ty * m.data[2]);\r\n        m.data[5] = -(tx * m.data[1] + ty * m.data[3]);\r\n        return m;\r\n    }\r\n    multiply(vectorOrMatrix, dest) {\r\n        if (vectorOrMatrix instanceof Vector) {\r\n            const result = dest || new Vector(0, 0);\r\n            const vector = vectorOrMatrix;\r\n            // these shenanigans are to allow dest and vector to be the same instance\r\n            const resultX = vector.x * this.data[0] + vector.y * this.data[2] + this.data[4];\r\n            const resultY = vector.x * this.data[1] + vector.y * this.data[3] + this.data[5];\r\n            result.x = resultX;\r\n            result.y = resultY;\r\n            return result;\r\n        }\r\n        else {\r\n            const result = dest || new AffineMatrix();\r\n            const other = vectorOrMatrix;\r\n            const a11 = this.data[0];\r\n            const a21 = this.data[1];\r\n            //  const a31 = 0;\r\n            const a12 = this.data[2];\r\n            const a22 = this.data[3];\r\n            //  const a32 = 0;\r\n            const a13 = this.data[4];\r\n            const a23 = this.data[5];\r\n            //  const a33 = 1;\r\n            const b11 = other.data[0];\r\n            const b21 = other.data[1];\r\n            //  const b31 = 0;\r\n            const b12 = other.data[2];\r\n            const b22 = other.data[3];\r\n            //  const b32 = 0;\r\n            const b13 = other.data[4];\r\n            const b23 = other.data[5];\r\n            //  const b33 = 1;\r\n            result.data[0] = a11 * b11 + a12 * b21; // + a13 * b31; // zero\r\n            result.data[1] = a21 * b11 + a22 * b21; // + a23 * b31; // zero\r\n            result.data[2] = a11 * b12 + a12 * b22; // + a13 * b32; // zero\r\n            result.data[3] = a21 * b12 + a22 * b22; // + a23 * b32; // zero\r\n            result.data[4] = a11 * b13 + a12 * b23 + a13; // * b33; // one\r\n            result.data[5] = a21 * b13 + a22 * b23 + a23; // * b33; // one\r\n            const s = this.getScale();\r\n            result._scaleSignX = sign(s.x) * sign(result._scaleSignX);\r\n            result._scaleSignY = sign(s.y) * sign(result._scaleSignY);\r\n            return result;\r\n        }\r\n    }\r\n    to4x4() {\r\n        const mat = new Matrix();\r\n        mat.data[0] = this.data[0];\r\n        mat.data[1] = this.data[1];\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = this.data[2];\r\n        mat.data[5] = this.data[3];\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = 1;\r\n        mat.data[11] = 0;\r\n        mat.data[12] = this.data[4];\r\n        mat.data[13] = this.data[5];\r\n        mat.data[14] = 0;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    setRotation(angle) {\r\n        const currentScale = this.getScale();\r\n        const sine = Math.sin(angle);\r\n        const cosine = Math.cos(angle);\r\n        this.data[0] = cosine * currentScale.x;\r\n        this.data[1] = sine * currentScale.y;\r\n        this.data[2] = -sine * currentScale.x;\r\n        this.data[3] = cosine * currentScale.y;\r\n    }\r\n    getRotation() {\r\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\r\n        return canonicalizeAngle(angle);\r\n    }\r\n    getScaleX() {\r\n        // absolute scale of the matrix (we lose sign so need to add it back)\r\n        const xscale = vec(this.data[0], this.data[2]).distance();\r\n        return this._scaleSignX * xscale;\r\n    }\r\n    getScaleY() {\r\n        // absolute scale of the matrix (we lose sign so need to add it back)\r\n        const yscale = vec(this.data[1], this.data[3]).distance();\r\n        return this._scaleSignY * yscale;\r\n    }\r\n    /**\r\n     * Get the scale of the matrix\r\n     */\r\n    getScale() {\r\n        return vec(this.getScaleX(), this.getScaleY());\r\n    }\r\n    setScaleX(val) {\r\n        if (val === this._scale[0]) {\r\n            return;\r\n        }\r\n        this._scaleSignX = sign(val);\r\n        // negative scale acts like a 180 rotation, so flip\r\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[2] * this._scaleSignX).normalize();\r\n        this.data[0] = xscale.x * val;\r\n        this.data[2] = xscale.y * val;\r\n        this._scale[0] = val;\r\n    }\r\n    setScaleY(val) {\r\n        if (val === this._scale[1]) {\r\n            return;\r\n        }\r\n        this._scaleSignY = sign(val);\r\n        // negative scale acts like a 180 rotation, so flip\r\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[3] * this._scaleSignY).normalize();\r\n        this.data[1] = yscale.x * val;\r\n        this.data[3] = yscale.y * val;\r\n        this._scale[1] = val;\r\n    }\r\n    setScale(scale) {\r\n        this.setScaleX(scale.x);\r\n        this.setScaleY(scale.y);\r\n    }\r\n    isIdentity() {\r\n        return (this.data[0] === 1 &&\r\n            this.data[1] === 0 &&\r\n            this.data[2] === 0 &&\r\n            this.data[3] === 1 &&\r\n            this.data[4] === 0 &&\r\n            this.data[5] === 0);\r\n    }\r\n    /**\r\n     * Resets the current matrix to the identity matrix, mutating it\r\n     * @returns {AffineMatrix} Current matrix as identity\r\n     */\r\n    reset() {\r\n        const mat = this;\r\n        mat.data[0] = 1;\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 1;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 0;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a new Matrix with the same data as the current 4x4\r\n     */\r\n    clone(dest) {\r\n        const mat = dest || new AffineMatrix();\r\n        mat.data[0] = this.data[0];\r\n        mat.data[1] = this.data[1];\r\n        mat.data[2] = this.data[2];\r\n        mat.data[3] = this.data[3];\r\n        mat.data[4] = this.data[4];\r\n        mat.data[5] = this.data[5];\r\n        return mat;\r\n    }\r\n    toString() {\r\n        return `\r\n[${this.data[0]} ${this.data[2]} ${this.data[4]}]\r\n[${this.data[1]} ${this.data[3]} ${this.data[5]}]\r\n[0 0 1]\r\n`;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/transform-stack.ts\n\r\nclass TransformStack {\r\n    constructor() {\r\n        this._transforms = [];\r\n        this._currentTransform = AffineMatrix.identity();\r\n    }\r\n    save() {\r\n        this._transforms.push(this._currentTransform);\r\n        this._currentTransform = this._currentTransform.clone();\r\n    }\r\n    restore() {\r\n        this._currentTransform = this._transforms.pop();\r\n    }\r\n    translate(x, y) {\r\n        return this._currentTransform.translate(x, y);\r\n    }\r\n    rotate(angle) {\r\n        return this._currentTransform.rotate(angle);\r\n    }\r\n    scale(x, y) {\r\n        return this._currentTransform.scale(x, y);\r\n    }\r\n    set current(matrix) {\r\n        this._currentTransform = matrix;\r\n    }\r\n    get current() {\r\n        return this._currentTransform;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/state-stack.ts\n\r\nclass StateStack {\r\n    constructor() {\r\n        this._states = [];\r\n        this._currentState = this._getDefaultState();\r\n    }\r\n    _getDefaultState() {\r\n        return {\r\n            opacity: 1,\r\n            z: 0,\r\n            tint: Color.White,\r\n            material: null\r\n        };\r\n    }\r\n    _cloneState() {\r\n        return {\r\n            opacity: this._currentState.opacity,\r\n            z: this._currentState.z,\r\n            tint: this._currentState.tint.clone(),\r\n            material: this._currentState.material // TODO is this going to cause problems when cloning\r\n        };\r\n    }\r\n    save() {\r\n        this._states.push(this._currentState);\r\n        this._currentState = this._cloneState();\r\n    }\r\n    restore() {\r\n        this._currentState = this._states.pop();\r\n    }\r\n    get current() {\r\n        return this._currentState;\r\n    }\r\n    set current(val) {\r\n        this._currentState = val;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Resource.ts\n\r\n\r\nconst ResourceEvents = {\r\n    Complete: 'complete',\r\n    Load: 'load',\r\n    LoadStart: 'loadstart',\r\n    Progress: 'progress',\r\n    Error: 'error'\r\n};\r\n/**\r\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\r\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\r\n */\r\nclass Resource {\r\n    /**\r\n     * @param path          Path to the remote resource\r\n     * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\r\n     * @param bustCache     Whether or not to cache-bust requests\r\n     */\r\n    constructor(path, responseType, bustCache = false) {\r\n        this.path = path;\r\n        this.responseType = responseType;\r\n        this.bustCache = bustCache;\r\n        this.data = null;\r\n        this.logger = Logger.getInstance();\r\n        this.events = new EventEmitter();\r\n    }\r\n    /**\r\n     * Returns true if the Resource is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    isLoaded() {\r\n        return this.data !== null;\r\n    }\r\n    _cacheBust(uri) {\r\n        const query = /\\?\\w*=\\w*/;\r\n        if (query.test(uri)) {\r\n            uri += '&__=' + Date.now();\r\n        }\r\n        else {\r\n            uri += '?__=' + Date.now();\r\n        }\r\n        return uri;\r\n    }\r\n    /**\r\n     * Begin loading the resource and returns a promise to be resolved on completion\r\n     */\r\n    load() {\r\n        return new Promise((resolve, reject) => {\r\n            // Exit early if we already have data\r\n            if (this.data !== null) {\r\n                this.logger.debug('Already have data for resource', this.path);\r\n                this.events.emit('complete', this.data);\r\n                resolve(this.data);\r\n                return;\r\n            }\r\n            const request = new XMLHttpRequest();\r\n            request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\r\n            request.responseType = this.responseType;\r\n            request.addEventListener('loadstart', (e) => this.events.emit('loadstart', e));\r\n            request.addEventListener('progress', (e) => this.events.emit('progress', e));\r\n            request.addEventListener('error', (e) => this.events.emit('error', e));\r\n            request.addEventListener('load', (e) => this.events.emit('load', e));\r\n            request.addEventListener('load', () => {\r\n                // XHR on file:// success status is 0, such as with PhantomJS\r\n                if (request.status !== 0 && request.status !== 200) {\r\n                    this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\r\n                    this.events.emit('error', request.response);\r\n                    reject(new Error(request.statusText));\r\n                    return;\r\n                }\r\n                this.data = request.response;\r\n                this.events.emit('complete', this.data);\r\n                this.logger.debug('Completed loading resource', this.path);\r\n                resolve(this.data);\r\n            });\r\n            request.send();\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Watch.ts\n/**\r\n * Watch an object with a proxy, only fires if property value is different\r\n */\r\nfunction watch(type, change) {\r\n    if (!type) {\r\n        return type;\r\n    }\r\n    if (type.__isProxy === undefined) {\r\n        // expando hack to mark a proxy\r\n        return new Proxy(type, {\r\n            set: (obj, prop, value) => {\r\n                // The default behavior to store the value\r\n                if (obj[prop] !== value) {\r\n                    obj[prop] = value;\r\n                    // Avoid watching private junk\r\n                    if (typeof prop === 'string') {\r\n                        if (prop[0] !== '_') {\r\n                            change(obj);\r\n                        }\r\n                    }\r\n                }\r\n                // Indicate success\r\n                return true;\r\n            },\r\n            get: (obj, prop) => {\r\n                if (prop !== '__isProxy') {\r\n                    return obj[prop];\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    return type;\r\n}\r\n/**\r\n * Watch an object with a proxy, fires change on any property value change\r\n */\r\nfunction watchAny(type, change) {\r\n    if (!type) {\r\n        return type;\r\n    }\r\n    if (type.__isProxy === undefined) {\r\n        // expando hack to mark a proxy\r\n        return new Proxy(type, {\r\n            set: (obj, prop, value) => {\r\n                // The default behavior to store the value\r\n                obj[prop] = value;\r\n                // Avoid watching private junk\r\n                if (typeof prop === 'string') {\r\n                    if (prop[0] !== '_') {\r\n                        change(obj);\r\n                    }\r\n                }\r\n                // Indicate success\r\n                return true;\r\n            },\r\n            get: (obj, prop) => {\r\n                if (prop !== '__isProxy') {\r\n                    return obj[prop];\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    return type;\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Graphic.ts\n\r\n\r\n\r\n\r\n/**\r\n * A Graphic is the base Excalibur primitive for something that can be drawn to the [[ExcaliburGraphicsContext]].\r\n * [[Sprite]], [[Animation]], [[GraphicsGroup]], [[Canvas]], [[Rectangle]], [[Circle]], and [[Polygon]] all derive from the\r\n * [[Graphic]] abstract class.\r\n *\r\n * Implementors of a Graphic must override the abstract [[Graphic._drawImage]] method to render an image to the graphics context. Graphic\r\n * handles all the position, rotation, and scale transformations in [[Graphic._preDraw]] and [[Graphic._postDraw]]\r\n */\r\nclass Graphic {\r\n    isStale() {\r\n        return this._transformStale;\r\n    }\r\n    /**\r\n     * Gets or sets the flipHorizontal, which will flip the graphic horizontally (across the y axis)\r\n     */\r\n    get flipHorizontal() {\r\n        return this._flipHorizontal;\r\n    }\r\n    set flipHorizontal(value) {\r\n        this._flipHorizontal = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the flipVertical, which will flip the graphic vertically (across the x axis)\r\n     */\r\n    get flipVertical() {\r\n        return this._flipVertical;\r\n    }\r\n    set flipVertical(value) {\r\n        this._flipVertical = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the rotation of the graphic\r\n     */\r\n    get rotation() {\r\n        return this._rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._rotation = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the scale of the graphic, this affects the width and\r\n     */\r\n    get scale() {\r\n        return this._scale;\r\n    }\r\n    set scale(value) {\r\n        this._scale = watch(value, () => {\r\n            this._transformStale = true;\r\n        });\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the origin of the graphic, if not set the center of the graphic is the origin\r\n     */\r\n    get origin() {\r\n        return this._origin;\r\n    }\r\n    set origin(value) {\r\n        this._origin = watch(value, () => {\r\n            this._transformStale = true;\r\n        });\r\n        this._transformStale = true;\r\n    }\r\n    constructor(options) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        this.id = Graphic._ID++;\r\n        this.transform = AffineMatrix.identity();\r\n        this.tint = null;\r\n        this._transformStale = true;\r\n        /**\r\n         * Gets or sets wether to show debug information about the graphic\r\n         */\r\n        this.showDebug = false;\r\n        this._flipHorizontal = false;\r\n        this._flipVertical = false;\r\n        this._rotation = 0;\r\n        /**\r\n         * Gets or sets the opacity of the graphic, 0 is transparent, 1 is solid (opaque).\r\n         */\r\n        this.opacity = 1;\r\n        this._scale = Vector.One;\r\n        this._origin = null;\r\n        this._width = 0;\r\n        this._height = 0;\r\n        if (options) {\r\n            this.origin = (_a = options.origin) !== null && _a !== void 0 ? _a : this.origin;\r\n            this.flipHorizontal = (_b = options.flipHorizontal) !== null && _b !== void 0 ? _b : this.flipHorizontal;\r\n            this.flipVertical = (_c = options.flipVertical) !== null && _c !== void 0 ? _c : this.flipVertical;\r\n            this.rotation = (_d = options.rotation) !== null && _d !== void 0 ? _d : this.rotation;\r\n            this.opacity = (_e = options.opacity) !== null && _e !== void 0 ? _e : this.opacity;\r\n            this.scale = (_f = options.scale) !== null && _f !== void 0 ? _f : this.scale;\r\n        }\r\n    }\r\n    cloneGraphicOptions() {\r\n        return {\r\n            origin: this.origin ? this.origin.clone() : null,\r\n            flipHorizontal: this.flipHorizontal,\r\n            flipVertical: this.flipVertical,\r\n            rotation: this.rotation,\r\n            opacity: this.opacity,\r\n            scale: this.scale ? this.scale.clone() : null\r\n        };\r\n    }\r\n    /**\r\n     * Gets or sets the width of the graphic (always positive)\r\n     */\r\n    get width() {\r\n        return Math.abs(this._width * this.scale.x);\r\n    }\r\n    /**\r\n     * Gets or sets the height of the graphic (always positive)\r\n     */\r\n    get height() {\r\n        return Math.abs(this._height * this.scale.y);\r\n    }\r\n    set width(value) {\r\n        this._width = value;\r\n        this._transformStale = true;\r\n    }\r\n    set height(value) {\r\n        this._height = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets a copy of the bounds in pixels occupied by the graphic on the the screen. This includes scale.\r\n     */\r\n    get localBounds() {\r\n        return BoundingBox.fromDimension(this.width, this.height, Vector.Zero);\r\n    }\r\n    /**\r\n     * Draw the whole graphic to the context including transform\r\n     * @param ex The excalibur graphics context\r\n     * @param x\r\n     * @param y\r\n     */\r\n    draw(ex, x, y) {\r\n        this._preDraw(ex, x, y);\r\n        this._drawImage(ex, 0, 0);\r\n        this._postDraw(ex);\r\n    }\r\n    /**\r\n     * Apply affine transformations to the graphics context to manipulate the graphic before [[Graphic._drawImage]]\r\n     * @param ex\r\n     * @param x\r\n     * @param y\r\n     */\r\n    _preDraw(ex, x, y) {\r\n        ex.save();\r\n        ex.translate(x, y);\r\n        if (this._transformStale) {\r\n            this.transform.reset();\r\n            this.transform.scale(Math.abs(this.scale.x), Math.abs(this.scale.y));\r\n            this._rotate(this.transform);\r\n            this._flip(this.transform);\r\n            this._transformStale = false;\r\n        }\r\n        ex.multiply(this.transform);\r\n        // it is important to multiply alphas so graphics respect the current context\r\n        ex.opacity = ex.opacity * this.opacity;\r\n        if (this.tint) {\r\n            ex.tint = this.tint;\r\n        }\r\n    }\r\n    _rotate(ex) {\r\n        var _a;\r\n        const scaleDirX = this.scale.x > 0 ? 1 : -1;\r\n        const scaleDirY = this.scale.y > 0 ? 1 : -1;\r\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : vec(this.width / 2, this.height / 2);\r\n        ex.translate(origin.x, origin.y);\r\n        ex.rotate(this.rotation);\r\n        // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\r\n        ex.scale(scaleDirX, scaleDirY);\r\n        ex.translate(-origin.x, -origin.y);\r\n    }\r\n    _flip(ex) {\r\n        if (this.flipHorizontal) {\r\n            ex.translate(this.width / this.scale.x, 0);\r\n            ex.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ex.translate(0, this.height / this.scale.y);\r\n            ex.scale(1, -1);\r\n        }\r\n    }\r\n    /**\r\n     * Apply any additional work after [[Graphic._drawImage]] and restore the context state.\r\n     * @param ex\r\n     */\r\n    _postDraw(ex) {\r\n        if (this.showDebug) {\r\n            ex.debug.drawRect(0, 0, this.width, this.height);\r\n        }\r\n        ex.restore();\r\n    }\r\n}\r\nGraphic._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/Sprite.ts\n\r\n\r\nclass Sprite extends Graphic {\r\n    static from(image) {\r\n        return new Sprite({\r\n            image: image\r\n        });\r\n    }\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this._logger = Logger.getInstance();\r\n        this._dirty = true;\r\n        this._logNotLoadedWarning = false;\r\n        this.image = options.image;\r\n        const { width, height } = options;\r\n        this.sourceView = (_a = options.sourceView) !== null && _a !== void 0 ? _a : { x: 0, y: 0, width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\r\n        this.destSize = (_b = options.destSize) !== null && _b !== void 0 ? _b : { width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\r\n        this._updateSpriteDimensions();\r\n        this.image.ready.then(() => {\r\n            this._updateSpriteDimensions();\r\n        });\r\n    }\r\n    get width() {\r\n        return Math.abs(this.destSize.width * this.scale.x);\r\n    }\r\n    get height() {\r\n        return Math.abs(this.destSize.height * this.scale.y);\r\n    }\r\n    set width(newWidth) {\r\n        newWidth /= Math.abs(this.scale.x);\r\n        this.destSize.width = newWidth;\r\n        super.width = Math.ceil(this.destSize.width);\r\n    }\r\n    set height(newHeight) {\r\n        newHeight /= Math.abs(this.scale.y);\r\n        this.destSize.height = newHeight;\r\n        super.height = Math.ceil(this.destSize.height);\r\n    }\r\n    _updateSpriteDimensions() {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        const { width: nativeWidth, height: nativeHeight } = this.image;\r\n        // This code uses || to avoid 0's\r\n        // If the source is not specified, use the native dimension\r\n        this.sourceView.width = ((_a = this.sourceView) === null || _a === void 0 ? void 0 : _a.width) || nativeWidth;\r\n        this.sourceView.height = ((_b = this.sourceView) === null || _b === void 0 ? void 0 : _b.height) || nativeHeight;\r\n        // If the destination is not specified, use the source if specified, then native\r\n        this.destSize.width = ((_c = this.destSize) === null || _c === void 0 ? void 0 : _c.width) || ((_d = this.sourceView) === null || _d === void 0 ? void 0 : _d.width) || nativeWidth;\r\n        this.destSize.height = ((_e = this.destSize) === null || _e === void 0 ? void 0 : _e.height) || ((_f = this.sourceView) === null || _f === void 0 ? void 0 : _f.height) || nativeHeight;\r\n        this.width = Math.ceil(this.destSize.width) * this.scale.x;\r\n        this.height = Math.ceil(this.destSize.height) * this.scale.y;\r\n    }\r\n    _preDraw(ex, x, y) {\r\n        if (this.image.isLoaded() && this._dirty) {\r\n            this._dirty = false;\r\n            this._updateSpriteDimensions();\r\n        }\r\n        super._preDraw(ex, x, y);\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        if (this.image.isLoaded()) {\r\n            ex.drawImage(this.image.image, this.sourceView.x, this.sourceView.y, this.sourceView.width, this.sourceView.height, x, y, this.destSize.width, this.destSize.height);\r\n        }\r\n        else {\r\n            if (!this._logNotLoadedWarning) {\r\n                this._logger.warn(`ImageSource ${this.image.path}` +\r\n                    ` is not yet loaded and won't be drawn. Please call .load() or include in a Loader.\\n\\n` +\r\n                    `Read https://excaliburjs.com/docs/imagesource for more information.`);\r\n            }\r\n            this._logNotLoadedWarning = true;\r\n        }\r\n    }\r\n    clone() {\r\n        return new Sprite({\r\n            image: this.image,\r\n            sourceView: { ...this.sourceView },\r\n            destSize: { ...this.destSize },\r\n            ...this.cloneGraphicOptions()\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Filtering.ts\n/**\r\n * Describes the different image filtering modes\r\n */\r\nvar ImageFiltering;\r\n(function (ImageFiltering) {\r\n    /**\r\n     * Pixel is useful when you do not want smoothing aka antialiasing applied to your graphics.\r\n     *\r\n     * Useful for Pixel art aesthetics.\r\n     */\r\n    ImageFiltering[\"Pixel\"] = \"Pixel\";\r\n    /**\r\n     * Blended is useful when you have high resolution artwork and would like it blended and smoothed\r\n     */\r\n    ImageFiltering[\"Blended\"] = \"Blended\";\r\n})(ImageFiltering || (ImageFiltering = {}));\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/texture-loader.ts\n\r\n\r\n/**\r\n * Manages loading image sources into webgl textures, a unique id is associated with all sources\r\n */\r\nclass TextureLoader {\r\n    constructor(gl) {\r\n        this._textureMap = new Map();\r\n        this._gl = gl;\r\n        TextureLoader._MAX_TEXTURE_SIZE = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n    }\r\n    /**\r\n     * Get the WebGL Texture from a source image\r\n     * @param image\r\n     */\r\n    get(image) {\r\n        return this._textureMap.get(image);\r\n    }\r\n    /**\r\n     * Returns whether a source image has been loaded as a texture\r\n     * @param image\r\n     */\r\n    has(image) {\r\n        return this._textureMap.has(image);\r\n    }\r\n    /**\r\n     * Loads a graphic into webgl and returns it's texture info, a webgl context must be previously registered\r\n     * @param image Source graphic\r\n     * @param filtering {ImageFiltering} The ImageFiltering mode to apply to the loaded texture\r\n     * @param forceUpdate Optionally force a texture to be reloaded, useful if the source graphic has changed\r\n     */\r\n    load(image, filtering, forceUpdate = false) {\r\n        // Ignore loading if webgl is not registered\r\n        const gl = this._gl;\r\n        if (!gl) {\r\n            return null;\r\n        }\r\n        let tex = null;\r\n        // If reuse the texture if it's from the same source\r\n        if (this.has(image)) {\r\n            tex = this.get(image);\r\n        }\r\n        // Update existing webgl texture and return early\r\n        if (tex) {\r\n            if (forceUpdate) {\r\n                gl.bindTexture(gl.TEXTURE_2D, tex);\r\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n            }\r\n            return tex;\r\n        }\r\n        // No texture exists create a new one\r\n        tex = gl.createTexture();\r\n        TextureLoader.checkImageSizeSupportedAndLog(image);\r\n        gl.bindTexture(gl.TEXTURE_2D, tex);\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        // NEAREST for pixel art, LINEAR for hi-res\r\n        const filterMode = filtering !== null && filtering !== void 0 ? filtering : TextureLoader.filtering;\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n        this._textureMap.set(image, tex);\r\n        return tex;\r\n    }\r\n    delete(image) {\r\n        // Ignore loading if webgl is not registered\r\n        const gl = this._gl;\r\n        if (!gl) {\r\n            return null;\r\n        }\r\n        let tex = null;\r\n        if (this.has(image)) {\r\n            tex = this.get(image);\r\n            gl.deleteTexture(tex);\r\n        }\r\n    }\r\n    /**\r\n     * Takes an image and returns if it meets size criteria for hardware\r\n     * @param image\r\n     * @returns if the image will be supported at runtime\r\n     */\r\n    static checkImageSizeSupportedAndLog(image) {\r\n        var _a;\r\n        const originalSrc = (_a = image.dataset.originalSrc) !== null && _a !== void 0 ? _a : 'internal canvas bitmap';\r\n        if (image.width > TextureLoader._MAX_TEXTURE_SIZE || image.height > TextureLoader._MAX_TEXTURE_SIZE) {\r\n            TextureLoader._LOGGER.error(`The image [${originalSrc}] provided to Excalibur is too large for the device's maximum texture size of ` +\r\n                `(${TextureLoader._MAX_TEXTURE_SIZE}x${TextureLoader._MAX_TEXTURE_SIZE}) please resize to an image `\r\n                + `for excalibur to render properly.\\n\\nImages will likely render as black rectangles.\\n\\n` +\r\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\r\n            return false;\r\n        }\r\n        else if (image.width > 4096 || image.height > 4096) {\r\n            // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits\r\n            TextureLoader._LOGGER.warn(`The image [${originalSrc}] provided to excalibur is too large may not work on all mobile devices, ` +\r\n                `it is recommended you resize images to a maximum (4096x4096).\\n\\n` +\r\n                `Images will likely render as black rectangles on some mobile platforms.\\n\\n` +\r\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nTextureLoader._LOGGER = Logger.getInstance();\r\n/**\r\n * Sets the default filtering for the Excalibur texture loader, default [[ImageFiltering.Blended]]\r\n */\r\nTextureLoader.filtering = ImageFiltering.Blended;\r\nTextureLoader._MAX_TEXTURE_SIZE = 4096;\r\n\n;// CONCATENATED MODULE: ./Graphics/ImageSource.ts\n\r\n\r\n\r\n\r\n\r\nclass ImageSource {\r\n    /**\r\n     * The original size of the source image in pixels\r\n     */\r\n    get width() {\r\n        return this.image.naturalWidth;\r\n    }\r\n    /**\r\n     * The original height of the source image in pixels\r\n     */\r\n    get height() {\r\n        return this.image.naturalHeight;\r\n    }\r\n    /**\r\n     * Returns true if the Texture is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    isLoaded() {\r\n        if (!this._src) {\r\n            // this boosts speed of access\r\n            this._src = this.data.src;\r\n        }\r\n        return !!this._src;\r\n    }\r\n    get image() {\r\n        return this.data;\r\n    }\r\n    /**\r\n     * The path to the image, can also be a data url like 'data:image/'\r\n     * @param path {string} Path to the image resource relative from the HTML document hosting the game, or absolute\r\n     * @param bustCache {boolean} Should excalibur add a cache busting querystring?\r\n     * @param filtering {ImageFiltering} Optionally override the image filtering set by [[EngineOptions.antialiasing]]\r\n     */\r\n    constructor(path, bustCache = false, filtering) {\r\n        this.path = path;\r\n        this._logger = Logger.getInstance();\r\n        /**\r\n         * Access to the underlying html image element\r\n         */\r\n        this.data = new Image();\r\n        this._readyFuture = new Future();\r\n        /**\r\n         * Promise the resolves when the image is loaded and ready for use, does not initiate loading\r\n         */\r\n        this.ready = this._readyFuture.promise;\r\n        this._resource = new Resource(path, 'blob', bustCache);\r\n        this.filtering = filtering;\r\n        if (path.endsWith('.svg') || path.endsWith('.gif')) {\r\n            this._logger.warn(`Image type is not fully supported, you may have mixed results ${path}. Fully supported: jpg, bmp, and png`);\r\n        }\r\n    }\r\n    /**\r\n     * Should excalibur add a cache busting querystring? By default false.\r\n     * Must be set before loading\r\n     */\r\n    get bustCache() {\r\n        return this._resource.bustCache;\r\n    }\r\n    set bustCache(val) {\r\n        this._resource.bustCache = val;\r\n    }\r\n    /**\r\n     * Begins loading the image and returns a promise that resolves when the image is loaded\r\n     */\r\n    async load() {\r\n        if (this.isLoaded()) {\r\n            return this.data;\r\n        }\r\n        try {\r\n            // Load base64 or blob if needed\r\n            let url;\r\n            if (!this.path.includes('data:image/')) {\r\n                const blob = await this._resource.load();\r\n                url = URL.createObjectURL(blob);\r\n            }\r\n            else {\r\n                url = this.path;\r\n            }\r\n            // Decode the image\r\n            const image = new Image();\r\n            // Use Image.onload over Image.decode()\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=1055828#c7\r\n            // Otherwise chrome will throw still Image.decode() failures for large textures\r\n            const loadedFuture = new Future();\r\n            image.onload = () => loadedFuture.resolve();\r\n            image.src = url;\r\n            image.setAttribute('data-original-src', this.path);\r\n            await loadedFuture.promise;\r\n            // Set results\r\n            // We defer loading the texture into webgl until the first draw that way we avoid a singleton\r\n            // and for the multi-engine case the texture needs to be created in EACH webgl context to work\r\n            // See image-renderer.ts draw()\r\n            this.data = image;\r\n            // emit warning if potentially too big\r\n            TextureLoader.checkImageSizeSupportedAndLog(this.data);\r\n        }\r\n        catch (error) {\r\n            throw `Error loading ImageSource from path '${this.path}' with error [${error.message}]`;\r\n        }\r\n        // Do a bad thing to pass the filtering as an attribute\r\n        this.data.setAttribute('filtering', this.filtering);\r\n        // todo emit complete\r\n        this._readyFuture.resolve(this.data);\r\n        return this.data;\r\n    }\r\n    /**\r\n     * Build a sprite from this ImageSource\r\n     */\r\n    toSprite() {\r\n        return Sprite.from(this);\r\n    }\r\n    /**\r\n     * Unload images from memory\r\n     */\r\n    unload() {\r\n        this.data = new Image();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/SpriteSheet.ts\n\r\n\r\n/**\r\n * Represents a collection of sprites from a source image with some organization in a grid\r\n */\r\nclass SpriteSheet {\r\n    /**\r\n     * Build a new sprite sheet from a list of sprites\r\n     *\r\n     * Use [[SpriteSheet.fromImageSource]] to create a SpriteSheet from an [[ImageSource]] organized in a grid\r\n     * @param options\r\n     */\r\n    constructor(options) {\r\n        this._logger = Logger.getInstance();\r\n        this.sprites = [];\r\n        const { sprites, rows, columns } = options;\r\n        this.sprites = sprites;\r\n        this.rows = rows !== null && rows !== void 0 ? rows : 1;\r\n        this.columns = columns !== null && columns !== void 0 ? columns : this.sprites.length;\r\n    }\r\n    /**\r\n     * Find a sprite by their x/y position in the SpriteSheet, for example `getSprite(0, 0)` is the [[Sprite]] in the top-left\r\n     * @param x\r\n     * @param y\r\n     */\r\n    getSprite(x, y) {\r\n        if (x >= this.columns || x < 0) {\r\n            this._logger.warn(`No sprite exists in the SpriteSheet at (${x}, ${y}), x: ${x} should be between 0 and ${this.columns - 1}`);\r\n            return null;\r\n        }\r\n        if (y >= this.rows || y < 0) {\r\n            this._logger.warn(`No sprite exists in the SpriteSheet at (${x}, ${y}), y: ${y} should be between 0 and ${this.rows - 1}`);\r\n            return null;\r\n        }\r\n        const spriteIndex = x + y * this.columns;\r\n        return this.sprites[spriteIndex];\r\n    }\r\n    /**\r\n     * Create a sprite sheet from a sparse set of [[SourceView]] rectangles\r\n     * @param options\r\n     */\r\n    static fromImageSourceWithSourceViews(options) {\r\n        const sprites = options.sourceViews.map(sourceView => {\r\n            return new Sprite({\r\n                image: options.image,\r\n                sourceView\r\n            });\r\n        });\r\n        return new SpriteSheet({ sprites });\r\n    }\r\n    /**\r\n     * Create a SpriteSheet from an [[ImageSource]] organized in a grid\r\n     *\r\n     * Example:\r\n     * ```\r\n     * const spriteSheet = SpriteSheet.fromImageSource({\r\n     *   image: imageSource,\r\n     *   grid: {\r\n     *     rows: 5,\r\n     *     columns: 2,\r\n     *     spriteWidth: 32, // pixels\r\n     *     spriteHeight: 32 // pixels\r\n     *   },\r\n     *   // Optionally specify spacing\r\n     *   spacing: {\r\n     *     // pixels from the top left to start the sprite parsing\r\n     *     originOffset: {\r\n     *       x: 5,\r\n     *       y: 5\r\n     *     },\r\n     *     // pixels between each sprite while parsing\r\n     *     margin: {\r\n     *       x: 1,\r\n     *       y: 1\r\n     *     }\r\n     *   }\r\n     * })\r\n     * ```\r\n     *\r\n     * @param options\r\n     */\r\n    static fromImageSource(options) {\r\n        var _a;\r\n        const sprites = [];\r\n        options.spacing = (_a = options.spacing) !== null && _a !== void 0 ? _a : {};\r\n        const { image, grid: { rows, columns: cols, spriteWidth, spriteHeight }, spacing: { originOffset, margin } } = options;\r\n        const offsetDefaults = { x: 0, y: 0, ...originOffset };\r\n        const marginDefaults = { x: 0, y: 0, ...margin };\r\n        for (let x = 0; x < cols; x++) {\r\n            for (let y = 0; y < rows; y++) {\r\n                sprites[x + y * cols] = new Sprite({\r\n                    image: image,\r\n                    sourceView: {\r\n                        x: x * spriteWidth + marginDefaults.x * x + offsetDefaults.x,\r\n                        y: y * spriteHeight + marginDefaults.y * y + offsetDefaults.y,\r\n                        width: spriteWidth,\r\n                        height: spriteHeight\r\n                    },\r\n                    destSize: { height: spriteHeight, width: spriteWidth }\r\n                });\r\n            }\r\n        }\r\n        return new SpriteSheet({\r\n            sprites: sprites,\r\n            rows: rows,\r\n            columns: cols\r\n        });\r\n    }\r\n    clone() {\r\n        return new SpriteSheet({\r\n            sprites: this.sprites.map(sprite => sprite.clone()),\r\n            rows: this.rows,\r\n            columns: this.columns\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/SpriteFont.ts\n\r\n\r\n\r\n\r\nclass SpriteFont extends Graphic {\r\n    constructor(options) {\r\n        super(options);\r\n        this._text = '';\r\n        this.alphabet = '';\r\n        this.shadow = null;\r\n        this.caseInsensitive = false;\r\n        this.spacing = 0;\r\n        this._logger = Logger.getInstance();\r\n        this._alreadyWarnedAlphabet = false;\r\n        this._alreadyWarnedSpriteSheet = false;\r\n        const { alphabet, spriteSheet, caseInsensitive, spacing, shadow } = options;\r\n        this.alphabet = alphabet;\r\n        this.spriteSheet = spriteSheet;\r\n        this.caseInsensitive = caseInsensitive !== null && caseInsensitive !== void 0 ? caseInsensitive : this.caseInsensitive;\r\n        this.spacing = spacing !== null && spacing !== void 0 ? spacing : this.spacing;\r\n        this.shadow = shadow !== null && shadow !== void 0 ? shadow : this.shadow;\r\n    }\r\n    _getCharacterSprites(text) {\r\n        const results = [];\r\n        // handle case insensitive\r\n        const textToRender = this.caseInsensitive ? text.toLocaleLowerCase() : text;\r\n        const alphabet = this.caseInsensitive ? this.alphabet.toLocaleLowerCase() : this.alphabet;\r\n        // for each letter in text\r\n        for (let letterIndex = 0; letterIndex < textToRender.length; letterIndex++) {\r\n            // find the sprite index in alphabet , if there is an error pick the first\r\n            const letter = textToRender[letterIndex];\r\n            let spriteIndex = alphabet.indexOf(letter);\r\n            if (spriteIndex === -1) {\r\n                spriteIndex = 0;\r\n                if (!this._alreadyWarnedAlphabet) {\r\n                    this._logger.warn(`SpriteFont - Cannot find letter '${letter}' in configured alphabet '${alphabet}'.`);\r\n                    this._logger.warn('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\r\n                    this._alreadyWarnedAlphabet = true;\r\n                }\r\n            }\r\n            const letterSprite = this.spriteSheet.sprites[spriteIndex];\r\n            if (letterSprite) {\r\n                results.push(letterSprite);\r\n            }\r\n            else {\r\n                if (!this._alreadyWarnedSpriteSheet) {\r\n                    this._logger.warn(`SpriteFont - Cannot find sprite for '${letter}' at index '${spriteIndex}' in configured SpriteSheet`);\r\n                    this._logger.warn('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\r\n                    this._alreadyWarnedSpriteSheet = true;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    measureText(text, maxWidth) {\r\n        const lines = this._getLinesFromText(text, maxWidth);\r\n        const maxWidthLine = lines.reduce((a, b) => {\r\n            return a.length > b.length ? a : b;\r\n        });\r\n        const sprites = this._getCharacterSprites(maxWidthLine);\r\n        let width = 0;\r\n        let height = 0;\r\n        for (const sprite of sprites) {\r\n            width += sprite.width + this.spacing;\r\n            height = Math.max(height, sprite.height);\r\n        }\r\n        return BoundingBox.fromDimension(width, height * lines.length, Vector.Zero);\r\n    }\r\n    _drawImage(ex, x, y, maxWidth) {\r\n        let xCursor = 0;\r\n        let yCursor = 0;\r\n        let height = 0;\r\n        const lines = this._getLinesFromText(this._text, maxWidth);\r\n        for (const line of lines) {\r\n            for (const sprite of this._getCharacterSprites(line)) {\r\n                // draw it in the right spot and increase the cursor by sprite width\r\n                sprite.draw(ex, x + xCursor, y + yCursor);\r\n                xCursor += sprite.width + this.spacing;\r\n                height = Math.max(height, sprite.height);\r\n            }\r\n            xCursor = 0;\r\n            yCursor += height;\r\n        }\r\n    }\r\n    render(ex, text, _color, x, y, maxWidth) {\r\n        // SpriteFont doesn't support _color, yet...\r\n        this._text = text;\r\n        const bounds = this.measureText(text, maxWidth);\r\n        this.width = bounds.width;\r\n        this.height = bounds.height;\r\n        if (this.shadow) {\r\n            ex.save();\r\n            ex.translate(this.shadow.offset.x, this.shadow.offset.y);\r\n            this._preDraw(ex, x, y);\r\n            this._drawImage(ex, 0, 0, maxWidth);\r\n            this._postDraw(ex);\r\n            ex.restore();\r\n        }\r\n        this._preDraw(ex, x, y);\r\n        this._drawImage(ex, 0, 0, maxWidth);\r\n        this._postDraw(ex);\r\n    }\r\n    clone() {\r\n        return new SpriteFont({\r\n            alphabet: this.alphabet,\r\n            spriteSheet: this.spriteSheet,\r\n            spacing: this.spacing\r\n        });\r\n    }\r\n    _getLinesFromText(text, maxWidth) {\r\n        if (this._cachedText === text && this._cachedRenderWidth === maxWidth) {\r\n            return this._cachedLines;\r\n        }\r\n        const lines = text.split('\\n');\r\n        if (maxWidth == null) {\r\n            return lines;\r\n        }\r\n        // If the current line goes past the maxWidth, append a new line without modifying the underlying text.\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let line = lines[i];\r\n            let newLine = '';\r\n            // Note: we subtract the spacing to counter the initial padding on the left side.\r\n            if (this.measureText(line).width > maxWidth) {\r\n                while (this.measureText(line).width > maxWidth) {\r\n                    newLine = line[line.length - 1] + newLine;\r\n                    line = line.slice(0, -1); // Remove last character from line\r\n                }\r\n                // Update the array with our new values\r\n                lines[i] = line;\r\n                lines[i + 1] = newLine;\r\n            }\r\n        }\r\n        this._cachedText = text;\r\n        this._cachedLines = lines;\r\n        this._cachedRenderWidth = maxWidth;\r\n        return lines;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/debug-font.png\n/* harmony default export */ const debug_font = (\"data:image/png;base64,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\");\n;// CONCATENATED MODULE: ./Graphics/Context/debug-text.ts\n\r\n\r\n/**\r\n * Internal debugtext helper\r\n */\r\nclass DebugText {\r\n    constructor() {\r\n        /**\r\n         * base64 font\r\n         */\r\n        this.fontSheet = debug_font;\r\n        this.size = 16;\r\n        this.load();\r\n    }\r\n    load() {\r\n        this._imageSource = new ImageSource(this.fontSheet);\r\n        return this._imageSource.load().then(() => {\r\n            this._spriteSheet = SpriteSheet.fromImageSource({\r\n                image: this._imageSource,\r\n                grid: {\r\n                    rows: 3,\r\n                    columns: 16,\r\n                    spriteWidth: 16,\r\n                    spriteHeight: 16\r\n                }\r\n            });\r\n            this._spriteFont = new SpriteFont({\r\n                alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!\\'&.\"?-()+ ',\r\n                caseInsensitive: true,\r\n                spriteSheet: this._spriteSheet,\r\n                spacing: -6\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Writes debug text using the built in sprint font\r\n     * @param ctx\r\n     * @param text\r\n     * @param pos\r\n     */\r\n    write(ctx, text, pos) {\r\n        if (this._imageSource.isLoaded()) {\r\n            this._spriteFont.render(ctx, text, null, pos.x, pos.y);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/render-source.ts\nclass RenderSource {\r\n    constructor(_gl, _texture) {\r\n        this._gl = _gl;\r\n        this._texture = _texture;\r\n    }\r\n    use() {\r\n        const gl = this._gl;\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\r\n    }\r\n    disable() {\r\n        const gl = this._gl;\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/render-target.ts\n\r\nclass RenderTarget {\r\n    constructor(options) {\r\n        this.width = options.width;\r\n        this.height = options.height;\r\n        this._gl = options.gl;\r\n        this._setupFramebuffer();\r\n    }\r\n    setResolution(width, height) {\r\n        const gl = this._gl;\r\n        this.width = width;\r\n        this.height = height;\r\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n    }\r\n    get frameBuffer() {\r\n        return this._frameBuffer;\r\n    }\r\n    get frameTexture() {\r\n        return this._frameTexture;\r\n    }\r\n    _setupFramebuffer() {\r\n        // Allocates frame buffer\r\n        const gl = this._gl;\r\n        this._frameTexture = gl.createTexture();\r\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n        // set the filtering so we don't need mips\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        // attach the texture as the first color attachment\r\n        const attachmentPoint = gl.COLOR_ATTACHMENT0;\r\n        // After this bind all draw calls will draw to this framebuffer texture\r\n        this._frameBuffer = gl.createFramebuffer();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\r\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, this._frameTexture, 0);\r\n        // Reset after initialized\r\n        this.disable();\r\n    }\r\n    toRenderSource() {\r\n        const source = new RenderSource(this._gl, this._frameTexture);\r\n        return source;\r\n    }\r\n    /**\r\n     * When called, all drawing gets redirected to this render target\r\n     */\r\n    use() {\r\n        const gl = this._gl;\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\r\n        // very important to set the viewport to the size of the framebuffer texture\r\n        gl.viewport(0, 0, this.width, this.height);\r\n    }\r\n    /**\r\n     * When called, all drawing is sent back to the canvas\r\n     */\r\n    disable() {\r\n        const gl = this._gl;\r\n        // passing null switches rendering back to the canvas\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/line-renderer/line-vertex.glsl\n/* harmony default export */ const line_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\nin vec4 a_color;\\r\\n\\r\\nout lowp vec4 v_color;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Passthrough the color\\r\\n   v_color = a_color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/line-renderer/line-fragment.glsl\n/* harmony default export */ const line_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// Color\\r\\nin lowp vec4 v_color;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  fragColor = v_color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/webgl-util.ts\n/**\r\n * Return the size of the GlType in bytes\r\n * @param gl\r\n * @param type\r\n */\r\nfunction getGlTypeSizeBytes(gl, type) {\r\n    switch (type) {\r\n        case gl.FLOAT:\r\n            return 4;\r\n        case gl.SHORT:\r\n            return 2;\r\n        case gl.UNSIGNED_SHORT:\r\n            return 2;\r\n        case gl.BYTE:\r\n            return 1;\r\n        case gl.UNSIGNED_BYTE:\r\n            return 1;\r\n        default:\r\n            return 1;\r\n    }\r\n}\r\n/**\r\n * Based on the type return the number of attribute components\r\n *\r\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\r\n * @param gl\r\n * @param type\r\n */\r\nfunction getAttributeComponentSize(gl, type) {\r\n    switch (type) {\r\n        case gl.LOW_FLOAT:\r\n        case gl.HIGH_FLOAT:\r\n        case gl.FLOAT:\r\n            return 1;\r\n        case gl.FLOAT_VEC2:\r\n            return 2;\r\n        case gl.FLOAT_VEC3:\r\n            return 3;\r\n        case gl.FLOAT_VEC4:\r\n            return 4;\r\n        case gl.BYTE:\r\n            return 1;\r\n        case gl.UNSIGNED_BYTE:\r\n            return 1;\r\n        case gl.UNSIGNED_SHORT:\r\n        case gl.SHORT:\r\n            return 1;\r\n        default:\r\n            return 1;\r\n    }\r\n}\r\n/**\r\n * Based on the attribute return the corresponding supported attrib pointer type\r\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\r\n *\r\n * @param gl\r\n * @param type\r\n */\r\nfunction getAttributePointerType(gl, type) {\r\n    switch (type) {\r\n        case gl.LOW_FLOAT:\r\n        case gl.HIGH_FLOAT:\r\n        case gl.FLOAT:\r\n        case gl.FLOAT_VEC2:\r\n        case gl.FLOAT_VEC3:\r\n        case gl.FLOAT_VEC4:\r\n            return gl.FLOAT;\r\n        case gl.BYTE:\r\n            return gl.BYTE;\r\n        case gl.UNSIGNED_BYTE:\r\n            return gl.UNSIGNED_BYTE;\r\n        case gl.SHORT:\r\n            return gl.SHORT;\r\n        case gl.UNSIGNED_SHORT:\r\n            return gl.UNSIGNED_SHORT;\r\n        default:\r\n            return gl.FLOAT;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/shader.ts\n\r\n\r\nclass Shader {\r\n    get compiled() {\r\n        return this._compiled;\r\n    }\r\n    /**\r\n     * Create a shader program in excalibur\r\n     * @param options specify shader vertex and fragment source\r\n     */\r\n    constructor(options) {\r\n        this._logger = Logger.getInstance();\r\n        this.uniforms = {};\r\n        this.attributes = {};\r\n        this._compiled = false;\r\n        const { gl, vertexSource, fragmentSource } = options;\r\n        this._gl = gl;\r\n        this.vertexSource = vertexSource;\r\n        this.fragmentSource = fragmentSource;\r\n    }\r\n    /**\r\n     * Binds the shader program\r\n     */\r\n    use() {\r\n        const gl = this._gl;\r\n        gl.useProgram(this.program);\r\n        Shader._ACTIVE_SHADER_INSTANCE = this;\r\n    }\r\n    isCurrentlyBound() {\r\n        return Shader._ACTIVE_SHADER_INSTANCE === this;\r\n    }\r\n    /**\r\n     * Compile the current shader against a webgl context\r\n     */\r\n    compile() {\r\n        const gl = this._gl;\r\n        const vertexShader = this._compileShader(gl, this.vertexSource, gl.VERTEX_SHADER);\r\n        const fragmentShader = this._compileShader(gl, this.fragmentSource, gl.FRAGMENT_SHADER);\r\n        this.program = this._createProgram(gl, vertexShader, fragmentShader);\r\n        const attributes = this.getAttributes();\r\n        for (const attribute of attributes) {\r\n            this.attributes[attribute.name] = attribute;\r\n        }\r\n        const uniforms = this.getUniforms();\r\n        for (const uniform of uniforms) {\r\n            this.uniforms[uniform.name] = uniform;\r\n        }\r\n        this._compiled = true;\r\n        return this.program;\r\n    }\r\n    getUniforms() {\r\n        const gl = this._gl;\r\n        const uniformCount = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);\r\n        const uniforms = [];\r\n        for (let i = 0; i < uniformCount; i++) {\r\n            const uniform = gl.getActiveUniform(this.program, i);\r\n            const uniformLocation = gl.getUniformLocation(this.program, uniform.name);\r\n            uniforms.push({\r\n                name: uniform.name,\r\n                glType: uniform.type,\r\n                location: uniformLocation\r\n            });\r\n        }\r\n        return uniforms;\r\n    }\r\n    getAttributes() {\r\n        const gl = this._gl;\r\n        const attributeCount = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\r\n        const attributes = [];\r\n        for (let i = 0; i < attributeCount; i++) {\r\n            const attribute = gl.getActiveAttrib(this.program, i);\r\n            const attributeLocation = gl.getAttribLocation(this.program, attribute.name);\r\n            attributes.push({\r\n                name: attribute.name,\r\n                glType: getAttributePointerType(gl, attribute.type),\r\n                size: getAttributeComponentSize(gl, attribute.type),\r\n                location: attributeLocation,\r\n                normalized: false\r\n            });\r\n        }\r\n        return attributes;\r\n    }\r\n    /**\r\n     * Set a texture in a gpu texture slot\r\n     * @param slotNumber\r\n     * @param texture\r\n     */\r\n    setTexture(slotNumber, texture) {\r\n        const gl = this._gl;\r\n        gl.activeTexture(gl.TEXTURE0 + slotNumber);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    }\r\n    /**\r\n     * Set an integer uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformInt(name, value) {\r\n        this.setUniform('uniform1i', name, ~~value);\r\n    }\r\n    /**\r\n     * Set an integer uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformInt(name, value) {\r\n        return this.trySetUniform('uniform1i', name, ~~value);\r\n    }\r\n    /**\r\n     * Set an integer array uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformIntArray(name, value) {\r\n        this.setUniform('uniform1iv', name, value);\r\n    }\r\n    /**\r\n     * Set an integer array uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformIntArray(name, value) {\r\n        return this.trySetUniform('uniform1iv', name, value);\r\n    }\r\n    /**\r\n     * Set a boolean uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformBoolean(name, value) {\r\n        this.setUniform('uniform1i', name, value ? 1 : 0);\r\n    }\r\n    /**\r\n     * Set a boolean uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformBoolean(name, value) {\r\n        return this.trySetUniform('uniform1i', name, value ? 1 : 0);\r\n    }\r\n    /**\r\n     * Set a float uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloat(name, value) {\r\n        this.setUniform('uniform1f', name, value);\r\n    }\r\n    /**\r\n     * Set a float uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformFloat(name, value) {\r\n        return this.trySetUniform('uniform1f', name, value);\r\n    }\r\n    /**\r\n     * Set a float array uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloatArray(name, value) {\r\n        this.setUniform('uniform1fv', name, value);\r\n    }\r\n    /**\r\n     * Set a float array uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformFloatArray(name, value) {\r\n        return this.trySetUniform('uniform1fv', name, value);\r\n    }\r\n    /**\r\n     * Set a [[Vector]] uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloatVector(name, value) {\r\n        this.setUniform('uniform2f', name, value.x, value.y);\r\n    }\r\n    /**\r\n     * Set a [[Vector]] uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformFloatVector(name, value) {\r\n        return this.trySetUniform('uniform2f', name, value.x, value.y);\r\n    }\r\n    /**\r\n     * Set a [[Color]] uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloatColor(name, value) {\r\n        this.setUniform('uniform4f', name, value.r / 255, value.g / 255, value.b / 255, value.a);\r\n    }\r\n    /**\r\n     * Set a [[Color]] uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformFloatColor(name, value) {\r\n        return this.trySetUniform('uniform4f', name, value.r / 255, value.g / 255, value.b / 255, value.a);\r\n    }\r\n    /**\r\n     * Set an [[Matrix]] uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformMatrix(name, value) {\r\n        this.setUniform('uniformMatrix4fv', name, false, value.data);\r\n    }\r\n    /**\r\n     * Set an [[Matrix]] uniform for the current shader, WILL NOT THROW on error.\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    trySetUniformMatrix(name, value) {\r\n        return this.trySetUniform('uniformMatrix4fv', name, false, value.data);\r\n    }\r\n    /**\r\n     * Set any available uniform type in webgl\r\n     *\r\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\r\n     */\r\n    setUniform(uniformType, name, ...value) {\r\n        if (!this._compiled) {\r\n            throw Error(`Must compile shader before setting a uniform ${uniformType}:${name}`);\r\n        }\r\n        if (!this.isCurrentlyBound()) {\r\n            throw Error('Currently accessed shader instance is not the current active shader in WebGL,' +\r\n                ' must call `shader.use()` before setting uniforms');\r\n        }\r\n        const gl = this._gl;\r\n        const location = gl.getUniformLocation(this.program, name);\r\n        if (location) {\r\n            const args = [location, ...value];\r\n            this._gl[uniformType].apply(this._gl, args);\r\n        }\r\n        else {\r\n            throw Error(`Uniform ${uniformType}:${name} doesn\\'t exist or is not used in the shader source code,` +\r\n                ' unused uniforms are optimized away by most browsers');\r\n        }\r\n    }\r\n    /**\r\n     * Set any available uniform type in webgl. Will try to set the uniform, will return false if the uniform didn't exist,\r\n     * true if it was set.\r\n     *\r\n     * WILL NOT THROW on error\r\n     *\r\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\r\n     *\r\n     */\r\n    trySetUniform(uniformType, name, ...value) {\r\n        if (!this._compiled) {\r\n            this._logger.warn(`Must compile shader before setting a uniform ${uniformType}:${name}`);\r\n            return false;\r\n        }\r\n        if (!this.isCurrentlyBound()) {\r\n            this._logger.warn('Currently accessed shader instance is not the current active shader in WebGL,' +\r\n                ' must call `shader.use()` before setting uniforms');\r\n            return false;\r\n        }\r\n        const gl = this._gl;\r\n        const location = gl.getUniformLocation(this.program, name);\r\n        if (location) {\r\n            const args = [location, ...value];\r\n            this._gl[uniformType].apply(this._gl, args);\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _createProgram(gl, vertexShader, fragmentShader) {\r\n        const program = gl.createProgram();\r\n        if (program === null) {\r\n            throw Error('Could not create graphics shader program');\r\n        }\r\n        // attach the shaders.\r\n        gl.attachShader(program, vertexShader);\r\n        gl.attachShader(program, fragmentShader);\r\n        // link the program.\r\n        gl.linkProgram(program);\r\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n        if (!success) {\r\n            throw Error(`Could not link the program: [${gl.getProgramInfoLog(program)}]`);\r\n        }\r\n        return program;\r\n    }\r\n    _compileShader(gl, source, type) {\r\n        const typeName = gl.VERTEX_SHADER === type ? 'vertex' : 'fragment';\r\n        const shader = gl.createShader(type);\r\n        if (shader === null) {\r\n            throw Error(`Could not build shader: [${source}]`);\r\n        }\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n        if (!success) {\r\n            const errorInfo = gl.getShaderInfoLog(shader);\r\n            throw Error(`Could not compile ${typeName} shader:\\n\\n${errorInfo}${this._processSourceForError(source, errorInfo)}`);\r\n        }\r\n        return shader;\r\n    }\r\n    _processSourceForError(source, errorInfo) {\r\n        const lines = source.split('\\n');\r\n        const errorLineStart = errorInfo.search(/\\d:\\d/);\r\n        const errorLineEnd = errorInfo.indexOf(' ', errorLineStart);\r\n        const [_, error2] = errorInfo.slice(errorLineStart, errorLineEnd).split(':').map(v => Number(v));\r\n        for (let i = 0; i < lines.length; i++) {\r\n            lines[i] = `${i + 1}: ${lines[i]}${error2 === (i + 1) ? ' <----- ERROR!' : ''}`;\r\n        }\r\n        return '\\n\\nSource:\\n' + lines.join('\\n');\r\n    }\r\n}\r\nShader._ACTIVE_SHADER_INSTANCE = null;\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/vertex-buffer.ts\n/**\r\n * Helper around vertex buffer to simplify creating and uploading geometry\r\n *\r\n * Under the hood uses Float32Array\r\n */\r\nclass VertexBuffer {\r\n    constructor(options) {\r\n        /**\r\n         * If the vertices never change switching 'static' can be more efficient on the gpu\r\n         *\r\n         * Default is 'dynamic'\r\n         */\r\n        this.type = 'dynamic';\r\n        const { gl, size, type, data } = options;\r\n        this._gl = gl;\r\n        this.buffer = this._gl.createBuffer();\r\n        if (!data && !size) {\r\n            throw Error('Must either provide data or a size to the VertexBuffer');\r\n        }\r\n        if (!data) {\r\n            this.bufferData = new Float32Array(size);\r\n        }\r\n        else {\r\n            this.bufferData = data;\r\n        }\r\n        this.type = type !== null && type !== void 0 ? type : this.type;\r\n        // Allocate buffer\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\r\n    }\r\n    /**\r\n     * Bind this vertex buffer\r\n     */\r\n    bind() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n    }\r\n    /**\r\n     * Upload vertex buffer geometry to the GPU\r\n     */\r\n    upload(count) {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n        if (count) {\r\n            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.bufferData, 0, count);\r\n        }\r\n        else {\r\n            // TODO always use bufferSubData? need to perf test it\r\n            gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/vertex-layout.ts\n\r\n\r\n/**\r\n * Helper around creating vertex attributes in a given [[VertexBuffer]], this is useful for describing\r\n * the memory layout for your vertices inside a particular buffer\r\n *\r\n * Note: This helper assumes interleaved attributes in one [[VertexBuffer]], not many.\r\n *\r\n * Working with `gl.vertexAttribPointer` can be tricky, and this attempts to double check you\r\n */\r\nclass VertexLayout {\r\n    get vertexBuffer() {\r\n        return this._vertexBuffer;\r\n    }\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n    constructor(options) {\r\n        this._logger = Logger.getInstance();\r\n        this._layout = [];\r\n        this._attributes = [];\r\n        this._vertexTotalSizeBytes = 0;\r\n        const { gl, shader, vertexBuffer, attributes } = options;\r\n        this._gl = gl;\r\n        this._vertexBuffer = vertexBuffer;\r\n        this._attributes = attributes;\r\n        this._shader = shader;\r\n        if (shader) {\r\n            this.initialize();\r\n        }\r\n    }\r\n    /**\r\n     * Total number of bytes that the vertex will take up\r\n     */\r\n    get totalVertexSizeBytes() {\r\n        return this._vertexTotalSizeBytes;\r\n    }\r\n    set shader(shader) {\r\n        if (shader && this._shader !== shader) {\r\n            this._shader = shader;\r\n            this.initialize();\r\n        }\r\n    }\r\n    get shader() {\r\n        return this._shader;\r\n    }\r\n    /**\r\n     * Layouts need shader locations and must be bound to a shader\r\n     */\r\n    initialize() {\r\n        if (!this._shader) {\r\n            return;\r\n        }\r\n        if (!this._shader.compiled) {\r\n            throw Error('Shader not compiled, shader must be compiled before defining a vertex layout');\r\n        }\r\n        this._layout.length = 0;\r\n        const shaderAttributes = this._shader.attributes;\r\n        for (const attribute of this._attributes) {\r\n            const attrib = shaderAttributes[attribute[0]];\r\n            if (!attrib) {\r\n                throw Error(`The attribute named: ${attribute[0]} size ${attribute[1]}` +\r\n                    ` not found in the shader source code:\\n ${this._shader.vertexSource}`);\r\n            }\r\n            if (attrib.size !== attribute[1]) {\r\n                throw Error(`VertexLayout size definition for attribute: [${attribute[0]}, ${attribute[1]}],`\r\n                    + ` doesnt match shader source size ${attrib.size}:\\n ${this._shader.vertexSource}`);\r\n            }\r\n            this._layout.push(attrib);\r\n        }\r\n        // calc size\r\n        let componentsPerVertex = 0;\r\n        for (const vertAttribute of this._layout) {\r\n            const typeSize = getGlTypeSizeBytes(this._gl, vertAttribute.glType);\r\n            this._vertexTotalSizeBytes += typeSize * vertAttribute.size;\r\n            componentsPerVertex += vertAttribute.size;\r\n        }\r\n        if (this._vertexBuffer.bufferData.length % componentsPerVertex !== 0) {\r\n            this._logger.warn(`The vertex component size (${componentsPerVertex})  does divide evenly into the specified vertex buffer`\r\n                + ` (${this._vertexBuffer.bufferData.length})`);\r\n        }\r\n    }\r\n    /**\r\n     * Bind this layout with it's associated vertex buffer\r\n     *\r\n     * @param uploadBuffer Optionally indicate you wish to upload the buffer to the GPU associated with this layout\r\n     */\r\n    use(uploadBuffer = false, count) {\r\n        if (!this._shader) {\r\n            throw Error('No shader is associated with this vertex layout, a shader must be set');\r\n        }\r\n        const gl = this._gl;\r\n        if (!this._shader.isCurrentlyBound()) {\r\n            throw Error('Shader associated with this vertex layout is not active! Call shader.use() before layout.use()');\r\n        }\r\n        this._vertexBuffer.bind();\r\n        if (uploadBuffer) {\r\n            this._vertexBuffer.upload(count);\r\n        }\r\n        let offset = 0;\r\n        // TODO switch to VAOs if the extension is\r\n        for (const vert of this._layout) {\r\n            gl.vertexAttribPointer(vert.location, vert.size, vert.glType, vert.normalized, this.totalVertexSizeBytes, offset);\r\n            gl.enableVertexAttribArray(vert.location);\r\n            offset += getGlTypeSizeBytes(gl, vert.glType) * vert.size;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsDiagnostics.ts\nclass GraphicsDiagnostics {\r\n    static clear() {\r\n        GraphicsDiagnostics.DrawCallCount = 0;\r\n        GraphicsDiagnostics.DrawnImagesCount = 0;\r\n    }\r\n}\r\nGraphicsDiagnostics.DrawCallCount = 0;\r\nGraphicsDiagnostics.DrawnImagesCount = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/line-renderer/line-renderer.ts\n\r\n\r\n\r\n\r\nclass LineRenderer {\r\n    constructor() {\r\n        this.type = 'ex.line';\r\n        this.priority = 0;\r\n        this._maxLines = 10922;\r\n        this._vertexIndex = 0;\r\n        this._lineCount = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        this._shader = new Shader({\r\n            gl,\r\n            vertexSource: line_vertex,\r\n            fragmentSource: line_fragment\r\n        });\r\n        this._shader.compile();\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        this._vertexBuffer = new VertexBuffer({\r\n            gl,\r\n            size: 6 * 2 * this._maxLines,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            vertexBuffer: this._vertexBuffer,\r\n            shader: this._shader,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_color', 4]\r\n            ]\r\n        });\r\n    }\r\n    draw(start, end, color) {\r\n        // Force a render if the batch is full\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._lineCount++;\r\n        const transform = this._context.getTransform();\r\n        const finalStart = transform.multiply(start);\r\n        const finalEnd = transform.multiply(end);\r\n        const vertexBuffer = this._vertexBuffer.bufferData;\r\n        // Start\r\n        vertexBuffer[this._vertexIndex++] = finalStart.x;\r\n        vertexBuffer[this._vertexIndex++] = finalStart.y;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        // End\r\n        vertexBuffer[this._vertexIndex++] = finalEnd.x;\r\n        vertexBuffer[this._vertexIndex++] = finalEnd.y;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n    }\r\n    _isFull() {\r\n        if (this._lineCount >= this._maxLines) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._lineCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._lineCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        this._shader.use();\r\n        this._layout.use(true);\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        gl.drawArrays(gl.LINES, 0, this._lineCount * 2); // 2 verts per line\r\n        GraphicsDiagnostics.DrawnImagesCount += this._lineCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // reset\r\n        this._vertexIndex = 0;\r\n        this._lineCount = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/point-renderer/point-vertex.glsl\n/* harmony default export */ const point_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\nin vec4 a_color;\\r\\nin float a_size;\\r\\nout lowp vec4 v_color;\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n  gl_PointSize = a_size * 2.0;\\r\\n  v_color = a_color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/point-renderer/point-fragment.glsl\n/* harmony default export */ const point_fragment = (\"#version 300 es\\r\\n\\r\\nprecision mediump float;\\r\\nin lowp vec4 v_color;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  float r = 0.0, delta = 0.0, alpha = 1.0;\\r\\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\r\\n  r = dot(cxy, cxy);\\r\\n\\r\\n  delta = fwidth(r);\\r\\n  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\\r\\n  // \\\"premultiply\\\" the color by alpha\\r\\n  vec4 color = v_color;\\r\\n  color.a = color.a * alpha;\\r\\n  color.rgb = color.rgb * color.a;\\r\\n  fragColor = color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/point-renderer/point-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass PointRenderer {\r\n    constructor() {\r\n        this.type = 'ex.point';\r\n        this.priority = 0;\r\n        this._maxPoints = 10922;\r\n        this._pointCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        this._shader = new Shader({\r\n            gl,\r\n            vertexSource: point_vertex,\r\n            fragmentSource: point_fragment\r\n        });\r\n        this._shader.compile();\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            size: 7 * this._maxPoints,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_color', 4],\r\n                ['a_size', 1]\r\n            ]\r\n        });\r\n    }\r\n    draw(point, color, size) {\r\n        // Force a render if the batch is full\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._pointCount++;\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const snapToPixel = this._context.snapToPixel;\r\n        const finalPoint = transform.multiply(point);\r\n        if (snapToPixel) {\r\n            finalPoint.x = ~~(finalPoint.x + pixelSnapEpsilon);\r\n            finalPoint.y = ~~(finalPoint.y + pixelSnapEpsilon);\r\n        }\r\n        const vertexBuffer = this._buffer.bufferData;\r\n        vertexBuffer[this._vertexIndex++] = finalPoint.x;\r\n        vertexBuffer[this._vertexIndex++] = finalPoint.y;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a * opacity;\r\n        vertexBuffer[this._vertexIndex++] = size * Math.max(transform.getScaleX(), transform.getScaleY());\r\n    }\r\n    _isFull() {\r\n        if (this._pointCount >= this._maxPoints) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._pointCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._pointCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        this._shader.use();\r\n        this._layout.use(true);\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        gl.drawArrays(gl.POINTS, 0, this._pointCount);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._pointCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        this._pointCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/screen-pass-painter/screen-vertex.glsl\n/* harmony default export */ const screen_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\nin vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n  // Pass the texcoord to the fragment shader.\\r\\n  v_texcoord = a_texcoord;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/screen-pass-painter/screen-fragment.glsl\n/* harmony default export */ const screen_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// Passed in from the vertex shader.\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// The texture.\\r\\nuniform sampler2D u_texture;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n   fragColor = texture(u_texture, v_texcoord);\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/screen-pass-painter/screen-pass-painter.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * This is responsible for painting the entire screen during the render passes\r\n */\r\nclass ScreenPassPainter {\r\n    constructor(gl) {\r\n        this._gl = gl;\r\n        this._shader = new Shader({\r\n            gl,\r\n            vertexSource: screen_vertex,\r\n            fragmentSource: screen_fragment\r\n        });\r\n        this._shader.compile();\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            type: 'static',\r\n            // clip space quad + uv since we don't need a camera\r\n            data: new Float32Array([\r\n                -1, -1, 0, 0,\r\n                -1, 1, 0, 1,\r\n                1, -1, 1, 0,\r\n                1, -1, 1, 0,\r\n                -1, 1, 0, 1,\r\n                1, 1, 1, 1\r\n            ])\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_texcoord', 2]\r\n            ]\r\n        });\r\n        this._buffer.upload();\r\n    }\r\n    renderWithPostProcessor(postprocessor) {\r\n        const gl = this._gl;\r\n        postprocessor.getShader().use();\r\n        postprocessor.getLayout().use();\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n    renderToScreen() {\r\n        const gl = this._gl;\r\n        this._shader.use();\r\n        this._layout.use();\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/quad-index-buffer.ts\n\r\n/**\r\n * Helper that defines and index buffer for quad geometry\r\n *\r\n * Index buffers allow you to save space in vertex buffers when you share vertices in geometry\r\n * it is almost always worth it in terms of performance to use an index buffer.\r\n */\r\nclass QuadIndexBuffer {\r\n    /**\r\n     * @param gl WebGL2RenderingContext this layout will be attached to, these cannot be reused across contexts.\r\n     * @param numberOfQuads Specify the max number of quads you want to draw\r\n     * @param useUint16 Optionally force a uint16 buffer\r\n     */\r\n    constructor(gl, numberOfQuads, useUint16) {\r\n        this._logger = Logger.getInstance();\r\n        this._gl = gl;\r\n        this.buffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n        const totalVertices = numberOfQuads * 6;\r\n        if (!useUint16) {\r\n            this.bufferData = new Uint32Array(totalVertices);\r\n        }\r\n        else {\r\n            // fall back to using gl.UNSIGNED_SHORT or tell the user they are out of luck\r\n            const maxUint16 = 65535;\r\n            const maxUint16Index = Math.floor((maxUint16 - 1) / 4); // max quads\r\n            this.bufferGlType = gl.UNSIGNED_SHORT;\r\n            this.bufferData = new Uint16Array(totalVertices);\r\n            // TODO Should we error if this happens?? maybe not might crash mid game\r\n            if (numberOfQuads > maxUint16Index) {\r\n                this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${maxUint16Index}) requested quads(${numberOfQuads})`);\r\n            }\r\n        }\r\n        let currentQuad = 0;\r\n        for (let i = 0; i < totalVertices; i += 6) {\r\n            // first triangle\r\n            this.bufferData[i + 0] = currentQuad + 0;\r\n            this.bufferData[i + 1] = currentQuad + 1;\r\n            this.bufferData[i + 2] = currentQuad + 2;\r\n            // second triangle\r\n            this.bufferData[i + 3] = currentQuad + 2;\r\n            this.bufferData[i + 4] = currentQuad + 1;\r\n            this.bufferData[i + 5] = currentQuad + 3;\r\n            currentQuad += 4;\r\n        }\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\r\n    }\r\n    get size() {\r\n        return this.bufferData.length;\r\n    }\r\n    /**\r\n     * Upload data to the GPU\r\n     */\r\n    upload() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\r\n    }\r\n    /**\r\n     * Bind this index buffer\r\n     */\r\n    bind() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/image-renderer/image-renderer.frag.glsl\n/* harmony default export */ const image_renderer_frag = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// Texture index\\r\\nin lowp float v_textureIndex;\\r\\n\\r\\n// Textures in the current draw\\r\\nuniform sampler2D u_textures[%%count%%];\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nin vec4 v_tint;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n   // In order to support the most efficient sprite batching, we have multiple\\r\\n   // textures loaded into the gpu (usually 8) this picker logic skips over textures\\r\\n   // that do not apply to a particular sprite.\\r\\n\\r\\n   vec4 color = vec4(1.0, 0, 0, 1.0);\\r\\n\\r\\n   // GLSL is templated out to pick the right texture and set the vec4 color\\r\\n   %%texture_picker%%\\r\\n\\r\\n   color.rgb = color.rgb * v_opacity;\\r\\n   color.a = color.a * v_opacity;\\r\\n   fragColor = color * v_tint;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/image-renderer/image-renderer.vert.glsl\n/* harmony default export */ const image_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\n// Texture number\\r\\nin lowp float a_textureIndex;\\r\\nout lowp float v_textureIndex;\\r\\n\\r\\nin vec4 a_tint;\\r\\nout vec4 v_tint;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the UV coord to the fragment shader\\r\\n   v_texcoord = a_texcoord;\\r\\n   // Pass through the texture number to the fragment shader\\r\\n   v_textureIndex = a_textureIndex;\\r\\n   // Pass through the tint\\r\\n   v_tint = a_tint;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/image-renderer/image-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ImageRenderer {\r\n    constructor() {\r\n        this.type = 'ex.image';\r\n        this.priority = 0;\r\n        this._maxImages = 10922; // max(uint16) / 6 verts\r\n        this._maxTextures = 0;\r\n        // Per flush vars\r\n        this._imageCount = 0;\r\n        this._textures = [];\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        // Transform shader source\r\n        // FIXME: PIXEL 6 complains `ERROR: Expression too complex.` if we use it's reported max texture units, 125 seems to work for now...\r\n        this._maxTextures = Math.min(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS), 125);\r\n        const transformedFrag = this._transformFragmentSource(image_renderer_frag, this._maxTextures);\r\n        // Compile shader\r\n        this._shader = new Shader({\r\n            gl,\r\n            fragmentSource: transformedFrag,\r\n            vertexSource: image_renderer_vert\r\n        });\r\n        this._shader.compile();\r\n        // setup uniforms\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\r\n        // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\r\n        this._shader.setUniformIntArray('u_textures', [...Array(this._maxTextures)].map((_, i) => i));\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            size: 10 * 4 * this._maxImages,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_opacity', 1],\r\n                ['a_texcoord', 2],\r\n                ['a_textureIndex', 1],\r\n                ['a_tint', 4]\r\n            ]\r\n        });\r\n        // Setup index buffer\r\n        this._quads = new QuadIndexBuffer(gl, this._maxImages, true);\r\n    }\r\n    _transformFragmentSource(source, maxTextures) {\r\n        let newSource = source.replace('%%count%%', maxTextures.toString());\r\n        let texturePickerBuilder = '';\r\n        for (let i = 0; i < maxTextures; i++) {\r\n            if (i === 0) {\r\n                texturePickerBuilder += `if (v_textureIndex <= ${i}.5) {\\n`;\r\n            }\r\n            else {\r\n                texturePickerBuilder += `   else if (v_textureIndex <= ${i}.5) {\\n`;\r\n            }\r\n            texturePickerBuilder += `      color = texture(u_textures[${i}], v_texcoord);\\n`;\r\n            texturePickerBuilder += `   }\\n`;\r\n        }\r\n        newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\r\n        return newSource;\r\n    }\r\n    _addImageAsTexture(image) {\r\n        const maybeFiltering = image.getAttribute('filtering');\r\n        let filtering = null;\r\n        if (maybeFiltering === ImageFiltering.Blended ||\r\n            maybeFiltering === ImageFiltering.Pixel) {\r\n            filtering = maybeFiltering;\r\n        }\r\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\r\n        const texture = this._context.textureLoader.load(image, filtering, force);\r\n        // remove force attribute after upload\r\n        image.removeAttribute('forceUpload');\r\n        if (this._textures.indexOf(texture) === -1) {\r\n            this._textures.push(texture);\r\n        }\r\n    }\r\n    _bindTextures(gl) {\r\n        // Bind textures in the correct order\r\n        for (let i = 0; i < this._maxTextures; i++) {\r\n            gl.activeTexture(gl.TEXTURE0 + i);\r\n            gl.bindTexture(gl.TEXTURE_2D, this._textures[i] || this._textures[0]);\r\n        }\r\n    }\r\n    _getTextureIdForImage(image) {\r\n        if (image) {\r\n            const maybeTexture = this._context.textureLoader.get(image);\r\n            return this._textures.indexOf(maybeTexture);\r\n        }\r\n        return -1;\r\n    }\r\n    _isFull() {\r\n        if (this._imageCount >= this._maxImages) {\r\n            return true;\r\n        }\r\n        if (this._textures.length >= this._maxTextures) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        var _a, _b, _c, _d;\r\n        // Force a render if the batch is full\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._imageCount++;\r\n        // This creates and uploads the texture if not already done\r\n        this._addImageAsTexture(image);\r\n        let width = (image === null || image === void 0 ? void 0 : image.width) || swidth || 0;\r\n        let height = (image === null || image === void 0 ? void 0 : image.height) || sheight || 0;\r\n        let view = [0, 0, (_a = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _a !== void 0 ? _a : 0, (_b = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _b !== void 0 ? _b : 0];\r\n        let dest = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1];\r\n        // If destination is specified, update view and dest\r\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\r\n            view = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1, (_c = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _c !== void 0 ? _c : 0, (_d = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _d !== void 0 ? _d : 0];\r\n            dest = [dx, dy];\r\n            width = dwidth;\r\n            height = dheight;\r\n        }\r\n        sx = view[0];\r\n        sy = view[1];\r\n        const sw = view[2];\r\n        const sh = view[3];\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const snapToPixel = this._context.snapToPixel;\r\n        let topLeft = vec(dest[0], dest[1]);\r\n        let topRight = vec(dest[0] + width, dest[1]);\r\n        let bottomLeft = vec(dest[0], dest[1] + height);\r\n        let bottomRight = vec(dest[0] + width, dest[1] + height);\r\n        topLeft = transform.multiply(topLeft);\r\n        topRight = transform.multiply(topRight);\r\n        bottomLeft = transform.multiply(bottomLeft);\r\n        bottomRight = transform.multiply(bottomRight);\r\n        if (snapToPixel) {\r\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\r\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\r\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\r\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\r\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\r\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\r\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\r\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\r\n        }\r\n        const tint = this._context.tint;\r\n        const textureId = this._getTextureIdForImage(image);\r\n        const imageWidth = image.width || width;\r\n        const imageHeight = image.height || height;\r\n        const uvx0 = (sx) / imageWidth;\r\n        const uvy0 = (sy) / imageHeight;\r\n        const uvx1 = (sx + sw - 0.01) / imageWidth;\r\n        const uvy1 = (sy + sh - 0.01) / imageHeight;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.a;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.a;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = topRight.x;\r\n        vertexBuffer[this._vertexIndex++] = topRight.y;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.a;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = tint.a;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._imageCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._imageCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        // Bind the shader\r\n        this._shader.use();\r\n        // Bind the memory layout and upload data\r\n        this._layout.use(true, 4 * 10 * this._imageCount);\r\n        // Update ortho matrix uniform\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        // Bind textures to\r\n        this._bindTextures(gl);\r\n        // Bind index buffer\r\n        this._quads.bind();\r\n        // Draw all the quads\r\n        gl.drawElements(gl.TRIANGLES, this._imageCount * 6, this._quads.bufferGlType, 0);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._imageCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // Reset\r\n        this._imageCount = 0;\r\n        this._vertexIndex = 0;\r\n        this._textures.length = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/rectangle-renderer/rectangle-renderer.frag.glsl\n/* harmony default export */ const rectangle_renderer_frag = (\"#version 300 es\\r\\n\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_uv;\\r\\n\\r\\nin vec2 v_size; // in pixels\\r\\n\\r\\n// Color coord to blend with image\\r\\nin lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nin lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nin lowp float v_strokeThickness; // in pixels\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\\r\\n    vec2 uv = v_uv;\\r\\n    vec2 fragCoord = uv * v_size;\\r\\n    float maxX = v_size.x - v_strokeThickness;\\r\\n    float minX = v_strokeThickness;\\r\\n    float maxY = v_size.y - v_strokeThickness;\\r\\n    float minY = v_strokeThickness;\\r\\n\\r\\n    if (fragCoord.x < maxX && fragCoord.x > minX &&\\r\\n        fragCoord.y < maxY && fragCoord.y > minY) {\\r\\n      fragColor = v_color;\\r\\n    } else {\\r\\n      fragColor = v_strokeColor;\\r\\n    }\\r\\n    fragColor.a *= v_opacity;\\r\\n    fragColor.rgb *= fragColor.a;\\r\\n\\r\\n    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\\r\\n    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\\r\\n\\r\\n    // float fHalfBorderDist      = 0.0;\\r\\n    // float fHalfBorderThickness = 0.0;\\r\\n\\r\\n    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \\r\\n    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \\r\\n    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else\\r\\n    // {\\r\\n    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\\r\\n    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\\r\\n    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\\r\\n        \\r\\n    //     float ellipse_ab    = v_radius-v_strokeThickness;\\r\\n    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\\r\\n    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \\r\\n            \\r\\n    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\\r\\n    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\\r\\n    // }\\r\\n\\r\\n    // vec4 v4FromColor = v_strokeColor;\\r\\n    // v4FromColor.rgb *= v4FromColor.a;\\r\\n    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\\r\\n    // if (fHalfBorderDist < 0.0) {\\r\\n    //     v4ToColor = v_color;\\r\\n    //     v4ToColor.rgb *= v4ToColor.a;\\r\\n    // }\\r\\n\\r\\n    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\\r\\n\\r\\n    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\\r\\n    // gl_FragColor = finalColor;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/rectangle-renderer/rectangle-renderer.vert.glsl\n/* harmony default export */ const rectangle_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_uv;\\r\\nout vec2 v_uv;\\r\\n\\r\\nin vec2 a_size;\\r\\nout vec2 v_size;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\nin vec4 a_color;\\r\\nout vec4 v_color;\\r\\n\\r\\nin vec4 a_strokeColor;\\r\\nout vec4 v_strokeColor;\\r\\n\\r\\nin float a_strokeThickness;\\r\\nout float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through size\\r\\n   v_size = a_size;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/rectangle-renderer/rectangle-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass RectangleRenderer {\r\n    constructor() {\r\n        this.type = 'ex.rectangle';\r\n        this.priority = 0;\r\n        this._maxRectangles = 10922; // max(uint16) / 6 verts\r\n        this._rectangleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        // https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r\n        this._shader = new Shader({\r\n            gl,\r\n            fragmentSource: rectangle_renderer_frag,\r\n            vertexSource: rectangle_renderer_vert\r\n        });\r\n        this._shader.compile();\r\n        // setup uniforms\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            size: 16 * 4 * this._maxRectangles,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_uv', 2],\r\n                ['a_size', 2],\r\n                ['a_opacity', 1],\r\n                ['a_color', 4],\r\n                ['a_strokeColor', 4],\r\n                ['a_strokeThickness', 1]\r\n            ]\r\n        });\r\n        this._quads = new QuadIndexBuffer(gl, this._maxRectangles, true);\r\n    }\r\n    _isFull() {\r\n        if (this._rectangleCount >= this._maxRectangles) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    draw(...args) {\r\n        if (args[0] instanceof Vector && args[1] instanceof Vector) {\r\n            this.drawLine.apply(this, args);\r\n        }\r\n        else {\r\n            this.drawRectangle.apply(this, args);\r\n        }\r\n    }\r\n    drawLine(start, end, color, thickness = 1) {\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._rectangleCount++;\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const snapToPixel = this._context.snapToPixel;\r\n        const dir = end.sub(start);\r\n        const length = dir.size;\r\n        const normal = dir.normalize().perpendicular();\r\n        const halfThick = thickness / 2;\r\n        /**\r\n         *    +---------------------^----------------------+\r\n         *    |                     | (normal)             |\r\n         *   (startx, starty)------------------>(endx, endy)\r\n         *    |                                            |\r\n         *    + -------------------------------------------+\r\n         */\r\n        const startTop = transform.multiply(normal.scale(halfThick).add(start));\r\n        const startBottom = transform.multiply(normal.scale(-halfThick).add(start));\r\n        const endTop = transform.multiply(normal.scale(halfThick).add(end));\r\n        const endBottom = transform.multiply(normal.scale(-halfThick).add(end));\r\n        if (snapToPixel) {\r\n            startTop.x = ~~(startTop.x + pixelSnapEpsilon);\r\n            startTop.y = ~~(startTop.y + pixelSnapEpsilon);\r\n            endTop.x = ~~(endTop.x + pixelSnapEpsilon);\r\n            endTop.y = ~~(endTop.y + pixelSnapEpsilon);\r\n            startBottom.x = ~~(startBottom.x + pixelSnapEpsilon);\r\n            startBottom.y = ~~(startBottom.y + pixelSnapEpsilon);\r\n            endBottom.x = ~~(endBottom.x + pixelSnapEpsilon);\r\n            endBottom.y = ~~(endBottom.y + pixelSnapEpsilon);\r\n        }\r\n        // TODO uv could be static vertex buffer\r\n        const uvx0 = 0;\r\n        const uvy0 = 0;\r\n        const uvx1 = 1;\r\n        const uvy1 = 1;\r\n        const stroke = Color.Transparent;\r\n        const strokeThickness = 0;\r\n        const width = 1;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = startTop.x;\r\n        vertexBuffer[this._vertexIndex++] = startTop.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = startBottom.x;\r\n        vertexBuffer[this._vertexIndex++] = startBottom.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = endTop.x;\r\n        vertexBuffer[this._vertexIndex++] = endTop.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = endBottom.x;\r\n        vertexBuffer[this._vertexIndex++] = endBottom.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n    }\r\n    drawRectangle(pos, width, height, color, stroke = Color.Transparent, strokeThickness = 0) {\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._rectangleCount++;\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const snapToPixel = this._context.snapToPixel;\r\n        const topLeft = transform.multiply(pos.add(vec(0, 0)));\r\n        const topRight = transform.multiply(pos.add(vec(width, 0)));\r\n        const bottomRight = transform.multiply(pos.add(vec(width, height)));\r\n        const bottomLeft = transform.multiply(pos.add(vec(0, height)));\r\n        if (snapToPixel) {\r\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\r\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\r\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\r\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\r\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\r\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\r\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\r\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\r\n        }\r\n        // TODO uv could be static vertex buffer\r\n        const uvx0 = 0;\r\n        const uvy0 = 0;\r\n        const uvx1 = 1;\r\n        const uvy1 = 1;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = topRight.x;\r\n        vertexBuffer[this._vertexIndex++] = topRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._rectangleCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._rectangleCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        // Bind the shader\r\n        this._shader.use();\r\n        // Bind the memory layout and upload data\r\n        this._layout.use(true);\r\n        // Update ortho matrix uniform\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        // Bind index buffer\r\n        this._quads.bind();\r\n        // Draw all the quads\r\n        gl.drawElements(gl.TRIANGLES, this._rectangleCount * 6, this._quads.bufferGlType, 0);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._rectangleCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // Reset\r\n        this._rectangleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/circle-renderer/circle-renderer.frag.glsl\n/* harmony default export */ const circle_renderer_frag = (\"#version 300 es\\r\\nprecision highp float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_uv;\\r\\n\\r\\n// Color coord to blend with image\\r\\nin lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nin lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nin lowp float v_strokeThickness;\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  // make (0, 0) the center the uv \\r\\n  vec2 uv = v_uv * 2.0 - 1.0;\\r\\n\\r\\n  vec4 color = v_color;\\r\\n  vec4 strokeColor = v_strokeColor;\\r\\n\\r\\n  // circle border is at radius 1.0 \\r\\n  // dist is > 0 when inside the circle \\r\\n  float d = length(uv);\\r\\n  float dist = 1.0 - length(uv);\\r\\n\\r\\n  // Fade based on fwidth\\r\\n  float fade = fwidth(dot(uv, uv));\\r\\n\\r\\n  // if dist is greater than 0 step to 1;\\r\\n  // when we cross this 0 threshold add a smooth fade\\r\\n  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\\r\\n\\r\\n  // if dist is greater than the stroke thickness step to 1\\r\\n  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\\r\\n\\r\\n  strokeColor.a *= fill * stroke;\\r\\n  strokeColor.rgb *= strokeColor.a;\\r\\n\\r\\n  color.a *= fill * (1.0 - stroke);\\r\\n  color.rgb *= color.a;\\r\\n\\r\\n  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\\r\\n  finalColor.rgb = finalColor.rgb * v_opacity;\\r\\n  finalColor.a = finalColor.a * v_opacity;\\r\\n  fragColor = finalColor;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/circle-renderer/circle-renderer.vert.glsl\n/* harmony default export */ const circle_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_uv;\\r\\nout vec2 v_uv;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\nin vec4 a_color;\\r\\nout vec4 v_color;\\r\\n\\r\\nin vec4 a_strokeColor;\\r\\nout vec4 v_strokeColor;\\r\\n\\r\\nin float a_strokeThickness;\\r\\nout float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/circle-renderer/circle-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CircleRenderer {\r\n    constructor() {\r\n        this.type = 'ex.circle';\r\n        this.priority = 0;\r\n        this._maxCircles = 10922; // max(uint16) / 6 verts\r\n        this._circleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        this._shader = new Shader({\r\n            gl,\r\n            fragmentSource: circle_renderer_frag,\r\n            vertexSource: circle_renderer_vert\r\n        });\r\n        this._shader.compile();\r\n        // setup uniforms\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            size: 14 * 4 * this._maxCircles,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_uv', 2],\r\n                ['a_opacity', 1],\r\n                ['a_color', 4],\r\n                ['a_strokeColor', 4],\r\n                ['a_strokeThickness', 1]\r\n            ]\r\n        });\r\n        this._quads = new QuadIndexBuffer(gl, this._maxCircles, true);\r\n    }\r\n    _isFull() {\r\n        if (this._circleCount >= this._maxCircles) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    draw(pos, radius, color, stroke = Color.Transparent, strokeThickness = 0) {\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._circleCount++;\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const snapToPixel = this._context.snapToPixel;\r\n        const topLeft = transform.multiply(pos.add(vec(-radius, -radius)));\r\n        const topRight = transform.multiply(pos.add(vec(radius, -radius)));\r\n        const bottomRight = transform.multiply(pos.add(vec(radius, radius)));\r\n        const bottomLeft = transform.multiply(pos.add(vec(-radius, radius)));\r\n        if (snapToPixel) {\r\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\r\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\r\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\r\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\r\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\r\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\r\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\r\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\r\n        }\r\n        // TODO UV could be static vertex buffer\r\n        const uvx0 = 0;\r\n        const uvy0 = 0;\r\n        const uvx1 = 1;\r\n        const uvy1 = 1;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = topRight.x;\r\n        vertexBuffer[this._vertexIndex++] = topRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._circleCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._circleCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        // Bind the shader\r\n        this._shader.use();\r\n        // Bind the memory layout and upload data\r\n        this._layout.use(true);\r\n        // Update ortho matrix uniform\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        // Bind index buffer\r\n        this._quads.bind();\r\n        // Draw all the quads\r\n        gl.drawElements(gl.TRIANGLES, this._circleCount * 6, this._quads.bufferGlType, 0);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._circleCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // Reset\r\n        this._circleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Pool.ts\n\r\nclass Pool {\r\n    constructor(builder, recycler, maxObjects = 100) {\r\n        this.builder = builder;\r\n        this.recycler = recycler;\r\n        this.maxObjects = maxObjects;\r\n        this.totalAllocations = 0;\r\n        this.index = 0;\r\n        this.objects = [];\r\n        this.disableWarnings = false;\r\n        this._logger = Logger.getInstance();\r\n    }\r\n    preallocate() {\r\n        for (let i = 0; i < this.maxObjects; i++) {\r\n            this.objects[i] = this.builder();\r\n        }\r\n    }\r\n    /**\r\n     * Use many instances out of the in the context and return all to the pool.\r\n     *\r\n     * By returning values out of the context they will be un-hooked from the pool and are free to be passed to consumers\r\n     * @param context\r\n     */\r\n    using(context) {\r\n        const result = context(this);\r\n        if (result) {\r\n            return this.done(...result);\r\n        }\r\n        return this.done();\r\n    }\r\n    /**\r\n     * Use a single instance out of th pool and immediately return it to the pool\r\n     * @param context\r\n     */\r\n    borrow(context) {\r\n        const object = this.get();\r\n        context(object);\r\n        this.index--;\r\n    }\r\n    /**\r\n     * Retrieve a value from the pool, will allocate a new instance if necessary or recycle from the pool\r\n     * @param args\r\n     */\r\n    get(...args) {\r\n        if (this.index === this.maxObjects) {\r\n            if (!this.disableWarnings) {\r\n                this._logger.warn('Max pooled objects reached, possible memory leak? Doubling');\r\n            }\r\n            this.maxObjects = this.maxObjects * 2;\r\n        }\r\n        if (this.objects[this.index]) {\r\n            // Pool has an available object already constructed\r\n            return this.recycler(this.objects[this.index++], ...args);\r\n        }\r\n        else {\r\n            // New allocation\r\n            this.totalAllocations++;\r\n            const object = (this.objects[this.index++] = this.builder(...args));\r\n            return object;\r\n        }\r\n    }\r\n    done(...objects) {\r\n        // All objects in pool now considered \"free\"\r\n        this.index = 0;\r\n        for (const object of objects) {\r\n            const poolIndex = this.objects.indexOf(object);\r\n            // Build a new object to take the pool place\r\n            this.objects[poolIndex] = this.builder(); // TODO problematic 0-arg only support\r\n            this.totalAllocations++;\r\n        }\r\n        return objects;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/draw-call.ts\n\r\n\r\nclass DrawCall {\r\n    constructor() {\r\n        this.z = 0;\r\n        this.priority = 0;\r\n        this.transform = AffineMatrix.identity();\r\n        this.state = {\r\n            z: 0,\r\n            opacity: 1,\r\n            tint: Color.White,\r\n            material: null\r\n        };\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/material.ts\n\r\nconst defaultVertexSource = `#version 300 es\r\nin vec2 a_position;\r\n\r\nin vec2 a_uv;\r\nout vec2 v_uv;\r\n\r\nuniform mat4 u_matrix;\r\nuniform mat4 u_transform;\r\n\r\nvoid main() {\r\n  // Set the vertex position using the ortho & transform matrix\r\n  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);\r\n\r\n  // Pass through the UV coord to the fragment shader\r\n  v_uv = a_uv;\r\n}\r\n`;\r\nclass Material {\r\n    constructor(options) {\r\n        this._color = Color.Transparent;\r\n        this._initialized = false;\r\n        const { color, name, vertexSource, fragmentSource } = options;\r\n        this._name = name;\r\n        this._vertexSource = vertexSource !== null && vertexSource !== void 0 ? vertexSource : defaultVertexSource;\r\n        this._fragmentSource = fragmentSource;\r\n        this._color = color !== null && color !== void 0 ? color : this._color;\r\n    }\r\n    initialize(_gl, _context) {\r\n        if (this._initialized) {\r\n            return;\r\n        }\r\n        this._shader = _context.createShader({\r\n            vertexSource: this._vertexSource,\r\n            fragmentSource: this._fragmentSource\r\n        });\r\n        this._shader.compile();\r\n        this._initialized = true;\r\n    }\r\n    get name() {\r\n        var _a;\r\n        return (_a = this._name) !== null && _a !== void 0 ? _a : 'anonymous material';\r\n    }\r\n    getShader() {\r\n        return this._shader;\r\n    }\r\n    use() {\r\n        if (this._initialized) {\r\n            // bind the shader\r\n            this._shader.use();\r\n            // Apply standard uniforms\r\n            this._shader.trySetUniformFloatColor('u_color', this._color);\r\n        }\r\n        else {\r\n            throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/material-renderer/material-renderer.ts\n\r\n\r\n\r\n\r\n\r\nclass MaterialRenderer {\r\n    constructor() {\r\n        this.type = 'ex.material';\r\n        this.priority = 0;\r\n        this._textures = [];\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            size: 4 * 4,\r\n            type: 'dynamic'\r\n        });\r\n        // Setup a vertex layout/buffer to the material\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_uv', 2]\r\n            ]\r\n        });\r\n        // Setup index buffer\r\n        this._quads = new QuadIndexBuffer(gl, 1, true);\r\n    }\r\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        var _a, _b, _c, _d;\r\n        const gl = this._gl;\r\n        // Extract context info\r\n        const material = this._context.material;\r\n        material.initialize(gl, this._context);\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        // material shader\r\n        const shader = material.getShader();\r\n        // construct geometry, or hold on to it in the material?\r\n        // geometry primitive for drawing rectangles?\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        let vertexIndex = 0;\r\n        let width = (image === null || image === void 0 ? void 0 : image.width) || swidth || 0;\r\n        let height = (image === null || image === void 0 ? void 0 : image.height) || sheight || 0;\r\n        let view = [0, 0, (_a = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _a !== void 0 ? _a : 0, (_b = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _b !== void 0 ? _b : 0];\r\n        let dest = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1];\r\n        // If destination is specified, update view and dest\r\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\r\n            view = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1, (_c = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _c !== void 0 ? _c : 0, (_d = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _d !== void 0 ? _d : 0];\r\n            dest = [dx, dy];\r\n            width = dwidth;\r\n            height = dheight;\r\n        }\r\n        sx = view[0];\r\n        sy = view[1];\r\n        const sw = view[2];\r\n        const sh = view[3];\r\n        const topLeft = vec(dest[0], dest[1]);\r\n        const topRight = vec(dest[0] + width, dest[1]);\r\n        const bottomLeft = vec(dest[0], dest[1] + height);\r\n        const bottomRight = vec(dest[0] + width, dest[1] + height);\r\n        const imageWidth = image.width || width;\r\n        const imageHeight = image.height || height;\r\n        const uvx0 = (sx) / imageWidth;\r\n        const uvy0 = (sy) / imageHeight;\r\n        const uvx1 = (sx + sw - 0.01) / imageWidth;\r\n        const uvy1 = (sy + sh - 0.01) / imageHeight;\r\n        // (0, 0) - 0\r\n        vertexBuffer[vertexIndex++] = topLeft.x;\r\n        vertexBuffer[vertexIndex++] = topLeft.y;\r\n        vertexBuffer[vertexIndex++] = uvx0;\r\n        vertexBuffer[vertexIndex++] = uvy0;\r\n        // (0, 1) - 1\r\n        vertexBuffer[vertexIndex++] = bottomLeft.x;\r\n        vertexBuffer[vertexIndex++] = bottomLeft.y;\r\n        vertexBuffer[vertexIndex++] = uvx0;\r\n        vertexBuffer[vertexIndex++] = uvy1;\r\n        // (1, 0) - 2\r\n        vertexBuffer[vertexIndex++] = topRight.x;\r\n        vertexBuffer[vertexIndex++] = topRight.y;\r\n        vertexBuffer[vertexIndex++] = uvx1;\r\n        vertexBuffer[vertexIndex++] = uvy0;\r\n        // (1, 1) - 3\r\n        vertexBuffer[vertexIndex++] = bottomRight.x;\r\n        vertexBuffer[vertexIndex++] = bottomRight.y;\r\n        vertexBuffer[vertexIndex++] = uvx1;\r\n        vertexBuffer[vertexIndex++] = uvy1;\r\n        // This creates and uploads the texture if not already done\r\n        const texture = this._addImageAsTexture(image);\r\n        // apply material\r\n        material.use();\r\n        this._layout.shader = shader;\r\n        // apply layout and geometry\r\n        this._layout.use(true);\r\n        // apply opacity\r\n        shader.trySetUniformFloat('u_opacity', opacity);\r\n        // apply resolution\r\n        shader.trySetUniformFloatVector('u_resolution', vec(this._context.width, this._context.height));\r\n        // apply size\r\n        shader.trySetUniformFloatVector('u_size', vec(sw, sh));\r\n        // apply orthographic projection\r\n        shader.trySetUniformMatrix('u_matrix', this._context.ortho);\r\n        // apply geometry transform\r\n        shader.trySetUniformMatrix('u_transform', transform.to4x4());\r\n        // bind graphic image texture 'uniform sampler2D u_graphic;'\r\n        gl.activeTexture(gl.TEXTURE0 + 0);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n        shader.trySetUniformInt('u_graphic', 0);\r\n        // bind quad index buffer\r\n        this._quads.bind();\r\n        // Draw a single quad\r\n        gl.drawElements(gl.TRIANGLES, 6, this._quads.bufferGlType, 0);\r\n    }\r\n    _addImageAsTexture(image) {\r\n        const maybeFiltering = image.getAttribute('filtering');\r\n        let filtering = null;\r\n        if (maybeFiltering === ImageFiltering.Blended ||\r\n            maybeFiltering === ImageFiltering.Pixel) {\r\n            filtering = maybeFiltering;\r\n        }\r\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\r\n        const texture = this._context.textureLoader.load(image, filtering, force);\r\n        // remove force attribute after upload\r\n        image.removeAttribute('forceUpload');\r\n        if (this._textures.indexOf(texture) === -1) {\r\n            this._textures.push(texture);\r\n        }\r\n        return texture;\r\n    }\r\n    hasPendingDraws() {\r\n        return false;\r\n    }\r\n    flush() {\r\n        // flush does not do anything, material renderer renders immediately per draw\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/ExcaliburGraphicsContextWebGL.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// renderers\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst pixelSnapEpsilon = 0.0001;\r\nclass ExcaliburGraphicsContextWebGLDebug {\r\n    constructor(_webglCtx) {\r\n        this._webglCtx = _webglCtx;\r\n        this._debugText = new DebugText();\r\n    }\r\n    /**\r\n     * Draw a debugging rectangle to the context\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     */\r\n    drawRect(x, y, width, height, rectOptions = { color: Color.Black }) {\r\n        this.drawLine(vec(x, y), vec(x + width, y), { ...rectOptions });\r\n        this.drawLine(vec(x + width, y), vec(x + width, y + height), { ...rectOptions });\r\n        this.drawLine(vec(x + width, y + height), vec(x, y + height), { ...rectOptions });\r\n        this.drawLine(vec(x, y + height), vec(x, y), { ...rectOptions });\r\n    }\r\n    /**\r\n     * Draw a debugging line to the context\r\n     * @param start\r\n     * @param end\r\n     * @param lineOptions\r\n     */\r\n    drawLine(start, end, lineOptions = { color: Color.Black }) {\r\n        this._webglCtx.draw('ex.line', start, end, lineOptions.color);\r\n    }\r\n    /**\r\n     * Draw a debugging point to the context\r\n     * @param point\r\n     * @param pointOptions\r\n     */\r\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\r\n        this._webglCtx.draw('ex.point', point, pointOptions.color, pointOptions.size);\r\n    }\r\n    drawText(text, pos) {\r\n        this._debugText.write(this._webglCtx, text, pos);\r\n    }\r\n}\r\nclass ExcaliburGraphicsContextWebGL {\r\n    get z() {\r\n        return this._state.current.z;\r\n    }\r\n    set z(value) {\r\n        this._state.current.z = value;\r\n    }\r\n    get opacity() {\r\n        return this._state.current.opacity;\r\n    }\r\n    set opacity(value) {\r\n        this._state.current.opacity = value;\r\n    }\r\n    get tint() {\r\n        return this._state.current.tint;\r\n    }\r\n    set tint(color) {\r\n        this._state.current.tint = color;\r\n    }\r\n    get width() {\r\n        return this.__gl.canvas.width;\r\n    }\r\n    get height() {\r\n        return this.__gl.canvas.height;\r\n    }\r\n    get ortho() {\r\n        return this._ortho;\r\n    }\r\n    /**\r\n     * Checks the underlying webgl implementation if the requested internal resolution is supported\r\n     * @param dim\r\n     */\r\n    checkIfResolutionSupported(dim) {\r\n        // Slight hack based on this thread https://groups.google.com/g/webgl-dev-list/c/AHONvz3oQTo\r\n        let supported = true;\r\n        if (dim.width > 4096 || dim.height > 4096) {\r\n            supported = false;\r\n        }\r\n        return supported;\r\n    }\r\n    constructor(options) {\r\n        this._logger = Logger.getInstance();\r\n        this._renderers = new Map();\r\n        this._isDrawLifecycle = false;\r\n        this.useDrawSorting = true;\r\n        this._drawCallPool = new Pool(() => new DrawCall(), (instance) => {\r\n            instance.priority = 0;\r\n            instance.z = 0;\r\n            instance.renderer = undefined;\r\n            instance.args = undefined;\r\n            return instance;\r\n        }, 4000);\r\n        this._drawCalls = [];\r\n        // Postprocessing is a tuple with 2 render targets, these are flip-flopped during the postprocessing process\r\n        this._postProcessTargets = [];\r\n        this._postprocessors = [];\r\n        this._transform = new TransformStack();\r\n        this._state = new StateStack();\r\n        this.snapToPixel = false;\r\n        this.smoothing = false;\r\n        this.backgroundColor = Color.ExcaliburBlue;\r\n        this._alreadyWarnedDrawLifecycle = false;\r\n        this.debug = new ExcaliburGraphicsContextWebGLDebug(this);\r\n        this._totalPostProcessorTime = 0;\r\n        const { canvasElement, enableTransparency, smoothing, snapToPixel, backgroundColor, useDrawSorting } = options;\r\n        this.__gl = canvasElement.getContext('webgl2', {\r\n            antialias: smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing,\r\n            premultipliedAlpha: false,\r\n            alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : true,\r\n            depth: true,\r\n            powerPreference: 'high-performance'\r\n            // TODO Chromium fixed the bug where this didn't work now it breaks CI :(\r\n            // failIfMajorPerformanceCaveat: true\r\n        });\r\n        if (!this.__gl) {\r\n            throw Error('Failed to retrieve webgl context from browser');\r\n        }\r\n        this.textureLoader = new TextureLoader(this.__gl);\r\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\r\n        this.smoothing = smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing;\r\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\r\n        this.useDrawSorting = useDrawSorting !== null && useDrawSorting !== void 0 ? useDrawSorting : this.useDrawSorting;\r\n        this._drawCallPool.disableWarnings = true;\r\n        this._drawCallPool.preallocate();\r\n        this._init();\r\n    }\r\n    _init() {\r\n        const gl = this.__gl;\r\n        // Setup viewport and view matrix\r\n        this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n        // Clear background\r\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        // Enable alpha blending\r\n        // https://www.realtimerendering.com/blog/gpus-prefer-premultiplication/\r\n        gl.enable(gl.BLEND);\r\n        gl.blendEquation(gl.FUNC_ADD);\r\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\r\n        gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        // Setup builtin renderers\r\n        this.register(new ImageRenderer());\r\n        this.register(new MaterialRenderer());\r\n        this.register(new RectangleRenderer());\r\n        this.register(new CircleRenderer());\r\n        this.register(new PointRenderer());\r\n        this.register(new LineRenderer());\r\n        this._screenRenderer = new ScreenPassPainter(gl);\r\n        this._renderTarget = new RenderTarget({\r\n            gl,\r\n            width: gl.canvas.width,\r\n            height: gl.canvas.height\r\n        });\r\n        this._postProcessTargets = [\r\n            new RenderTarget({\r\n                gl,\r\n                width: gl.canvas.width,\r\n                height: gl.canvas.height\r\n            }),\r\n            new RenderTarget({\r\n                gl,\r\n                width: gl.canvas.width,\r\n                height: gl.canvas.height\r\n            })\r\n        ];\r\n    }\r\n    register(renderer) {\r\n        this._renderers.set(renderer.type, renderer);\r\n        renderer.initialize(this.__gl, this);\r\n    }\r\n    get(rendererName) {\r\n        return this._renderers.get(rendererName);\r\n    }\r\n    _isCurrentRenderer(renderer) {\r\n        if (!this._currentRenderer || this._currentRenderer === renderer) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    beginDrawLifecycle() {\r\n        this._isDrawLifecycle = true;\r\n    }\r\n    endDrawLifecycle() {\r\n        this._isDrawLifecycle = false;\r\n    }\r\n    draw(rendererName, ...args) {\r\n        if (!this._isDrawLifecycle && !this._alreadyWarnedDrawLifecycle) {\r\n            this._logger.warn(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.\\n` +\r\n                `If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`);\r\n            this._alreadyWarnedDrawLifecycle = true;\r\n        }\r\n        const renderer = this._renderers.get(rendererName);\r\n        if (renderer) {\r\n            if (this.useDrawSorting) {\r\n                const drawCall = this._drawCallPool.get();\r\n                drawCall.z = this._state.current.z;\r\n                drawCall.priority = renderer.priority;\r\n                drawCall.renderer = rendererName;\r\n                this.getTransform().clone(drawCall.transform);\r\n                drawCall.state.z = this._state.current.z;\r\n                drawCall.state.opacity = this._state.current.opacity;\r\n                drawCall.state.tint = this._state.current.tint;\r\n                drawCall.state.material = this._state.current.material;\r\n                drawCall.args = args;\r\n                this._drawCalls.push(drawCall);\r\n            }\r\n            else {\r\n                // Set the current renderer if not defined\r\n                if (!this._currentRenderer) {\r\n                    this._currentRenderer = renderer;\r\n                }\r\n                if (!this._isCurrentRenderer(renderer)) {\r\n                    // switching graphics means we must flush the previous\r\n                    this._currentRenderer.flush();\r\n                }\r\n                // If we are still using the same renderer we can add to the current batch\r\n                renderer.draw(...args);\r\n                this._currentRenderer = renderer;\r\n            }\r\n        }\r\n        else {\r\n            throw Error(`No renderer with name ${rendererName} has been registered`);\r\n        }\r\n    }\r\n    resetTransform() {\r\n        this._transform.current = AffineMatrix.identity();\r\n    }\r\n    updateViewport(resolution) {\r\n        const gl = this.__gl;\r\n        this._ortho = this._ortho = Matrix.ortho(0, resolution.width, resolution.height, 0, 400, -400);\r\n        this._renderTarget.setResolution(gl.canvas.width, gl.canvas.height);\r\n        this._postProcessTargets[0].setResolution(gl.canvas.width, gl.canvas.height);\r\n        this._postProcessTargets[1].setResolution(gl.canvas.width, gl.canvas.height);\r\n    }\r\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        if (swidth === 0 || sheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (dwidth === 0 || dheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (image.width === 0 || image.height === 0) {\r\n            return; // zero dimension source exit early\r\n        }\r\n        if (!image) {\r\n            Logger.getInstance().warn('Cannot draw a null or undefined image');\r\n            // tslint:disable-next-line: no-console\r\n            if (console.trace) {\r\n                // tslint:disable-next-line: no-console\r\n                console.trace();\r\n            }\r\n            return;\r\n        }\r\n        if (this._state.current.material) {\r\n            this.draw('ex.material', image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\r\n        }\r\n        else {\r\n            this.draw('ex.image', image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\r\n        }\r\n    }\r\n    drawLine(start, end, color, thickness = 1) {\r\n        this.draw('ex.rectangle', start, end, color, thickness);\r\n    }\r\n    drawRectangle(pos, width, height, color, stroke, strokeThickness) {\r\n        this.draw('ex.rectangle', pos, width, height, color, stroke, strokeThickness);\r\n    }\r\n    drawCircle(pos, radius, color, stroke, thickness) {\r\n        this.draw('ex.circle', pos, radius, color, stroke, thickness);\r\n    }\r\n    save() {\r\n        this._transform.save();\r\n        this._state.save();\r\n    }\r\n    restore() {\r\n        this._transform.restore();\r\n        this._state.restore();\r\n    }\r\n    translate(x, y) {\r\n        this._transform.translate(this.snapToPixel ? ~~(x + pixelSnapEpsilon) : x, this.snapToPixel ? ~~(y + pixelSnapEpsilon) : y);\r\n    }\r\n    rotate(angle) {\r\n        this._transform.rotate(angle);\r\n    }\r\n    scale(x, y) {\r\n        this._transform.scale(x, y);\r\n    }\r\n    transform(matrix) {\r\n        this._transform.current = matrix;\r\n    }\r\n    getTransform() {\r\n        return this._transform.current;\r\n    }\r\n    multiply(m) {\r\n        this._transform.current.multiply(m, this._transform.current);\r\n    }\r\n    addPostProcessor(postprocessor) {\r\n        this._postprocessors.push(postprocessor);\r\n        postprocessor.initialize(this.__gl);\r\n    }\r\n    removePostProcessor(postprocessor) {\r\n        const index = this._postprocessors.indexOf(postprocessor);\r\n        if (index !== -1) {\r\n            this._postprocessors.splice(index, 1);\r\n        }\r\n    }\r\n    clearPostProcessors() {\r\n        this._postprocessors.length = 0;\r\n    }\r\n    updatePostProcessors(delta) {\r\n        for (const postprocessor of this._postprocessors) {\r\n            const shader = postprocessor.getShader();\r\n            shader.use();\r\n            const uniforms = shader.getUniforms();\r\n            this._totalPostProcessorTime += delta;\r\n            if (uniforms.find(u => u.name === 'u_time_ms')) {\r\n                shader.setUniformFloat('u_time_ms', this._totalPostProcessorTime);\r\n            }\r\n            if (uniforms.find(u => u.name === 'u_elapsed_ms')) {\r\n                shader.setUniformFloat('u_elapsed_ms', delta);\r\n            }\r\n            if (uniforms.find(u => u.name === 'u_resolution')) {\r\n                shader.setUniformFloatVector('u_resolution', vec(this.width, this.height));\r\n            }\r\n            if (postprocessor.onUpdate) {\r\n                postprocessor.onUpdate(delta);\r\n            }\r\n        }\r\n    }\r\n    set material(material) {\r\n        this._state.current.material = material;\r\n    }\r\n    get material() {\r\n        return this._state.current.material;\r\n    }\r\n    /**\r\n     * Creates and initializes the material which compiles the internal shader\r\n     * @param options\r\n     * @returns Material\r\n     */\r\n    createMaterial(options) {\r\n        const material = new Material(options);\r\n        material.initialize(this.__gl, this);\r\n        return material;\r\n    }\r\n    createShader(options) {\r\n        const gl = this.__gl;\r\n        const { vertexSource, fragmentSource } = options;\r\n        const shader = new Shader({\r\n            gl,\r\n            vertexSource,\r\n            fragmentSource\r\n        });\r\n        shader.compile();\r\n        return shader;\r\n    }\r\n    clear() {\r\n        const gl = this.__gl;\r\n        this._renderTarget.use();\r\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\r\n        // Clear the context with the newly set color. This is\r\n        // the function call that actually does the drawing.\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n    }\r\n    /**\r\n     * Flushes all batched rendering to the screen\r\n     */\r\n    flush() {\r\n        const gl = this.__gl;\r\n        // render target captures all draws and redirects to the render target\r\n        this._renderTarget.use();\r\n        if (this.useDrawSorting) {\r\n            // sort draw calls\r\n            // Find the original order of the first instance of the draw call\r\n            const originalSort = new Map();\r\n            for (const [name] of this._renderers) {\r\n                const firstIndex = this._drawCalls.findIndex(dc => dc.renderer === name);\r\n                originalSort.set(name, firstIndex);\r\n            }\r\n            this._drawCalls.sort((a, b) => {\r\n                const zIndex = a.z - b.z;\r\n                const originalSortOrder = originalSort.get(a.renderer) - originalSort.get(b.renderer);\r\n                const priority = a.priority - b.priority;\r\n                if (zIndex === 0) { // sort by z first\r\n                    if (priority === 0) { // sort by priority\r\n                        return originalSortOrder; // use the original order to inform draw call packing to maximally preserve painter order\r\n                    }\r\n                    return priority;\r\n                }\r\n                return zIndex;\r\n            });\r\n            const oldTransform = this._transform.current;\r\n            const oldState = this._state.current;\r\n            if (this._drawCalls.length) {\r\n                let currentRendererName = this._drawCalls[0].renderer;\r\n                let currentRenderer = this._renderers.get(currentRendererName);\r\n                for (let i = 0; i < this._drawCalls.length; i++) {\r\n                    // hydrate the state for renderers\r\n                    this._transform.current = this._drawCalls[i].transform;\r\n                    this._state.current = this._drawCalls[i].state;\r\n                    if (this._drawCalls[i].renderer !== currentRendererName) {\r\n                        // switching graphics renderer means we must flush the previous\r\n                        currentRenderer.flush();\r\n                        currentRendererName = this._drawCalls[i].renderer;\r\n                        currentRenderer = this._renderers.get(currentRendererName);\r\n                    }\r\n                    // If we are still using the same renderer we can add to the current batch\r\n                    currentRenderer.draw(...this._drawCalls[i].args);\r\n                }\r\n                if (currentRenderer.hasPendingDraws()) {\r\n                    currentRenderer.flush();\r\n                }\r\n            }\r\n            // reset state\r\n            this._transform.current = oldTransform;\r\n            this._state.current = oldState;\r\n            // reclaim draw calls\r\n            this._drawCallPool.done();\r\n            this._drawCalls.length = 0;\r\n        }\r\n        else {\r\n            // This is the final flush at the moment to draw any leftover pending draw\r\n            for (const renderer of this._renderers.values()) {\r\n                if (renderer.hasPendingDraws()) {\r\n                    renderer.flush();\r\n                }\r\n            }\r\n        }\r\n        this._renderTarget.disable();\r\n        // post process step\r\n        const source = this._renderTarget.toRenderSource();\r\n        source.use();\r\n        // flip flop render targets\r\n        for (let i = 0; i < this._postprocessors.length; i++) {\r\n            this._postProcessTargets[i % 2].use();\r\n            this._screenRenderer.renderWithPostProcessor(this._postprocessors[i]);\r\n            this._postProcessTargets[i % 2].toRenderSource().use();\r\n        }\r\n        // passing null switches rendering back to the canvas\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        this._screenRenderer.renderToScreen();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/ExcaliburGraphicsContext2DCanvas.ts\n\r\n\r\n\r\n\r\nconst ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon = 0.0001;\r\nclass ExcaliburGraphicsContext2DCanvasDebug {\r\n    constructor(_ex) {\r\n        this._ex = _ex;\r\n        this._debugText = new DebugText();\r\n    }\r\n    /**\r\n     * Draw a debug rectangle to the context\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     */\r\n    drawRect(x, y, width, height) {\r\n        this._ex.__ctx.save();\r\n        this._ex.__ctx.strokeStyle = 'red';\r\n        this._ex.__ctx.strokeRect(this._ex.snapToPixel ? ~~(x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : x, this._ex.snapToPixel ? ~~(y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : y, this._ex.snapToPixel ? ~~(width + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : width, this._ex.snapToPixel ? ~~(height + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : height);\r\n        this._ex.__ctx.restore();\r\n    }\r\n    drawLine(start, end, lineOptions = { color: Color.Black }) {\r\n        this._ex.__ctx.save();\r\n        this._ex.__ctx.beginPath();\r\n        this._ex.__ctx.strokeStyle = lineOptions.color.toString();\r\n        this._ex.__ctx.moveTo(this._ex.snapToPixel ? ~~(start.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.x, this._ex.snapToPixel ? ~~(start.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.y);\r\n        this._ex.__ctx.lineTo(this._ex.snapToPixel ? ~~(end.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.x, this._ex.snapToPixel ? ~~(end.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.y);\r\n        this._ex.__ctx.lineWidth = 2;\r\n        this._ex.__ctx.stroke();\r\n        this._ex.__ctx.closePath();\r\n        this._ex.__ctx.restore();\r\n    }\r\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\r\n        this._ex.__ctx.save();\r\n        this._ex.__ctx.beginPath();\r\n        this._ex.__ctx.fillStyle = pointOptions.color.toString();\r\n        this._ex.__ctx.arc(this._ex.snapToPixel ? ~~(point.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : point.x, this._ex.snapToPixel ? ~~(point.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : point.y, pointOptions.size, 0, Math.PI * 2);\r\n        this._ex.__ctx.fill();\r\n        this._ex.__ctx.closePath();\r\n        this._ex.__ctx.restore();\r\n    }\r\n    drawText(text, pos) {\r\n        this._debugText.write(this._ex, text, pos);\r\n    }\r\n}\r\nclass ExcaliburGraphicsContext2DCanvas {\r\n    get width() {\r\n        return this.__ctx.canvas.width;\r\n    }\r\n    get height() {\r\n        return this.__ctx.canvas.height;\r\n    }\r\n    get opacity() {\r\n        return this._state.current.opacity;\r\n    }\r\n    set opacity(value) {\r\n        this._state.current.opacity = value;\r\n    }\r\n    get tint() {\r\n        return this._state.current.tint;\r\n    }\r\n    set tint(color) {\r\n        this._state.current.tint = color;\r\n    }\r\n    get smoothing() {\r\n        return this.__ctx.imageSmoothingEnabled;\r\n    }\r\n    set smoothing(value) {\r\n        this.__ctx.imageSmoothingEnabled = value;\r\n    }\r\n    constructor(options) {\r\n        /**\r\n         * Unused in Canvas implementation\r\n         */\r\n        this.useDrawSorting = false;\r\n        /**\r\n         * Unused in Canvas implementation\r\n         */\r\n        this.z = 0;\r\n        this.backgroundColor = Color.ExcaliburBlue;\r\n        this._state = new StateStack();\r\n        this.snapToPixel = false;\r\n        this.debug = new ExcaliburGraphicsContext2DCanvasDebug(this);\r\n        const { canvasElement, enableTransparency, snapToPixel, smoothing, backgroundColor } = options;\r\n        this.__ctx = canvasElement.getContext('2d', {\r\n            alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : true\r\n        });\r\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\r\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\r\n        this.smoothing = smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing;\r\n    }\r\n    resetTransform() {\r\n        this.__ctx.resetTransform();\r\n    }\r\n    updateViewport(_resolution) {\r\n        // pass\r\n    }\r\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        if (swidth === 0 || sheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (dwidth === 0 || dheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (image.width === 0 || image.height === 0) {\r\n            return; // zero dimension source exit early\r\n        }\r\n        this.__ctx.globalAlpha = this.opacity;\r\n        const args = [image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight]\r\n            .filter((a) => a !== undefined)\r\n            .map((a) => (typeof a === 'number' && this.snapToPixel ? ~~a : a));\r\n        this.__ctx.drawImage.apply(this.__ctx, args);\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        GraphicsDiagnostics.DrawnImagesCount = 1;\r\n    }\r\n    drawLine(start, end, color, thickness = 1) {\r\n        this.__ctx.save();\r\n        this.__ctx.beginPath();\r\n        this.__ctx.strokeStyle = color.toString();\r\n        this.__ctx.moveTo(this.snapToPixel ? ~~(start.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.x, this.snapToPixel ? ~~(start.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.y);\r\n        this.__ctx.lineTo(this.snapToPixel ? ~~(end.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.x, this.snapToPixel ? ~~(end.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.y);\r\n        this.__ctx.lineWidth = thickness;\r\n        this.__ctx.stroke();\r\n        this.__ctx.closePath();\r\n        this.__ctx.restore();\r\n    }\r\n    drawRectangle(pos, width, height, color) {\r\n        this.__ctx.save();\r\n        this.__ctx.fillStyle = color.toString();\r\n        this.__ctx.fillRect(this.snapToPixel ? ~~(pos.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.x, this.snapToPixel ? ~~(pos.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.y, this.snapToPixel ? ~~(width + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : width, this.snapToPixel ? ~~(height + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : height);\r\n        this.__ctx.restore();\r\n    }\r\n    drawCircle(pos, radius, color, stroke, thickness) {\r\n        this.__ctx.save();\r\n        this.__ctx.beginPath();\r\n        if (stroke) {\r\n            this.__ctx.strokeStyle = stroke.toString();\r\n        }\r\n        if (thickness) {\r\n            this.__ctx.lineWidth = thickness;\r\n        }\r\n        this.__ctx.fillStyle = color.toString();\r\n        this.__ctx.arc(this.snapToPixel ? ~~(pos.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.x, this.snapToPixel ? ~~(pos.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.y, radius, 0, Math.PI * 2);\r\n        this.__ctx.fill();\r\n        if (stroke) {\r\n            this.__ctx.stroke();\r\n        }\r\n        this.__ctx.closePath();\r\n        this.__ctx.restore();\r\n    }\r\n    /**\r\n     * Save the current state of the canvas to the stack (transforms and opacity)\r\n     */\r\n    save() {\r\n        this.__ctx.save();\r\n    }\r\n    /**\r\n     * Restore the state of the canvas from the stack\r\n     */\r\n    restore() {\r\n        this.__ctx.restore();\r\n    }\r\n    /**\r\n     * Translate the origin of the context by an x and y\r\n     * @param x\r\n     * @param y\r\n     */\r\n    translate(x, y) {\r\n        this.__ctx.translate(this.snapToPixel ? ~~(x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : x, this.snapToPixel ? ~~(y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : y);\r\n    }\r\n    /**\r\n     * Rotate the context about the current origin\r\n     */\r\n    rotate(angle) {\r\n        this.__ctx.rotate(angle);\r\n    }\r\n    /**\r\n     * Scale the context by an x and y factor\r\n     * @param x\r\n     * @param y\r\n     */\r\n    scale(x, y) {\r\n        this.__ctx.scale(x, y);\r\n    }\r\n    getTransform() {\r\n        throw new Error('Not implemented');\r\n    }\r\n    multiply(_m) {\r\n        this.__ctx.setTransform(this.__ctx.getTransform().multiply(_m.toDOMMatrix()));\r\n    }\r\n    addPostProcessor(_postprocessor) {\r\n        // pass\r\n    }\r\n    removePostProcessor(_postprocessor) {\r\n        // pass\r\n    }\r\n    clearPostProcessors() {\r\n        // pass\r\n    }\r\n    updatePostProcessors(_delta) {\r\n        // pass\r\n    }\r\n    beginDrawLifecycle() {\r\n        // pass\r\n    }\r\n    endDrawLifecycle() {\r\n        // pass\r\n    }\r\n    set material(material) {\r\n        this._state.current.material = material;\r\n    }\r\n    get material() {\r\n        return this._state.current.material;\r\n    }\r\n    createMaterial(_options) {\r\n        // pass\r\n        return null;\r\n    }\r\n    clear() {\r\n        // Clear frame\r\n        this.__ctx.clearRect(0, 0, this.width, this.height);\r\n        this.__ctx.fillStyle = this.backgroundColor.toString();\r\n        this.__ctx.fillRect(0, 0, this.width, this.height);\r\n        GraphicsDiagnostics.clear();\r\n    }\r\n    /**\r\n     * Flushes the batched draw calls to the screen\r\n     */\r\n    flush() {\r\n        // pass\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Screen.ts\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Enum representing the different display modes available to Excalibur.\r\n */\r\nvar DisplayMode;\r\n(function (DisplayMode) {\r\n    /**\r\n     * Default, use a specified resolution for the game. Like 800x600 pixels for example.\r\n     */\r\n    DisplayMode[\"Fixed\"] = \"Fixed\";\r\n    /**\r\n     * Fit the aspect ratio given by the game resolution within the container at all times will fill any gaps with canvas.\r\n     * The displayed area outside the aspect ratio is not guaranteed to be on the screen, only the [[Screen.contentArea]]\r\n     * is guaranteed to be on screen.\r\n     */\r\n    DisplayMode[\"FitContainerAndFill\"] = \"FitContainerAndFill\";\r\n    /**\r\n     * Fit the aspect ratio given by the game resolution the screen at all times will fill the screen.\r\n     * This displayed area outside the aspect ratio is not guaranteed to be on the screen, only the [[Screen.contentArea]]\r\n     * is guaranteed to be on screen.\r\n     */\r\n    DisplayMode[\"FitScreenAndFill\"] = \"FitScreenAndFill\";\r\n    /**\r\n     * Fit the viewport to the parent element maintaining aspect ratio given by the game resolution, but zooms in to avoid the black bars\r\n     * (letterbox) that would otherwise be present in [[FitContainer]].\r\n     *\r\n     * **warning** This will clip some drawable area from the user because of the zoom,\r\n     * use [[Screen.contentArea]] to know the safe to draw area.\r\n     */\r\n    DisplayMode[\"FitContainerAndZoom\"] = \"FitContainerAndZoom\";\r\n    /**\r\n     * Fit the viewport to the device screen maintaining aspect ratio given by the game resolution, but zooms in to avoid the black bars\r\n     * (letterbox) that would otherwise be present in [[FitScreen]].\r\n     *\r\n     * **warning** This will clip some drawable area from the user because of the zoom,\r\n     * use [[Screen.contentArea]] to know the safe to draw area.\r\n     */\r\n    DisplayMode[\"FitScreenAndZoom\"] = \"FitScreenAndZoom\";\r\n    /**\r\n     * Fit to screen using as much space as possible while maintaining aspect ratio and resolution.\r\n     * This is not the same as [[Screen.goFullScreen]] but behaves in a similar way maintaining aspect ratio.\r\n     *\r\n     * You may want to center your game here is an example\r\n     * ```html\r\n     * <!-- html -->\r\n     * <body>\r\n     * <main>\r\n     *   <canvas id=\"game\"></canvas>\r\n     * </main>\r\n     * </body>\r\n     * ```\r\n     *\r\n     * ```css\r\n     * // css\r\n     * main {\r\n     *   display: flex;\r\n     *   align-items: center;\r\n     *   justify-content: center;\r\n     *   height: 100%;\r\n     *   width: 100%;\r\n     * }\r\n     * ```\r\n     */\r\n    DisplayMode[\"FitScreen\"] = \"FitScreen\";\r\n    /**\r\n     * Fill the entire screen's css width/height for the game resolution dynamically. This means the resolution of the game will\r\n     * change dynamically as the window is resized. This is not the same as [[Screen.goFullScreen]]\r\n     */\r\n    DisplayMode[\"FillScreen\"] = \"FillScreen\";\r\n    /**\r\n     * Fit to parent element width/height using as much space as possible while maintaining aspect ratio and resolution.\r\n     */\r\n    DisplayMode[\"FitContainer\"] = \"FitContainer\";\r\n    /**\r\n     * Use the parent DOM container's css width/height for the game resolution dynamically\r\n     */\r\n    DisplayMode[\"FillContainer\"] = \"FillContainer\";\r\n})(DisplayMode || (DisplayMode = {}));\r\n/**\r\n * Convenience class for quick resolutions\r\n * Mostly sourced from https://emulation.gametechwiki.com/index.php/Resolution\r\n */\r\nclass Resolution {\r\n    /* istanbul ignore next */\r\n    static get SVGA() {\r\n        return { width: 800, height: 600 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get Standard() {\r\n        return { width: 1920, height: 1080 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get Atari2600() {\r\n        return { width: 160, height: 192 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get GameBoy() {\r\n        return { width: 160, height: 144 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get GameBoyAdvance() {\r\n        return { width: 240, height: 160 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get NintendoDS() {\r\n        return { width: 256, height: 192 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get NES() {\r\n        return { width: 256, height: 224 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get SNES() {\r\n        return { width: 256, height: 244 };\r\n    }\r\n}\r\n/**\r\n * The Screen handles all aspects of interacting with the screen for Excalibur.\r\n */\r\nclass Screen {\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        this._antialiasing = true;\r\n        this._resolutionStack = [];\r\n        this._viewportStack = [];\r\n        this._pixelRatioOverride = null;\r\n        this._isFullScreen = false;\r\n        this._isDisposed = false;\r\n        this._logger = Logger.getInstance();\r\n        this._fullscreenChangeHandler = () => {\r\n            this._isFullScreen = !this._isFullScreen;\r\n            this._logger.debug('Fullscreen Change', this._isFullScreen);\r\n        };\r\n        this._pixelRatioChangeHandler = () => {\r\n            this._logger.debug('Pixel Ratio Change', window.devicePixelRatio);\r\n            this._listenForPixelRatio();\r\n            this._devicePixelRatio = this._calculateDevicePixelRatio();\r\n            this.applyResolutionAndViewport();\r\n        };\r\n        this._resizeHandler = () => {\r\n            const parent = this.parent;\r\n            this._logger.debug('View port resized');\r\n            this._setResolutionAndViewportByDisplayMode(parent);\r\n            this.applyResolutionAndViewport();\r\n        };\r\n        // Asking the window.devicePixelRatio is expensive we do it once\r\n        this._devicePixelRatio = this._calculateDevicePixelRatio();\r\n        this._alreadyWarned = false;\r\n        this._contentArea = new BoundingBox();\r\n        this.viewport = options.viewport;\r\n        this.resolution = (_a = options.resolution) !== null && _a !== void 0 ? _a : { ...this.viewport };\r\n        this._contentResolution = this.resolution;\r\n        this._displayMode = (_b = options.displayMode) !== null && _b !== void 0 ? _b : DisplayMode.Fixed;\r\n        this._canvas = options.canvas;\r\n        this.graphicsContext = options.context;\r\n        this._antialiasing = (_c = options.antialiasing) !== null && _c !== void 0 ? _c : this._antialiasing;\r\n        this._browser = options.browser;\r\n        this._pixelRatioOverride = options.pixelRatio;\r\n        this._applyDisplayMode();\r\n        this._listenForPixelRatio();\r\n        this._canvas.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\r\n        this.applyResolutionAndViewport();\r\n    }\r\n    _listenForPixelRatio() {\r\n        if (this._mediaQueryList && !this._mediaQueryList.addEventListener) {\r\n            // Safari <=13.1 workaround, remove any existing handlers\r\n            this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\r\n        }\r\n        this._mediaQueryList = this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\r\n        // Safari <=13.1 workaround\r\n        if (this._mediaQueryList.addEventListener) {\r\n            this._mediaQueryList.addEventListener('change', this._pixelRatioChangeHandler, { once: true });\r\n        }\r\n        else {\r\n            this._mediaQueryList.addListener(this._pixelRatioChangeHandler);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._isDisposed) {\r\n            // Clean up handlers\r\n            this._isDisposed = true;\r\n            this._browser.window.off('resize', this._resizeHandler);\r\n            if (this._resizeObserver) {\r\n                this._resizeObserver.disconnect();\r\n            }\r\n            this.parent.removeEventListener('resize', this._resizeHandler);\r\n            // Safari <=13.1 workaround\r\n            if (this._mediaQueryList.removeEventListener) {\r\n                this._mediaQueryList.removeEventListener('change', this._pixelRatioChangeHandler);\r\n            }\r\n            else {\r\n                this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\r\n            }\r\n            this._canvas.removeEventListener('fullscreenchange', this._fullscreenChangeHandler);\r\n        }\r\n    }\r\n    _calculateDevicePixelRatio() {\r\n        if (window.devicePixelRatio < 1) {\r\n            return 1;\r\n        }\r\n        const devicePixelRatio = window.devicePixelRatio || 1;\r\n        return devicePixelRatio;\r\n    }\r\n    get pixelRatio() {\r\n        if (this._pixelRatioOverride) {\r\n            return this._pixelRatioOverride;\r\n        }\r\n        return this._devicePixelRatio;\r\n    }\r\n    get isHiDpi() {\r\n        return this.pixelRatio !== 1;\r\n    }\r\n    get displayMode() {\r\n        return this._displayMode;\r\n    }\r\n    get canvas() {\r\n        return this._canvas;\r\n    }\r\n    get parent() {\r\n        switch (this.displayMode) {\r\n            case DisplayMode.FillContainer:\r\n            case DisplayMode.FitContainer:\r\n            case DisplayMode.FitContainerAndFill:\r\n            case DisplayMode.FitContainerAndZoom:\r\n                return this.canvas.parentElement || document.body;\r\n            default:\r\n                return window;\r\n        }\r\n    }\r\n    get resolution() {\r\n        return this._resolution;\r\n    }\r\n    set resolution(resolution) {\r\n        this._resolution = resolution;\r\n    }\r\n    get viewport() {\r\n        if (this._viewport) {\r\n            return this._viewport;\r\n        }\r\n        return this._resolution;\r\n    }\r\n    set viewport(viewport) {\r\n        this._viewport = viewport;\r\n    }\r\n    get aspectRatio() {\r\n        return this._resolution.width / this._resolution.height;\r\n    }\r\n    get scaledWidth() {\r\n        return this._resolution.width * this.pixelRatio;\r\n    }\r\n    get scaledHeight() {\r\n        return this._resolution.height * this.pixelRatio;\r\n    }\r\n    setCurrentCamera(camera) {\r\n        this._camera = camera;\r\n    }\r\n    pushResolutionAndViewport() {\r\n        this._resolutionStack.push(this.resolution);\r\n        this._viewportStack.push(this.viewport);\r\n        this.resolution = { ...this.resolution };\r\n        this.viewport = { ...this.viewport };\r\n    }\r\n    peekViewport() {\r\n        return this._viewportStack[this._viewportStack.length - 1];\r\n    }\r\n    peekResolution() {\r\n        return this._resolutionStack[this._resolutionStack.length - 1];\r\n    }\r\n    popResolutionAndViewport() {\r\n        this.resolution = this._resolutionStack.pop();\r\n        this.viewport = this._viewportStack.pop();\r\n    }\r\n    applyResolutionAndViewport() {\r\n        this._canvas.width = this.scaledWidth;\r\n        this._canvas.height = this.scaledHeight;\r\n        if (this.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\r\n            const supported = this.graphicsContext.checkIfResolutionSupported({\r\n                width: this.scaledWidth,\r\n                height: this.scaledHeight\r\n            });\r\n            if (!supported && !this._alreadyWarned) {\r\n                this._alreadyWarned = true; // warn once\r\n                this._logger.warn(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio})` +\r\n                    ' are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly.' +\r\n                    ' Try reducing the resolution or disabling Hi DPI scaling to avoid this' +\r\n                    ' (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).');\r\n            }\r\n        }\r\n        if (this._antialiasing) {\r\n            this._canvas.style.imageRendering = 'auto';\r\n        }\r\n        else {\r\n            this._canvas.style.imageRendering = 'pixelated';\r\n            // Fall back to 'crisp-edges' if 'pixelated' is not supported\r\n            // Currently for firefox https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering\r\n            if (this._canvas.style.imageRendering === '') {\r\n                this._canvas.style.imageRendering = 'crisp-edges';\r\n            }\r\n        }\r\n        this._canvas.style.width = this.viewport.width + 'px';\r\n        this._canvas.style.height = this.viewport.height + 'px';\r\n        // After messing with the canvas width/height the graphics context is invalidated and needs to have some properties reset\r\n        this.graphicsContext.updateViewport(this.resolution);\r\n        this.graphicsContext.resetTransform();\r\n        this.graphicsContext.smoothing = this._antialiasing;\r\n        if (this.graphicsContext instanceof ExcaliburGraphicsContext2DCanvas) {\r\n            this.graphicsContext.scale(this.pixelRatio, this.pixelRatio);\r\n        }\r\n    }\r\n    get antialiasing() {\r\n        return this._antialiasing;\r\n    }\r\n    set antialiasing(isSmooth) {\r\n        this._antialiasing = isSmooth;\r\n        this.graphicsContext.smoothing = this._antialiasing;\r\n    }\r\n    /**\r\n     * Returns true if excalibur is fullscreen using the browser fullscreen api\r\n     */\r\n    get isFullScreen() {\r\n        return this._isFullScreen;\r\n    }\r\n    /**\r\n     * Requests to go fullscreen using the browser fullscreen api, requires user interaction to be successful.\r\n     * For example, wire this to a user click handler.\r\n     *\r\n     * Optionally specify a target element id to go fullscreen, by default the game canvas is used\r\n     * @param elementId\r\n     */\r\n    goFullScreen(elementId) {\r\n        if (elementId) {\r\n            const maybeElement = document.getElementById(elementId);\r\n            if (maybeElement) {\r\n                return maybeElement.requestFullscreen();\r\n            }\r\n        }\r\n        return this._canvas.requestFullscreen();\r\n    }\r\n    /**\r\n     * Requests to exit fullscreen using the browser fullscreen api\r\n     */\r\n    exitFullScreen() {\r\n        return document.exitFullscreen();\r\n    }\r\n    /**\r\n     * Takes a coordinate in normal html page space, for example from a pointer move event, and translates it to\r\n     * Excalibur screen space.\r\n     *\r\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\r\n     * bottom right corner (resolutionX, resolutionY)\r\n     * @param point\r\n     */\r\n    pageToScreenCoordinates(point) {\r\n        let newX = point.x;\r\n        let newY = point.y;\r\n        if (!this._isFullScreen) {\r\n            newX -= getPosition(this._canvas).x;\r\n            newY -= getPosition(this._canvas).y;\r\n        }\r\n        // if fullscreen api on it centers with black bars\r\n        // we need to adjust the screen to world coordinates in this case\r\n        if (this._isFullScreen) {\r\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\r\n                const screenHeight = window.innerWidth / this.aspectRatio;\r\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\r\n                newY = ((newY - screenMarginY) / screenHeight) * this.viewport.height;\r\n                newX = (newX / window.innerWidth) * this.viewport.width;\r\n            }\r\n            else {\r\n                const screenWidth = window.innerHeight * this.aspectRatio;\r\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\r\n                newX = ((newX - screenMarginX) / screenWidth) * this.viewport.width;\r\n                newY = (newY / window.innerHeight) * this.viewport.height;\r\n            }\r\n        }\r\n        newX = (newX / this.viewport.width) * this.resolution.width;\r\n        newY = (newY / this.viewport.height) * this.resolution.height;\r\n        return new Vector(newX, newY);\r\n    }\r\n    /**\r\n     * Takes a coordinate in Excalibur screen space, and translates it to normal html page space. For example,\r\n     * this is where html elements might live if you want to position them relative to Excalibur.\r\n     *\r\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\r\n     * bottom right corner (resolutionX, resolutionY)\r\n     * @param point\r\n     */\r\n    screenToPageCoordinates(point) {\r\n        let newX = point.x;\r\n        let newY = point.y;\r\n        newX = (newX / this.resolution.width) * this.viewport.width;\r\n        newY = (newY / this.resolution.height) * this.viewport.height;\r\n        if (this._isFullScreen) {\r\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\r\n                const screenHeight = window.innerWidth / this.aspectRatio;\r\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\r\n                newY = (newY / this.viewport.height) * screenHeight + screenMarginY;\r\n                newX = (newX / this.viewport.width) * window.innerWidth;\r\n            }\r\n            else {\r\n                const screenWidth = window.innerHeight * this.aspectRatio;\r\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\r\n                newX = (newX / this.viewport.width) * screenWidth + screenMarginX;\r\n                newY = (newY / this.viewport.height) * window.innerHeight;\r\n            }\r\n        }\r\n        if (!this._isFullScreen) {\r\n            newX += getPosition(this._canvas).x;\r\n            newY += getPosition(this._canvas).y;\r\n        }\r\n        return new Vector(newX, newY);\r\n    }\r\n    /**\r\n     * Takes a coordinate in Excalibur screen space, and translates it to Excalibur world space.\r\n     *\r\n     * World space is where [[Entity|entities]] in Excalibur live by default [[CoordPlane.World]]\r\n     * and extends infinitely out relative from the [[Camera]].\r\n     * @param point  Screen coordinate to convert\r\n     */\r\n    screenToWorldCoordinates(point) {\r\n        // the only difference between screen & world is the camera transform\r\n        if (this._camera) {\r\n            return this._camera.inverse.multiply(point);\r\n        }\r\n        return point.sub(vec(this.resolution.width / 2, this.resolution.height / 2));\r\n    }\r\n    /**\r\n     * Takes a coordinate in Excalibur world space, and translates it to Excalibur screen space.\r\n     *\r\n     * Screen space is where [[ScreenElement|screen elements]] and [[Entity|entities]] with [[CoordPlane.Screen]] live.\r\n     * @param point  World coordinate to convert\r\n     */\r\n    worldToScreenCoordinates(point) {\r\n        if (this._camera) {\r\n            return this._camera.transform.multiply(point);\r\n        }\r\n        return point.add(vec(this.resolution.width / 2, this.resolution.height / 2));\r\n    }\r\n    pageToWorldCoordinates(point) {\r\n        const screen = this.pageToScreenCoordinates(point);\r\n        return this.screenToWorldCoordinates(screen);\r\n    }\r\n    worldToPageCoordinates(point) {\r\n        const screen = this.worldToScreenCoordinates(point);\r\n        return this.screenToPageCoordinates(screen);\r\n    }\r\n    /**\r\n     * Returns a BoundingBox of the top left corner of the screen\r\n     * and the bottom right corner of the screen.\r\n     *\r\n     * World bounds are in world coordinates, useful for culling objects offscreen\r\n     */\r\n    getWorldBounds() {\r\n        const bounds = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Half)\r\n            .scale(vec(1 / this._camera.zoom, 1 / this._camera.zoom))\r\n            .rotate(this._camera.rotation)\r\n            .translate(this._camera.pos);\r\n        return bounds;\r\n    }\r\n    /**\r\n     * The width of the game canvas in pixels (physical width component of the\r\n     * resolution of the canvas element)\r\n     */\r\n    get canvasWidth() {\r\n        return this.canvas.width;\r\n    }\r\n    /**\r\n     * Returns half width of the game canvas in pixels (half physical width component)\r\n     */\r\n    get halfCanvasWidth() {\r\n        return this.canvas.width / 2;\r\n    }\r\n    /**\r\n     * The height of the game canvas in pixels, (physical height component of\r\n     * the resolution of the canvas element)\r\n     */\r\n    get canvasHeight() {\r\n        return this.canvas.height;\r\n    }\r\n    /**\r\n     * Returns half height of the game canvas in pixels (half physical height component)\r\n     */\r\n    get halfCanvasHeight() {\r\n        return this.canvas.height / 2;\r\n    }\r\n    /**\r\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawWidth() {\r\n        if (this._camera) {\r\n            return this.resolution.width / this._camera.zoom;\r\n        }\r\n        return this.resolution.width;\r\n    }\r\n    /**\r\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawWidth() {\r\n        return this.drawWidth / 2;\r\n    }\r\n    /**\r\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawHeight() {\r\n        if (this._camera) {\r\n            return this.resolution.height / this._camera.zoom;\r\n        }\r\n        return this.resolution.height;\r\n    }\r\n    /**\r\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawHeight() {\r\n        return this.drawHeight / 2;\r\n    }\r\n    /**\r\n     * Returns screen center coordinates including zoom and device pixel ratio.\r\n     */\r\n    get center() {\r\n        return vec(this.halfDrawWidth, this.halfDrawHeight);\r\n    }\r\n    /**\r\n     * Returns the content area in screen space where it is safe to place content\r\n     */\r\n    get contentArea() {\r\n        return this._contentArea;\r\n    }\r\n    _computeFit() {\r\n        document.body.style.margin = '0px';\r\n        document.body.style.overflow = 'hidden';\r\n        const aspect = this.aspectRatio;\r\n        let adjustedWidth = 0;\r\n        let adjustedHeight = 0;\r\n        if (window.innerWidth / aspect < window.innerHeight) {\r\n            adjustedWidth = window.innerWidth;\r\n            adjustedHeight = window.innerWidth / aspect;\r\n        }\r\n        else {\r\n            adjustedWidth = window.innerHeight * aspect;\r\n            adjustedHeight = window.innerHeight;\r\n        }\r\n        this.viewport = {\r\n            width: adjustedWidth,\r\n            height: adjustedHeight\r\n        };\r\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\r\n    }\r\n    _computeFitScreenAndFill() {\r\n        document.body.style.margin = '0px';\r\n        document.body.style.overflow = 'hidden';\r\n        const vw = window.innerWidth;\r\n        const vh = window.innerHeight;\r\n        this._computeFitAndFill(vw, vh);\r\n    }\r\n    _computeFitContainerAndFill() {\r\n        document.body.style.margin = '0px';\r\n        document.body.style.overflow = 'hidden';\r\n        const parent = this.canvas.parentElement;\r\n        const vw = parent.clientWidth;\r\n        const vh = parent.clientHeight;\r\n        this._computeFitAndFill(vw, vh);\r\n    }\r\n    _computeFitAndFill(vw, vh) {\r\n        this.viewport = {\r\n            width: vw,\r\n            height: vh\r\n        };\r\n        // if the current screen aspectRatio is less than the original aspectRatio\r\n        if (vw / vh <= this._contentResolution.width / this._contentResolution.height) {\r\n            // compute new resolution to match the original aspect ratio\r\n            this.resolution = {\r\n                width: vw * this._contentResolution.width / vw,\r\n                height: vw * this._contentResolution.width / vw * vh / vw\r\n            };\r\n            const clip = (this.resolution.height - this._contentResolution.height) / 2;\r\n            this._contentArea = new BoundingBox({\r\n                top: clip,\r\n                left: 0,\r\n                right: this._contentResolution.width,\r\n                bottom: this.resolution.height - clip\r\n            });\r\n        }\r\n        else {\r\n            this.resolution = {\r\n                width: vh * this._contentResolution.height / vh * vw / vh,\r\n                height: vh * this._contentResolution.height / vh\r\n            };\r\n            const clip = (this.resolution.width - this._contentResolution.width) / 2;\r\n            this._contentArea = new BoundingBox({\r\n                top: 0,\r\n                left: clip,\r\n                right: this.resolution.width - clip,\r\n                bottom: this._contentResolution.height\r\n            });\r\n        }\r\n    }\r\n    _computeFitScreenAndZoom() {\r\n        document.body.style.margin = '0px';\r\n        document.body.style.overflow = 'hidden';\r\n        this.canvas.style.position = 'absolute';\r\n        const vw = window.innerWidth;\r\n        const vh = window.innerHeight;\r\n        this._computeFitAndZoom(vw, vh);\r\n    }\r\n    _computeFitContainerAndZoom() {\r\n        document.body.style.margin = '0px';\r\n        document.body.style.overflow = 'hidden';\r\n        this.canvas.style.position = 'absolute';\r\n        const parent = this.canvas.parentElement;\r\n        parent.style.position = 'relative';\r\n        parent.style.overflow = 'hidden';\r\n        const vw = parent.clientWidth;\r\n        const vh = parent.clientHeight;\r\n        this._computeFitAndZoom(vw, vh);\r\n    }\r\n    _computeFitAndZoom(vw, vh) {\r\n        const aspect = this.aspectRatio;\r\n        let adjustedWidth = 0;\r\n        let adjustedHeight = 0;\r\n        if (vw / aspect < vh) {\r\n            adjustedWidth = vw;\r\n            adjustedHeight = vw / aspect;\r\n        }\r\n        else {\r\n            adjustedWidth = vh * aspect;\r\n            adjustedHeight = vh;\r\n        }\r\n        const scaleX = vw / adjustedWidth;\r\n        const scaleY = vh / adjustedHeight;\r\n        const maxScaleFactor = Math.max(scaleX, scaleY);\r\n        const zoomedWidth = adjustedWidth * maxScaleFactor;\r\n        const zoomedHeight = adjustedHeight * maxScaleFactor;\r\n        // Center zoomed dimension if bigger than the screen\r\n        if (zoomedWidth > vw) {\r\n            this.canvas.style.left = -(zoomedWidth - vw) / 2 + 'px';\r\n        }\r\n        else {\r\n            this.canvas.style.left = '';\r\n        }\r\n        if (zoomedHeight > vh) {\r\n            this.canvas.style.top = -(zoomedHeight - vh) / 2 + 'px';\r\n        }\r\n        else {\r\n            this.canvas.style.top = '';\r\n        }\r\n        this.viewport = {\r\n            width: zoomedWidth,\r\n            height: zoomedHeight\r\n        };\r\n        const bounds = BoundingBox.fromDimension(this.viewport.width, this.viewport.height, Vector.Zero);\r\n        // return safe area\r\n        if (this.viewport.width > vw) {\r\n            const clip = (this.viewport.width - vw) / this.viewport.width * this.resolution.width;\r\n            bounds.top = 0;\r\n            bounds.left = clip / 2;\r\n            bounds.right = this.resolution.width - clip / 2;\r\n            bounds.bottom = this.resolution.height;\r\n        }\r\n        if (this.viewport.height > vh) {\r\n            const clip = (this.viewport.height - vh) / this.viewport.height * this.resolution.height;\r\n            bounds.top = clip / 2;\r\n            bounds.left = 0;\r\n            bounds.bottom = this.resolution.height - clip / 2;\r\n            bounds.right = this.resolution.width;\r\n        }\r\n        this._contentArea = bounds;\r\n    }\r\n    _computeFitContainer() {\r\n        const aspect = this.aspectRatio;\r\n        let adjustedWidth = 0;\r\n        let adjustedHeight = 0;\r\n        const parent = this.canvas.parentElement;\r\n        if (parent.clientWidth / aspect < parent.clientHeight) {\r\n            adjustedWidth = parent.clientWidth;\r\n            adjustedHeight = parent.clientWidth / aspect;\r\n        }\r\n        else {\r\n            adjustedWidth = parent.clientHeight * aspect;\r\n            adjustedHeight = parent.clientHeight;\r\n        }\r\n        this.viewport = {\r\n            width: adjustedWidth,\r\n            height: adjustedHeight\r\n        };\r\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\r\n    }\r\n    _applyDisplayMode() {\r\n        this._setResolutionAndViewportByDisplayMode(this.parent);\r\n        // watch resizing\r\n        if (this.parent instanceof Window) {\r\n            this._browser.window.on('resize', this._resizeHandler);\r\n        }\r\n        else {\r\n            this._resizeObserver = new ResizeObserver(() => {\r\n                this._resizeHandler();\r\n            });\r\n            this._resizeObserver.observe(this.parent);\r\n        }\r\n        this.parent.addEventListener('resize', this._resizeHandler);\r\n    }\r\n    /**\r\n     * Sets the resolution and viewport based on the selected display mode.\r\n     */\r\n    _setResolutionAndViewportByDisplayMode(parent) {\r\n        if (this.displayMode === DisplayMode.FillContainer) {\r\n            this.resolution = {\r\n                width: parent.clientWidth,\r\n                height: parent.clientHeight\r\n            };\r\n            this.viewport = this.resolution;\r\n        }\r\n        if (this.displayMode === DisplayMode.FillScreen) {\r\n            document.body.style.margin = '0px';\r\n            document.body.style.overflow = 'hidden';\r\n            this.resolution = {\r\n                width: parent.innerWidth,\r\n                height: parent.innerHeight\r\n            };\r\n            this.viewport = this.resolution;\r\n        }\r\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\r\n        if (this.displayMode === DisplayMode.FitScreen) {\r\n            this._computeFit();\r\n        }\r\n        if (this.displayMode === DisplayMode.FitContainer) {\r\n            this._computeFitContainer();\r\n        }\r\n        if (this.displayMode === DisplayMode.FitScreenAndFill) {\r\n            this._computeFitScreenAndFill();\r\n        }\r\n        if (this.displayMode === DisplayMode.FitContainerAndFill) {\r\n            this._computeFitContainerAndFill();\r\n        }\r\n        if (this.displayMode === DisplayMode.FitScreenAndZoom) {\r\n            this._computeFitScreenAndZoom();\r\n        }\r\n        if (this.displayMode === DisplayMode.FitContainerAndZoom) {\r\n            this._computeFitContainerAndZoom();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/AudioContext.ts\n/**\r\n * Internal class used to build instances of AudioContext\r\n */\r\n/* istanbul ignore next */\r\nclass AudioContextFactory {\r\n    static create() {\r\n        if (!this._INSTANCE) {\r\n            if (window.AudioContext || window.webkitAudioContext) {\r\n                this._INSTANCE = new AudioContext();\r\n            }\r\n        }\r\n        return this._INSTANCE;\r\n    }\r\n}\r\nAudioContextFactory._INSTANCE = null;\r\n\n;// CONCATENATED MODULE: ./Util/WebAudio.ts\n\r\n\r\n/**\r\n * Patch for detecting legacy web audio in browsers\r\n * @internal\r\n * @param source\r\n */\r\nfunction isLegacyWebAudioSource(source) {\r\n    return !!source.playbackState;\r\n}\r\nclass WebAudio {\r\n    /**\r\n     * Play an empty sound to unlock Safari WebAudio context. Call this function\r\n     * right after a user interaction event.\r\n     * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\r\n     */\r\n    static unlock() {\r\n        const promise = new Promise((resolve, reject) => {\r\n            if (WebAudio._UNLOCKED || !AudioContextFactory.create()) {\r\n                return resolve(true);\r\n            }\r\n            const unlockTimeoutTimer = setTimeout(() => {\r\n                Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\r\n                resolve(false);\r\n            }, 200);\r\n            const audioContext = AudioContextFactory.create();\r\n            audioContext.resume().then(() => {\r\n                // create empty buffer and play it\r\n                const buffer = audioContext.createBuffer(1, 1, 22050);\r\n                const source = audioContext.createBufferSource();\r\n                let ended = false;\r\n                source.buffer = buffer;\r\n                source.connect(audioContext.destination);\r\n                source.onended = () => (ended = true);\r\n                source.start(0);\r\n                // by checking the play state after some time, we know if we're really unlocked\r\n                setTimeout(() => {\r\n                    if (isLegacyWebAudioSource(source)) {\r\n                        if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\r\n                            WebAudio._UNLOCKED = true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (audioContext.currentTime > 0 || ended) {\r\n                            WebAudio._UNLOCKED = true;\r\n                        }\r\n                    }\r\n                }, 0);\r\n                clearTimeout(unlockTimeoutTimer);\r\n                resolve(true);\r\n            }, () => {\r\n                reject();\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n    static isUnlocked() {\r\n        return this._UNLOCKED;\r\n    }\r\n}\r\nWebAudio._UNLOCKED = false;\r\n\n;// CONCATENATED MODULE: ./Util/DrawUtil.ts\n\r\n/* istanbul ignore next */\r\n/**\r\n * Draw a line on canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param color The color of the line\r\n * @param x1 The start x coordinate\r\n * @param y1 The start y coordinate\r\n * @param x2 The ending x coordinate\r\n * @param y2 The ending y coordinate\r\n * @param thickness The line thickness\r\n * @param cap The [[LineCapStyle]] (butt, round, or square)\r\n */\r\nfunction line(ctx, color = Color.Red, x1, y1, x2, y2, thickness = 1, cap = 'butt') {\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.lineWidth = thickness;\r\n    ctx.lineCap = cap;\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.restore();\r\n}\r\n/* istanbul ignore next */\r\n/**\r\n * Draw the vector as a point onto the canvas.\r\n */\r\nfunction point(ctx, color = Color.Red, point) {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw the vector as a line onto the canvas starting a origin point.\r\n */\r\n/* istanbul ignore next */\r\n/**\r\n *\r\n */\r\nfunction vector(ctx, color, origin, vector, scale = 1.0) {\r\n    const c = color ? color.toString() : 'blue';\r\n    const v = vector.scale(scale);\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = c;\r\n    ctx.moveTo(origin.x, origin.y);\r\n    ctx.lineTo(origin.x + v.x, origin.y + v.y);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw a round rectangle on a canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param x The top-left x coordinate\r\n * @param y The top-left y coordinate\r\n * @param width The width of the rectangle\r\n * @param height The height of the rectangle\r\n * @param radius The border radius of the rectangle\r\n * @param stroke The [[Color]] to stroke rectangle with\r\n * @param fill The [[Color]] to fill rectangle with\r\n */\r\nfunction roundRect(ctx, x, y, width, height, radius = 5, stroke = Color.White, fill = null) {\r\n    let br;\r\n    if (typeof radius === 'number') {\r\n        br = { tl: radius, tr: radius, br: radius, bl: radius };\r\n    }\r\n    else {\r\n        const defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\r\n        for (const prop in defaultRadius) {\r\n            if (defaultRadius.hasOwnProperty(prop)) {\r\n                const side = prop;\r\n                br[side] = radius[side] || defaultRadius[side];\r\n            }\r\n        }\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + br.tl, y);\r\n    ctx.lineTo(x + width - br.tr, y);\r\n    ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\r\n    ctx.lineTo(x + width, y + height - br.br);\r\n    ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\r\n    ctx.lineTo(x + br.bl, y + height);\r\n    ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\r\n    ctx.lineTo(x, y + br.tl);\r\n    ctx.quadraticCurveTo(x, y, x + br.tl, y);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n *\r\n */\r\nfunction circle(ctx, x, y, radius, stroke = Color.White, fill = null) {\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Loader.logo.png\n/* harmony default export */ const Loader_logo = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=\");\n// EXTERNAL MODULE: ./Loader.css\nvar Loader_0 = __webpack_require__(1388);\n;// CONCATENATED MODULE: ./Graphics/Raster.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * A Raster is a Graphic that needs to be first painted to a HTMLCanvasElement before it can be drawn to the\r\n * [[ExcaliburGraphicsContext]]. This is useful for generating custom images using the 2D canvas api.\r\n *\r\n * Implementors must implement the [[Raster.execute]] method to rasterize their drawing.\r\n */\r\nclass Raster extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        super(options);\r\n        this.filtering = null;\r\n        this.lineCap = 'butt';\r\n        this.quality = 1;\r\n        this._dirty = true;\r\n        this._smoothing = false;\r\n        this._color = watch(Color.Black, () => this.flagDirty());\r\n        this._lineWidth = 1;\r\n        this._lineDash = [];\r\n        this._padding = 0;\r\n        if (options) {\r\n            this.quality = (_a = options.quality) !== null && _a !== void 0 ? _a : this.quality;\r\n            this.color = (_b = options.color) !== null && _b !== void 0 ? _b : Color.Black;\r\n            this.strokeColor = options === null || options === void 0 ? void 0 : options.strokeColor;\r\n            this.smoothing = (_c = options.smoothing) !== null && _c !== void 0 ? _c : this.smoothing;\r\n            this.lineWidth = (_d = options.lineWidth) !== null && _d !== void 0 ? _d : this.lineWidth;\r\n            this.lineDash = (_e = options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\r\n            this.lineCap = (_f = options.lineCap) !== null && _f !== void 0 ? _f : this.lineCap;\r\n            this.padding = (_g = options.padding) !== null && _g !== void 0 ? _g : this.padding;\r\n            this.filtering = (_h = options.filtering) !== null && _h !== void 0 ? _h : this.filtering;\r\n        }\r\n        this._bitmap = document.createElement('canvas');\r\n        // get the default canvas width/height as a fallback\r\n        const bitmapWidth = (_j = options === null || options === void 0 ? void 0 : options.width) !== null && _j !== void 0 ? _j : this._bitmap.width;\r\n        const bitmapHeight = (_k = options === null || options === void 0 ? void 0 : options.height) !== null && _k !== void 0 ? _k : this._bitmap.height;\r\n        this.width = bitmapWidth;\r\n        this.height = bitmapHeight;\r\n        const maybeCtx = this._bitmap.getContext('2d');\r\n        if (!maybeCtx) {\r\n            /* istanbul ignore next */\r\n            throw new Error('Browser does not support 2d canvas drawing, cannot create Raster graphic');\r\n        }\r\n        else {\r\n            this._ctx = maybeCtx;\r\n        }\r\n    }\r\n    cloneRasterOptions() {\r\n        return {\r\n            color: this.color ? this.color.clone() : null,\r\n            strokeColor: this.strokeColor ? this.strokeColor.clone() : null,\r\n            smoothing: this.smoothing,\r\n            lineWidth: this.lineWidth,\r\n            lineDash: this.lineDash,\r\n            lineCap: this.lineCap,\r\n            quality: this.quality,\r\n            padding: this.padding\r\n        };\r\n    }\r\n    /**\r\n     * Gets whether the graphic is dirty, this means there are changes that haven't been re-rasterized\r\n     */\r\n    get dirty() {\r\n        return this._dirty;\r\n    }\r\n    /**\r\n     * Flags the graphic as dirty, meaning it must be re-rasterized before draw.\r\n     * This should be called any time the graphics state changes such that it affects the outputted drawing\r\n     */\r\n    flagDirty() {\r\n        this._dirty = true;\r\n    }\r\n    /**\r\n     * Gets or sets the current width of the Raster graphic. Setting the width will cause the raster\r\n     * to be flagged dirty causing a re-raster on the next draw.\r\n     *\r\n     * Any `padding`s or `quality` set will be factored into the width\r\n     */\r\n    get width() {\r\n        return Math.abs(this._getTotalWidth() * this.scale.x);\r\n    }\r\n    set width(value) {\r\n        value /= Math.abs(this.scale.x);\r\n        this._bitmap.width = value;\r\n        this._originalWidth = value;\r\n        this.flagDirty();\r\n    }\r\n    /**\r\n     * Gets or sets the current height of the Raster graphic. Setting the height will cause the raster\r\n     * to be flagged dirty causing a re-raster on the next draw.\r\n     *\r\n     * Any `padding` or `quality` set will be factored into the height\r\n     */\r\n    get height() {\r\n        return Math.abs(this._getTotalHeight() * this.scale.y);\r\n    }\r\n    set height(value) {\r\n        value /= Math.abs(this.scale.y);\r\n        this._bitmap.height = value;\r\n        this._originalHeight = value;\r\n        this.flagDirty();\r\n    }\r\n    _getTotalWidth() {\r\n        var _a;\r\n        return (((_a = this._originalWidth) !== null && _a !== void 0 ? _a : this._bitmap.width) + this.padding * 2) * 1;\r\n    }\r\n    _getTotalHeight() {\r\n        var _a;\r\n        return (((_a = this._originalHeight) !== null && _a !== void 0 ? _a : this._bitmap.height) + this.padding * 2) * 1;\r\n    }\r\n    /**\r\n     * Returns the local bounds of the Raster including the padding\r\n     */\r\n    get localBounds() {\r\n        return BoundingBox.fromDimension(this._getTotalWidth() * this.scale.x, this._getTotalHeight() * this.scale.y, Vector.Zero);\r\n    }\r\n    /**\r\n     * Gets or sets the smoothing (anti-aliasing of the graphic). Setting the height will cause the raster\r\n     * to be flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get smoothing() {\r\n        return this._smoothing;\r\n    }\r\n    set smoothing(value) {\r\n        this._smoothing = value;\r\n        this.flagDirty();\r\n    }\r\n    /**\r\n     * Gets or sets the fillStyle of the Raster graphic. Setting the fillStyle will cause the raster to be\r\n     * flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(value) {\r\n        this.flagDirty();\r\n        this._color = watch(value, () => this.flagDirty());\r\n    }\r\n    /**\r\n     * Gets or sets the strokeStyle of the Raster graphic. Setting the strokeStyle will cause the raster to be\r\n     * flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get strokeColor() {\r\n        return this._strokeColor;\r\n    }\r\n    set strokeColor(value) {\r\n        this.flagDirty();\r\n        this._strokeColor = watch(value, () => this.flagDirty());\r\n    }\r\n    /**\r\n     * Gets or sets the line width of the Raster graphic. Setting the lineWidth will cause the raster to be\r\n     * flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get lineWidth() {\r\n        return this._lineWidth;\r\n    }\r\n    set lineWidth(value) {\r\n        this._lineWidth = value;\r\n        this.flagDirty();\r\n    }\r\n    get lineDash() {\r\n        return this._lineDash;\r\n    }\r\n    set lineDash(value) {\r\n        this._lineDash = value;\r\n        this.flagDirty();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(value) {\r\n        this._padding = value;\r\n        this.flagDirty();\r\n    }\r\n    /**\r\n     * Rasterize the graphic to a bitmap making it usable as in excalibur. Rasterize is called automatically if\r\n     * the graphic is [[Raster.dirty]] on the next [[Graphic.draw]] call\r\n     */\r\n    rasterize() {\r\n        this._dirty = false;\r\n        this._ctx.clearRect(0, 0, this._getTotalWidth(), this._getTotalHeight());\r\n        this._ctx.save();\r\n        this._applyRasterProperties(this._ctx);\r\n        this.execute(this._ctx);\r\n        this._ctx.restore();\r\n    }\r\n    _applyRasterProperties(ctx) {\r\n        var _a, _b, _c;\r\n        this._bitmap.width = this._getTotalWidth() * this.quality;\r\n        this._bitmap.height = this._getTotalHeight() * this.quality;\r\n        // Do a bad thing to pass the filtering as an attribute\r\n        this._bitmap.setAttribute('filtering', this.filtering);\r\n        this._bitmap.setAttribute('forceUpload', 'true');\r\n        ctx.scale(this.quality, this.quality);\r\n        ctx.translate(this.padding, this.padding);\r\n        ctx.imageSmoothingEnabled = this.smoothing;\r\n        ctx.lineWidth = this.lineWidth;\r\n        ctx.setLineDash((_a = this.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\r\n        ctx.lineCap = this.lineCap;\r\n        ctx.strokeStyle = (_b = this.strokeColor) === null || _b === void 0 ? void 0 : _b.toString();\r\n        ctx.fillStyle = (_c = this.color) === null || _c === void 0 ? void 0 : _c.toString();\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        if (this._dirty) {\r\n            this.rasterize();\r\n        }\r\n        ex.scale(1 / this.quality, 1 / this.quality);\r\n        ex.drawImage(this._bitmap, x, y);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Canvas.ts\n\r\n/**\r\n * A canvas [[Graphic]] to provide an adapter between the 2D Canvas API and the [[ExcaliburGraphicsContext]].\r\n *\r\n * The [[Canvas]] works by re-rastering a draw handler to a HTMLCanvasElement for every draw which is then passed\r\n * to the [[ExcaliburGraphicsContext]] implementation as a rendered image.\r\n *\r\n * **Low performance API**\r\n */\r\nclass Canvas extends Raster {\r\n    /**\r\n     * Return the 2D graphics context of this canvas\r\n     */\r\n    get ctx() {\r\n        return this._ctx;\r\n    }\r\n    constructor(_options) {\r\n        super(_options);\r\n        this._options = _options;\r\n    }\r\n    clone() {\r\n        return new Canvas({\r\n            ...this._options,\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        var _a, _b;\r\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.draw) {\r\n            (_b = this._options) === null || _b === void 0 ? void 0 : _b.draw(ctx);\r\n        }\r\n        if (!this._options.cache) {\r\n            this.flagDirty();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Interfaces/AudioImplementation.ts\nclass ExResponse {\r\n}\r\nExResponse.type = {\r\n    any: '',\r\n    blob: 'blob',\r\n    json: 'json',\r\n    text: 'text',\r\n    document: 'document',\r\n    arraybuffer: 'arraybuffer'\r\n};\r\n\n;// CONCATENATED MODULE: ./Util/StateMachine.ts\nclass StateMachine {\r\n    constructor() {\r\n        this.states = new Map();\r\n    }\r\n    get currentState() {\r\n        return this._currentState;\r\n    }\r\n    set currentState(state) {\r\n        this._currentState = state;\r\n    }\r\n    static create(machineDescription, data) {\r\n        const machine = new StateMachine();\r\n        machine.data = data;\r\n        for (const stateName in machineDescription.states) {\r\n            machine.states.set(stateName, {\r\n                name: stateName,\r\n                ...machineDescription.states[stateName]\r\n            });\r\n        }\r\n        // validate transitions are states\r\n        for (const state of machine.states.values()) {\r\n            for (const transitionState of state.transitions) {\r\n                if (transitionState === '*') {\r\n                    continue;\r\n                }\r\n                if (!machine.states.has(transitionState)) {\r\n                    throw Error(`Invalid state machine, state [${state.name}] has a transition to another state that doesn't exist [${transitionState}]`);\r\n                }\r\n            }\r\n        }\r\n        machine.currentState = machine.startState = machine.states.get(machineDescription.start);\r\n        return machine;\r\n    }\r\n    in(state) {\r\n        return this.currentState.name === state;\r\n    }\r\n    go(stateName, eventData) {\r\n        var _a, _b;\r\n        if (this.currentState.transitions.includes(stateName) || this.currentState.transitions.includes('*')) {\r\n            const potentialNewState = this.states.get(stateName);\r\n            if (this.currentState.onExit) {\r\n                const canExit = (_a = this.currentState) === null || _a === void 0 ? void 0 : _a.onExit({ to: potentialNewState.name, data: this.data });\r\n                if (canExit === false) {\r\n                    return false;\r\n                }\r\n            }\r\n            if (potentialNewState === null || potentialNewState === void 0 ? void 0 : potentialNewState.onEnter) {\r\n                const canEnter = potentialNewState === null || potentialNewState === void 0 ? void 0 : potentialNewState.onEnter({ from: this.currentState.name, eventData, data: this.data });\r\n                if (canEnter === false) {\r\n                    return false;\r\n                }\r\n            }\r\n            // console.log(`${this.currentState.name} => ${potentialNewState.name} (${eventData})`);\r\n            this.currentState = potentialNewState;\r\n            if ((_b = this.currentState) === null || _b === void 0 ? void 0 : _b.onState) {\r\n                this.currentState.onState();\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    update(elapsedMs) {\r\n        if (this.currentState.onUpdate) {\r\n            this.currentState.onUpdate(this.data, elapsedMs);\r\n        }\r\n    }\r\n    save(saveKey) {\r\n        localStorage.setItem(saveKey, JSON.stringify({\r\n            currentState: this.currentState.name,\r\n            data: this.data\r\n        }));\r\n    }\r\n    restore(saveKey) {\r\n        const state = JSON.parse(localStorage.getItem(saveKey));\r\n        this.currentState = this.states.get(state.currentState);\r\n        this.data = state.data;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/WebAudioInstance.ts\n\r\n\r\n\r\n/**\r\n * Internal class representing a Web Audio AudioBufferSourceNode instance\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\r\n */\r\nclass WebAudioInstance {\r\n    _createNewBufferSource() {\r\n        this._instance = this._audioContext.createBufferSource();\r\n        this._instance.buffer = this._src;\r\n        this._instance.loop = this.loop;\r\n        this._instance.playbackRate.value = this._playbackRate;\r\n        this._instance.connect(this._volumeNode);\r\n        this._volumeNode.connect(this._audioContext.destination);\r\n    }\r\n    _handleEnd() {\r\n        if (!this.loop) {\r\n            this._instance.onended = () => {\r\n                this._playingResolve(true);\r\n            };\r\n        }\r\n    }\r\n    set loop(value) {\r\n        this._loop = value;\r\n        if (this._instance) {\r\n            this._instance.loop = value;\r\n            if (!this.loop) {\r\n                this._instance.onended = () => {\r\n                    this._playingResolve(true);\r\n                };\r\n            }\r\n        }\r\n    }\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n    set volume(value) {\r\n        value = clamp(value, 0, 1.0);\r\n        this._volume = value;\r\n        if (this._stateMachine.in('PLAYING') && this._volumeNode.gain.setTargetAtTime) {\r\n            // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\r\n            // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\r\n            // This exponential ramp provides a more pleasant transition in gain\r\n            this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\r\n        }\r\n        else {\r\n            this._volumeNode.gain.value = value;\r\n        }\r\n    }\r\n    get volume() {\r\n        return this._volume;\r\n    }\r\n    /**\r\n     * Returns the set duration to play, otherwise returns the total duration if unset\r\n     */\r\n    get duration() {\r\n        var _a;\r\n        return (_a = this._duration) !== null && _a !== void 0 ? _a : this.getTotalPlaybackDuration();\r\n    }\r\n    /**\r\n     * Set the duration that this audio should play.\r\n     *\r\n     * Note: if you seek to a specific point the duration will start from that point, for example\r\n     *\r\n     * If you have a 10 second clip, seek to 5 seconds, then set the duration to 2, it will play the clip from 5-7 seconds.\r\n     */\r\n    set duration(duration) {\r\n        this._duration = duration;\r\n    }\r\n    constructor(_src) {\r\n        this._src = _src;\r\n        this._audioContext = AudioContextFactory.create();\r\n        this._volumeNode = this._audioContext.createGain();\r\n        this._playingPromise = new Promise((resolve) => {\r\n            this._playingResolve = resolve;\r\n        });\r\n        this._stateMachine = StateMachine.create({\r\n            start: 'STOPPED',\r\n            states: {\r\n                PLAYING: {\r\n                    onEnter: ({ data }) => {\r\n                        // Buffer nodes are single use\r\n                        this._createNewBufferSource();\r\n                        this._handleEnd();\r\n                        if (this.loop) {\r\n                            // when looping don't set a duration\r\n                            this._instance.start(0, data.pausedAt * this._playbackRate);\r\n                        }\r\n                        else {\r\n                            this._instance.start(0, data.pausedAt * this._playbackRate, this.duration);\r\n                        }\r\n                        data.startedAt = (this._audioContext.currentTime - data.pausedAt);\r\n                        data.pausedAt = 0;\r\n                    },\r\n                    onState: () => this._playStarted(),\r\n                    onExit: ({ to }) => {\r\n                        // If you've exited early only resolve if explicitly STOPPED\r\n                        if (to === 'STOPPED') {\r\n                            this._playingResolve(true);\r\n                        }\r\n                        // Whenever you're not playing... you stop!\r\n                        this._instance.onended = null; // disconnect the wired on-end handler\r\n                        this._instance.disconnect();\r\n                        this._instance.stop(0);\r\n                        this._instance = null;\r\n                    },\r\n                    transitions: ['STOPPED', 'PAUSED', 'SEEK']\r\n                },\r\n                SEEK: {\r\n                    onEnter: ({ eventData: position, data }) => {\r\n                        data.pausedAt = (position !== null && position !== void 0 ? position : 0) / this._playbackRate;\r\n                        data.startedAt = 0;\r\n                    },\r\n                    transitions: ['*']\r\n                },\r\n                STOPPED: {\r\n                    onEnter: ({ data }) => {\r\n                        data.pausedAt = 0;\r\n                        data.startedAt = 0;\r\n                        this._playingResolve(true);\r\n                    },\r\n                    transitions: ['PLAYING', 'PAUSED', 'SEEK']\r\n                },\r\n                PAUSED: {\r\n                    onEnter: ({ data }) => {\r\n                        // Playback rate will be a scale factor of how fast/slow the audio is being played\r\n                        // default is 1.0\r\n                        // we need to invert it to get the time scale\r\n                        data.pausedAt = (this._audioContext.currentTime - data.startedAt);\r\n                    },\r\n                    transitions: ['PLAYING', 'STOPPED', 'SEEK']\r\n                }\r\n            }\r\n        }, {\r\n            startedAt: 0,\r\n            pausedAt: 0\r\n        });\r\n        this._volume = 1;\r\n        this._loop = false;\r\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n        this._playStarted = () => { };\r\n        this._playbackRate = 1.0;\r\n        this._createNewBufferSource();\r\n    }\r\n    isPlaying() {\r\n        return this._stateMachine.in('PLAYING');\r\n    }\r\n    isPaused() {\r\n        return this._stateMachine.in('PAUSED') || this._stateMachine.in('SEEK');\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    play(playStarted = () => { }) {\r\n        this._playStarted = playStarted;\r\n        this._stateMachine.go('PLAYING');\r\n        return this._playingPromise;\r\n    }\r\n    pause() {\r\n        this._stateMachine.go('PAUSED');\r\n    }\r\n    stop() {\r\n        this._stateMachine.go('STOPPED');\r\n    }\r\n    seek(position) {\r\n        this._stateMachine.go('PAUSED');\r\n        this._stateMachine.go('SEEK', position);\r\n    }\r\n    getTotalPlaybackDuration() {\r\n        return this._src.duration;\r\n    }\r\n    getPlaybackPosition() {\r\n        const { pausedAt, startedAt } = this._stateMachine.data;\r\n        if (pausedAt) {\r\n            return pausedAt * this._playbackRate;\r\n        }\r\n        if (startedAt) {\r\n            return (this._audioContext.currentTime - startedAt) * this._playbackRate;\r\n        }\r\n        return 0;\r\n    }\r\n    set playbackRate(playbackRate) {\r\n        this._instance.playbackRate.value = this._playbackRate = playbackRate;\r\n    }\r\n    get playbackRate() {\r\n        return this._instance.playbackRate.value;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Events/MediaEvents.ts\n\r\nclass MediaEvent extends GameEvent {\r\n    /**\r\n     * Media event cannot bubble\r\n     */\r\n    set bubbles(_value) {\r\n        // stubbed\r\n    }\r\n    /**\r\n     * Media event cannot bubble\r\n     */\r\n    get bubbles() {\r\n        return false;\r\n    }\r\n    /**\r\n     * Media event cannot bubble, so they have no path\r\n     */\r\n    get _path() {\r\n        return null;\r\n    }\r\n    /**\r\n     * Media event cannot bubble, so they have no path\r\n     */\r\n    set _path(_val) {\r\n        // stubbed\r\n    }\r\n    constructor(target, _name = 'MediaEvent') {\r\n        super();\r\n        this.target = target;\r\n        this._name = _name;\r\n    }\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    stopPropagation() {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n    /**\r\n     * Action, that calls when event happens\r\n     */\r\n    action() {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n    /**\r\n     * Propagate event further through event path\r\n     */\r\n    propagate() {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n    layPath(_actor) {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n}\r\nclass NativeSoundEvent extends MediaEvent {\r\n    constructor(target, track) {\r\n        super(target, 'NativeSoundEvent');\r\n        this.track = track;\r\n    }\r\n}\r\nclass NativeSoundProcessedEvent extends MediaEvent {\r\n    constructor(target, _processedData) {\r\n        super(target, 'NativeSoundProcessedEvent');\r\n        this._processedData = _processedData;\r\n        this.data = this._processedData;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Sound.ts\n\r\n/**\r\n * Whether or not the browser can play this file as HTML5 Audio\r\n */\r\nfunction canPlayFile(file) {\r\n    try {\r\n        const a = new Audio();\r\n        const filetype = /.*\\.([A-Za-z0-9]+)(?:(?:\\?|\\#).*)*$/;\r\n        const type = file.match(filetype)[1];\r\n        if (a.canPlayType('audio/' + type)) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    catch (e) {\r\n        Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\r\n        return false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/Sound.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst SoundEvents = {\r\n    VolumeChange: 'volumechange',\r\n    Processed: 'processed',\r\n    Pause: 'pause',\r\n    Stop: 'stop',\r\n    PlaybackEnd: 'playbackend',\r\n    Resume: 'resume',\r\n    PlaybackStart: 'playbackstart'\r\n};\r\n/**\r\n * The [[Sound]] object allows games built in Excalibur to load audio\r\n * components, from soundtracks to sound effects. [[Sound]] is an [[Loadable]]\r\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\r\n */\r\nclass Sound {\r\n    /**\r\n     * Indicates whether the clip should loop when complete\r\n     * @param value  Set the looping flag\r\n     */\r\n    set loop(value) {\r\n        this._loop = value;\r\n        for (const track of this._tracks) {\r\n            track.loop = this._loop;\r\n        }\r\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\r\n    }\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n    set volume(value) {\r\n        this._volume = value;\r\n        for (const track of this._tracks) {\r\n            track.volume = this._volume;\r\n        }\r\n        this.events.emit('volumechange', new NativeSoundEvent(this));\r\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\r\n    }\r\n    get volume() {\r\n        return this._volume;\r\n    }\r\n    /**\r\n     * Get the duration that this audio should play. If unset the total natural playback duration will be used.\r\n     */\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    /**\r\n     * Set the duration that this audio should play. If unset the total natural playback duration will be used.\r\n     *\r\n     * Note: if you seek to a specific point the duration will start from that point, for example\r\n     *\r\n     * If you have a 10 second clip, seek to 5 seconds, then set the duration to 2, it will play the clip from 5-7 seconds.\r\n     */\r\n    set duration(duration) {\r\n        this._duration = duration;\r\n    }\r\n    /**\r\n     * Return array of Current AudioInstances playing or being paused\r\n     */\r\n    get instances() {\r\n        return this._tracks;\r\n    }\r\n    get path() {\r\n        return this._resource.path;\r\n    }\r\n    set path(val) {\r\n        this._resource.path = val;\r\n    }\r\n    /**\r\n     * Should excalibur add a cache busting querystring? By default false.\r\n     * Must be set before loading\r\n     */\r\n    get bustCache() {\r\n        return this._resource.bustCache;\r\n    }\r\n    set bustCache(val) {\r\n        this._resource.bustCache = val;\r\n    }\r\n    /**\r\n     * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\r\n     */\r\n    constructor(...paths) {\r\n        this.events = new EventEmitter();\r\n        this.logger = Logger.getInstance();\r\n        this._loop = false;\r\n        this._volume = 1;\r\n        this._isStopped = false;\r\n        // private _isPaused = false;\r\n        this._tracks = [];\r\n        this._wasPlayingOnHidden = false;\r\n        this._playbackRate = 1.0;\r\n        this._audioContext = AudioContextFactory.create();\r\n        this._resource = new Resource('', ExResponse.type.arraybuffer);\r\n        /**\r\n         * Chrome : MP3, WAV, Ogg\r\n         * Firefox : WAV, Ogg,\r\n         * IE : MP3, WAV coming soon\r\n         * Safari MP3, WAV, Ogg\r\n         */\r\n        for (const path of paths) {\r\n            if (canPlayFile(path)) {\r\n                this.path = path;\r\n                break;\r\n            }\r\n        }\r\n        if (!this.path) {\r\n            this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\r\n            this.logger.warn('Attempting to use', paths[0]);\r\n            this.path = paths[0]; // select the first specified\r\n        }\r\n    }\r\n    isLoaded() {\r\n        return !!this.data;\r\n    }\r\n    async load() {\r\n        var _a, _b;\r\n        if (this.data) {\r\n            return this.data;\r\n        }\r\n        const arraybuffer = await this._resource.load();\r\n        const audiobuffer = await this.decodeAudio(arraybuffer.slice(0));\r\n        this._duration = (_b = (_a = this._duration) !== null && _a !== void 0 ? _a : audiobuffer === null || audiobuffer === void 0 ? void 0 : audiobuffer.duration) !== null && _b !== void 0 ? _b : undefined;\r\n        this.events.emit('processed', new NativeSoundProcessedEvent(this, audiobuffer));\r\n        return this.data = audiobuffer;\r\n    }\r\n    async decodeAudio(data) {\r\n        try {\r\n            return await this._audioContext.decodeAudioData(data.slice(0));\r\n        }\r\n        catch (e) {\r\n            this.logger.error('Unable to decode ' +\r\n                ' this browser may not fully support this format, or the file may be corrupt, ' +\r\n                'if this is an mp3 try removing id3 tags and album art from the file.');\r\n            return await Promise.reject();\r\n        }\r\n    }\r\n    wireEngine(engine) {\r\n        if (engine) {\r\n            this._engine = engine;\r\n            this._engine.on('hidden', () => {\r\n                if (engine.pauseAudioWhenHidden && this.isPlaying()) {\r\n                    this._wasPlayingOnHidden = true;\r\n                    this.pause();\r\n                }\r\n            });\r\n            this._engine.on('visible', () => {\r\n                if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\r\n                    this.play();\r\n                    this._wasPlayingOnHidden = false;\r\n                }\r\n            });\r\n            this._engine.on('start', () => {\r\n                this._isStopped = false;\r\n            });\r\n            this._engine.on('stop', () => {\r\n                this.stop();\r\n                this._isStopped = true;\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Returns how many instances of the sound are currently playing\r\n     */\r\n    instanceCount() {\r\n        return this._tracks.length;\r\n    }\r\n    /**\r\n     * Whether or not the sound is playing right now\r\n     */\r\n    isPlaying() {\r\n        return this._tracks.some((t) => t.isPlaying());\r\n    }\r\n    isPaused() {\r\n        return this._tracks.some(t => t.isPaused());\r\n    }\r\n    /**\r\n     * Play the sound, returns a promise that resolves when the sound is done playing\r\n     * An optional volume argument can be passed in to play the sound. Max volume is 1.0\r\n     */\r\n    play(volume) {\r\n        if (!this.isLoaded()) {\r\n            this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\r\n            return Promise.resolve(true);\r\n        }\r\n        if (this._isStopped) {\r\n            this.logger.warn('Cannot start playing. Engine is in a stopped state.');\r\n            return Promise.resolve(false);\r\n        }\r\n        this.volume = volume || this.volume;\r\n        if (this.isPaused()) {\r\n            return this._resumePlayback();\r\n        }\r\n        else {\r\n            return this._startPlayback();\r\n        }\r\n    }\r\n    /**\r\n     * Stop the sound, and do not rewind\r\n     */\r\n    pause() {\r\n        if (!this.isPlaying()) {\r\n            return;\r\n        }\r\n        for (const track of this._tracks) {\r\n            track.pause();\r\n        }\r\n        this.events.emit('pause', new NativeSoundEvent(this));\r\n        this.logger.debug('Paused all instances of sound', this.path);\r\n    }\r\n    /**\r\n     * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\r\n     */\r\n    stop() {\r\n        for (const track of this._tracks) {\r\n            track.stop();\r\n        }\r\n        this.events.emit('stop', new NativeSoundEvent(this));\r\n        this._tracks.length = 0;\r\n        this.logger.debug('Stopped all instances of sound', this.path);\r\n    }\r\n    get playbackRate() {\r\n        return this._playbackRate;\r\n    }\r\n    set playbackRate(playbackRate) {\r\n        this._playbackRate = playbackRate;\r\n        this._tracks.forEach(t => {\r\n            t.playbackRate = this._playbackRate;\r\n        });\r\n    }\r\n    seek(position, trackId = 0) {\r\n        if (this._tracks.length === 0) {\r\n            this._getTrackInstance(this.data);\r\n        }\r\n        this._tracks[trackId].seek(position);\r\n    }\r\n    getTotalPlaybackDuration() {\r\n        return this.data.duration;\r\n    }\r\n    /**\r\n     * Return the current playback time of the playing track in seconds from the start.\r\n     *\r\n     * Optionally specify the track to query if multiple are playing at once.\r\n     * @param trackId\r\n     */\r\n    getPlaybackPosition(trackId = 0) {\r\n        if (this._tracks.length) {\r\n            return this._tracks[trackId].getPlaybackPosition();\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Get Id of provided AudioInstance in current trackList\r\n     * @param track [[Audio]] which Id is to be given\r\n     */\r\n    getTrackId(track) {\r\n        return this._tracks.indexOf(track);\r\n    }\r\n    async _resumePlayback() {\r\n        if (this.isPaused) {\r\n            const resumed = [];\r\n            // ensure we resume *current* tracks (if paused)\r\n            for (const track of this._tracks) {\r\n                resumed.push(track.play().then(() => {\r\n                    this.events.emit('playbackend', new NativeSoundEvent(this, track));\r\n                    this._tracks.splice(this.getTrackId(track), 1);\r\n                    return true;\r\n                }));\r\n            }\r\n            this.events.emit('resume', new NativeSoundEvent(this));\r\n            this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\r\n            // resolve when resumed tracks are done\r\n            await Promise.all(resumed);\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Starts playback, returns a promise that resolves when playback is complete\r\n     */\r\n    async _startPlayback() {\r\n        const track = await this._getTrackInstance(this.data);\r\n        const complete = await track.play(() => {\r\n            this.events.emit('playbackstart', new NativeSoundEvent(this, track));\r\n            this.logger.debug('Playing new instance for sound', this.path);\r\n        });\r\n        // when done, remove track\r\n        this.events.emit('playbackend', new NativeSoundEvent(this, track));\r\n        this._tracks.splice(this.getTrackId(track), 1);\r\n        return complete;\r\n    }\r\n    _getTrackInstance(data) {\r\n        const newTrack = new WebAudioInstance(data);\r\n        newTrack.loop = this.loop;\r\n        newTrack.volume = this.volume;\r\n        newTrack.duration = this.duration;\r\n        newTrack.playbackRate = this._playbackRate;\r\n        this._tracks.push(newTrack);\r\n        return newTrack;\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Loader.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst LoaderEvents = {\r\n// Add event types here\r\n};\r\n/**\r\n * Pre-loading assets\r\n *\r\n * The loader provides a mechanism to preload multiple resources at\r\n * one time. The loader must be passed to the engine in order to\r\n * trigger the loading progress bar.\r\n *\r\n * The [[Loader]] itself implements [[Loadable]] so you can load loaders.\r\n *\r\n * ## Example: Pre-loading resources for a game\r\n *\r\n * ```js\r\n * // create a loader\r\n * var loader = new ex.Loader();\r\n *\r\n * // create a resource dictionary (best practice is to keep a separate file)\r\n * var resources = {\r\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\r\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\r\n * };\r\n *\r\n * // loop through dictionary and add to loader\r\n * for (var loadable in resources) {\r\n *   if (resources.hasOwnProperty(loadable)) {\r\n *     loader.addResource(resources[loadable]);\r\n *   }\r\n * }\r\n *\r\n * // start game\r\n * game.start(loader).then(function () {\r\n *   console.log(\"Game started!\");\r\n * });\r\n * ```\r\n *\r\n * ## Customize the Loader\r\n *\r\n * The loader can be customized to show different, text, logo, background color, and button.\r\n *\r\n * ```typescript\r\n * const loader = new ex.Loader([playerTexture]);\r\n *\r\n * // The loaders button text can simply modified using this\r\n * loader.playButtonText = 'Start the best game ever';\r\n *\r\n * // The logo can be changed by inserting a base64 image string here\r\n *\r\n * loader.logo = 'data:image/png;base64,iVBORw...';\r\n * loader.logoWidth = 15;\r\n * loader.logoHeight = 14;\r\n *\r\n * // The background color can be changed like so by supplying a valid CSS color string\r\n *\r\n * loader.backgroundColor = 'red'\r\n * loader.backgroundColor = '#176BAA'\r\n *\r\n * // To build a completely new button\r\n * loader.startButtonFactory = () => {\r\n *     let myButton = document.createElement('button');\r\n *     myButton.textContent = 'The best button';\r\n *     return myButton;\r\n * };\r\n *\r\n * engine.start(loader).then(() => {});\r\n * ```\r\n */\r\nclass Loader {\r\n    get _image() {\r\n        if (!this._imageElement) {\r\n            this._imageElement = new Image();\r\n            this._imageElement.src = this.logo;\r\n        }\r\n        return this._imageElement;\r\n    }\r\n    get playButtonRootElement() {\r\n        return this._playButtonRootElement;\r\n    }\r\n    get playButtonElement() {\r\n        return this._playButtonElement;\r\n    }\r\n    get _playButton() {\r\n        const existingRoot = document.getElementById('excalibur-play-root');\r\n        if (existingRoot) {\r\n            this._playButtonRootElement = existingRoot;\r\n        }\r\n        if (!this._playButtonRootElement) {\r\n            this._playButtonRootElement = document.createElement('div');\r\n            this._playButtonRootElement.id = 'excalibur-play-root';\r\n            this._playButtonRootElement.style.position = 'absolute';\r\n            document.body.appendChild(this._playButtonRootElement);\r\n        }\r\n        if (!this._styleBlock) {\r\n            this._styleBlock = document.createElement('style');\r\n            this._styleBlock.textContent = this._playButtonStyles;\r\n            document.head.appendChild(this._styleBlock);\r\n        }\r\n        if (!this._playButtonElement) {\r\n            this._playButtonElement = this.startButtonFactory();\r\n            this._playButtonRootElement.appendChild(this._playButtonElement);\r\n        }\r\n        return this._playButtonElement;\r\n    }\r\n    /**\r\n     * @param loadables  Optionally provide the list of resources you want to load at constructor time\r\n     */\r\n    constructor(loadables) {\r\n        this.events = new EventEmitter();\r\n        this.canvas = new Canvas({\r\n            filtering: ImageFiltering.Blended,\r\n            smoothing: true,\r\n            cache: true,\r\n            draw: this.draw.bind(this)\r\n        });\r\n        this._resourceList = [];\r\n        this._index = 0;\r\n        this._playButtonShown = false;\r\n        this._resourceCount = 0;\r\n        this._numLoaded = 0;\r\n        this._progressCounts = {};\r\n        this._totalCounts = {};\r\n        // logo drawing stuff\r\n        // base64 string encoding of the excalibur logo (logo-white.png)\r\n        this.logo = Loader_logo;\r\n        this.logoWidth = 468;\r\n        this.logoHeight = 118;\r\n        /**\r\n         * Gets or sets the color of the loading bar, default is [[Color.White]]\r\n         */\r\n        this.loadingBarColor = Color.White;\r\n        /**\r\n         * Gets or sets the background color of the loader as a hex string\r\n         */\r\n        this.backgroundColor = '#176BAA';\r\n        this.suppressPlayButton = false;\r\n        /** Loads the css from Loader.css */\r\n        this._playButtonStyles = Loader_0/* default */.Z.toString();\r\n        /**\r\n         * Get/set play button text\r\n         */\r\n        this.playButtonText = 'Play game';\r\n        /**\r\n         * Return a html button element for excalibur to use as a play button\r\n         */\r\n        this.startButtonFactory = () => {\r\n            let buttonElement = document.getElementById('excalibur-play');\r\n            if (!buttonElement) {\r\n                buttonElement = document.createElement('button');\r\n            }\r\n            buttonElement.id = 'excalibur-play';\r\n            buttonElement.textContent = this.playButtonText;\r\n            buttonElement.style.display = 'none';\r\n            return buttonElement;\r\n        };\r\n        this._loadingFuture = new Future();\r\n        if (loadables) {\r\n            this.addResources(loadables);\r\n        }\r\n    }\r\n    wireEngine(engine) {\r\n        this._engine = engine;\r\n        this.canvas.width = this._engine.canvas.width;\r\n        this.canvas.height = this._engine.canvas.height;\r\n    }\r\n    /**\r\n     * Add a resource to the loader to load\r\n     * @param loadable  Resource to add\r\n     */\r\n    addResource(loadable) {\r\n        const key = this._index++;\r\n        this._resourceList.push(loadable);\r\n        this._progressCounts[key] = 0;\r\n        this._totalCounts[key] = 1;\r\n        this._resourceCount++;\r\n    }\r\n    /**\r\n     * Add a list of resources to the loader to load\r\n     * @param loadables  The list of resources to load\r\n     */\r\n    addResources(loadables) {\r\n        let i = 0;\r\n        const len = loadables.length;\r\n        for (i; i < len; i++) {\r\n            this.addResource(loadables[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Returns true if the loader has completely loaded all resources\r\n     */\r\n    isLoaded() {\r\n        return this._numLoaded === this._resourceCount;\r\n    }\r\n    /**\r\n     * Shows the play button and returns a promise that resolves when clicked\r\n     */\r\n    async showPlayButton() {\r\n        var _a, _b;\r\n        if (this.suppressPlayButton) {\r\n            this.hidePlayButton();\r\n            // Delay is to give the logo a chance to show, otherwise don't delay\r\n            await delay(500, (_a = this._engine) === null || _a === void 0 ? void 0 : _a.clock);\r\n        }\r\n        else {\r\n            const resizeHandler = () => {\r\n                this._positionPlayButton();\r\n            };\r\n            if ((_b = this._engine) === null || _b === void 0 ? void 0 : _b.browser) {\r\n                this._engine.browser.window.on('resize', resizeHandler);\r\n            }\r\n            this._playButtonShown = true;\r\n            this._playButton.style.display = 'block';\r\n            document.body.addEventListener('keyup', (evt) => {\r\n                if (evt.key === 'Enter') {\r\n                    this._playButton.click();\r\n                }\r\n            });\r\n            this._positionPlayButton();\r\n            const playButtonClicked = new Promise((resolve) => {\r\n                const startButtonHandler = (e) => {\r\n                    var _a;\r\n                    // We want to stop propagation to keep bubbling to the engine pointer handlers\r\n                    e.stopPropagation();\r\n                    // Hide Button after click\r\n                    this.hidePlayButton();\r\n                    if ((_a = this._engine) === null || _a === void 0 ? void 0 : _a.browser) {\r\n                        this._engine.browser.window.off('resize', resizeHandler);\r\n                    }\r\n                    resolve();\r\n                };\r\n                this._playButton.addEventListener('click', startButtonHandler);\r\n                this._playButton.addEventListener('touchend', startButtonHandler);\r\n                this._playButton.addEventListener('pointerup', startButtonHandler);\r\n            });\r\n            return await playButtonClicked;\r\n        }\r\n    }\r\n    hidePlayButton() {\r\n        this._playButtonShown = false;\r\n        this._playButton.style.display = 'none';\r\n    }\r\n    /**\r\n     * Clean up generated elements for the loader\r\n     */\r\n    dispose() {\r\n        if (this._playButtonRootElement.parentElement) {\r\n            this._playButtonRootElement.removeChild(this._playButtonElement);\r\n            document.body.removeChild(this._playButtonRootElement);\r\n            document.head.removeChild(this._styleBlock);\r\n            this._playButtonRootElement = null;\r\n            this._playButtonElement = null;\r\n            this._styleBlock = null;\r\n        }\r\n    }\r\n    update(_engine, _delta) {\r\n        // override me\r\n    }\r\n    areResourcesLoaded() {\r\n        return this._loadingFuture.promise;\r\n    }\r\n    /**\r\n     * Begin loading all of the supplied resources, returning a promise\r\n     * that resolves when loading of all is complete AND the user has clicked the \"Play button\"\r\n     */\r\n    async load() {\r\n        var _a, _b;\r\n        await ((_a = this._image) === null || _a === void 0 ? void 0 : _a.decode()); // decode logo if it exists\r\n        this.canvas.flagDirty();\r\n        await Promise.all(this._resourceList.map(async (r) => {\r\n            await r.load().finally(() => {\r\n                // capture progress\r\n                this._numLoaded++;\r\n                this.canvas.flagDirty();\r\n            });\r\n        }));\r\n        // Wire all sound to the engine\r\n        for (const resource of this._resourceList) {\r\n            if (resource instanceof Sound) {\r\n                resource.wireEngine(this._engine);\r\n            }\r\n        }\r\n        this._loadingFuture.resolve();\r\n        // short delay in showing the button for aesthetics\r\n        await delay(200, (_b = this._engine) === null || _b === void 0 ? void 0 : _b.clock);\r\n        this.canvas.flagDirty();\r\n        await this.showPlayButton();\r\n        // Unlock browser AudioContext in after user gesture\r\n        // See: https://github.com/excaliburjs/Excalibur/issues/262\r\n        // See: https://github.com/excaliburjs/Excalibur/issues/1031\r\n        await WebAudio.unlock();\r\n        return (this.data = this._resourceList);\r\n    }\r\n    markResourceComplete() {\r\n        this._numLoaded++;\r\n    }\r\n    /**\r\n     * Returns the progress of the loader as a number between [0, 1] inclusive.\r\n     */\r\n    get progress() {\r\n        return this._resourceCount > 0 ? clamp(this._numLoaded, 0, this._resourceCount) / this._resourceCount : 1;\r\n    }\r\n    _positionPlayButton() {\r\n        if (this._engine) {\r\n            const screenHeight = this._engine.screen.viewport.height;\r\n            const screenWidth = this._engine.screen.viewport.width;\r\n            if (this._playButtonRootElement) {\r\n                const left = this._engine.canvas.offsetLeft;\r\n                const top = this._engine.canvas.offsetTop;\r\n                const buttonWidth = this._playButton.clientWidth;\r\n                const buttonHeight = this._playButton.clientHeight;\r\n                if (this.playButtonPosition) {\r\n                    this._playButtonRootElement.style.left = `${this.playButtonPosition.x}px`;\r\n                    this._playButtonRootElement.style.top = `${this.playButtonPosition.y}px`;\r\n                }\r\n                else {\r\n                    this._playButtonRootElement.style.left = `${left + screenWidth / 2 - buttonWidth / 2}px`;\r\n                    this._playButtonRootElement.style.top = `${top + screenHeight / 2 - buttonHeight / 2 + 100}px`;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Loader draw function. Draws the default Excalibur loading screen.\r\n     * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\r\n     * to customize the drawing, or just override entire method.\r\n     */\r\n    draw(ctx) {\r\n        const canvasHeight = this._engine.canvasHeight / this._engine.pixelRatio;\r\n        const canvasWidth = this._engine.canvasWidth / this._engine.pixelRatio;\r\n        this._positionPlayButton();\r\n        ctx.fillStyle = this.backgroundColor;\r\n        ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        let logoY = canvasHeight / 2;\r\n        const width = Math.min(this.logoWidth, canvasWidth * 0.75);\r\n        let logoX = canvasWidth / 2 - width / 2;\r\n        if (this.logoPosition) {\r\n            logoX = this.logoPosition.x;\r\n            logoY = this.logoPosition.y;\r\n        }\r\n        const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\r\n        const oldAntialias = this._engine.getAntialiasing();\r\n        this._engine.setAntialiasing(true);\r\n        if (!this.logoPosition) {\r\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY - imageHeight - 20, width, imageHeight);\r\n        }\r\n        else {\r\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY, width, imageHeight);\r\n        }\r\n        // loading box\r\n        if (!this.suppressPlayButton && this._playButtonShown) {\r\n            this._engine.setAntialiasing(oldAntialias);\r\n            return;\r\n        }\r\n        let loadingX = logoX;\r\n        let loadingY = logoY;\r\n        if (this.loadingBarPosition) {\r\n            loadingX = this.loadingBarPosition.x;\r\n            loadingY = this.loadingBarPosition.y;\r\n        }\r\n        ctx.lineWidth = 2;\r\n        roundRect(ctx, loadingX, loadingY, width, 20, 10, this.loadingBarColor);\r\n        const progress = width * this.progress;\r\n        const margin = 5;\r\n        const progressWidth = progress - margin * 2;\r\n        const height = 20 - margin * 2;\r\n        roundRect(ctx, loadingX + margin, loadingY + margin, progressWidth > 10 ? progressWidth : 10, height, 5, null, this.loadingBarColor);\r\n        this._engine.setAntialiasing(oldAntialias);\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Detector.ts\n\r\n/**\r\n * This is the list of features that will be used to log the supported\r\n * features to the console when Detector.logBrowserFeatures() is called.\r\n */\r\nconst REPORTED_FEATURES = {\r\n    webgl: 'WebGL',\r\n    webaudio: 'WebAudio',\r\n    gamepadapi: 'Gamepad API'\r\n};\r\n/**\r\n * Excalibur internal feature detection helper class\r\n */\r\nclass Detector {\r\n    constructor() {\r\n        this._features = null;\r\n        this.failedTests = [];\r\n        // critical browser features required for ex to run\r\n        this._criticalTests = {\r\n            // Test canvas/2d context support\r\n            canvasSupport: function () {\r\n                const elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('2d'));\r\n            },\r\n            // Test array buffer support ex uses for downloading binary data\r\n            arrayBufferSupport: function () {\r\n                const xhr = new XMLHttpRequest();\r\n                xhr.open('GET', '/');\r\n                try {\r\n                    xhr.responseType = 'arraybuffer';\r\n                }\r\n                catch (e) {\r\n                    return false;\r\n                }\r\n                return xhr.responseType === 'arraybuffer';\r\n            },\r\n            // Test data urls ex uses for sprites\r\n            dataUrlSupport: function () {\r\n                const canvas = document.createElement('canvas');\r\n                return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\r\n            },\r\n            // Test object url support for loading\r\n            objectUrlSupport: function () {\r\n                return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\r\n            },\r\n            // RGBA support for colors\r\n            rgbaSupport: function () {\r\n                const style = document.createElement('a').style;\r\n                style.cssText = 'background-color:rgba(150,255,150,.5)';\r\n                return ('' + style.backgroundColor).indexOf('rgba') > -1;\r\n            }\r\n        };\r\n        // warnings excalibur performance will be degraded\r\n        this._warningTest = {\r\n            webAudioSupport: function () {\r\n                return !!(window.AudioContext ||\r\n                    window.webkitAudioContext ||\r\n                    window.mozAudioContext ||\r\n                    window.msAudioContext ||\r\n                    window.oAudioContext);\r\n            },\r\n            webglSupport: function () {\r\n                const elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('webgl'));\r\n            }\r\n        };\r\n        this._features = this._loadBrowserFeatures();\r\n    }\r\n    /**\r\n     * Returns a map of currently supported browser features. This method\r\n     * treats the features as a singleton and will only calculate feature\r\n     * support if it has not previously been done.\r\n     */\r\n    getBrowserFeatures() {\r\n        if (this._features === null) {\r\n            this._features = this._loadBrowserFeatures();\r\n        }\r\n        return this._features;\r\n    }\r\n    /**\r\n     * Report on non-critical browser support for debugging purposes.\r\n     * Use native browser console colors for visibility.\r\n     */\r\n    logBrowserFeatures() {\r\n        let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\r\n        const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\r\n        const supported = this.getBrowserFeatures();\r\n        for (const feature of Object.keys(REPORTED_FEATURES)) {\r\n            if (supported[feature]) {\r\n                msg += '(%c\\u2713%c)'; // (✓)\r\n                args.push('font-weight: bold; color: green');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            else {\r\n                msg += '(%c\\u2717%c)'; // (✗)\r\n                args.push('font-weight: bold; color: red');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\r\n        }\r\n        args.unshift(msg);\r\n        // eslint-disable-next-line no-console\r\n        console.log.apply(console, args);\r\n    }\r\n    /**\r\n     * Executes several IIFE's to get a constant reference to supported\r\n     * features within the current execution context.\r\n     */\r\n    _loadBrowserFeatures() {\r\n        return {\r\n            // IIFE to check canvas support\r\n            canvas: (() => {\r\n                return this._criticalTests.canvasSupport();\r\n            })(),\r\n            // IIFE to check arraybuffer support\r\n            arraybuffer: (() => {\r\n                return this._criticalTests.arrayBufferSupport();\r\n            })(),\r\n            // IIFE to check dataurl support\r\n            dataurl: (() => {\r\n                return this._criticalTests.dataUrlSupport();\r\n            })(),\r\n            // IIFE to check objecturl support\r\n            objecturl: (() => {\r\n                return this._criticalTests.objectUrlSupport();\r\n            })(),\r\n            // IIFE to check rgba support\r\n            rgba: (() => {\r\n                return this._criticalTests.rgbaSupport();\r\n            })(),\r\n            // IIFE to check webaudio support\r\n            webaudio: (() => {\r\n                return this._warningTest.webAudioSupport();\r\n            })(),\r\n            // IIFE to check webgl support\r\n            webgl: (() => {\r\n                return this._warningTest.webglSupport();\r\n            })(),\r\n            // IIFE to check gamepadapi support\r\n            gamepadapi: (() => {\r\n                return !!navigator.getGamepads;\r\n            })()\r\n        };\r\n    }\r\n    test() {\r\n        // Critical test will for ex not to run\r\n        let failedCritical = false;\r\n        for (const test in this._criticalTests) {\r\n            if (!this._criticalTests[test].call(this)) {\r\n                this.failedTests.push(test);\r\n                Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\r\n                failedCritical = true;\r\n            }\r\n        }\r\n        if (failedCritical) {\r\n            return false;\r\n        }\r\n        // Warning tests do not for ex to return false to compatibility\r\n        for (const warning in this._warningTest) {\r\n            if (!this._warningTest[warning]()) {\r\n                Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/CollisionType.ts\n/**\r\n * An enum that describes the types of collisions bodies can participate in\r\n */\r\nvar CollisionType;\r\n(function (CollisionType) {\r\n    /**\r\n     * Bodies with the `PreventCollision` setting do not participate in any\r\n     * collisions and do not raise collision events.\r\n     */\r\n    CollisionType[\"PreventCollision\"] = \"PreventCollision\";\r\n    /**\r\n     * Bodies with the `Passive` setting only raise collision events, but are not\r\n     * influenced or moved by other bodies and do not influence or move other bodies.\r\n     * This is useful for use in trigger type behavior.\r\n     */\r\n    CollisionType[\"Passive\"] = \"Passive\";\r\n    /**\r\n     * Bodies with the `Active` setting raise collision events and participate\r\n     * in collisions with other bodies and will be push or moved by bodies sharing\r\n     * the `Active` or `Fixed` setting.\r\n     */\r\n    CollisionType[\"Active\"] = \"Active\";\r\n    /**\r\n     * Bodies with the `Fixed` setting raise collision events and participate in\r\n     * collisions with other bodies. Actors with the `Fixed` setting will not be\r\n     * pushed or moved by other bodies sharing the `Fixed`. Think of Fixed\r\n     * bodies as \"immovable/unstoppable\" objects. If two `Fixed` bodies meet they will\r\n     * not be pushed or moved by each other, they will not interact except to throw\r\n     * collision events.\r\n     */\r\n    CollisionType[\"Fixed\"] = \"Fixed\";\r\n})(CollisionType || (CollisionType = {}));\r\n\n;// CONCATENATED MODULE: ./Util/Decorators.ts\n\r\n\r\nconst maxMessages = 5;\r\nconst obsoleteMessage = {};\r\nconst resetObsoleteCounter = () => {\r\n    for (const message in obsoleteMessage) {\r\n        obsoleteMessage[message] = 0;\r\n    }\r\n};\r\nconst logMessage = (message, options) => {\r\n    const suppressObsoleteMessages = Flags.isEnabled('suppress-obsolete-message');\r\n    if (obsoleteMessage[message] < maxMessages && !suppressObsoleteMessages) {\r\n        Logger.getInstance().warn(message);\r\n        // tslint:disable-next-line: no-console\r\n        if (console.trace && options.showStackTrace) {\r\n            // tslint:disable-next-line: no-console\r\n            console.trace();\r\n        }\r\n    }\r\n    obsoleteMessage[message]++;\r\n};\r\n/**\r\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\r\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\r\n */\r\nfunction obsolete(options) {\r\n    options = {\r\n        message: 'This feature will be removed in future versions of Excalibur.',\r\n        alternateMethod: null,\r\n        showStackTrace: false,\r\n        ...options\r\n    };\r\n    return function (target, property, descriptor) {\r\n        if (descriptor &&\r\n            !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')) {\r\n            throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\r\n        }\r\n        const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\r\n        const message = `${methodSignature} is marked obsolete: ${options.message}` +\r\n            (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\r\n        if (!obsoleteMessage[message]) {\r\n            obsoleteMessage[message] = 0;\r\n        }\r\n        // If descriptor is null it is a class\r\n        const method = descriptor ? { ...descriptor } : target;\r\n        if (!descriptor) {\r\n            // with es2015 classes we need to change our decoration tactic\r\n            class DecoratedClass extends method {\r\n                constructor(...args) {\r\n                    logMessage(message, options);\r\n                    super(...args);\r\n                }\r\n            }\r\n            return DecoratedClass;\r\n        }\r\n        if (descriptor && descriptor.value) {\r\n            method.value = function () {\r\n                logMessage(message, options);\r\n                return descriptor.value.apply(this, arguments);\r\n            };\r\n            return method;\r\n        }\r\n        if (descriptor && descriptor.get) {\r\n            method.get = function () {\r\n                logMessage(message, options);\r\n                return descriptor.get.apply(this, arguments);\r\n            };\r\n        }\r\n        if (descriptor && descriptor.set) {\r\n            method.set = function () {\r\n                logMessage(message, options);\r\n                return descriptor.set.apply(this, arguments);\r\n            };\r\n        }\r\n        return method;\r\n    };\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Physics.ts\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n/**\r\n * Possible collision resolution strategies\r\n *\r\n * The default is [[CollisionResolutionStrategy.Arcade]] which performs simple axis aligned arcade style physics. This is useful for things\r\n * like platformers or top down games.\r\n *\r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.Realistic]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nvar CollisionResolutionStrategy;\r\n(function (CollisionResolutionStrategy) {\r\n    CollisionResolutionStrategy[\"Arcade\"] = \"arcade\";\r\n    CollisionResolutionStrategy[\"Realistic\"] = \"realistic\";\r\n})(CollisionResolutionStrategy || (CollisionResolutionStrategy = {}));\r\n/**\r\n * Possible broadphase collision pair identification strategies\r\n *\r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster.\r\n */\r\nvar BroadphaseStrategy;\r\n(function (BroadphaseStrategy) {\r\n    BroadphaseStrategy[BroadphaseStrategy[\"DynamicAABBTree\"] = 0] = \"DynamicAABBTree\";\r\n})(BroadphaseStrategy || (BroadphaseStrategy = {}));\r\n/**\r\n * Possible numerical integrators for position and velocity\r\n */\r\nvar Integrator;\r\n(function (Integrator) {\r\n    Integrator[Integrator[\"Euler\"] = 0] = \"Euler\";\r\n})(Integrator || (Integrator = {}));\r\n/**\r\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\r\n */\r\n/* istanbul ignore next */\r\nclass Physics {\r\n    static get gravity() {\r\n        return Physics.acc;\r\n    }\r\n    static set gravity(v) {\r\n        Physics.acc = v;\r\n    }\r\n    /**\r\n     * Configures Excalibur to use \"arcade\" physics. Arcade physics which performs simple axis aligned arcade style physics.\r\n     */\r\n    static useArcadePhysics() {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Arcade;\r\n    }\r\n    /**\r\n     * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\r\n     * simulated physical interactions.\r\n     */\r\n    static useRealisticPhysics() {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Realistic;\r\n    }\r\n    static get dynamicTreeVelocityMultiplyer() {\r\n        return Physics.dynamicTreeVelocityMultiplier;\r\n    }\r\n    static set dynamicTreeVelocityMultiplyer(value) {\r\n        Physics.dynamicTreeVelocityMultiplier = value;\r\n    }\r\n}\r\n/**\r\n * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\r\n * Global acceleration won't effect [[Label|labels]], [[ScreenElement|ui actors]], or [[Trigger|triggers]] in Excalibur.\r\n *\r\n * This is a great way to globally simulate effects like gravity.\r\n */\r\nPhysics.acc = new Vector(0, 0);\r\n/**\r\n * Globally switches all Excalibur physics behavior on or off.\r\n */\r\nPhysics.enabled = true;\r\n/**\r\n * Gets or sets the broadphase pair identification strategy.\r\n *\r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster.\r\n */\r\nPhysics.broadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\r\n/**\r\n * Gets or sets the global collision resolution strategy (narrowphase).\r\n *\r\n * The default is [[CollisionResolutionStrategy.Arcade]] which performs simple axis aligned arcade style physics.\r\n *\r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.Realistic]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nPhysics.collisionResolutionStrategy = CollisionResolutionStrategy.Arcade;\r\n/**\r\n * The default mass to use if none is specified\r\n */\r\nPhysics.defaultMass = 10;\r\n/**\r\n * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\r\n */\r\nPhysics.integrator = Integrator.Euler;\r\n/**\r\n * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplier);\r\n */\r\nPhysics.dynamicTreeVelocityMultiplier = 2;\r\n/**\r\n * Pad RigidBody BoundingBox by a constant amount\r\n */\r\nPhysics.boundsPadding = 5;\r\n/**\r\n * Number of position iterations (overlap) to run in the solver\r\n */\r\nPhysics.positionIterations = 3;\r\n/**\r\n * Number of velocity iteration (response) to run in the solver\r\n */\r\nPhysics.velocityIterations = 8;\r\n/**\r\n * Amount of overlap to tolerate in pixels\r\n */\r\nPhysics.slop = 1;\r\n/**\r\n * Amount of positional overlap correction to apply each position iteration of the solver\r\n * O - meaning no correction, 1 - meaning correct all overlap\r\n */\r\nPhysics.steeringFactor = 0.2;\r\n/**\r\n * Warm start set to true re-uses impulses from previous frames back in the solver\r\n */\r\nPhysics.warmStart = true;\r\n/**\r\n * By default bodies do not sleep\r\n */\r\nPhysics.bodiesCanSleepByDefault = false;\r\n/**\r\n * Surface epsilon is used to help deal with surface penetration\r\n */\r\nPhysics.surfaceEpsilon = 0.1;\r\nPhysics.sleepEpsilon = 0.07;\r\nPhysics.wakeThreshold = Physics.sleepEpsilon * 3;\r\nPhysics.sleepBias = 0.9;\r\n/**\r\n * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\r\n * bodies from tunneling through one another.\r\n */\r\nPhysics.checkForFastBodies = true;\r\n/**\r\n * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\r\n * body is moving at least half of its minimum dimension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\r\n * Excalibur will always perform the fast body raycast regardless of speed.\r\n */\r\nPhysics.disableMinimumSpeedForFastBody = false;\r\n__decorate([\r\n    obsolete({\r\n        message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\r\n        alternateMethod: 'dynamicTreeVelocityMultiplier'\r\n    })\r\n], Physics, \"dynamicTreeVelocityMultiplyer\", null);\r\n\n;// CONCATENATED MODULE: ./Math/coord-plane.ts\n/**\r\n * Enum representing the coordinate plane for the position 2D vector in the [[TransformComponent]]\r\n */\r\nvar CoordPlane;\r\n(function (CoordPlane) {\r\n    /**\r\n     * The world coordinate plane (default) represents world space, any entities drawn with world\r\n     * space move when the camera moves.\r\n     */\r\n    CoordPlane[\"World\"] = \"world\";\r\n    /**\r\n     * The screen coordinate plane represents screen space, entities drawn in screen space are pinned\r\n     * to screen coordinates ignoring the camera.\r\n     */\r\n    CoordPlane[\"Screen\"] = \"screen\";\r\n})(CoordPlane || (CoordPlane = {}));\r\n\n;// CONCATENATED MODULE: ./Math/vector-view.ts\n\r\nclass VectorView extends Vector {\r\n    constructor(options) {\r\n        super(0, 0);\r\n        this._getX = options.getX;\r\n        this._getY = options.getY;\r\n        this._setX = options.setX;\r\n        this._setY = options.setY;\r\n    }\r\n    get x() {\r\n        return (this._x = this._getX());\r\n    }\r\n    set x(val) {\r\n        this._setX(val);\r\n        this._x = val;\r\n    }\r\n    get y() {\r\n        return (this._y = this._getY());\r\n    }\r\n    set y(val) {\r\n        this._setY(val);\r\n        this._y = val;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/watch-vector.ts\n\r\n/**\r\n * Wraps a vector and watches for changes in the x/y, modifies the original vector.\r\n */\r\nclass WatchVector extends Vector {\r\n    constructor(original, change) {\r\n        super(original.x, original.y);\r\n        this.original = original;\r\n        this.change = change;\r\n    }\r\n    get x() {\r\n        return this._x = this.original.x;\r\n    }\r\n    set x(newX) {\r\n        this.change(newX, this._y);\r\n        this._x = this.original.x = newX;\r\n    }\r\n    get y() {\r\n        return this._y = this.original.y;\r\n    }\r\n    set y(newY) {\r\n        this.change(this._x, newY);\r\n        this._y = this.original.y = newY;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/transform.ts\n\r\n\r\n\r\n\r\n\r\nclass Transform {\r\n    constructor() {\r\n        this._parent = null;\r\n        this._children = [];\r\n        this._pos = vec(0, 0);\r\n        this._rotation = 0;\r\n        this._scale = vec(1, 1);\r\n        this._isDirty = false;\r\n        this._isInverseDirty = false;\r\n        this._matrix = AffineMatrix.identity();\r\n        this._inverse = AffineMatrix.identity();\r\n    }\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    set parent(transform) {\r\n        if (this._parent) {\r\n            const index = this._parent._children.indexOf(this);\r\n            if (index > -1) {\r\n                this._parent._children.splice(index, 1);\r\n            }\r\n        }\r\n        this._parent = transform;\r\n        if (this._parent) {\r\n            this._parent._children.push(this);\r\n        }\r\n        this.flagDirty();\r\n    }\r\n    get children() {\r\n        return this._children;\r\n    }\r\n    set pos(v) {\r\n        if (!v.equals(this._pos)) {\r\n            this._pos.x = v.x;\r\n            this._pos.y = v.y;\r\n            this.flagDirty();\r\n        }\r\n    }\r\n    get pos() {\r\n        return new WatchVector(this._pos, (x, y) => {\r\n            if (x !== this._pos.x || y !== this._pos.y) {\r\n                this.flagDirty();\r\n            }\r\n        });\r\n    }\r\n    set globalPos(v) {\r\n        let localPos = v.clone();\r\n        if (this.parent) {\r\n            localPos = this.parent.inverse.multiply(v);\r\n        }\r\n        if (!localPos.equals(this._pos)) {\r\n            this._pos = localPos;\r\n            this.flagDirty();\r\n        }\r\n    }\r\n    get globalPos() {\r\n        return new VectorView({\r\n            getX: () => this.matrix.data[4],\r\n            getY: () => this.matrix.data[5],\r\n            setX: (x) => {\r\n                if (this.parent) {\r\n                    const { x: newX } = this.parent.inverse.multiply(vec(x, this.pos.y));\r\n                    this.pos.x = newX;\r\n                }\r\n                else {\r\n                    this.pos.x = x;\r\n                }\r\n                if (x !== this.matrix.data[4]) {\r\n                    this.flagDirty();\r\n                }\r\n            },\r\n            setY: (y) => {\r\n                if (this.parent) {\r\n                    const { y: newY } = this.parent.inverse.multiply(vec(this.pos.x, y));\r\n                    this.pos.y = newY;\r\n                }\r\n                else {\r\n                    this.pos.y = y;\r\n                }\r\n                if (y !== this.matrix.data[5]) {\r\n                    this.flagDirty();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    set rotation(rotation) {\r\n        const canonRotation = canonicalizeAngle(rotation);\r\n        if (canonRotation !== this._rotation) {\r\n            this.flagDirty();\r\n        }\r\n        this._rotation = canonRotation;\r\n    }\r\n    get rotation() {\r\n        return this._rotation;\r\n    }\r\n    set globalRotation(rotation) {\r\n        let inverseRotation = 0;\r\n        if (this.parent) {\r\n            inverseRotation = this.parent.globalRotation;\r\n        }\r\n        const canonRotation = canonicalizeAngle(rotation + inverseRotation);\r\n        if (canonRotation !== this._rotation) {\r\n            this.flagDirty();\r\n        }\r\n        this._rotation = canonRotation;\r\n    }\r\n    get globalRotation() {\r\n        if (this.parent) {\r\n            return this.matrix.getRotation();\r\n        }\r\n        return this.rotation;\r\n    }\r\n    set scale(v) {\r\n        if (!v.equals(this._scale)) {\r\n            this._scale.x = v.x;\r\n            this._scale.y = v.y;\r\n            this.flagDirty();\r\n        }\r\n    }\r\n    get scale() {\r\n        return new WatchVector(this._scale, (x, y) => {\r\n            if (x !== this._scale.x || y !== this._scale.y) {\r\n                this.flagDirty();\r\n            }\r\n        });\r\n    }\r\n    set globalScale(v) {\r\n        let inverseScale = vec(1, 1);\r\n        if (this.parent) {\r\n            inverseScale = this.parent.globalScale;\r\n        }\r\n        this.scale = v.scale(vec(1 / inverseScale.x, 1 / inverseScale.y));\r\n    }\r\n    get globalScale() {\r\n        return new VectorView({\r\n            getX: () => this.parent ? this.matrix.getScaleX() : this.scale.x,\r\n            getY: () => this.parent ? this.matrix.getScaleY() : this.scale.y,\r\n            setX: (x) => {\r\n                if (this.parent) {\r\n                    const globalScaleX = this.parent.globalScale.x;\r\n                    this.scale.x = x / globalScaleX;\r\n                }\r\n                else {\r\n                    this.scale.x = x;\r\n                }\r\n            },\r\n            setY: (y) => {\r\n                if (this.parent) {\r\n                    const globalScaleY = this.parent.globalScale.y;\r\n                    this.scale.y = y / globalScaleY;\r\n                }\r\n                else {\r\n                    this.scale.y = y;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    get matrix() {\r\n        if (this._isDirty) {\r\n            if (this.parent === null) {\r\n                this._matrix = this._calculateMatrix();\r\n            }\r\n            else {\r\n                this._matrix = this.parent.matrix.multiply(this._calculateMatrix());\r\n            }\r\n            this._isDirty = false;\r\n        }\r\n        return this._matrix;\r\n    }\r\n    get inverse() {\r\n        if (this._isInverseDirty) {\r\n            this._inverse = this.matrix.inverse();\r\n            this._isInverseDirty = false;\r\n        }\r\n        return this._inverse;\r\n    }\r\n    _calculateMatrix() {\r\n        const matrix = AffineMatrix.identity()\r\n            .translate(this.pos.x, this.pos.y)\r\n            .rotate(this.rotation)\r\n            .scale(this.scale.x, this.scale.y);\r\n        return matrix;\r\n    }\r\n    flagDirty() {\r\n        this._isDirty = true;\r\n        this._isInverseDirty = true;\r\n        for (let i = 0; i < this._children.length; i++) {\r\n            this._children[i].flagDirty();\r\n        }\r\n    }\r\n    apply(point) {\r\n        return this.matrix.multiply(point);\r\n    }\r\n    applyInverse(point) {\r\n        return this.inverse.multiply(point);\r\n    }\r\n    setTransform(pos, rotation, scale) {\r\n        this._pos.x = pos.x;\r\n        this._pos.y = pos.y;\r\n        this._rotation = canonicalizeAngle(rotation);\r\n        this._scale.x = scale.x;\r\n        this._scale.y = scale.y;\r\n        this.flagDirty();\r\n    }\r\n    clone(dest) {\r\n        const target = dest !== null && dest !== void 0 ? dest : new Transform();\r\n        this._pos.clone(target._pos);\r\n        target._rotation = this._rotation;\r\n        this._scale.clone(target._scale);\r\n        target.flagDirty();\r\n        return target;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Component.ts\n/**\r\n * Type guard to check if a component implements clone\r\n * @param x\r\n */\r\nfunction hasClone(x) {\r\n    return !!(x === null || x === void 0 ? void 0 : x.clone);\r\n}\r\n/**\r\n * Components are containers for state in Excalibur, the are meant to convey capabilities that an Entity possesses\r\n *\r\n * Implementations of Component must have a zero-arg constructor to support dependencies\r\n *\r\n * ```typescript\r\n * class MyComponent extends ex.Component<'my'> {\r\n *   public readonly type = 'my';\r\n *   // zero arg support required if you want to use component dependencies\r\n *   constructor(public optionalPos?: ex.Vector) {}\r\n * }\r\n * ```\r\n */\r\nclass Component {\r\n    constructor() {\r\n        /**\r\n         * Current owning [[Entity]], if any, of this component. Null if not added to any [[Entity]]\r\n         */\r\n        this.owner = null;\r\n    }\r\n    /**\r\n     * Clones any properties on this component, if that property value has a `clone()` method it will be called\r\n     */\r\n    clone() {\r\n        const newComponent = new this.constructor();\r\n        for (const prop in this) {\r\n            if (this.hasOwnProperty(prop)) {\r\n                const val = this[prop];\r\n                if (hasClone(val) && prop !== 'owner' && prop !== 'clone') {\r\n                    newComponent[prop] = val.clone();\r\n                }\r\n                else {\r\n                    newComponent[prop] = val;\r\n                }\r\n            }\r\n        }\r\n        return newComponent;\r\n    }\r\n}\r\n/**\r\n * Tag components are a way of tagging a component with label and a simple value\r\n *\r\n * For example:\r\n *\r\n * ```typescript\r\n * const isOffscreen = new TagComponent('offscreen');\r\n * entity.addComponent(isOffscreen);\r\n * entity.tags.includes\r\n * ```\r\n */\r\nclass TagComponent extends Component {\r\n    constructor(type, value) {\r\n        super();\r\n        this.type = type;\r\n        this.value = value;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Observable.ts\n/**\r\n * Simple Observable implementation\r\n * @template T is the typescript Type that defines the data being observed\r\n */\r\nclass Observable {\r\n    constructor() {\r\n        this.observers = [];\r\n        this.subscriptions = [];\r\n    }\r\n    /**\r\n     * Register an observer to listen to this observable\r\n     * @param observer\r\n     */\r\n    register(observer) {\r\n        this.observers.push(observer);\r\n    }\r\n    /**\r\n     * Register a callback to listen to this observable\r\n     * @param func\r\n     */\r\n    subscribe(func) {\r\n        this.subscriptions.push(func);\r\n    }\r\n    /**\r\n     * Remove an observer from the observable\r\n     * @param observer\r\n     */\r\n    unregister(observer) {\r\n        const i = this.observers.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers.splice(i, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Remove a callback that is listening to this observable\r\n     * @param func\r\n     */\r\n    unsubscribe(func) {\r\n        const i = this.subscriptions.indexOf(func);\r\n        if (i !== -1) {\r\n            this.subscriptions.splice(i, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Broadcasts a message to all observers and callbacks\r\n     * @param message\r\n     */\r\n    notifyAll(message) {\r\n        const observersLength = this.observers.length;\r\n        for (let i = 0; i < observersLength; i++) {\r\n            this.observers[i].notify(message);\r\n        }\r\n        const subscriptionsLength = this.subscriptions.length;\r\n        for (let i = 0; i < subscriptionsLength; i++) {\r\n            this.subscriptions[i](message);\r\n        }\r\n    }\r\n    /**\r\n     * Removes all observers and callbacks\r\n     */\r\n    clear() {\r\n        this.observers.length = 0;\r\n        this.subscriptions.length = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Components/TransformComponent.ts\n\r\n\r\n\r\n\r\nclass TransformComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.transform';\r\n        this._transform = new Transform();\r\n        this._addChildTransform = (child) => {\r\n            const childTxComponent = child.get(TransformComponent);\r\n            if (childTxComponent) {\r\n                childTxComponent._transform.parent = this._transform;\r\n            }\r\n        };\r\n        /**\r\n         * Observable that emits when the z index changes on this component\r\n         */\r\n        this.zIndexChanged$ = new Observable();\r\n        this._z = 0;\r\n        /**\r\n         * The [[CoordPlane|coordinate plane|]] for this transform for the entity.\r\n         */\r\n        this.coordPlane = CoordPlane.World;\r\n    }\r\n    get() {\r\n        return this._transform;\r\n    }\r\n    onAdd(owner) {\r\n        for (const child of owner.children) {\r\n            this._addChildTransform(child);\r\n        }\r\n        owner.childrenAdded$.subscribe(child => this._addChildTransform(child));\r\n        owner.childrenRemoved$.subscribe(child => {\r\n            const childTxComponent = child.get(TransformComponent);\r\n            if (childTxComponent) {\r\n                childTxComponent._transform.parent = null;\r\n            }\r\n        });\r\n    }\r\n    onRemove(_previousOwner) {\r\n        this._transform.parent = null;\r\n    }\r\n    /**\r\n     * The z-index ordering of the entity, a higher values are drawn on top of lower values.\r\n     * For example z=99 would be drawn on top of z=0.\r\n     */\r\n    get z() {\r\n        return this._z;\r\n    }\r\n    set z(val) {\r\n        const oldz = this._z;\r\n        this._z = val;\r\n        if (oldz !== val) {\r\n            this.zIndexChanged$.notifyAll(val);\r\n        }\r\n    }\r\n    get pos() {\r\n        return this._transform.pos;\r\n    }\r\n    set pos(v) {\r\n        this._transform.pos = v;\r\n    }\r\n    get globalPos() {\r\n        return this._transform.globalPos;\r\n    }\r\n    set globalPos(v) {\r\n        this._transform.globalPos = v;\r\n    }\r\n    get rotation() {\r\n        return this._transform.rotation;\r\n    }\r\n    set rotation(rotation) {\r\n        this._transform.rotation = rotation;\r\n    }\r\n    get globalRotation() {\r\n        return this._transform.globalRotation;\r\n    }\r\n    set globalRotation(rotation) {\r\n        this._transform.globalRotation = rotation;\r\n    }\r\n    get scale() {\r\n        return this._transform.scale;\r\n    }\r\n    set scale(v) {\r\n        this._transform.scale = v;\r\n    }\r\n    get globalScale() {\r\n        return this._transform.globalScale;\r\n    }\r\n    set globalScale(v) {\r\n        this._transform.globalScale = v;\r\n    }\r\n    applyInverse(v) {\r\n        return this._transform.applyInverse(v);\r\n    }\r\n    apply(v) {\r\n        return this._transform.apply(v);\r\n    }\r\n    clone() {\r\n        const component = new TransformComponent();\r\n        component._transform = this._transform.clone();\r\n        component._z = this._z;\r\n        return component;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Components/MotionComponent.ts\n\r\n\r\nclass MotionComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.motion';\r\n        /**\r\n         * The velocity of an entity in pixels per second\r\n         */\r\n        this.vel = Vector.Zero;\r\n        /**\r\n         * The acceleration of entity in pixels per second^2\r\n         */\r\n        this.acc = Vector.Zero;\r\n        /**\r\n         * The scale rate of change in scale units per second\r\n         */\r\n        this.scaleFactor = Vector.Zero;\r\n        /**\r\n         * The angular velocity which is how quickly the entity is rotating in radians per second\r\n         */\r\n        this.angularVelocity = 0;\r\n        /**\r\n         * The amount of torque applied to the entity, angular acceleration is torque * inertia\r\n         */\r\n        this.torque = 0;\r\n        /**\r\n         * Inertia can be thought of as the resistance to motion\r\n         */\r\n        this.inertia = 1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Group/CollisionGroup.ts\n/**\r\n * CollisionGroups indicate like members that do not collide with each other. Use [[CollisionGroupManager]] to create [[CollisionGroup]]s\r\n *\r\n * For example:\r\n *\r\n * Players have collision group \"player\"\r\n *\r\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\r\n *\r\n * Enemies have collision group \"enemy\"\r\n *\r\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\r\n *\r\n * Blocks have collision group \"ground\"\r\n *\r\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\r\n *\r\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\r\n * with players and blocks.\r\n *\r\n * This is done with bitmasking, see the following pseudo-code\r\n *\r\n * PlayerGroup = `0b001`\r\n * PlayerGroupMask = `0b110`\r\n *\r\n * EnemyGroup = `0b010`\r\n * EnemyGroupMask = `0b101`\r\n *\r\n * BlockGroup = `0b100`\r\n * BlockGroupMask = `0b011`\r\n *\r\n * Should Players collide? No because the bitwise mask evaluates to 0\r\n * `(player1.group & player2.mask) === 0`\r\n * `(0b001 & 0b110) === 0`\r\n *\r\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\r\n * `(player1.group & enemy1.mask) === 1`\r\n * `(0b001 & 0b101) === 1`\r\n *\r\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\r\n * `(player1.group & blocks1.mask) === 1`\r\n * `(0b001 & 0b011) === 1`\r\n */\r\nclass CollisionGroup {\r\n    /**\r\n     * STOP!!** It is preferred that [[CollisionGroupManager.create]] is used to create collision groups\r\n     *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\r\n     * @param name Name of the collision group\r\n     * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\r\n     * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\r\n     */\r\n    constructor(name, category, mask) {\r\n        this._name = name;\r\n        this._category = category;\r\n        this._mask = mask;\r\n    }\r\n    /**\r\n     * Get the name of the collision group\r\n     */\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    /**\r\n     * Get the category of the collision group, a 32 bit number which should be a unique power of 2\r\n     */\r\n    get category() {\r\n        return this._category;\r\n    }\r\n    /**\r\n     * Get the mask for this collision group\r\n     */\r\n    get mask() {\r\n        return this._mask;\r\n    }\r\n    /**\r\n     * Evaluates whether 2 collision groups can collide\r\n     * @param other  CollisionGroup\r\n     */\r\n    canCollide(other) {\r\n        return (this.category & other.mask) !== 0 && (other.category & this.mask) !== 0;\r\n    }\r\n    /**\r\n     * Inverts the collision group. For example, if before the group specified \"players\",\r\n     * inverting would specify all groups except players\r\n     * @returns CollisionGroup\r\n     */\r\n    invert() {\r\n        return new CollisionGroup('~(' + this.name + ')', ~this.category, ~this.mask);\r\n    }\r\n    /**\r\n     * Combine collision groups with each other. The new group includes all of the previous groups.\r\n     *\r\n     * @param collisionGroups\r\n     */\r\n    static combine(collisionGroups) {\r\n        const combinedName = collisionGroups.map((c) => c.name).join('+');\r\n        const combinedCategory = collisionGroups.reduce((current, g) => g.category | current, 0b0);\r\n        const combinedMask = ~combinedCategory;\r\n        return new CollisionGroup(combinedName, combinedCategory, combinedMask);\r\n    }\r\n    /**\r\n     * Creates a collision group that collides with the listed groups\r\n     * @param collisionGroups\r\n     */\r\n    static collidesWith(collisionGroups) {\r\n        return CollisionGroup.combine(collisionGroups).invert();\r\n    }\r\n}\r\n/**\r\n * The `All` [[CollisionGroup]] is a special group that collides with all other groups including itself,\r\n * it is the default collision group on colliders.\r\n */\r\nCollisionGroup.All = new CollisionGroup('Collide with all groups', -1, -1);\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/Pair.ts\n\r\n\r\n/**\r\n * Models a potential collision between 2 colliders\r\n */\r\nclass Pair {\r\n    constructor(colliderA, colliderB) {\r\n        this.colliderA = colliderA;\r\n        this.colliderB = colliderB;\r\n        this.id = null;\r\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\r\n    }\r\n    /**\r\n     * Returns whether a it is allowed for 2 colliders in a Pair to collide\r\n     * @param colliderA\r\n     * @param colliderB\r\n     */\r\n    static canCollide(colliderA, colliderB) {\r\n        var _a, _b;\r\n        const bodyA = (_a = colliderA === null || colliderA === void 0 ? void 0 : colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = colliderB === null || colliderB === void 0 ? void 0 : colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        // Prevent self collision\r\n        if (colliderA.id === colliderB.id) {\r\n            return false;\r\n        }\r\n        // Colliders with the same owner do not collide (composite colliders)\r\n        if (colliderA.owner &&\r\n            colliderB.owner &&\r\n            colliderA.owner.id === colliderB.owner.id) {\r\n            return false;\r\n        }\r\n        // if the pair has a member with zero dimension don't collide\r\n        if (colliderA.localBounds.hasZeroDimensions() || colliderB.localBounds.hasZeroDimensions()) {\r\n            return false;\r\n        }\r\n        // Body's needed for collision in the current state\r\n        // TODO can we collide without a body?\r\n        if (!bodyA || !bodyB) {\r\n            return false;\r\n        }\r\n        // If both are in the same collision group short circuit\r\n        if (!bodyA.group.canCollide(bodyB.group)) {\r\n            return false;\r\n        }\r\n        // if both are fixed short circuit\r\n        if (bodyA.collisionType === CollisionType.Fixed && bodyB.collisionType === CollisionType.Fixed) {\r\n            return false;\r\n        }\r\n        // if the either is prevent collision short circuit\r\n        if (bodyB.collisionType === CollisionType.PreventCollision || bodyA.collisionType === CollisionType.PreventCollision) {\r\n            return false;\r\n        }\r\n        // if either is dead short circuit\r\n        if (!bodyA.active || !bodyB.active) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Returns whether or not it is possible for the pairs to collide\r\n     */\r\n    get canCollide() {\r\n        const colliderA = this.colliderA;\r\n        const colliderB = this.colliderB;\r\n        return Pair.canCollide(colliderA, colliderB);\r\n    }\r\n    /**\r\n     * Runs the collision intersection logic on the members of this pair\r\n     */\r\n    collide() {\r\n        return this.colliderA.collide(this.colliderB);\r\n    }\r\n    /**\r\n     * Check if the collider is part of the pair\r\n     * @param collider\r\n     */\r\n    hasCollider(collider) {\r\n        return collider === this.colliderA || collider === this.colliderB;\r\n    }\r\n    /**\r\n     * Calculates the unique pair hash id for this collision pair (owning id)\r\n     */\r\n    static calculatePairHash(idA, idB) {\r\n        if (idA.value < idB.value) {\r\n            return `#${idA.value}+${idB.value}`;\r\n        }\r\n        else {\r\n            return `#${idB.value}+${idA.value}`;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/projection.ts\n/**\r\n * A 1 dimensional projection on an axis, used to test overlaps\r\n */\r\nclass Projection {\r\n    constructor(min, max) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    overlaps(projection) {\r\n        return this.max > projection.min && projection.max > this.min;\r\n    }\r\n    getOverlap(projection) {\r\n        if (this.overlaps(projection)) {\r\n            if (this.max > projection.max) {\r\n                return projection.max - this.min;\r\n            }\r\n            else {\r\n                return this.max - projection.min;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/DynamicTree.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Dynamic Tree Node used for tracking bounds within the tree\r\n */\r\nclass TreeNode {\r\n    constructor(parent) {\r\n        this.parent = parent;\r\n        this.parent = parent || null;\r\n        this.data = null;\r\n        this.bounds = new BoundingBox();\r\n        this.left = null;\r\n        this.right = null;\r\n        this.height = 0;\r\n    }\r\n    isLeaf() {\r\n        return !this.left && !this.right;\r\n    }\r\n}\r\n/**\r\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\r\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\r\n *\r\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\r\n * Every non-leaf node is a bounding box that contains child bounding boxes.\r\n */\r\nclass DynamicTree {\r\n    constructor(worldBounds = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\r\n        this.worldBounds = worldBounds;\r\n        this.root = null;\r\n        this.nodes = {};\r\n    }\r\n    /**\r\n     * Inserts a node into the dynamic tree\r\n     */\r\n    _insert(leaf) {\r\n        // If there are no nodes in the tree, make this the root leaf\r\n        if (this.root === null) {\r\n            this.root = leaf;\r\n            this.root.parent = null;\r\n            return;\r\n        }\r\n        // Search the tree for a node that is not a leaf and find the best place to insert\r\n        const leafAABB = leaf.bounds;\r\n        let currentRoot = this.root;\r\n        while (!currentRoot.isLeaf()) {\r\n            const left = currentRoot.left;\r\n            const right = currentRoot.right;\r\n            const area = currentRoot.bounds.getPerimeter();\r\n            const combinedAABB = currentRoot.bounds.combine(leafAABB);\r\n            const combinedArea = combinedAABB.getPerimeter();\r\n            // Calculate cost heuristic for creating a new parent and leaf\r\n            const cost = 2 * combinedArea;\r\n            // Minimum cost of pushing the leaf down the tree\r\n            const inheritanceCost = 2 * (combinedArea - area);\r\n            // Cost of descending\r\n            let leftCost = 0;\r\n            const leftCombined = leafAABB.combine(left.bounds);\r\n            let newArea;\r\n            let oldArea;\r\n            if (left.isLeaf()) {\r\n                leftCost = leftCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = left.bounds.getPerimeter();\r\n                newArea = leftCombined.getPerimeter();\r\n                leftCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            let rightCost = 0;\r\n            const rightCombined = leafAABB.combine(right.bounds);\r\n            if (right.isLeaf()) {\r\n                rightCost = rightCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = right.bounds.getPerimeter();\r\n                newArea = rightCombined.getPerimeter();\r\n                rightCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            // cost is acceptable\r\n            if (cost < leftCost && cost < rightCost) {\r\n                break;\r\n            }\r\n            // Descend to the depths\r\n            if (leftCost < rightCost) {\r\n                currentRoot = left;\r\n            }\r\n            else {\r\n                currentRoot = right;\r\n            }\r\n        }\r\n        // Create the new parent node and insert into the tree\r\n        const oldParent = currentRoot.parent;\r\n        const newParent = new TreeNode(oldParent);\r\n        newParent.bounds = leafAABB.combine(currentRoot.bounds);\r\n        newParent.height = currentRoot.height + 1;\r\n        if (oldParent !== null) {\r\n            // The sibling node was not the root\r\n            if (oldParent.left === currentRoot) {\r\n                oldParent.left = newParent;\r\n            }\r\n            else {\r\n                oldParent.right = newParent;\r\n            }\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n        }\r\n        else {\r\n            // The sibling node was the root\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n            this.root = newParent;\r\n        }\r\n        // Walk up the tree fixing heights and AABBs\r\n        let currentNode = leaf.parent;\r\n        while (currentNode) {\r\n            currentNode = this._balance(currentNode);\r\n            if (!currentNode.left) {\r\n                throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\r\n            }\r\n            if (!currentNode.right) {\r\n                throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\r\n            }\r\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n            currentNode = currentNode.parent;\r\n        }\r\n    }\r\n    /**\r\n     * Removes a node from the dynamic tree\r\n     */\r\n    _remove(leaf) {\r\n        if (leaf === this.root) {\r\n            this.root = null;\r\n            return;\r\n        }\r\n        const parent = leaf.parent;\r\n        const grandParent = parent.parent;\r\n        let sibling;\r\n        if (parent.left === leaf) {\r\n            sibling = parent.right;\r\n        }\r\n        else {\r\n            sibling = parent.left;\r\n        }\r\n        if (grandParent) {\r\n            if (grandParent.left === parent) {\r\n                grandParent.left = sibling;\r\n            }\r\n            else {\r\n                grandParent.right = sibling;\r\n            }\r\n            sibling.parent = grandParent;\r\n            let currentNode = grandParent;\r\n            while (currentNode) {\r\n                currentNode = this._balance(currentNode);\r\n                currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n                currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n                currentNode = currentNode.parent;\r\n            }\r\n        }\r\n        else {\r\n            this.root = sibling;\r\n            sibling.parent = null;\r\n        }\r\n    }\r\n    /**\r\n     * Tracks a body in the dynamic tree\r\n     */\r\n    trackCollider(collider) {\r\n        const node = new TreeNode();\r\n        node.data = collider;\r\n        node.bounds = collider.bounds;\r\n        node.bounds.left -= 2;\r\n        node.bounds.top -= 2;\r\n        node.bounds.right += 2;\r\n        node.bounds.bottom += 2;\r\n        this.nodes[collider.id.value] = node;\r\n        this._insert(node);\r\n    }\r\n    /**\r\n     * Updates the dynamic tree given the current bounds of each body being tracked\r\n     */\r\n    updateCollider(collider) {\r\n        var _a;\r\n        const node = this.nodes[collider.id.value];\r\n        if (!node) {\r\n            return false;\r\n        }\r\n        const b = collider.bounds;\r\n        // if the body is outside the world no longer update it\r\n        if (!this.worldBounds.contains(b)) {\r\n            Logger.getInstance().warn('Collider with id ' + collider.id.value + ' is outside the world bounds and will no longer be tracked for physics');\r\n            this.untrackCollider(collider);\r\n            return false;\r\n        }\r\n        if (node.bounds.contains(b)) {\r\n            return false;\r\n        }\r\n        this._remove(node);\r\n        b.left -= Physics.boundsPadding;\r\n        b.top -= Physics.boundsPadding;\r\n        b.right += Physics.boundsPadding;\r\n        b.bottom += Physics.boundsPadding;\r\n        // THIS IS CAUSING UNECESSARY CHECKS\r\n        if (collider.owner) {\r\n            const body = (_a = collider.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            if (body) {\r\n                const multdx = ((body.vel.x * 32) / 1000) * Physics.dynamicTreeVelocityMultiplier;\r\n                const multdy = ((body.vel.y * 32) / 1000) * Physics.dynamicTreeVelocityMultiplier;\r\n                if (multdx < 0) {\r\n                    b.left += multdx;\r\n                }\r\n                else {\r\n                    b.right += multdx;\r\n                }\r\n                if (multdy < 0) {\r\n                    b.top += multdy;\r\n                }\r\n                else {\r\n                    b.bottom += multdy;\r\n                }\r\n            }\r\n        }\r\n        node.bounds = b;\r\n        this._insert(node);\r\n        return true;\r\n    }\r\n    /**\r\n     * Untracks a body from the dynamic tree\r\n     */\r\n    untrackCollider(collider) {\r\n        const node = this.nodes[collider.id.value];\r\n        if (!node) {\r\n            return;\r\n        }\r\n        this._remove(node);\r\n        this.nodes[collider.id.value] = null;\r\n        delete this.nodes[collider.id.value];\r\n    }\r\n    /**\r\n     * Balances the tree about a node\r\n     */\r\n    _balance(node) {\r\n        if (node === null) {\r\n            throw new Error('Cannot balance at null node');\r\n        }\r\n        if (node.isLeaf() || node.height < 2) {\r\n            return node;\r\n        }\r\n        const left = node.left;\r\n        const right = node.right;\r\n        const a = node;\r\n        const b = left;\r\n        const c = right;\r\n        const d = left.left;\r\n        const e = left.right;\r\n        const f = right.left;\r\n        const g = right.right;\r\n        const balance = c.height - b.height;\r\n        // Rotate c node up\r\n        if (balance > 1) {\r\n            // Swap the right node with it's parent\r\n            c.left = a;\r\n            c.parent = a.parent;\r\n            a.parent = c;\r\n            // The original node's old parent should point to the right node\r\n            // this is mega confusing\r\n            if (c.parent) {\r\n                if (c.parent.left === a) {\r\n                    c.parent.left = c;\r\n                }\r\n                else {\r\n                    c.parent.right = c;\r\n                }\r\n            }\r\n            else {\r\n                this.root = c;\r\n            }\r\n            // Rotate\r\n            if (f.height > g.height) {\r\n                c.right = f;\r\n                a.right = g;\r\n                g.parent = a;\r\n                a.bounds = b.bounds.combine(g.bounds);\r\n                c.bounds = a.bounds.combine(f.bounds);\r\n                a.height = 1 + Math.max(b.height, g.height);\r\n                c.height = 1 + Math.max(a.height, f.height);\r\n            }\r\n            else {\r\n                c.right = g;\r\n                a.right = f;\r\n                f.parent = a;\r\n                a.bounds = b.bounds.combine(f.bounds);\r\n                c.bounds = a.bounds.combine(g.bounds);\r\n                a.height = 1 + Math.max(b.height, f.height);\r\n                c.height = 1 + Math.max(a.height, g.height);\r\n            }\r\n            return c;\r\n        }\r\n        // Rotate left node up\r\n        if (balance < -1) {\r\n            // swap\r\n            b.left = a;\r\n            b.parent = a.parent;\r\n            a.parent = b;\r\n            // node's old parent should point to b\r\n            if (b.parent) {\r\n                if (b.parent.left === a) {\r\n                    b.parent.left = b;\r\n                }\r\n                else {\r\n                    if (b.parent.right !== a) {\r\n                        throw 'Error rotating Dynamic Tree';\r\n                    }\r\n                    b.parent.right = b;\r\n                }\r\n            }\r\n            else {\r\n                this.root = b;\r\n            }\r\n            // rotate\r\n            if (d.height > e.height) {\r\n                b.right = d;\r\n                a.left = e;\r\n                e.parent = a;\r\n                a.bounds = c.bounds.combine(e.bounds);\r\n                b.bounds = a.bounds.combine(d.bounds);\r\n                a.height = 1 + Math.max(c.height, e.height);\r\n                b.height = 1 + Math.max(a.height, d.height);\r\n            }\r\n            else {\r\n                b.right = e;\r\n                a.left = d;\r\n                d.parent = a;\r\n                a.bounds = c.bounds.combine(d.bounds);\r\n                b.bounds = a.bounds.combine(e.bounds);\r\n                a.height = 1 + Math.max(c.height, d.height);\r\n                b.height = 1 + Math.max(a.height, e.height);\r\n            }\r\n            return b;\r\n        }\r\n        return node;\r\n    }\r\n    /**\r\n     * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\r\n     */\r\n    getHeight() {\r\n        if (this.root === null) {\r\n            return 0;\r\n        }\r\n        return this.root.height;\r\n    }\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\r\n     *\r\n     * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\r\n     * that you are complete with your query and you do not want to continue. Returning false will continue searching\r\n     * the tree until all possible colliders have been returned.\r\n     */\r\n    query(collider, callback) {\r\n        const bounds = collider.bounds;\r\n        const helper = (currentNode) => {\r\n            if (currentNode && currentNode.bounds.overlaps(bounds)) {\r\n                if (currentNode.isLeaf() && currentNode.data !== collider) {\r\n                    if (callback.call(collider, currentNode.data)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        helper(this.root);\r\n    }\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\r\n     * long ray to test the tree specified by `max`.\r\n     *\r\n     * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\r\n     * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\r\n     * the tree until all possible bodies that would intersect with the ray have been returned.\r\n     */\r\n    rayCastQuery(ray, max = Infinity, callback) {\r\n        const helper = (currentNode) => {\r\n            if (currentNode && currentNode.bounds.rayCast(ray, max)) {\r\n                if (currentNode.isLeaf()) {\r\n                    if (callback.call(ray, currentNode.data)) {\r\n                        // ray hit a leaf! return the body\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    // ray hit but not at a leaf, recurse deeper\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false; // ray missed\r\n        };\r\n        helper(this.root);\r\n    }\r\n    getNodes() {\r\n        const helper = (currentNode) => {\r\n            if (currentNode) {\r\n                return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        };\r\n        return helper(this.root);\r\n    }\r\n    debug(ex) {\r\n        // draw all the nodes in the Dynamic Tree\r\n        const helper = (currentNode) => {\r\n            if (currentNode) {\r\n                if (currentNode.isLeaf()) {\r\n                    currentNode.bounds.draw(ex, Color.Green);\r\n                }\r\n                else {\r\n                    currentNode.bounds.draw(ex, Color.White);\r\n                }\r\n                if (currentNode.left) {\r\n                    helper(currentNode.left);\r\n                }\r\n                if (currentNode.right) {\r\n                    helper(currentNode.right);\r\n                }\r\n            }\r\n        };\r\n        helper(this.root);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/ray.ts\n/**\r\n * A 2D ray that can be cast into the scene to do collision detection\r\n */\r\nclass Ray {\r\n    /**\r\n     * @param pos The starting position for the ray\r\n     * @param dir The vector indicating the direction of the ray\r\n     */\r\n    constructor(pos, dir) {\r\n        this.pos = pos;\r\n        this.dir = dir.normalize();\r\n    }\r\n    /**\r\n     * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\r\n     * This number indicates the mathematical intersection time.\r\n     * @param line  The line to test\r\n     */\r\n    intersect(line) {\r\n        const numerator = line.begin.sub(this.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\r\n            return -1;\r\n        }\r\n        // Lines are parallel\r\n        const divisor = this.dir.cross(line.getSlope());\r\n        if (divisor === 0) {\r\n            return -1;\r\n        }\r\n        const t = numerator.cross(line.getSlope()) / divisor;\r\n        if (t >= 0) {\r\n            const u = numerator.cross(this.dir) / divisor / line.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return t;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    intersectPoint(line) {\r\n        const time = this.intersect(line);\r\n        if (time < 0) {\r\n            return null;\r\n        }\r\n        return this.getPoint(time);\r\n    }\r\n    /**\r\n     * Returns the point of intersection given the intersection time\r\n     */\r\n    getPoint(time) {\r\n        return this.pos.add(this.dir.scale(time));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/DynamicTreeCollisionProcessor.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Responsible for performing the collision broadphase (locating potential collisions) and\r\n * the narrowphase (actual collision contacts)\r\n */\r\nclass DynamicTreeCollisionProcessor {\r\n    constructor() {\r\n        this._dynamicCollisionTree = new DynamicTree();\r\n        this._pairs = new Set();\r\n        this._collisionPairCache = [];\r\n        this._colliders = [];\r\n    }\r\n    getColliders() {\r\n        return this._colliders;\r\n    }\r\n    rayCast(ray, options) {\r\n        var _a, _b, _c;\r\n        const results = [];\r\n        const maxDistance = (_a = options === null || options === void 0 ? void 0 : options.maxDistance) !== null && _a !== void 0 ? _a : Infinity;\r\n        const collisionGroup = (_b = options === null || options === void 0 ? void 0 : options.collisionGroup) !== null && _b !== void 0 ? _b : CollisionGroup.All;\r\n        const searchAllColliders = (_c = options === null || options === void 0 ? void 0 : options.searchAllColliders) !== null && _c !== void 0 ? _c : false;\r\n        this._dynamicCollisionTree.rayCastQuery(ray, maxDistance, (collider) => {\r\n            var _a;\r\n            const owner = collider.owner;\r\n            const maybeBody = owner.get(BodyComponent);\r\n            // Early exit if not the right group\r\n            if (collisionGroup.mask !== CollisionGroup.All.mask && ((_a = maybeBody === null || maybeBody === void 0 ? void 0 : maybeBody.group) === null || _a === void 0 ? void 0 : _a.mask) !== collisionGroup.mask) {\r\n                return false;\r\n            }\r\n            const hit = collider.rayCast(ray, maxDistance);\r\n            if (hit) {\r\n                results.push({\r\n                    distance: hit.sub(ray.pos).distance(),\r\n                    point: hit,\r\n                    collider: collider,\r\n                    body: maybeBody\r\n                });\r\n                if (!searchAllColliders) {\r\n                    // returning true exits the search\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        });\r\n        return results;\r\n    }\r\n    /**\r\n     * Tracks a physics body for collisions\r\n     */\r\n    track(target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot track null collider');\r\n            return;\r\n        }\r\n        if (target instanceof CompositeCollider) {\r\n            const colliders = target.getColliders();\r\n            for (const c of colliders) {\r\n                c.owner = target.owner;\r\n                this._colliders.push(c);\r\n                this._dynamicCollisionTree.trackCollider(c);\r\n            }\r\n        }\r\n        else {\r\n            this._colliders.push(target);\r\n            this._dynamicCollisionTree.trackCollider(target);\r\n        }\r\n    }\r\n    /**\r\n     * Untracks a physics body\r\n     */\r\n    untrack(target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot untrack a null collider');\r\n            return;\r\n        }\r\n        if (target instanceof CompositeCollider) {\r\n            const colliders = target.getColliders();\r\n            for (const c of colliders) {\r\n                const index = this._colliders.indexOf(c);\r\n                if (index !== -1) {\r\n                    this._colliders.splice(index, 1);\r\n                }\r\n                this._dynamicCollisionTree.untrackCollider(c);\r\n            }\r\n        }\r\n        else {\r\n            const index = this._colliders.indexOf(target);\r\n            if (index !== -1) {\r\n                this._colliders.splice(index, 1);\r\n            }\r\n            this._dynamicCollisionTree.untrackCollider(target);\r\n        }\r\n    }\r\n    _pairExists(colliderA, colliderB) {\r\n        // if the collision pair has been calculated already short circuit\r\n        const hash = Pair.calculatePairHash(colliderA.id, colliderB.id);\r\n        return this._pairs.has(hash);\r\n    }\r\n    /**\r\n     * Detects potential collision pairs in a broadphase approach with the dynamic AABB tree strategy\r\n     */\r\n    broadphase(targets, delta, stats) {\r\n        const seconds = delta / 1000;\r\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n        const potentialColliders = targets.filter((other) => {\r\n            var _a, _b;\r\n            const body = (_a = other.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            return ((_b = other.owner) === null || _b === void 0 ? void 0 : _b.active) && body.collisionType !== CollisionType.PreventCollision;\r\n        });\r\n        // clear old list of collision pairs\r\n        this._collisionPairCache = [];\r\n        this._pairs.clear();\r\n        // check for normal collision pairs\r\n        let collider;\r\n        for (let j = 0, l = potentialColliders.length; j < l; j++) {\r\n            collider = potentialColliders[j];\r\n            // Query the collision tree for potential colliders\r\n            this._dynamicCollisionTree.query(collider, (other) => {\r\n                if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\r\n                    const pair = new Pair(collider, other);\r\n                    this._pairs.add(pair.id);\r\n                    this._collisionPairCache.push(pair);\r\n                }\r\n                // Always return false, to query whole tree. Returning true in the query method stops searching\r\n                return false;\r\n            });\r\n        }\r\n        if (stats) {\r\n            stats.physics.pairs = this._collisionPairCache.length;\r\n        }\r\n        // Check dynamic tree for fast moving objects\r\n        // Fast moving objects are those moving at least there smallest bound per frame\r\n        if (Physics.checkForFastBodies) {\r\n            for (const collider of potentialColliders) {\r\n                const body = collider.owner.get(BodyComponent);\r\n                // Skip non-active objects. Does not make sense on other collision types\r\n                if (body.collisionType !== CollisionType.Active) {\r\n                    continue;\r\n                }\r\n                // Maximum travel distance next frame\r\n                const updateDistance = body.vel.size * seconds + // velocity term\r\n                    body.acc.size * 0.5 * seconds * seconds; // acc term\r\n                // Find the minimum dimension\r\n                const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\r\n                if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\r\n                    if (stats) {\r\n                        stats.physics.fastBodies++;\r\n                    }\r\n                    // start with the oldPos because the integration for actors has already happened\r\n                    // objects resting on a surface may be slightly penetrating in the current position\r\n                    const updateVec = body.globalPos.sub(body.oldPos);\r\n                    const centerPoint = collider.center;\r\n                    const furthestPoint = collider.getFurthestPoint(body.vel);\r\n                    const origin = furthestPoint.sub(updateVec);\r\n                    const ray = new Ray(origin, body.vel);\r\n                    // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\r\n                    ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\r\n                    let minCollider;\r\n                    let minTranslate = new Vector(Infinity, Infinity);\r\n                    this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, (other) => {\r\n                        if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\r\n                            const hitPoint = other.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\r\n                            if (hitPoint) {\r\n                                const translate = hitPoint.sub(origin);\r\n                                if (translate.size < minTranslate.size) {\r\n                                    minTranslate = translate;\r\n                                    minCollider = other;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    });\r\n                    if (minCollider && Vector.isValid(minTranslate)) {\r\n                        const pair = new Pair(collider, minCollider);\r\n                        if (!this._pairs.has(pair.id)) {\r\n                            this._pairs.add(pair.id);\r\n                            this._collisionPairCache.push(pair);\r\n                        }\r\n                        // move the fast moving object to the other body\r\n                        // need to push into the surface by ex.Physics.surfaceEpsilon\r\n                        const shift = centerPoint.sub(furthestPoint);\r\n                        body.globalPos = origin\r\n                            .add(shift)\r\n                            .add(minTranslate)\r\n                            .add(ray.dir.scale(10 * Physics.surfaceEpsilon)); // needed to push the shape slightly into contact\r\n                        collider.update(body.transform.get());\r\n                        if (stats) {\r\n                            stats.physics.fastBodyCollisions++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // return cache\r\n        return this._collisionPairCache;\r\n    }\r\n    /**\r\n     * Applies narrow phase on collision pairs to find actual area intersections\r\n     * Adds actual colliding pairs to stats' Frame data\r\n     */\r\n    narrowphase(pairs, stats) {\r\n        let contacts = [];\r\n        for (let i = 0; i < pairs.length; i++) {\r\n            const newContacts = pairs[i].collide();\r\n            contacts = contacts.concat(newContacts);\r\n            if (stats && newContacts.length > 0) {\r\n                for (const c of newContacts) {\r\n                    stats.physics.contacts.set(c.id, c);\r\n                }\r\n            }\r\n        }\r\n        if (stats) {\r\n            stats.physics.collisions += contacts.length;\r\n        }\r\n        return contacts;\r\n    }\r\n    /**\r\n     * Update the dynamic tree positions\r\n     */\r\n    update(targets) {\r\n        let updated = 0;\r\n        const len = targets.length;\r\n        for (let i = 0; i < len; i++) {\r\n            if (this._dynamicCollisionTree.updateCollider(targets[i])) {\r\n                updated++;\r\n            }\r\n        }\r\n        return updated;\r\n    }\r\n    debug(ex) {\r\n        this._dynamicCollisionTree.debug(ex);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/Collider.ts\n\r\n\r\n/**\r\n * A collision collider specifies the geometry that can detect when other collision colliders intersect\r\n * for the purposes of colliding 2 objects in excalibur.\r\n */\r\nclass Collider {\r\n    constructor() {\r\n        this.id = createId('collider', Collider._ID++);\r\n        /**\r\n         * Excalibur uses this to signal to the [[CollisionSystem]] this is part of a composite collider\r\n         * @internal\r\n         * @hidden\r\n         */\r\n        this.__compositeColliderId = null;\r\n        this.events = new EventEmitter();\r\n    }\r\n    /**\r\n     * Returns a boolean indicating whether this body collided with\r\n     * or was in stationary contact with\r\n     * the body of the other [[Collider]]\r\n     */\r\n    touching(other) {\r\n        const contact = this.collide(other);\r\n        if (contact) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nCollider._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/CompositeCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CompositeCollider extends Collider {\r\n    constructor(colliders) {\r\n        super();\r\n        this._collisionProcessor = new DynamicTreeCollisionProcessor();\r\n        this._dynamicAABBTree = new DynamicTree();\r\n        this._colliders = [];\r\n        for (const c of colliders) {\r\n            this.addCollider(c);\r\n        }\r\n    }\r\n    clearColliders() {\r\n        this._colliders = [];\r\n    }\r\n    addCollider(collider) {\r\n        collider.events.pipe(this.events);\r\n        collider.__compositeColliderId = this.id;\r\n        this._colliders.push(collider);\r\n        this._collisionProcessor.track(collider);\r\n        this._dynamicAABBTree.trackCollider(collider);\r\n    }\r\n    removeCollider(collider) {\r\n        collider.events.pipe(this.events);\r\n        collider.__compositeColliderId = null;\r\n        removeItemFromArray(collider, this._colliders);\r\n        this._collisionProcessor.untrack(collider);\r\n        this._dynamicAABBTree.untrackCollider(collider);\r\n    }\r\n    getColliders() {\r\n        return this._colliders;\r\n    }\r\n    get worldPos() {\r\n        var _a, _b;\r\n        // TODO transform component world pos\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero;\r\n    }\r\n    get center() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero;\r\n    }\r\n    get bounds() {\r\n        var _a, _b;\r\n        // TODO cache this\r\n        const colliders = this.getColliders();\r\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.bounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox().translate(this.worldPos));\r\n        return results;\r\n    }\r\n    get localBounds() {\r\n        var _a, _b;\r\n        // TODO cache this\r\n        const colliders = this.getColliders();\r\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.localBounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox());\r\n        return results;\r\n    }\r\n    get axes() {\r\n        // TODO cache this\r\n        const colliders = this.getColliders();\r\n        let axes = [];\r\n        for (const collider of colliders) {\r\n            axes = axes.concat(collider.axes);\r\n        }\r\n        return axes;\r\n    }\r\n    getFurthestPoint(direction) {\r\n        const colliders = this.getColliders();\r\n        const furthestPoints = [];\r\n        for (const collider of colliders) {\r\n            furthestPoints.push(collider.getFurthestPoint(direction));\r\n        }\r\n        // Pick best point from all colliders\r\n        let bestPoint = furthestPoints[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (const point of furthestPoints) {\r\n            const distance = point.dot(direction);\r\n            if (distance > maxDistance) {\r\n                bestPoint = point;\r\n                maxDistance = distance;\r\n            }\r\n        }\r\n        return bestPoint;\r\n    }\r\n    getInertia(mass) {\r\n        const colliders = this.getColliders();\r\n        let totalInertia = 0;\r\n        for (const collider of colliders) {\r\n            totalInertia += collider.getInertia(mass);\r\n        }\r\n        return totalInertia;\r\n    }\r\n    collide(other) {\r\n        let otherColliders = [other];\r\n        if (other instanceof CompositeCollider) {\r\n            otherColliders = other.getColliders();\r\n        }\r\n        const pairs = [];\r\n        for (const c of otherColliders) {\r\n            this._dynamicAABBTree.query(c, (potentialCollider) => {\r\n                pairs.push(new Pair(c, potentialCollider));\r\n                return false;\r\n            });\r\n        }\r\n        let contacts = [];\r\n        for (const p of pairs) {\r\n            contacts = contacts.concat(p.collide());\r\n        }\r\n        return contacts;\r\n    }\r\n    getClosestLineBetween(other) {\r\n        const colliders = this.getColliders();\r\n        const lines = [];\r\n        if (other instanceof CompositeCollider) {\r\n            const otherColliders = other.getColliders();\r\n            for (const colliderA of colliders) {\r\n                for (const colliderB of otherColliders) {\r\n                    const maybeLine = colliderA.getClosestLineBetween(colliderB);\r\n                    if (maybeLine) {\r\n                        lines.push(maybeLine);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (const collider of colliders) {\r\n                const maybeLine = other.getClosestLineBetween(collider);\r\n                if (maybeLine) {\r\n                    lines.push(maybeLine);\r\n                }\r\n            }\r\n        }\r\n        if (lines.length) {\r\n            let minLength = lines[0].getLength();\r\n            let minLine = lines[0];\r\n            for (const line of lines) {\r\n                const length = line.getLength();\r\n                if (length < minLength) {\r\n                    minLength = length;\r\n                    minLine = line;\r\n                }\r\n            }\r\n            return minLine;\r\n        }\r\n        return null;\r\n    }\r\n    contains(point) {\r\n        const colliders = this.getColliders();\r\n        for (const collider of colliders) {\r\n            if (collider.contains(point)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    rayCast(ray, max) {\r\n        const colliders = this.getColliders();\r\n        const points = [];\r\n        for (const collider of colliders) {\r\n            const vec = collider.rayCast(ray, max);\r\n            if (vec) {\r\n                points.push(vec);\r\n            }\r\n        }\r\n        if (points.length) {\r\n            let minPoint = points[0];\r\n            let minDistance = minPoint.dot(ray.dir);\r\n            for (const point of points) {\r\n                const distance = ray.dir.dot(point);\r\n                if (distance < minDistance) {\r\n                    minPoint = point;\r\n                    minDistance = distance;\r\n                }\r\n            }\r\n            return minPoint;\r\n        }\r\n        return null;\r\n    }\r\n    project(axis) {\r\n        const colliders = this.getColliders();\r\n        const projs = [];\r\n        for (const collider of colliders) {\r\n            const proj = collider.project(axis);\r\n            if (proj) {\r\n                projs.push(proj);\r\n            }\r\n        }\r\n        // Merge all proj's on the same axis\r\n        if (projs.length) {\r\n            const newProjection = new Projection(projs[0].min, projs[0].max);\r\n            for (const proj of projs) {\r\n                newProjection.min = Math.min(proj.min, newProjection.min);\r\n                newProjection.max = Math.max(proj.max, newProjection.max);\r\n            }\r\n            return newProjection;\r\n        }\r\n        return null;\r\n    }\r\n    update(transform) {\r\n        if (transform) {\r\n            const colliders = this.getColliders();\r\n            for (const collider of colliders) {\r\n                collider.owner = this.owner;\r\n                collider.update(transform);\r\n            }\r\n        }\r\n    }\r\n    debug(ex, color) {\r\n        const colliders = this.getColliders();\r\n        for (const collider of colliders) {\r\n            collider.debug(ex, color);\r\n        }\r\n    }\r\n    clone() {\r\n        return new CompositeCollider(this._colliders.map((c) => c.clone()));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/line-segment.ts\n\r\n/**\r\n * A 2D line segment\r\n */\r\nclass LineSegment {\r\n    /**\r\n     * @param begin  The starting point of the line segment\r\n     * @param end  The ending point of the line segment\r\n     */\r\n    constructor(begin, end) {\r\n        this.begin = begin;\r\n        this.end = end;\r\n    }\r\n    /**\r\n     * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\r\n     */\r\n    get slope() {\r\n        return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\r\n    }\r\n    /**\r\n     * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\r\n     */\r\n    get intercept() {\r\n        return this.begin.y - this.slope * this.begin.x;\r\n    }\r\n    /**\r\n     * Gets the normal of the line\r\n     */\r\n    normal() {\r\n        if (this._normal) {\r\n            return this._normal;\r\n        }\r\n        return this._normal = this.end.sub(this.begin).normal();\r\n    }\r\n    dir() {\r\n        if (this._dir) {\r\n            return this._dir;\r\n        }\r\n        return this._dir = this.end.sub(this.begin);\r\n    }\r\n    getPoints() {\r\n        return [this.begin, this.end];\r\n    }\r\n    /**\r\n     * Returns the slope of the line in the form of a vector of length 1\r\n     */\r\n    getSlope() {\r\n        if (this._slope) {\r\n            return this._slope;\r\n        }\r\n        const begin = this.begin;\r\n        const end = this.end;\r\n        const distance = begin.distance(end);\r\n        return this._slope = end.sub(begin).scale(1 / distance);\r\n    }\r\n    /**\r\n     * Returns the edge of the line as vector, the length of the vector is the length of the edge\r\n     */\r\n    getEdge() {\r\n        const begin = this.begin;\r\n        const end = this.end;\r\n        return end.sub(begin);\r\n    }\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    getLength() {\r\n        if (this._length) {\r\n            return this._length;\r\n        }\r\n        const begin = this.begin;\r\n        const end = this.end;\r\n        const distance = begin.distance(end);\r\n        return this._length = distance;\r\n    }\r\n    /**\r\n     * Returns the midpoint of the edge\r\n     */\r\n    get midpoint() {\r\n        return this.begin.add(this.end).scale(0.5);\r\n    }\r\n    /**\r\n     * Flips the direction of the line segment\r\n     */\r\n    flip() {\r\n        return new LineSegment(this.end, this.begin);\r\n    }\r\n    /**\r\n     * Tests if a given point is below the line, points in the normal direction above the line are considered above.\r\n     * @param point\r\n     */\r\n    below(point) {\r\n        const above2 = (this.end.x - this.begin.x) * (point.y - this.begin.y) - (this.end.y - this.begin.y) * (point.x - this.begin.x);\r\n        return above2 >= 0;\r\n    }\r\n    /**\r\n     * Returns the clip point\r\n     * @param sideVector Vector that traces the line\r\n     * @param length Length to clip along side\r\n     */\r\n    clip(sideVector, length) {\r\n        let dir = sideVector;\r\n        dir = dir.normalize();\r\n        const near = dir.dot(this.begin) - length;\r\n        const far = dir.dot(this.end) - length;\r\n        const results = [];\r\n        if (near <= 0) {\r\n            results.push(this.begin);\r\n        }\r\n        if (far <= 0) {\r\n            results.push(this.end);\r\n        }\r\n        if (near * far < 0) {\r\n            const clipTime = near / (near - far);\r\n            results.push(this.begin.add(this.end.sub(this.begin).scale(clipTime)));\r\n        }\r\n        if (results.length !== 2) {\r\n            return null;\r\n        }\r\n        return new LineSegment(results[0], results[1]);\r\n    }\r\n    /**\r\n     * Find the perpendicular distance from the line to a point\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n     * @param point\r\n     */\r\n    distanceToPoint(point, signed = false) {\r\n        const x0 = point.x;\r\n        const y0 = point.y;\r\n        const l = this.getLength();\r\n        const dy = this.end.y - this.begin.y;\r\n        const dx = this.end.x - this.begin.x;\r\n        const distance = (dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\r\n        return signed ? distance : Math.abs(distance);\r\n    }\r\n    /**\r\n     * Find the perpendicular line from the line to a point\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n     * (a - p) - ((a - p) * n)n\r\n     * a is a point on the line\r\n     * p is the arbitrary point above the line\r\n     * n is a unit vector in direction of the line\r\n     * @param point\r\n     */\r\n    findVectorToPoint(point) {\r\n        const aMinusP = this.begin.sub(point);\r\n        const n = this.getSlope();\r\n        return aMinusP.sub(n.scale(aMinusP.dot(n)));\r\n    }\r\n    /**\r\n     * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\r\n     * a new point with the calculated Y value and vice-versa.\r\n     *\r\n     * @param x The known X value of the target point\r\n     * @param y The known Y value of the target point\r\n     * @returns A new point with the other calculated axis value\r\n     */\r\n    findPoint(x = null, y = null) {\r\n        const m = this.slope;\r\n        const b = this.intercept;\r\n        if (x !== null) {\r\n            return new Vector(x, m * x + b);\r\n        }\r\n        else if (y !== null) {\r\n            return new Vector((y - b) / m, y);\r\n        }\r\n        else {\r\n            throw new Error('You must provide an X or a Y value');\r\n        }\r\n    }\r\n    /**\r\n     * @see http://stackoverflow.com/a/11908158/109458\r\n     */\r\n    hasPoint() {\r\n        let currPoint;\r\n        let threshold = 0;\r\n        if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n            currPoint = new Vector(arguments[0], arguments[1]);\r\n            threshold = arguments[2] || 0;\r\n        }\r\n        else if (arguments[0] instanceof Vector) {\r\n            currPoint = arguments[0];\r\n            threshold = arguments[1] || 0;\r\n        }\r\n        else {\r\n            throw 'Could not determine the arguments for Vector.hasPoint';\r\n        }\r\n        const dxc = currPoint.x - this.begin.x;\r\n        const dyc = currPoint.y - this.begin.y;\r\n        const dx1 = this.end.x - this.begin.x;\r\n        const dy1 = this.end.y - this.begin.y;\r\n        const cross = dxc * dy1 - dyc * dx1;\r\n        // check whether point lines on the line\r\n        if (Math.abs(cross) > threshold) {\r\n            return false;\r\n        }\r\n        // check whether point lies in-between start and end\r\n        if (Math.abs(dx1) >= Math.abs(dy1)) {\r\n            return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\r\n        }\r\n        else {\r\n            return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/ClosestLineJumpTable.ts\n\r\n\r\n\r\n/**\r\n * Finds the closes line between 2 line segments, were the magnitude of u, v are the lengths of each segment\r\n * L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n * L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n * @param p0 Point where L1 begins\r\n * @param u Direction and length of L1\r\n * @param q0 Point were L2 begins\r\n * @param v Direction and length of L2\r\n */\r\nfunction ClosestLine(p0, u, q0, v) {\r\n    // Distance between 2 lines http://geomalgorithms.com/a07-_distance.html\r\n    // w(s, t) = P(s) - Q(t)\r\n    // The w(s, t) that has the minimum distance we will say is w(sClosest, tClosest) = wClosest\r\n    //\r\n    // wClosest is the vector that is uniquely perpendicular to the 2 line directions u & v.\r\n    // wClosest = w0 + sClosest * u - tClosest * v, where w0 is p0 - q0\r\n    //\r\n    // The closest point between 2 lines then satisfies this pair of equations\r\n    // 1: u * wClosest = 0\r\n    // 2: v * wClosest = 0\r\n    //\r\n    // Substituting wClosest into the equations we get\r\n    //\r\n    // 1: (u * u) * sClosest - (u * v) tClosest = -u * w0\r\n    // 2: (v * u) * sClosest - (v * v) tClosest = -v * w0\r\n    // simplify w0\r\n    const w0 = p0.sub(q0);\r\n    // simplify (u * u);\r\n    const a = u.dot(u);\r\n    // simplify (u * v);\r\n    const b = u.dot(v);\r\n    // simplify (v * v)\r\n    const c = v.dot(v);\r\n    // simplify (u * w0)\r\n    const d = u.dot(w0);\r\n    // simplify (v * w0)\r\n    const e = v.dot(w0);\r\n    // denominator ac - b^2\r\n    const denom = a * c - b * b;\r\n    let sDenom = denom;\r\n    let tDenom = denom;\r\n    // if denom is 0 they are parallel, use any point from either as the start in this case p0\r\n    if (denom === 0 || denom <= 0.01) {\r\n        const tClosestParallel = d / b;\r\n        return new LineSegment(p0, q0.add(v.scale(tClosestParallel)));\r\n    }\r\n    // Solve for sClosest for infinite line\r\n    let sClosest = b * e - c * d; // / denom;\r\n    // Solve for tClosest for infinite line\r\n    let tClosest = a * e - b * d; // / denom;\r\n    // Solve for segments candidate edges, if sClosest and tClosest are outside their segments\r\n    if (sClosest < 0) {\r\n        sClosest = 0;\r\n        tClosest = e;\r\n        tDenom = c;\r\n    }\r\n    else if (sClosest > sDenom) {\r\n        sClosest = sDenom;\r\n        tClosest = e + b;\r\n        tDenom = c;\r\n    }\r\n    if (tClosest < 0) {\r\n        tClosest = 0;\r\n        if (-d < 0) {\r\n            sClosest = 0;\r\n        }\r\n        else if (-d > a) {\r\n            sClosest = sDenom;\r\n        }\r\n        else {\r\n            sClosest = -d;\r\n            sDenom = a;\r\n        }\r\n    }\r\n    else if (tClosest > tDenom) {\r\n        tClosest = tDenom;\r\n        if (-d + b < 0) {\r\n            sClosest = 0;\r\n        }\r\n        else if (-d + b > a) {\r\n            sClosest = sDenom;\r\n        }\r\n        else {\r\n            sClosest = -d + b;\r\n            sDenom = a;\r\n        }\r\n    }\r\n    sClosest = Math.abs(sClosest) < 0.001 ? 0 : sClosest / sDenom;\r\n    tClosest = Math.abs(tClosest) < 0.001 ? 0 : tClosest / tDenom;\r\n    return new LineSegment(p0.add(u.scale(sClosest)), q0.add(v.scale(tClosest)));\r\n}\r\nconst ClosestLineJumpTable = {\r\n    PolygonPolygonClosestLine(polygonA, polygonB) {\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = polygonB.worldPos;\r\n        const otherDirection = otherWorldPos.sub(polygonA.worldPos);\r\n        const thisDirection = otherDirection.negate();\r\n        const rayTowardsOther = new Ray(polygonA.worldPos, otherDirection);\r\n        const rayTowardsThis = new Ray(otherWorldPos, thisDirection);\r\n        const thisPoint = polygonA.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\r\n        const otherPoint = polygonB.rayCast(rayTowardsThis).add(rayTowardsThis.dir.scale(0.1));\r\n        const thisFace = polygonA.getClosestFace(thisPoint);\r\n        const otherFace = polygonB.getClosestFace(otherPoint);\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const p0 = thisFace.face.begin;\r\n        const u = thisFace.face.getEdge();\r\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n        const q0 = otherFace.face.begin;\r\n        const v = otherFace.face.getEdge();\r\n        return ClosestLine(p0, u, q0, v);\r\n    },\r\n    PolygonEdgeClosestLine(polygon, edge) {\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = edge.worldPos;\r\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\r\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\r\n        const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\r\n        const thisFace = polygon.getClosestFace(thisPoint);\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const p0 = thisFace.face.begin;\r\n        const u = thisFace.face.getEdge();\r\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n        const edgeLine = edge.asLine();\r\n        const edgeStart = edgeLine.begin;\r\n        const edgeVector = edgeLine.getEdge();\r\n        const q0 = edgeStart;\r\n        const v = edgeVector;\r\n        return ClosestLine(p0, u, q0, v);\r\n    },\r\n    PolygonCircleClosestLine(polygon, circle) {\r\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = circle.worldPos;\r\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\r\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\r\n        const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\r\n        const thisFace = polygon.getClosestFace(thisPoint);\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const p0 = thisFace.face.begin;\r\n        const u = thisFace.face.getEdge();\r\n        // Time of minimum distance\r\n        let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\r\n        // If time of minimum is past the edge clamp\r\n        if (t > 1) {\r\n            t = 1;\r\n        }\r\n        else if (t < 0) {\r\n            t = 0;\r\n        }\r\n        // Minimum distance\r\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\r\n        const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\r\n        const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\r\n        return new LineSegment(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\r\n    },\r\n    CircleCircleClosestLine(circleA, circleB) {\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = circleB.worldPos;\r\n        const otherDirection = otherWorldPos.sub(circleA.worldPos);\r\n        const thisWorldPos = circleA.worldPos;\r\n        const thisDirection = thisWorldPos.sub(circleB.worldPos);\r\n        const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\r\n        const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\r\n        const thisPoint = circleA.rayCast(rayTowardsOther);\r\n        const otherPoint = circleB.rayCast(rayTowardsThis);\r\n        return new LineSegment(thisPoint, otherPoint);\r\n    },\r\n    CircleEdgeClosestLine(circle, edge) {\r\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\r\n        const circleWorlPos = circle.worldPos;\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const edgeLine = edge.asLine();\r\n        const edgeStart = edgeLine.begin;\r\n        const edgeVector = edgeLine.getEdge();\r\n        const p0 = edgeStart;\r\n        const u = edgeVector;\r\n        // Time of minimum distance\r\n        let t = (u.x * (circleWorlPos.x - p0.x) + u.y * (circleWorlPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\r\n        // If time of minimum is past the edge clamp to edge\r\n        if (t > 1) {\r\n            t = 1;\r\n        }\r\n        else if (t < 0) {\r\n            t = 0;\r\n        }\r\n        // Minimum distance\r\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorlPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorlPos.y, 2)) - circle.radius;\r\n        const circlex = ((p0.x + u.x * t - circleWorlPos.x) * circle.radius) / (circle.radius + d);\r\n        const circley = ((p0.y + u.y * t - circleWorlPos.y) * circle.radius) / (circle.radius + d);\r\n        return new LineSegment(u.scale(t).add(p0), new Vector(circleWorlPos.x + circlex, circleWorlPos.y + circley));\r\n    },\r\n    EdgeEdgeClosestLine(edgeA, edgeB) {\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const edgeLineA = edgeA.asLine();\r\n        const edgeStartA = edgeLineA.begin;\r\n        const edgeVectorA = edgeLineA.getEdge();\r\n        const p0 = edgeStartA;\r\n        const u = edgeVectorA;\r\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n        const edgeLineB = edgeB.asLine();\r\n        const edgeStartB = edgeLineB.begin;\r\n        const edgeVectorB = edgeLineB.getEdge();\r\n        const q0 = edgeStartB;\r\n        const v = edgeVectorB;\r\n        return ClosestLine(p0, u, q0, v);\r\n    }\r\n};\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/CircleCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * This is a circle collider for the excalibur rigid body physics simulation\r\n */\r\nclass CircleCollider extends Collider {\r\n    get worldPos() {\r\n        return this._globalMatrix.getPosition();\r\n    }\r\n    /**\r\n     * Get the radius of the circle\r\n     */\r\n    get radius() {\r\n        var _a;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\r\n        return this._naturalRadius * Math.min(scale.x, scale.y);\r\n    }\r\n    /**\r\n     * Set the radius of the circle\r\n     */\r\n    set radius(val) {\r\n        var _a;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\r\n        this._naturalRadius = val / Math.min(scale.x, scale.y);\r\n    }\r\n    constructor(options) {\r\n        super();\r\n        /**\r\n         * Position of the circle relative to the collider, by default (0, 0).\r\n         */\r\n        this.offset = Vector.Zero;\r\n        this._globalMatrix = AffineMatrix.identity();\r\n        this.offset = options.offset || Vector.Zero;\r\n        this.radius = options.radius || 0;\r\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\r\n    }\r\n    /**\r\n     * Returns a clone of this shape, not associated with any collider\r\n     */\r\n    clone() {\r\n        return new CircleCollider({\r\n            offset: this.offset.clone(),\r\n            radius: this.radius\r\n        });\r\n    }\r\n    /**\r\n     * Get the center of the collider in world coordinates\r\n     */\r\n    get center() {\r\n        return this._globalMatrix.getPosition();\r\n    }\r\n    /**\r\n     * Tests if a point is contained in this collider\r\n     */\r\n    contains(point) {\r\n        var _a, _b;\r\n        const pos = (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : this.offset;\r\n        const distance = pos.distance(point);\r\n        if (distance <= this.radius) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Casts a ray at the Circle collider and returns the nearest point of collision\r\n     * @param ray\r\n     */\r\n    rayCast(ray, max = Infinity) {\r\n        //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\r\n        const c = this.center;\r\n        const dir = ray.dir;\r\n        const orig = ray.pos;\r\n        const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\r\n        if (discriminant < 0) {\r\n            // no intersection\r\n            return null;\r\n        }\r\n        else {\r\n            let toi = 0;\r\n            if (discriminant === 0) {\r\n                toi = -dir.dot(orig.sub(c));\r\n                if (toi > 0 && toi < max) {\r\n                    return ray.getPoint(toi);\r\n                }\r\n                return null;\r\n            }\r\n            else {\r\n                const toi1 = -dir.dot(orig.sub(c)) + discriminant;\r\n                const toi2 = -dir.dot(orig.sub(c)) - discriminant;\r\n                const positiveToi = [];\r\n                if (toi1 >= 0) {\r\n                    positiveToi.push(toi1);\r\n                }\r\n                if (toi2 >= 0) {\r\n                    positiveToi.push(toi2);\r\n                }\r\n                const mintoi = Math.min(...positiveToi);\r\n                if (mintoi <= max) {\r\n                    return ray.getPoint(mintoi);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n    getClosestLineBetween(shape) {\r\n        if (shape instanceof CircleCollider) {\r\n            return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\r\n        }\r\n        else if (shape instanceof PolygonCollider) {\r\n            return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\r\n        }\r\n        else if (shape instanceof EdgeCollider) {\r\n            return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\r\n        }\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    collide(collider) {\r\n        if (collider instanceof CircleCollider) {\r\n            return CollisionJumpTable.CollideCircleCircle(this, collider);\r\n        }\r\n        else if (collider instanceof PolygonCollider) {\r\n            return CollisionJumpTable.CollideCirclePolygon(this, collider);\r\n        }\r\n        else if (collider instanceof EdgeCollider) {\r\n            return CollisionJumpTable.CollideCircleEdge(this, collider);\r\n        }\r\n        else {\r\n            throw new Error(`Circle could not collide with unknown CollisionShape ${typeof collider}`);\r\n        }\r\n    }\r\n    /**\r\n     * Find the point on the collider furthest in the direction specified\r\n     */\r\n    getFurthestPoint(direction) {\r\n        return this.center.add(direction.normalize().scale(this.radius));\r\n    }\r\n    /**\r\n     * Find the local point on the shape in the direction specified\r\n     * @param direction\r\n     */\r\n    getFurthestLocalPoint(direction) {\r\n        const dir = direction.normalize();\r\n        return dir.scale(this.radius);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the circle collider in world coordinates\r\n     */\r\n    get bounds() {\r\n        var _a, _b, _c;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero);\r\n        return new BoundingBox(this.offset.x - this._naturalRadius, this.offset.y - this._naturalRadius, this.offset.x + this._naturalRadius, this.offset.y + this._naturalRadius).rotate(rotation).scale(scale).translate(pos);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the circle collider in local coordinates\r\n     */\r\n    get localBounds() {\r\n        return new BoundingBox(this.offset.x - this._naturalRadius, this.offset.y - this._naturalRadius, this.offset.x + this._naturalRadius, this.offset.y + this._naturalRadius);\r\n    }\r\n    /**\r\n     * Get axis not implemented on circles, since there are infinite axis in a circle\r\n     */\r\n    get axes() {\r\n        return [];\r\n    }\r\n    /**\r\n     * Returns the moment of inertia of a circle given it's mass\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    getInertia(mass) {\r\n        return (mass * this.radius * this.radius) / 2;\r\n    }\r\n    /* istanbul ignore next */\r\n    update(transform) {\r\n        var _a;\r\n        this._transform = transform;\r\n        const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\r\n        globalMat.clone(this._globalMatrix);\r\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\r\n    }\r\n    /**\r\n     * Project the circle along a specified axis\r\n     */\r\n    project(axis) {\r\n        const scalars = [];\r\n        const point = this.center;\r\n        const dotProduct = point.dot(axis);\r\n        scalars.push(dotProduct);\r\n        scalars.push(dotProduct + this.radius);\r\n        scalars.push(dotProduct - this.radius);\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    }\r\n    debug(ex, color) {\r\n        var _a, _b, _c, _d;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero);\r\n        ex.save();\r\n        ex.translate(pos.x, pos.y);\r\n        ex.rotate(rotation);\r\n        ex.scale(scale.x, scale.y);\r\n        ex.drawCircle(((_d = this.offset) !== null && _d !== void 0 ? _d : Vector.Zero), this._naturalRadius, Color.Transparent, color, 2);\r\n        ex.restore();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/CollisionContact.ts\n\r\n\r\n\r\n\r\n/**\r\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\r\n * Pair prevents collisions from being evaluated more than one time\r\n */\r\nclass CollisionContact {\r\n    constructor(colliderA, colliderB, mtv, normal, tangent, points, localPoints, info) {\r\n        var _a, _b;\r\n        this._canceled = false;\r\n        this.colliderA = colliderA;\r\n        this.colliderB = colliderB;\r\n        this.mtv = mtv;\r\n        this.normal = normal;\r\n        this.tangent = tangent;\r\n        this.points = points;\r\n        this.localPoints = localPoints;\r\n        this.info = info;\r\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\r\n        if (colliderA.__compositeColliderId || colliderB.__compositeColliderId) {\r\n            // Add on the parent composite pair for start/end contact\r\n            this.id += '|' + Pair.calculatePairHash((_a = colliderA.__compositeColliderId) !== null && _a !== void 0 ? _a : colliderA.id, (_b = colliderB.__compositeColliderId) !== null && _b !== void 0 ? _b : colliderB.id);\r\n        }\r\n    }\r\n    /**\r\n     * Match contact awake state, except if body's are Fixed\r\n     */\r\n    matchAwake() {\r\n        const bodyA = this.colliderA.owner.get(BodyComponent);\r\n        const bodyB = this.colliderB.owner.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            if (bodyA.sleeping !== bodyB.sleeping) {\r\n                if (bodyA.sleeping && bodyA.collisionType !== CollisionType.Fixed && bodyB.sleepMotion >= Physics.wakeThreshold) {\r\n                    bodyA.setSleeping(false);\r\n                }\r\n                if (bodyB.sleeping && bodyB.collisionType !== CollisionType.Fixed && bodyA.sleepMotion >= Physics.wakeThreshold) {\r\n                    bodyB.setSleeping(false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    isCanceled() {\r\n        return this._canceled;\r\n    }\r\n    cancel() {\r\n        this._canceled = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/SeparatingAxis.ts\nclass SeparatingAxis {\r\n    static findPolygonPolygonSeparation(polyA, polyB) {\r\n        let bestSeparation = -Number.MAX_VALUE;\r\n        let bestSide = null;\r\n        let bestAxis = null;\r\n        let bestSideIndex = -1;\r\n        let bestOtherPoint = null;\r\n        const sides = polyA.getSides();\r\n        const localSides = polyA.getLocalSides();\r\n        for (let i = 0; i < sides.length; i++) {\r\n            const side = sides[i];\r\n            const axis = side.normal();\r\n            const vertB = polyB.getFurthestPoint(axis.negate());\r\n            // Separation on side i's axis\r\n            // We are looking for the largest separation between poly A's sides\r\n            const vertSeparation = side.distanceToPoint(vertB, true);\r\n            if (vertSeparation > bestSeparation) {\r\n                bestSeparation = vertSeparation;\r\n                bestSide = side;\r\n                bestAxis = axis;\r\n                bestSideIndex = i;\r\n                bestOtherPoint = vertB;\r\n            }\r\n        }\r\n        return {\r\n            collider: polyA,\r\n            separation: bestAxis ? bestSeparation : 99,\r\n            axis: bestAxis,\r\n            side: bestSide,\r\n            localSide: localSides[bestSideIndex],\r\n            sideId: bestSideIndex,\r\n            point: bestOtherPoint,\r\n            localPoint: bestAxis ? polyB.getFurthestLocalPoint(bestAxis.negate()) : null\r\n        };\r\n    }\r\n    static findCirclePolygonSeparation(circle, polygon) {\r\n        const axes = polygon.axes;\r\n        const pc = polygon.center;\r\n        // Special SAT with circles\r\n        const polyDir = pc.sub(circle.worldPos);\r\n        const closestPointOnPoly = polygon.getFurthestPoint(polyDir.negate());\r\n        axes.push(closestPointOnPoly.sub(circle.worldPos).normalize());\r\n        let minOverlap = Number.MAX_VALUE;\r\n        let minAxis = null;\r\n        let minIndex = -1;\r\n        for (let i = 0; i < axes.length; i++) {\r\n            const proj1 = polygon.project(axes[i]);\r\n            const proj2 = circle.project(axes[i]);\r\n            const overlap = proj1.getOverlap(proj2);\r\n            if (overlap <= 0) {\r\n                return null;\r\n            }\r\n            else {\r\n                if (overlap < minOverlap) {\r\n                    minOverlap = overlap;\r\n                    minAxis = axes[i];\r\n                    minIndex = i;\r\n                }\r\n            }\r\n        }\r\n        if (minIndex < 0) {\r\n            return null;\r\n        }\r\n        return minAxis.normalize().scale(minOverlap);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/CollisionJumpTable.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CollisionJumpTable = {\r\n    CollideCircleCircle(circleA, circleB) {\r\n        const circleAPos = circleA.worldPos;\r\n        const circleBPos = circleB.worldPos;\r\n        const combinedRadius = circleA.radius + circleB.radius;\r\n        const distance = circleAPos.distance(circleBPos);\r\n        if (distance > combinedRadius) {\r\n            return [];\r\n        }\r\n        // negative means overlap\r\n        const separation = combinedRadius - distance;\r\n        // Normal points from A -> B\r\n        const normal = circleBPos.sub(circleAPos).normalize();\r\n        const tangent = normal.perpendicular();\r\n        const mvt = normal.scale(separation);\r\n        const point = circleA.getFurthestPoint(normal);\r\n        const local = circleA.getFurthestLocalPoint(normal);\r\n        const info = {\r\n            collider: circleA,\r\n            separation,\r\n            axis: normal,\r\n            point: point\r\n        };\r\n        return [new CollisionContact(circleA, circleB, mvt, normal, tangent, [point], [local], info)];\r\n    },\r\n    CollideCirclePolygon(circle, polygon) {\r\n        var _a, _b;\r\n        let minAxis = SeparatingAxis.findCirclePolygonSeparation(circle, polygon);\r\n        if (!minAxis) {\r\n            return [];\r\n        }\r\n        // make sure that the minAxis is pointing away from circle\r\n        const samedir = minAxis.dot(polygon.center.sub(circle.center));\r\n        minAxis = samedir < 0 ? minAxis.negate() : minAxis;\r\n        const point = circle.getFurthestPoint(minAxis);\r\n        const xf = (_b = (_a = circle.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\r\n        const local = xf.applyInverse(point);\r\n        const normal = minAxis.normalize();\r\n        const info = {\r\n            collider: circle,\r\n            separation: -minAxis.size,\r\n            axis: normal,\r\n            point: point,\r\n            localPoint: local,\r\n            side: polygon.findSide(normal.negate()),\r\n            localSide: polygon.findLocalSide(normal.negate())\r\n        };\r\n        return [new CollisionContact(circle, polygon, minAxis, normal, normal.perpendicular(), [point], [local], info)];\r\n    },\r\n    CollideCircleEdge(circle, edge) {\r\n        // TODO not sure this actually abides by local/world collisions\r\n        // Are edge.begin and edge.end local space or world space? I think they should be local\r\n        // center of the circle in world pos\r\n        const cc = circle.center;\r\n        // vector in the direction of the edge\r\n        const edgeWorld = edge.asLine();\r\n        const e = edgeWorld.end.sub(edgeWorld.begin);\r\n        // amount of overlap with the circle's center along the edge direction\r\n        const u = e.dot(edgeWorld.end.sub(cc));\r\n        const v = e.dot(cc.sub(edgeWorld.begin));\r\n        const side = edge.asLine();\r\n        const localSide = edge.asLocalLine();\r\n        // Potential region A collision (circle is on the left side of the edge, before the beginning)\r\n        if (v <= 0) {\r\n            const da = edgeWorld.begin.sub(cc);\r\n            const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\r\n            // save some sqrts\r\n            if (dda > circle.radius * circle.radius) {\r\n                return []; // no collision\r\n            }\r\n            const normal = da.normalize();\r\n            const separation = circle.radius - Math.sqrt(dda);\r\n            const info = {\r\n                collider: circle,\r\n                separation: separation,\r\n                axis: normal,\r\n                point: side.begin,\r\n                side: side,\r\n                localSide: localSide\r\n            };\r\n            return [\r\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.begin], [localSide.begin], info)\r\n            ];\r\n        }\r\n        // Potential region B collision (circle is on the right side of the edge, after the end)\r\n        if (u <= 0) {\r\n            const db = edgeWorld.end.sub(cc);\r\n            const ddb = db.dot(db);\r\n            if (ddb > circle.radius * circle.radius) {\r\n                return [];\r\n            }\r\n            const normal = db.normalize();\r\n            const separation = circle.radius - Math.sqrt(ddb);\r\n            const info = {\r\n                collider: circle,\r\n                separation: separation,\r\n                axis: normal,\r\n                point: side.end,\r\n                side: side,\r\n                localSide: localSide\r\n            };\r\n            return [\r\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.end], [localSide.end], info)\r\n            ];\r\n        }\r\n        // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\r\n        const den = e.dot(e);\r\n        const pointOnEdge = edgeWorld.begin\r\n            .scale(u)\r\n            .add(edgeWorld.end.scale(v))\r\n            .scale(1 / den);\r\n        const d = cc.sub(pointOnEdge);\r\n        const dd = d.dot(d);\r\n        if (dd > circle.radius * circle.radius) {\r\n            return []; // no collision\r\n        }\r\n        let normal = e.perpendicular();\r\n        // flip correct direction\r\n        if (normal.dot(cc.sub(edgeWorld.begin)) < 0) {\r\n            normal.x = -normal.x;\r\n            normal.y = -normal.y;\r\n        }\r\n        normal = normal.normalize();\r\n        const separation = circle.radius - Math.sqrt(dd);\r\n        const mvt = normal.scale(separation);\r\n        const info = {\r\n            collider: circle,\r\n            separation: separation,\r\n            axis: normal,\r\n            point: pointOnEdge,\r\n            side: side,\r\n            localSide: localSide\r\n        };\r\n        return [\r\n            new CollisionContact(circle, edge, mvt, normal.negate(), normal.negate().perpendicular(), [pointOnEdge], [pointOnEdge.sub(edge.worldPos)], info)\r\n        ];\r\n    },\r\n    CollideEdgeEdge() {\r\n        // Edge-edge collision doesn't make sense\r\n        return [];\r\n    },\r\n    CollidePolygonEdge(polygon, edge) {\r\n        var _a;\r\n        const pc = polygon.center;\r\n        const ec = edge.center;\r\n        const dir = ec.sub(pc).normalize();\r\n        // build a temporary polygon from the edge to use SAT\r\n        const linePoly = new PolygonCollider({\r\n            points: [edge.begin, edge.end, edge.end.add(dir.scale(100)), edge.begin.add(dir.scale(100))],\r\n            offset: edge.offset\r\n        });\r\n        linePoly.owner = edge.owner;\r\n        const tx = (_a = edge.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\r\n        if (tx) {\r\n            linePoly.update(edge.owner.get(TransformComponent).get());\r\n        }\r\n        // Gross hack but poly-poly works well\r\n        const contact = this.CollidePolygonPolygon(polygon, linePoly);\r\n        if (contact.length) {\r\n            // Fudge the contact back to edge\r\n            contact[0].colliderB = edge;\r\n            contact[0].id = Pair.calculatePairHash(polygon.id, edge.id);\r\n        }\r\n        return contact;\r\n    },\r\n    CollidePolygonPolygon(polyA, polyB) {\r\n        var _a, _b, _c, _d;\r\n        // Multi contact from SAT\r\n        // https://gamedev.stackexchange.com/questions/111390/multiple-contacts-for-sat-collision-detection\r\n        // do a SAT test to find a min axis if it exists\r\n        const separationA = SeparatingAxis.findPolygonPolygonSeparation(polyA, polyB);\r\n        // If there is no overlap from boxA's perspective we can end early\r\n        if (separationA.separation > 0) {\r\n            return [];\r\n        }\r\n        const separationB = SeparatingAxis.findPolygonPolygonSeparation(polyB, polyA);\r\n        // If there is no overlap from boxB's perspective exit now\r\n        if (separationB.separation > 0) {\r\n            return [];\r\n        }\r\n        // Separations are both negative, we want to pick the least negative (minimal movement)\r\n        const separation = separationA.separation > separationB.separation ? separationA : separationB;\r\n        // The incident side is the most opposite from the axes of collision on the other collider\r\n        const other = separation.collider === polyA ? polyB : polyA;\r\n        const incident = other.findSide(separation.axis.negate());\r\n        // Clip incident side by the perpendicular lines at each end of the reference side\r\n        // https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm\r\n        const reference = separation.side;\r\n        const refDir = reference.dir().normalize();\r\n        // Find our contact points by clipping the incident by the collision side\r\n        const clipRight = incident.clip(refDir.negate(), -refDir.dot(reference.begin));\r\n        let clipLeft = null;\r\n        if (clipRight) {\r\n            clipLeft = clipRight.clip(refDir, refDir.dot(reference.end));\r\n        }\r\n        // If there is no left there is no collision\r\n        if (clipLeft) {\r\n            // We only want clip points below the reference edge, discard the others\r\n            const points = clipLeft.getPoints().filter((p) => {\r\n                return reference.below(p);\r\n            });\r\n            let normal = separation.axis;\r\n            let tangent = normal.perpendicular();\r\n            // Point Contact A -> B\r\n            if (polyB.center.sub(polyA.center).dot(normal) < 0) {\r\n                normal = normal.negate();\r\n                tangent = normal.perpendicular();\r\n            }\r\n            // Points are clipped from incident which is the other collider\r\n            // Store those as locals\r\n            let localPoints = [];\r\n            if (separation.collider === polyA) {\r\n                const xf = (_b = (_a = polyB.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\r\n                localPoints = points.map((p) => xf.applyInverse(p));\r\n            }\r\n            else {\r\n                const xf = (_d = (_c = polyA.owner) === null || _c === void 0 ? void 0 : _c.get(TransformComponent)) !== null && _d !== void 0 ? _d : new TransformComponent();\r\n                localPoints = points.map((p) => xf.applyInverse(p));\r\n            }\r\n            return [new CollisionContact(polyA, polyB, normal.scale(-separation.separation), normal, tangent, points, localPoints, separation)];\r\n        }\r\n        return [];\r\n    },\r\n    FindContactSeparation(contact, localPoint) {\r\n        var _a, _b, _c, _d;\r\n        const shapeA = contact.colliderA;\r\n        const txA = (_b = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\r\n        const shapeB = contact.colliderB;\r\n        const txB = (_d = (_c = contact.colliderB.owner) === null || _c === void 0 ? void 0 : _c.get(TransformComponent)) !== null && _d !== void 0 ? _d : new TransformComponent();\r\n        // both are circles\r\n        if (shapeA instanceof CircleCollider && shapeB instanceof CircleCollider) {\r\n            const combinedRadius = shapeA.radius + shapeB.radius;\r\n            const distance = txA.pos.distance(txB.pos);\r\n            const separation = combinedRadius - distance;\r\n            return -separation;\r\n        }\r\n        // both are polygons\r\n        if (shapeA instanceof PolygonCollider && shapeB instanceof PolygonCollider) {\r\n            if (contact.info.localSide) {\r\n                let side;\r\n                let worldPoint;\r\n                if (contact.info.collider === shapeA) {\r\n                    side = new LineSegment(txA.apply(contact.info.localSide.begin), txA.apply(contact.info.localSide.end));\r\n                    worldPoint = txB.apply(localPoint);\r\n                }\r\n                else {\r\n                    side = new LineSegment(txB.apply(contact.info.localSide.begin), txB.apply(contact.info.localSide.end));\r\n                    worldPoint = txA.apply(localPoint);\r\n                }\r\n                return side.distanceToPoint(worldPoint, true);\r\n            }\r\n        }\r\n        // polygon v circle\r\n        if ((shapeA instanceof PolygonCollider && shapeB instanceof CircleCollider) ||\r\n            (shapeB instanceof PolygonCollider && shapeA instanceof CircleCollider)) {\r\n            const worldPoint = txA.apply(localPoint);\r\n            if (contact.info.side) {\r\n                return contact.info.side.distanceToPoint(worldPoint, true);\r\n            }\r\n        }\r\n        // polygon v edge\r\n        if ((shapeA instanceof EdgeCollider && shapeB instanceof PolygonCollider) ||\r\n            (shapeB instanceof EdgeCollider && shapeA instanceof PolygonCollider)) {\r\n            let worldPoint;\r\n            if (contact.info.collider === shapeA) {\r\n                worldPoint = txB.apply(localPoint);\r\n            }\r\n            else {\r\n                worldPoint = txA.apply(localPoint);\r\n            }\r\n            if (contact.info.side) {\r\n                return contact.info.side.distanceToPoint(worldPoint, true);\r\n            }\r\n        }\r\n        // circle v edge\r\n        if ((shapeA instanceof CircleCollider && shapeB instanceof EdgeCollider) ||\r\n            (shapeB instanceof CircleCollider && shapeA instanceof EdgeCollider)) {\r\n            // Local point is always on the edge which is always shapeB\r\n            const worldPoint = txB.apply(localPoint);\r\n            let circlePoint;\r\n            if (shapeA instanceof CircleCollider) {\r\n                circlePoint = shapeA.getFurthestPoint(contact.normal);\r\n            }\r\n            const dist = worldPoint.distance(circlePoint);\r\n            if (contact.info.side) {\r\n                return dist > 0 ? -dist : 0;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n};\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/EdgeCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Edge is a single line collider to create collisions with a single line.\r\n */\r\nclass EdgeCollider extends Collider {\r\n    constructor(options) {\r\n        var _a;\r\n        super();\r\n        this._globalMatrix = AffineMatrix.identity();\r\n        this.begin = options.begin || Vector.Zero;\r\n        this.end = options.end || Vector.Zero;\r\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n    }\r\n    /**\r\n     * Returns a clone of this Edge, not associated with any collider\r\n     */\r\n    clone() {\r\n        return new EdgeCollider({\r\n            begin: this.begin.clone(),\r\n            end: this.end.clone()\r\n        });\r\n    }\r\n    get worldPos() {\r\n        var _a;\r\n        const tx = this._transform;\r\n        return (_a = tx === null || tx === void 0 ? void 0 : tx.globalPos.add(this.offset)) !== null && _a !== void 0 ? _a : this.offset;\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    get center() {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        const pos = begin.average(end);\r\n        return pos;\r\n    }\r\n    _getTransformedBegin() {\r\n        return this._globalMatrix.multiply(this.begin);\r\n    }\r\n    _getTransformedEnd() {\r\n        return this._globalMatrix.multiply(this.end);\r\n    }\r\n    /**\r\n     * Returns the slope of the line in the form of a vector\r\n     */\r\n    getSlope() {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        const distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    }\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    getLength() {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        const distance = begin.distance(end);\r\n        return distance;\r\n    }\r\n    /**\r\n     * Tests if a point is contained in this collision area\r\n     */\r\n    contains() {\r\n        return false;\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    rayCast(ray, max = Infinity) {\r\n        const numerator = this._getTransformedBegin().sub(ray.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\r\n            return null;\r\n        }\r\n        // Lines are parallel\r\n        const divisor = ray.dir.cross(this.getSlope());\r\n        if (divisor === 0) {\r\n            return null;\r\n        }\r\n        const t = numerator.cross(this.getSlope()) / divisor;\r\n        if (t >= 0 && t <= max) {\r\n            const u = numerator.cross(ray.dir) / divisor / this.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return ray.getPoint(t);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the closes line between this and another collider, from this -> collider\r\n     * @param shape\r\n     */\r\n    getClosestLineBetween(shape) {\r\n        if (shape instanceof CircleCollider) {\r\n            return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\r\n        }\r\n        else if (shape instanceof PolygonCollider) {\r\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\r\n        }\r\n        else if (shape instanceof EdgeCollider) {\r\n            return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\r\n        }\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    collide(shape) {\r\n        if (shape instanceof CircleCollider) {\r\n            return CollisionJumpTable.CollideCircleEdge(shape, this);\r\n        }\r\n        else if (shape instanceof PolygonCollider) {\r\n            return CollisionJumpTable.CollidePolygonEdge(shape, this);\r\n        }\r\n        else if (shape instanceof EdgeCollider) {\r\n            return CollisionJumpTable.CollideEdgeEdge();\r\n        }\r\n        else {\r\n            throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\r\n        }\r\n    }\r\n    /**\r\n     * Find the point on the collider furthest in the direction specified\r\n     */\r\n    getFurthestPoint(direction) {\r\n        const transformedBegin = this._getTransformedBegin();\r\n        const transformedEnd = this._getTransformedEnd();\r\n        if (direction.dot(transformedBegin) > 0) {\r\n            return transformedBegin;\r\n        }\r\n        else {\r\n            return transformedEnd;\r\n        }\r\n    }\r\n    _boundsFromBeginEnd(begin, end, padding = 10) {\r\n        // A perfectly vertical or horizontal edge would have a bounds 0 width or height\r\n        // this causes problems for the collision system so we give them some padding\r\n        return new BoundingBox(Math.min(begin.x, end.x) - padding, Math.min(begin.y, end.y) - padding, Math.max(begin.x, end.x) + padding, Math.max(begin.y, end.y) + padding);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the edge collider in world space\r\n     */\r\n    get bounds() {\r\n        const transformedBegin = this._getTransformedBegin();\r\n        const transformedEnd = this._getTransformedEnd();\r\n        return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the edge collider in local space\r\n     */\r\n    get localBounds() {\r\n        return this._boundsFromBeginEnd(this.begin, this.end);\r\n    }\r\n    /**\r\n     * Returns this edge represented as a line in world coordinates\r\n     */\r\n    asLine() {\r\n        return new LineSegment(this._getTransformedBegin(), this._getTransformedEnd());\r\n    }\r\n    /**\r\n     * Return this edge as a line in local line coordinates (relative to the position)\r\n     */\r\n    asLocalLine() {\r\n        return new LineSegment(this.begin, this.end);\r\n    }\r\n    /**\r\n     * Get the axis associated with the edge\r\n     */\r\n    get axes() {\r\n        const e = this._getTransformedEnd().sub(this._getTransformedBegin());\r\n        const edgeNormal = e.normal();\r\n        const axes = [];\r\n        axes.push(edgeNormal);\r\n        axes.push(edgeNormal.negate());\r\n        axes.push(edgeNormal.normal());\r\n        axes.push(edgeNormal.normal().negate());\r\n        return axes;\r\n    }\r\n    /**\r\n     * Get the moment of inertia for an edge\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    getInertia(mass) {\r\n        const length = this.end.sub(this.begin).distance() / 2;\r\n        return mass * length * length;\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    update(transform) {\r\n        var _a;\r\n        this._transform = transform;\r\n        const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\r\n        globalMat.clone(this._globalMatrix);\r\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\r\n    }\r\n    /**\r\n     * Project the edge along a specified axis\r\n     */\r\n    project(axis) {\r\n        const scalars = [];\r\n        const points = [this._getTransformedBegin(), this._getTransformedEnd()];\r\n        const len = points.length;\r\n        for (let i = 0; i < len; i++) {\r\n            scalars.push(points[i].dot(axis));\r\n        }\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    }\r\n    debug(ex, color) {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        ex.drawLine(begin, end, color, 2);\r\n        ex.drawCircle(begin, 2, color);\r\n        ex.drawCircle(end, 2, color);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/PolygonCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Polygon collider for detecting collisions\r\n */\r\nclass PolygonCollider extends Collider {\r\n    /**\r\n     * Points in the polygon in order around the perimeter in local coordinates. These are relative from the body transform position.\r\n     * Excalibur stores these in counter-clockwise order\r\n     */\r\n    set points(points) {\r\n        this._localBoundsDirty = true;\r\n        this._localSidesDirty = true;\r\n        this._sidesDirty = true;\r\n        this._points = points;\r\n    }\r\n    /**\r\n     * Points in the polygon in order around the perimeter in local coordinates. These are relative from the body transform position.\r\n     * Excalibur stores these in counter-clockwise order\r\n     */\r\n    get points() {\r\n        return this._points;\r\n    }\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super();\r\n        this._logger = Logger.getInstance();\r\n        this._transformedPoints = [];\r\n        this._sides = [];\r\n        this._localSides = [];\r\n        this._globalMatrix = AffineMatrix.identity();\r\n        this._transformedPointsDirty = true;\r\n        this._sidesDirty = true;\r\n        this._localSidesDirty = true;\r\n        this._localBoundsDirty = true;\r\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\r\n        this.points = (_b = options.points) !== null && _b !== void 0 ? _b : [];\r\n        const counterClockwise = this._isCounterClockwiseWinding(this.points);\r\n        if (!counterClockwise) {\r\n            this.points.reverse();\r\n        }\r\n        if (!this.isConvex()) {\r\n            this._logger.warn('Excalibur only supports convex polygon colliders and will not behave properly.' +\r\n                'Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles');\r\n        }\r\n        // calculate initial transformation\r\n        this._calculateTransformation();\r\n    }\r\n    _isCounterClockwiseWinding(points) {\r\n        // https://stackoverflow.com/a/1165943\r\n        let sum = 0;\r\n        for (let i = 0; i < points.length; i++) {\r\n            sum += (points[(i + 1) % points.length].x - points[i].x) * (points[(i + 1) % points.length].y + points[i].y);\r\n        }\r\n        return sum < 0;\r\n    }\r\n    /**\r\n     * Returns if the polygon collider is convex, Excalibur does not handle non-convex collision shapes.\r\n     * Call [[Polygon.triangulate]] to generate a [[CompositeCollider]] from this non-convex shape\r\n     */\r\n    isConvex() {\r\n        // From SO: https://stackoverflow.com/a/45372025\r\n        if (this.points.length < 3) {\r\n            return false;\r\n        }\r\n        let oldPoint = this.points[this.points.length - 2];\r\n        let newPoint = this.points[this.points.length - 1];\r\n        let direction = Math.atan2(newPoint.y - oldPoint.y, newPoint.x - oldPoint.x);\r\n        let oldDirection = 0;\r\n        let orientation = 0;\r\n        let angleSum = 0;\r\n        for (const [i, point] of this.points.entries()) {\r\n            oldPoint = newPoint;\r\n            oldDirection = direction;\r\n            newPoint = point;\r\n            direction = Math.atan2(newPoint.y - oldPoint.y, newPoint.x - oldPoint.x);\r\n            if (oldPoint.equals(newPoint)) {\r\n                return false; // repeat point\r\n            }\r\n            let angle = direction - oldDirection;\r\n            if (angle <= -Math.PI) {\r\n                angle += Math.PI * 2;\r\n            }\r\n            else if (angle > Math.PI) {\r\n                angle -= Math.PI * 2;\r\n            }\r\n            if (i === 0) {\r\n                if (angle === 0.0) {\r\n                    return false;\r\n                }\r\n                orientation = angle > 0 ? 1 : -1;\r\n            }\r\n            else {\r\n                if (orientation * angle <= 0) {\r\n                    return false;\r\n                }\r\n            }\r\n            angleSum += angle;\r\n        }\r\n        return Math.abs(Math.round(angleSum / (Math.PI * 2))) === 1;\r\n    }\r\n    /**\r\n     * Tessellates the polygon into a triangle fan as a [[CompositeCollider]] of triangle polygons\r\n     */\r\n    tessellate() {\r\n        const polygons = [];\r\n        for (let i = 1; i < this.points.length - 2; i++) {\r\n            polygons.push([this.points[0], this.points[i + 1], this.points[i + 2]]);\r\n        }\r\n        polygons.push([this.points[0], this.points[1], this.points[2]]);\r\n        return new CompositeCollider(polygons.map(points => Shape.Polygon(points)));\r\n    }\r\n    /**\r\n     * Triangulate the polygon collider using the \"Ear Clipping\" algorithm.\r\n     * Returns a new [[CompositeCollider]] made up of smaller triangles.\r\n     */\r\n    triangulate() {\r\n        // https://www.youtube.com/watch?v=hTJFcHutls8\r\n        if (this.points.length < 3) {\r\n            throw Error('Invalid polygon');\r\n        }\r\n        /**\r\n         * Helper to get a vertex in the list\r\n         */\r\n        function getItem(index, list) {\r\n            if (index >= list.length) {\r\n                return list[index % list.length];\r\n            }\r\n            else if (index < 0) {\r\n                return list[index % list.length + list.length];\r\n            }\r\n            else {\r\n                return list[index];\r\n            }\r\n        }\r\n        /**\r\n         * Quick test for point in triangle\r\n         */\r\n        function isPointInTriangle(point, a, b, c) {\r\n            const ab = b.sub(a);\r\n            const bc = c.sub(b);\r\n            const ca = a.sub(c);\r\n            const ap = point.sub(a);\r\n            const bp = point.sub(b);\r\n            const cp = point.sub(c);\r\n            const cross1 = ab.cross(ap);\r\n            const cross2 = bc.cross(bp);\r\n            const cross3 = ca.cross(cp);\r\n            if (cross1 > 0 || cross2 > 0 || cross3 > 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        const triangles = [];\r\n        const vertices = [...this.points];\r\n        const indices = range(0, this.points.length - 1);\r\n        // 1. Loop through vertices clockwise\r\n        //    if the vertex is convex (interior angle is < 180) (cross product positive)\r\n        //    if the polygon formed by it's edges doesn't contain the points\r\n        //         it's an ear add it to our list of triangles, and restart\r\n        while (indices.length > 3) {\r\n            for (let i = 0; i < indices.length; i++) {\r\n                const a = indices[i];\r\n                const b = getItem(i - 1, indices);\r\n                const c = getItem(i + 1, indices);\r\n                const va = vertices[a];\r\n                const vb = vertices[b];\r\n                const vc = vertices[c];\r\n                // Check convexity\r\n                const leftArm = vb.sub(va);\r\n                const rightArm = vc.sub(va);\r\n                const isConvex = rightArm.cross(leftArm) > 0; // positive cross means convex\r\n                if (!isConvex) {\r\n                    continue;\r\n                }\r\n                let isEar = true;\r\n                // Check that if any vertices are in the triangle a, b, c\r\n                for (let j = 0; j < indices.length; j++) {\r\n                    const vertIndex = indices[j];\r\n                    // We can skip these\r\n                    if (vertIndex === a || vertIndex === b || vertIndex === c) {\r\n                        continue;\r\n                    }\r\n                    const point = vertices[vertIndex];\r\n                    if (isPointInTriangle(point, vb, va, vc)) {\r\n                        isEar = false;\r\n                        break;\r\n                    }\r\n                }\r\n                // Add ear to polygon list and remove from list\r\n                if (isEar) {\r\n                    triangles.push([vb, va, vc]);\r\n                    indices.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        triangles.push([vertices[indices[0]], vertices[indices[1]], vertices[indices[2]]]);\r\n        return new CompositeCollider(triangles.map(points => Shape.Polygon(points)));\r\n    }\r\n    /**\r\n     * Returns a clone of this ConvexPolygon, not associated with any collider\r\n     */\r\n    clone() {\r\n        return new PolygonCollider({\r\n            offset: this.offset.clone(),\r\n            points: this.points.map((p) => p.clone())\r\n        });\r\n    }\r\n    /**\r\n     * Returns the world position of the collider, which is the current body transform plus any defined offset\r\n     */\r\n    get worldPos() {\r\n        if (this._transform) {\r\n            return this._transform.pos.add(this.offset);\r\n        }\r\n        return this.offset;\r\n    }\r\n    /**\r\n     * Get the center of the collider in world coordinates\r\n     */\r\n    get center() {\r\n        return this.bounds.center;\r\n    }\r\n    /**\r\n     * Calculates the underlying transformation from the body relative space to world space\r\n     */\r\n    _calculateTransformation() {\r\n        const points = this.points;\r\n        const len = points.length;\r\n        this._transformedPoints.length = 0; // clear out old transform\r\n        for (let i = 0; i < len; i++) {\r\n            this._transformedPoints[i] = this._globalMatrix.multiply(points[i].clone());\r\n        }\r\n    }\r\n    /**\r\n     * Gets the points that make up the polygon in world space, from actor relative space (if specified)\r\n     */\r\n    getTransformedPoints() {\r\n        if (this._transformedPointsDirty) {\r\n            this._calculateTransformation();\r\n            this._transformedPointsDirty = false;\r\n        }\r\n        return this._transformedPoints;\r\n    }\r\n    /**\r\n     * Gets the sides of the polygon in world space\r\n     */\r\n    getSides() {\r\n        if (this._sidesDirty) {\r\n            const lines = [];\r\n            const points = this.getTransformedPoints();\r\n            const len = points.length;\r\n            for (let i = 0; i < len; i++) {\r\n                // This winding is important\r\n                lines.push(new LineSegment(points[i], points[(i + 1) % len]));\r\n            }\r\n            this._sides = lines;\r\n            this._sidesDirty = false;\r\n        }\r\n        return this._sides;\r\n    }\r\n    /**\r\n     * Returns the local coordinate space sides\r\n     */\r\n    getLocalSides() {\r\n        if (this._localSidesDirty) {\r\n            const lines = [];\r\n            const points = this.points;\r\n            const len = points.length;\r\n            for (let i = 0; i < len; i++) {\r\n                // This winding is important\r\n                lines.push(new LineSegment(points[i], points[(i + 1) % len]));\r\n            }\r\n            this._localSides = lines;\r\n            this._localSidesDirty = false;\r\n        }\r\n        return this._localSides;\r\n    }\r\n    /**\r\n     * Given a direction vector find the world space side that is most in that direction\r\n     * @param direction\r\n     */\r\n    findSide(direction) {\r\n        const sides = this.getSides();\r\n        let bestSide = sides[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let side = 0; side < sides.length; side++) {\r\n            const currentSide = sides[side];\r\n            const sideNormal = currentSide.normal();\r\n            const mostDirection = sideNormal.dot(direction);\r\n            if (mostDirection > maxDistance) {\r\n                bestSide = currentSide;\r\n                maxDistance = mostDirection;\r\n            }\r\n        }\r\n        return bestSide;\r\n    }\r\n    /**\r\n     * Given a direction vector find the local space side that is most in that direction\r\n     * @param direction\r\n     */\r\n    findLocalSide(direction) {\r\n        const sides = this.getLocalSides();\r\n        let bestSide = sides[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let side = 0; side < sides.length; side++) {\r\n            const currentSide = sides[side];\r\n            const sideNormal = currentSide.normal();\r\n            const mostDirection = sideNormal.dot(direction);\r\n            if (mostDirection > maxDistance) {\r\n                bestSide = currentSide;\r\n                maxDistance = mostDirection;\r\n            }\r\n        }\r\n        return bestSide;\r\n    }\r\n    /**\r\n     * Get the axis associated with the convex polygon\r\n     */\r\n    get axes() {\r\n        const axes = [];\r\n        const sides = this.getSides();\r\n        for (let i = 0; i < sides.length; i++) {\r\n            axes.push(sides[i].normal());\r\n        }\r\n        return axes;\r\n    }\r\n    /**\r\n     * Updates the transform for the collision geometry\r\n     *\r\n     * Collision geometry (points/bounds) will not change until this is called.\r\n     * @param transform\r\n     */\r\n    update(transform) {\r\n        var _a;\r\n        if (transform) {\r\n            this._transform = transform;\r\n            this._transformedPointsDirty = true;\r\n            this._sidesDirty = true;\r\n            // This change means an update must be performed in order for geometry to update\r\n            const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\r\n            globalMat.clone(this._globalMatrix);\r\n            this._globalMatrix.translate(this.offset.x, this.offset.y);\r\n        }\r\n    }\r\n    /**\r\n     * Tests if a point is contained in this collider in world space\r\n     */\r\n    contains(point) {\r\n        // Always cast to the right, as long as we cast in a consistent fixed direction we\r\n        // will be fine\r\n        const testRay = new Ray(point, new Vector(1, 0));\r\n        const intersectCount = this.getSides().reduce(function (accum, side) {\r\n            if (testRay.intersect(side) >= 0) {\r\n                return accum + 1;\r\n            }\r\n            return accum;\r\n        }, 0);\r\n        if (intersectCount % 2 === 0) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    getClosestLineBetween(collider) {\r\n        if (collider instanceof CircleCollider) {\r\n            return ClosestLineJumpTable.PolygonCircleClosestLine(this, collider);\r\n        }\r\n        else if (collider instanceof PolygonCollider) {\r\n            return ClosestLineJumpTable.PolygonPolygonClosestLine(this, collider);\r\n        }\r\n        else if (collider instanceof EdgeCollider) {\r\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(this, collider);\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a collision contact if the 2 colliders collide, otherwise collide will\r\n     * return null.\r\n     * @param collider\r\n     */\r\n    collide(collider) {\r\n        if (collider instanceof CircleCollider) {\r\n            return CollisionJumpTable.CollideCirclePolygon(collider, this);\r\n        }\r\n        else if (collider instanceof PolygonCollider) {\r\n            return CollisionJumpTable.CollidePolygonPolygon(this, collider);\r\n        }\r\n        else if (collider instanceof EdgeCollider) {\r\n            return CollisionJumpTable.CollidePolygonEdge(this, collider);\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\r\n        }\r\n    }\r\n    /**\r\n     * Find the point on the collider furthest in the direction specified\r\n     */\r\n    getFurthestPoint(direction) {\r\n        const pts = this.getTransformedPoints();\r\n        let furthestPoint = null;\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let i = 0; i < pts.length; i++) {\r\n            const distance = direction.dot(pts[i]);\r\n            if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                furthestPoint = pts[i];\r\n            }\r\n        }\r\n        return furthestPoint;\r\n    }\r\n    /**\r\n     * Find the local point on the collider furthest in the direction specified\r\n     * @param direction\r\n     */\r\n    getFurthestLocalPoint(direction) {\r\n        const pts = this.points;\r\n        let furthestPoint = pts[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let i = 0; i < pts.length; i++) {\r\n            const distance = direction.dot(pts[i]);\r\n            if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                furthestPoint = pts[i];\r\n            }\r\n        }\r\n        return furthestPoint;\r\n    }\r\n    /**\r\n     * Finds the closes face to the point using perpendicular distance\r\n     * @param point point to test against polygon\r\n     */\r\n    getClosestFace(point) {\r\n        const sides = this.getSides();\r\n        let min = Number.POSITIVE_INFINITY;\r\n        let faceIndex = -1;\r\n        let distance = -1;\r\n        for (let i = 0; i < sides.length; i++) {\r\n            const dist = sides[i].distanceToPoint(point);\r\n            if (dist < min) {\r\n                min = dist;\r\n                faceIndex = i;\r\n                distance = dist;\r\n            }\r\n        }\r\n        if (faceIndex !== -1) {\r\n            return {\r\n                distance: sides[faceIndex].normal().scale(distance),\r\n                face: sides[faceIndex]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the polygon collider in world coordinates\r\n     */\r\n    get bounds() {\r\n        return this.localBounds.transform(this._globalMatrix);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the polygon collider in local coordinates\r\n     */\r\n    get localBounds() {\r\n        if (this._localBoundsDirty) {\r\n            this._localBounds = BoundingBox.fromPoints(this.points);\r\n            this._localBoundsDirty = false;\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    /**\r\n     * Get the moment of inertia for an arbitrary polygon\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    getInertia(mass) {\r\n        if (this._cachedMass === mass && this._cachedInertia) {\r\n            return this._cachedInertia;\r\n        }\r\n        let numerator = 0;\r\n        let denominator = 0;\r\n        const points = this.points;\r\n        for (let i = 0; i < points.length; i++) {\r\n            const iplusone = (i + 1) % points.length;\r\n            const crossTerm = points[iplusone].cross(points[i]);\r\n            numerator +=\r\n                crossTerm *\r\n                    (points[i].dot(points[i]) + points[i].dot(points[iplusone]) + points[iplusone].dot(points[iplusone]));\r\n            denominator += crossTerm;\r\n        }\r\n        this._cachedMass = mass;\r\n        return this._cachedInertia = (mass / 6) * (numerator / denominator);\r\n    }\r\n    /**\r\n     * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\r\n     */\r\n    rayCast(ray, max = Infinity) {\r\n        // find the minimum contact time greater than 0\r\n        // contact times less than 0 are behind the ray and we don't want those\r\n        const sides = this.getSides();\r\n        const len = sides.length;\r\n        let minContactTime = Number.MAX_VALUE;\r\n        let contactIndex = -1;\r\n        for (let i = 0; i < len; i++) {\r\n            const contactTime = ray.intersect(sides[i]);\r\n            if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\r\n                minContactTime = contactTime;\r\n                contactIndex = i;\r\n            }\r\n        }\r\n        // contact was found\r\n        if (contactIndex >= 0) {\r\n            return ray.getPoint(minContactTime);\r\n        }\r\n        // no contact found\r\n        return null;\r\n    }\r\n    /**\r\n     * Project the edges of the polygon along a specified axis\r\n     */\r\n    project(axis) {\r\n        const points = this.getTransformedPoints();\r\n        const len = points.length;\r\n        let min = Number.MAX_VALUE;\r\n        let max = -Number.MAX_VALUE;\r\n        for (let i = 0; i < len; i++) {\r\n            const scalar = points[i].dot(axis);\r\n            min = Math.min(min, scalar);\r\n            max = Math.max(max, scalar);\r\n        }\r\n        return new Projection(min, max);\r\n    }\r\n    debug(ex, color) {\r\n        const firstPoint = this.getTransformedPoints()[0];\r\n        const points = [firstPoint, ...this.getTransformedPoints(), firstPoint];\r\n        for (let i = 0; i < points.length - 1; i++) {\r\n            ex.drawLine(points[i], points[i + 1], color, 2);\r\n            ex.drawCircle(points[i], 2, color);\r\n            ex.drawCircle(points[i + 1], 2, color);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/Shape.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Excalibur helper for defining colliders quickly\r\n */\r\nclass Shape {\r\n    /**\r\n     * Creates a box collider, under the hood defines a [[PolygonCollider]] collider\r\n     * @param width Width of the box\r\n     * @param height Height of the box\r\n     * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\r\n     * @param offset Optional offset relative to the collider in local coordinates\r\n     */\r\n    static Box(width, height, anchor = Vector.Half, offset = Vector.Zero) {\r\n        return new PolygonCollider({\r\n            points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\r\n            offset: offset\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new [[PolygonCollider|arbitrary polygon]] collider\r\n     *\r\n     * PolygonColliders are useful for creating convex polygon shapes\r\n     * @param points Points specified in counter clockwise\r\n     * @param offset Optional offset relative to the collider in local coordinates\r\n     */\r\n    static Polygon(points, offset = Vector.Zero) {\r\n        return new PolygonCollider({\r\n            points: points,\r\n            offset: offset\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new [[CircleCollider|circle]] collider\r\n     *\r\n     * Circle colliders are useful for balls, or to make collisions more forgiving on sharp edges\r\n     * @param radius Radius of the circle collider\r\n     * @param offset Optional offset relative to the collider in local coordinates\r\n     */\r\n    static Circle(radius, offset = Vector.Zero) {\r\n        return new CircleCollider({\r\n            radius: radius,\r\n            offset: offset\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new [[EdgeCollider|edge]] collider\r\n     *\r\n     * Edge colliders are useful for  floors, walls, and other barriers\r\n     * @param begin Beginning of the edge in local coordinates to the collider\r\n     * @param end Ending of the edge in local coordinates to the collider\r\n     */\r\n    static Edge(begin, end) {\r\n        return new EdgeCollider({\r\n            begin: begin,\r\n            end: end\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new capsule shaped [[CompositeCollider]] using 2 circles and a box\r\n     *\r\n     * Capsule colliders are useful for platformers with incline or jagged floors to have a smooth\r\n     * player experience.\r\n     *\r\n     * @param width\r\n     * @param height\r\n     * @param offset Optional offset\r\n     */\r\n    static Capsule(width, height, offset = Vector.Zero) {\r\n        const logger = Logger.getInstance();\r\n        if (width === height) {\r\n            logger.warn('A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider');\r\n        }\r\n        const vertical = height >= width;\r\n        if (vertical) {\r\n            // height > width, if equal maybe use a circle\r\n            const capsule = new CompositeCollider([\r\n                Shape.Circle(width / 2, vec(0, -height / 2 + width / 2).add(offset)),\r\n                Shape.Box(width, height - width, Vector.Half, offset),\r\n                Shape.Circle(width / 2, vec(0, height / 2 - width / 2).add(offset))\r\n            ]);\r\n            return capsule;\r\n        }\r\n        else {\r\n            // width > height, if equal maybe use a circle\r\n            const capsule = new CompositeCollider([\r\n                Shape.Circle(height / 2, vec(-width / 2 + height / 2, 0).add(offset)),\r\n                Shape.Box(width - height, height, Vector.Half, offset),\r\n                Shape.Circle(height / 2, vec(width / 2 - height / 2, 0).add(offset))\r\n            ]);\r\n            return capsule;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/ColliderComponent.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ColliderComponent extends Component {\r\n    constructor(collider) {\r\n        super();\r\n        this.type = 'ex.collider';\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * Observable that notifies when a collider is added to the body\r\n         */\r\n        this.$colliderAdded = new Observable();\r\n        /**\r\n         * Observable that notifies when a collider is removed from the body\r\n         */\r\n        this.$colliderRemoved = new Observable();\r\n        this.set(collider);\r\n    }\r\n    /**\r\n     * Get the current collider geometry\r\n     */\r\n    get() {\r\n        return this._collider;\r\n    }\r\n    /**\r\n     * Set the collider geometry\r\n     * @param collider\r\n     * @returns the collider you set\r\n     */\r\n    set(collider) {\r\n        this.clear();\r\n        if (collider) {\r\n            this._collider = collider;\r\n            this._collider.owner = this.owner;\r\n            collider.events.pipe(this.events);\r\n            this.$colliderAdded.notifyAll(collider);\r\n            this.update();\r\n        }\r\n        return collider;\r\n    }\r\n    /**\r\n     * Remove collider geometry from collider component\r\n     */\r\n    clear() {\r\n        if (this._collider) {\r\n            this._collider.events.unpipe(this.events);\r\n            this.$colliderRemoved.notifyAll(this._collider);\r\n            this._collider.owner = null;\r\n            this._collider = null;\r\n        }\r\n    }\r\n    clone() {\r\n        const clone = new ColliderComponent(this._collider.clone());\r\n        return clone;\r\n    }\r\n    /**\r\n     * Return world space bounds\r\n     */\r\n    get bounds() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox();\r\n    }\r\n    /**\r\n     * Return local space bounds\r\n     */\r\n    get localBounds() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox();\r\n    }\r\n    /**\r\n     * Update the collider's transformed geometry\r\n     */\r\n    update() {\r\n        var _a;\r\n        const tx = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\r\n        if (this._collider) {\r\n            this._collider.owner = this.owner;\r\n            if (tx) {\r\n                this._collider.update(tx.get());\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Collide component with another\r\n     * @param other\r\n     */\r\n    collide(other) {\r\n        let colliderA = this._collider;\r\n        let colliderB = other._collider;\r\n        if (!colliderA || !colliderB) {\r\n            return [];\r\n        }\r\n        // If we have a composite lefthand side :(\r\n        // Might bite us, but to avoid updating all the handlers make composite always left side\r\n        let flipped = false;\r\n        if (colliderB instanceof CompositeCollider) {\r\n            colliderA = colliderB;\r\n            colliderB = this._collider;\r\n            flipped = true;\r\n        }\r\n        if (this._collider) {\r\n            const contacts = colliderA.collide(colliderB);\r\n            if (contacts) {\r\n                if (flipped) {\r\n                    contacts.forEach((contact) => {\r\n                        contact.mtv = contact.mtv.negate();\r\n                        contact.normal = contact.normal.negate();\r\n                        contact.tangent = contact.normal.perpendicular();\r\n                        contact.colliderA = this._collider;\r\n                        contact.colliderB = other._collider;\r\n                    });\r\n                }\r\n                return contacts;\r\n            }\r\n            return [];\r\n        }\r\n        return [];\r\n    }\r\n    onAdd(entity) {\r\n        if (this._collider) {\r\n            this.update();\r\n        }\r\n        // Wire up the collider events to the owning entity\r\n        this.events.on('precollision', (evt) => {\r\n            const precollision = evt;\r\n            entity.events.emit('precollision', new PreCollisionEvent(precollision.target.owner, precollision.other.owner, precollision.side, precollision.intersection));\r\n        });\r\n        this.events.on('postcollision', (evt) => {\r\n            const postcollision = evt;\r\n            entity.events.emit('postcollision', new PostCollisionEvent(postcollision.target.owner, postcollision.other.owner, postcollision.side, postcollision.intersection));\r\n        });\r\n        this.events.on('collisionstart', (evt) => {\r\n            const start = evt;\r\n            entity.events.emit('collisionstart', new CollisionStartEvent(start.target.owner, start.other.owner, start.contact));\r\n        });\r\n        this.events.on('collisionend', (evt) => {\r\n            const end = evt;\r\n            entity.events.emit('collisionend', new CollisionEndEvent(end.target.owner, end.other.owner));\r\n        });\r\n    }\r\n    onRemove() {\r\n        this.events.clear();\r\n        this.$colliderRemoved.notifyAll(this._collider);\r\n    }\r\n    /**\r\n     * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\r\n     *\r\n     * If no width/height are specified the body will attempt to use the associated actor's width/height.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    useBoxCollider(width, height, anchor = Vector.Half, center = Vector.Zero) {\r\n        const collider = Shape.Box(width, height, anchor, center);\r\n        return (this.set(collider));\r\n    }\r\n    /**\r\n     * Sets up a [[PolygonCollider|polygon]] collision geometry based on a list of of points relative\r\n     *  to the anchor of the associated actor\r\n     * of this physics body.\r\n     *\r\n     * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    usePolygonCollider(points, center = Vector.Zero) {\r\n        const poly = Shape.Polygon(points, center);\r\n        return (this.set(poly));\r\n    }\r\n    /**\r\n     * Sets up a [[Circle|circle collision geometry]] as the only collider with a specified radius in pixels.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    useCircleCollider(radius, center = Vector.Zero) {\r\n        const collider = Shape.Circle(radius, center);\r\n        return (this.set(collider));\r\n    }\r\n    /**\r\n     * Sets up an [[Edge|edge collision geometry]] with a start point and an end point relative to the anchor of the associated actor\r\n     * of this physics body.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    useEdgeCollider(begin, end) {\r\n        const collider = Shape.Edge(begin, end);\r\n        return (this.set(collider));\r\n    }\r\n    /**\r\n     * Setups up a [[CompositeCollider]] which can define any arbitrary set of excalibur colliders\r\n     * @param colliders\r\n     */\r\n    useCompositeCollider(colliders) {\r\n        return (this.set(new CompositeCollider(colliders)));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/BodyComponent.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar DegreeOfFreedom;\r\n(function (DegreeOfFreedom) {\r\n    DegreeOfFreedom[\"Rotation\"] = \"rotation\";\r\n    DegreeOfFreedom[\"X\"] = \"x\";\r\n    DegreeOfFreedom[\"Y\"] = \"y\";\r\n})(DegreeOfFreedom || (DegreeOfFreedom = {}));\r\n/**\r\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity for the purpose of\r\n * of physics simulation.\r\n */\r\nclass BodyComponent extends Component {\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        super();\r\n        this.type = 'ex.body';\r\n        this.dependencies = [TransformComponent, MotionComponent];\r\n        this.id = createId('body', BodyComponent._ID++);\r\n        this.events = new EventEmitter();\r\n        this._oldTransform = new Transform();\r\n        /**\r\n         * Indicates whether the old transform has been captured at least once for interpolation\r\n         * @internal\r\n         */\r\n        this.__oldTransformCaptured = false;\r\n        /**\r\n         * Enable or disabled the fixed update interpolation, by default interpolation is on.\r\n         */\r\n        this.enableFixedUpdateInterpolate = true;\r\n        /**\r\n         * Collision type for the rigidbody physics simulation, by default [[CollisionType.PreventCollision]]\r\n         */\r\n        this.collisionType = CollisionType.PreventCollision;\r\n        /**\r\n         * The collision group for the body's colliders, by default body colliders collide with everything\r\n         */\r\n        this.group = CollisionGroup.All;\r\n        /**\r\n         * The amount of mass the body has\r\n         */\r\n        this._mass = Physics.defaultMass;\r\n        /**\r\n         * Amount of \"motion\" the body has before sleeping. If below [[Physics.sleepEpsilon]] it goes to \"sleep\"\r\n         */\r\n        this.sleepMotion = Physics.sleepEpsilon * 5;\r\n        /**\r\n         * Can this body sleep, by default bodies do not sleep\r\n         */\r\n        this.canSleep = Physics.bodiesCanSleepByDefault;\r\n        this._sleeping = false;\r\n        /**\r\n         * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\r\n         * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\r\n         */\r\n        this.bounciness = 0.2;\r\n        /**\r\n         * The coefficient of friction on this actor\r\n         */\r\n        this.friction = 0.99;\r\n        /**\r\n         * Should use global gravity [[Physics.gravity]] in it's physics simulation, default is true\r\n         */\r\n        this.useGravity = true;\r\n        /**\r\n         * Degrees of freedom to limit\r\n         *\r\n         * Note: this only limits responses in the realistic solver, if velocity/angularVelocity is set the actor will still respond\r\n         */\r\n        this.limitDegreeOfFreedom = [];\r\n        /**\r\n         * The velocity of the actor last frame (vx, vy) in pixels/second\r\n         */\r\n        this.oldVel = new Vector(0, 0);\r\n        /**\r\n         * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n         */\r\n        this.oldAcc = Vector.Zero;\r\n        if (options) {\r\n            this.collisionType = (_a = options.type) !== null && _a !== void 0 ? _a : this.collisionType;\r\n            this.group = (_b = options.group) !== null && _b !== void 0 ? _b : this.group;\r\n            this.useGravity = (_c = options.useGravity) !== null && _c !== void 0 ? _c : this.useGravity;\r\n        }\r\n    }\r\n    get matrix() {\r\n        return this.transform.get().matrix;\r\n    }\r\n    get mass() {\r\n        return this._mass;\r\n    }\r\n    set mass(newMass) {\r\n        this._mass = newMass;\r\n        this._cachedInertia = undefined;\r\n        this._cachedInverseInertia = undefined;\r\n    }\r\n    /**\r\n     * The inverse mass (1/mass) of the body. If [[CollisionType.Fixed]] this is 0, meaning \"infinite\" mass\r\n     */\r\n    get inverseMass() {\r\n        return this.collisionType === CollisionType.Fixed ? 0 : 1 / this.mass;\r\n    }\r\n    /**\r\n     * Whether this body is sleeping or not\r\n     */\r\n    get sleeping() {\r\n        return this._sleeping;\r\n    }\r\n    /**\r\n     * Set the sleep state of the body\r\n     * @param sleeping\r\n     */\r\n    setSleeping(sleeping) {\r\n        this._sleeping = sleeping;\r\n        if (!sleeping) {\r\n            // Give it a kick to keep it from falling asleep immediately\r\n            this.sleepMotion = Physics.sleepEpsilon * 5;\r\n        }\r\n        else {\r\n            this.vel = Vector.Zero;\r\n            this.acc = Vector.Zero;\r\n            this.angularVelocity = 0;\r\n            this.sleepMotion = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Update body's [[BodyComponent.sleepMotion]] for the purpose of sleeping\r\n     */\r\n    updateMotion() {\r\n        if (this._sleeping) {\r\n            this.setSleeping(true);\r\n        }\r\n        const currentMotion = this.vel.size * this.vel.size + Math.abs(this.angularVelocity * this.angularVelocity);\r\n        const bias = Physics.sleepBias;\r\n        this.sleepMotion = bias * this.sleepMotion + (1 - bias) * currentMotion;\r\n        this.sleepMotion = clamp(this.sleepMotion, 0, 10 * Physics.sleepEpsilon);\r\n        if (this.canSleep && this.sleepMotion < Physics.sleepEpsilon) {\r\n            this.setSleeping(true);\r\n        }\r\n    }\r\n    /**\r\n     * Get the moment of inertia from the [[ColliderComponent]]\r\n     */\r\n    get inertia() {\r\n        if (this._cachedInertia) {\r\n            return this._cachedInertia;\r\n        }\r\n        // Inertia is a property of the geometry, so this is a little goofy but seems to be okay?\r\n        const collider = this.owner.get(ColliderComponent);\r\n        if (collider) {\r\n            collider.$colliderAdded.subscribe(() => {\r\n                this._cachedInertia = null;\r\n            });\r\n            collider.$colliderRemoved.subscribe(() => {\r\n                this._cachedInertia = null;\r\n            });\r\n            const maybeCollider = collider.get();\r\n            if (maybeCollider) {\r\n                return this._cachedInertia = maybeCollider.getInertia(this.mass);\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Get the inverse moment of inertial from the [[ColliderComponent]]. If [[CollisionType.Fixed]] this is 0, meaning \"infinite\" mass\r\n     */\r\n    get inverseInertia() {\r\n        if (this._cachedInverseInertia) {\r\n            return this._cachedInverseInertia;\r\n        }\r\n        return this._cachedInverseInertia = this.collisionType === CollisionType.Fixed ? 0 : 1 / this.inertia;\r\n    }\r\n    /**\r\n     * Returns if the owner is active\r\n     */\r\n    get active() {\r\n        var _a;\r\n        return !!((_a = this.owner) === null || _a === void 0 ? void 0 : _a.active);\r\n    }\r\n    /**\r\n     * @deprecated Use globalP0s\r\n     */\r\n    get center() {\r\n        return this.globalPos;\r\n    }\r\n    get transform() {\r\n        var _a;\r\n        return (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\r\n    }\r\n    get motion() {\r\n        var _a;\r\n        return (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(MotionComponent);\r\n    }\r\n    get pos() {\r\n        return this.transform.pos;\r\n    }\r\n    set pos(val) {\r\n        this.transform.pos = val;\r\n    }\r\n    /**\r\n     * The (x, y) position of the actor this will be in the middle of the actor if the\r\n     * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\r\n     * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\r\n     */\r\n    get globalPos() {\r\n        return this.transform.globalPos;\r\n    }\r\n    set globalPos(val) {\r\n        this.transform.globalPos = val;\r\n    }\r\n    /**\r\n     * The position of the actor last frame (x, y) in pixels\r\n     */\r\n    get oldPos() {\r\n        return this._oldTransform.pos;\r\n    }\r\n    /**\r\n     * The current velocity vector (vx, vy) of the actor in pixels/second\r\n     */\r\n    get vel() {\r\n        return this.motion.vel;\r\n    }\r\n    set vel(val) {\r\n        this.motion.vel = val;\r\n    }\r\n    /**\r\n     * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\r\n     * be useful to simulate a gravitational effect.\r\n     */\r\n    get acc() {\r\n        return this.motion.acc;\r\n    }\r\n    set acc(val) {\r\n        this.motion.acc = val;\r\n    }\r\n    /**\r\n     * The current torque applied to the actor\r\n     */\r\n    get torque() {\r\n        return this.motion.torque;\r\n    }\r\n    set torque(val) {\r\n        this.motion.torque = val;\r\n    }\r\n    /**\r\n     * Gets/sets the rotation of the body from the last frame.\r\n     */\r\n    get oldRotation() {\r\n        return this._oldTransform.rotation;\r\n    }\r\n    /**\r\n     * The rotation of the body in radians\r\n     */\r\n    get rotation() {\r\n        return this.transform.globalRotation;\r\n    }\r\n    set rotation(val) {\r\n        this.transform.globalRotation = val;\r\n    }\r\n    /**\r\n     * The scale vector of the actor\r\n     */\r\n    get scale() {\r\n        return this.transform.globalScale;\r\n    }\r\n    set scale(val) {\r\n        this.transform.globalScale = val;\r\n    }\r\n    /**\r\n     * The scale of the actor last frame\r\n     */\r\n    get oldScale() {\r\n        return this._oldTransform.scale;\r\n    }\r\n    /**\r\n     * The scale rate of change of the actor in scale/second\r\n     */\r\n    get scaleFactor() {\r\n        return this.motion.scaleFactor;\r\n    }\r\n    set scaleFactor(scaleFactor) {\r\n        this.motion.scaleFactor = scaleFactor;\r\n    }\r\n    /**\r\n     * Get the angular velocity in radians/second\r\n     */\r\n    get angularVelocity() {\r\n        return this.motion.angularVelocity;\r\n    }\r\n    /**\r\n     * Set the angular velocity in radians/second\r\n     */\r\n    set angularVelocity(value) {\r\n        this.motion.angularVelocity = value;\r\n    }\r\n    /**\r\n     * Apply a specific impulse to the body\r\n     * @param point\r\n     * @param impulse\r\n     */\r\n    applyImpulse(point, impulse) {\r\n        if (this.collisionType !== CollisionType.Active) {\r\n            return; // only active objects participate in the simulation\r\n        }\r\n        const finalImpulse = impulse.scale(this.inverseMass);\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\r\n            finalImpulse.x = 0;\r\n        }\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\r\n            finalImpulse.y = 0;\r\n        }\r\n        this.vel.addEqual(finalImpulse);\r\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\r\n            const distanceFromCenter = point.sub(this.globalPos);\r\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\r\n        }\r\n    }\r\n    /**\r\n     * Apply only linear impulse to the body\r\n     * @param impulse\r\n     */\r\n    applyLinearImpulse(impulse) {\r\n        if (this.collisionType !== CollisionType.Active) {\r\n            return; // only active objects participate in the simulation\r\n        }\r\n        const finalImpulse = impulse.scale(this.inverseMass);\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\r\n            finalImpulse.x = 0;\r\n        }\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\r\n            finalImpulse.y = 0;\r\n        }\r\n        this.vel = this.vel.add(finalImpulse);\r\n    }\r\n    /**\r\n     * Apply only angular impulse to the body\r\n     * @param point\r\n     * @param impulse\r\n     */\r\n    applyAngularImpulse(point, impulse) {\r\n        if (this.collisionType !== CollisionType.Active) {\r\n            return; // only active objects participate in the simulation\r\n        }\r\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\r\n            const distanceFromCenter = point.sub(this.globalPos);\r\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\r\n        }\r\n    }\r\n    /**\r\n     * Sets the old versions of pos, vel, acc, and scale.\r\n     */\r\n    captureOldTransform() {\r\n        // Capture old values before integration step updates them\r\n        this.__oldTransformCaptured = true;\r\n        this.transform.get().clone(this._oldTransform);\r\n        this.oldVel.setTo(this.vel.x, this.vel.y);\r\n        this.oldAcc.setTo(this.acc.x, this.acc.y);\r\n    }\r\n    clone() {\r\n        const component = super.clone();\r\n        return component;\r\n    }\r\n}\r\nBodyComponent._ID = 0;\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Entity.ts\n\r\n\r\n\r\n\r\n/**\r\n * AddedComponent message\r\n */\r\nclass AddedComponent {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Component Added';\r\n    }\r\n}\r\n/**\r\n * Type guard to know if message is f an Added Component\r\n */\r\nfunction isAddedComponent(x) {\r\n    return !!x && x.type === 'Component Added';\r\n}\r\n/**\r\n * RemovedComponent message\r\n */\r\nclass RemovedComponent {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Component Removed';\r\n    }\r\n}\r\n/**\r\n * Type guard to know if message is for a Removed Component\r\n */\r\nfunction isRemovedComponent(x) {\r\n    return !!x && x.type === 'Component Removed';\r\n}\r\nconst EntityEvents = {\r\n    Initialize: 'initialize',\r\n    PreUpdate: 'preupdate',\r\n    PostUpdate: 'postupdate'\r\n};\r\n/**\r\n * An Entity is the base type of anything that can have behavior in Excalibur, they are part of the built in entity component system\r\n *\r\n * Entities can be strongly typed with the components they contain\r\n *\r\n * ```typescript\r\n * const entity = new Entity<ComponentA | ComponentB>();\r\n * entity.components.a; // Type ComponentA\r\n * entity.components.b; // Type ComponentB\r\n * ```\r\n */\r\nclass Entity {\r\n    constructor(components, name) {\r\n        /**\r\n         * Listen to or emit events for an entity\r\n         */\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * The unique identifier for the entity\r\n         */\r\n        this.id = Entity._ID++;\r\n        /**\r\n         * The scene that the entity is in, if any\r\n         */\r\n        this.scene = null;\r\n        this._name = 'anonymous';\r\n        /**\r\n         * Whether this entity is active, if set to false it will be reclaimed\r\n         */\r\n        this.active = true;\r\n        /**\r\n         * Bucket to hold on to deferred removals\r\n         */\r\n        this._componentsToRemove = [];\r\n        this._componentTypeToInstance = new Map();\r\n        this._componentStringToInstance = new Map();\r\n        this._tagsMemo = [];\r\n        this._typesMemo = [];\r\n        /**\r\n         * Observable that keeps track of component add or remove changes on the entity\r\n         */\r\n        this.componentAdded$ = new Observable();\r\n        this.componentRemoved$ = new Observable();\r\n        this._parent = null;\r\n        this.childrenAdded$ = new Observable();\r\n        this.childrenRemoved$ = new Observable();\r\n        this._children = [];\r\n        this._isInitialized = false;\r\n        this._setName(name);\r\n        if (components) {\r\n            for (const component of components) {\r\n                this.addComponent(component);\r\n            }\r\n        }\r\n    }\r\n    _setName(name) {\r\n        if (name) {\r\n            this._name = name;\r\n        }\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    /**\r\n     * Kill the entity, means it will no longer be updated. Kills are deferred to the end of the update.\r\n     * If parented it will be removed from the parent when killed.\r\n     */\r\n    kill() {\r\n        if (this.active) {\r\n            this.active = false;\r\n            this.unparent();\r\n        }\r\n    }\r\n    isKilled() {\r\n        return !this.active;\r\n    }\r\n    /**\r\n     * Specifically get the tags on the entity from [[TagComponent]]\r\n     */\r\n    get tags() {\r\n        return this._tagsMemo;\r\n    }\r\n    /**\r\n     * Check if a tag exists on the entity\r\n     * @param tag name to check for\r\n     */\r\n    hasTag(tag) {\r\n        return this.tags.includes(tag);\r\n    }\r\n    /**\r\n     * Adds a tag to an entity\r\n     * @param tag\r\n     * @returns Entity\r\n     */\r\n    addTag(tag) {\r\n        return this.addComponent(new TagComponent(tag));\r\n    }\r\n    /**\r\n     * Removes a tag on the entity\r\n     *\r\n     * Removals are deferred until the end of update\r\n     * @param tag\r\n     * @param force Remove component immediately, no deferred\r\n     */\r\n    removeTag(tag, force = false) {\r\n        return this.removeComponent(tag, force);\r\n    }\r\n    /**\r\n     * The types of the components on the Entity\r\n     */\r\n    get types() {\r\n        return this._typesMemo;\r\n    }\r\n    _rebuildMemos() {\r\n        this._tagsMemo = Array.from(this._componentStringToInstance.values())\r\n            .filter((c) => c instanceof TagComponent)\r\n            .map((c) => c.type);\r\n        this._typesMemo = Array.from(this._componentStringToInstance.keys());\r\n    }\r\n    getComponents() {\r\n        return Array.from(this._componentStringToInstance.values());\r\n    }\r\n    _notifyAddComponent(component) {\r\n        this._rebuildMemos();\r\n        const added = new AddedComponent({\r\n            component,\r\n            entity: this\r\n        });\r\n        this.componentAdded$.notifyAll(added);\r\n    }\r\n    _notifyRemoveComponent(component) {\r\n        const removed = new RemovedComponent({\r\n            component,\r\n            entity: this\r\n        });\r\n        this.componentRemoved$.notifyAll(removed);\r\n        this._rebuildMemos();\r\n    }\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    /**\r\n     * Get the direct children of this entity\r\n     */\r\n    get children() {\r\n        return this._children;\r\n    }\r\n    /**\r\n     * Unparents this entity, if there is a parent. Otherwise it does nothing.\r\n     */\r\n    unparent() {\r\n        if (this._parent) {\r\n            this._parent.removeChild(this);\r\n            this._parent = null;\r\n        }\r\n    }\r\n    /**\r\n     * Adds an entity to be a child of this entity\r\n     * @param entity\r\n     */\r\n    addChild(entity) {\r\n        if (entity.parent === null) {\r\n            if (this.getAncestors().includes(entity)) {\r\n                throw new Error('Cycle detected, cannot add entity');\r\n            }\r\n            this._children.push(entity);\r\n            entity._parent = this;\r\n            this.childrenAdded$.notifyAll(entity);\r\n        }\r\n        else {\r\n            throw new Error('Entity already has a parent, cannot add without unparenting');\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Remove an entity from children if it exists\r\n     * @param entity\r\n     */\r\n    removeChild(entity) {\r\n        if (entity.parent === this) {\r\n            removeItemFromArray(entity, this._children);\r\n            entity._parent = null;\r\n            this.childrenRemoved$.notifyAll(entity);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes all children from this entity\r\n     */\r\n    removeAllChildren() {\r\n        // Avoid modifying the array issue by walking backwards\r\n        for (let i = this.children.length - 1; i >= 0; i--) {\r\n            this.removeChild(this.children[i]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns a list of parent entities starting with the topmost parent. Includes the current entity.\r\n     */\r\n    getAncestors() {\r\n        const result = [this];\r\n        let current = this.parent;\r\n        while (current) {\r\n            result.push(current);\r\n            current = current.parent;\r\n        }\r\n        return result.reverse();\r\n    }\r\n    /**\r\n     * Returns a list of all the entities that descend from this entity. Includes the current entity.\r\n     */\r\n    getDescendants() {\r\n        let result = [this];\r\n        let queue = [this];\r\n        while (queue.length > 0) {\r\n            const curr = queue.pop();\r\n            queue = queue.concat(curr.children);\r\n            result = result.concat(curr.children);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Creates a deep copy of the entity and a copy of all its components\r\n     */\r\n    clone() {\r\n        const newEntity = new Entity();\r\n        for (const c of this.types) {\r\n            newEntity.addComponent(this.get(c).clone());\r\n        }\r\n        for (const child of this.children) {\r\n            newEntity.addChild(child.clone());\r\n        }\r\n        return newEntity;\r\n    }\r\n    /**\r\n     * Adds a copy of all the components from another template entity as a \"prefab\"\r\n     * @param templateEntity Entity to use as a template\r\n     * @param force Force component replacement if it already exists on the target entity\r\n     */\r\n    addTemplate(templateEntity, force = false) {\r\n        for (const c of templateEntity.getComponents()) {\r\n            this.addComponent(c.clone(), force);\r\n        }\r\n        for (const child of templateEntity.children) {\r\n            this.addChild(child.clone().addTemplate(child));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Adds a component to the entity\r\n     * @param component Component or Entity to add copy of components from\r\n     * @param force Optionally overwrite any existing components of the same type\r\n     */\r\n    addComponent(component, force = false) {\r\n        // if component already exists, skip if not forced\r\n        if (this.has(component.type)) {\r\n            if (force) {\r\n                // Remove existing component type if exists when forced\r\n                this.removeComponent(component, true);\r\n            }\r\n            else {\r\n                // early exit component exits\r\n                return this;\r\n            }\r\n        }\r\n        // TODO circular dependencies will be a problem\r\n        if (component.dependencies && component.dependencies.length) {\r\n            for (const ctor of component.dependencies) {\r\n                this.addComponent(new ctor());\r\n            }\r\n        }\r\n        component.owner = this;\r\n        const constuctorType = component.constructor;\r\n        this._componentTypeToInstance.set(constuctorType, component);\r\n        this._componentStringToInstance.set(component.type, component);\r\n        if (component.onAdd) {\r\n            component.onAdd(this);\r\n        }\r\n        this._notifyAddComponent(component);\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes a component from the entity, by default removals are deferred to the end of entity update to avoid consistency issues\r\n     *\r\n     * Components can be force removed with the `force` flag, the removal is not deferred and happens immediately\r\n     * @param componentOrType\r\n     * @param force\r\n     */\r\n    removeComponent(componentOrType, force = false) {\r\n        if (force) {\r\n            if (typeof componentOrType === 'string') {\r\n                this._removeComponentByType(componentOrType);\r\n            }\r\n            else if (componentOrType instanceof Component) {\r\n                this._removeComponentByType(componentOrType.type);\r\n            }\r\n        }\r\n        else {\r\n            this._componentsToRemove.push(componentOrType);\r\n        }\r\n        return this;\r\n    }\r\n    clearComponents() {\r\n        const components = this.getComponents();\r\n        for (const c of components) {\r\n            this.removeComponent(c);\r\n        }\r\n    }\r\n    _removeComponentByType(type) {\r\n        if (this.has(type)) {\r\n            const component = this.get(type);\r\n            component.owner = null;\r\n            if (component.onRemove) {\r\n                component.onRemove(this);\r\n            }\r\n            const ctor = component.constructor;\r\n            this._componentTypeToInstance.delete(ctor);\r\n            this._componentStringToInstance.delete(component.type);\r\n            this._notifyRemoveComponent(component);\r\n        }\r\n    }\r\n    /**\r\n     * @hidden\r\n     * @internal\r\n     */\r\n    processComponentRemoval() {\r\n        for (const componentOrType of this._componentsToRemove) {\r\n            const type = typeof componentOrType === 'string' ? componentOrType : componentOrType.type;\r\n            this._removeComponentByType(type);\r\n        }\r\n        this._componentsToRemove.length = 0;\r\n    }\r\n    has(type) {\r\n        if (typeof type === 'string') {\r\n            return this._componentStringToInstance.has(type);\r\n        }\r\n        else {\r\n            return this._componentTypeToInstance.has(type);\r\n        }\r\n    }\r\n    get(type) {\r\n        if (typeof type === 'string') {\r\n            return this._componentStringToInstance.get(type);\r\n        }\r\n        else {\r\n            return this._componentTypeToInstance.get(type);\r\n        }\r\n    }\r\n    /**\r\n     * Gets whether the actor is Initialized\r\n     */\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    /**\r\n     * Initializes this entity, meant to be called by the Scene before first update not by users of Excalibur.\r\n     *\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * @internal\r\n     */\r\n    _initialize(engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            this.events.emit('initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(engine, delta) {\r\n        this.events.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(engine, delta) {\r\n        this.events.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * `onInitialize` is called before the first update of the entity. This method is meant to be\r\n     * overridden.\r\n     *\r\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\r\n     */\r\n    onInitialize(_engine) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before an entity is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after an entity is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     *\r\n     * Entity update lifecycle, called internally\r\n     *\r\n     * @internal\r\n     * @param engine\r\n     * @param delta\r\n     */\r\n    update(engine, delta) {\r\n        this._initialize(engine);\r\n        this._preupdate(engine, delta);\r\n        for (const child of this.children) {\r\n            child.update(engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n}\r\nEntity._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsComponent.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Type guard for checking if a Graphic HasTick (used for graphics that change over time like animations)\r\n * @param graphic\r\n */\r\nfunction hasGraphicsTick(graphic) {\r\n    return !!graphic.tick;\r\n}\r\nclass GraphicsLayer {\r\n    constructor(_options, _graphics) {\r\n        this._options = _options;\r\n        this._graphics = _graphics;\r\n        this.graphics = [];\r\n    }\r\n    get name() {\r\n        return this._options.name;\r\n    }\r\n    hide(nameOrGraphic) {\r\n        if (!nameOrGraphic) {\r\n            this.graphics.length = 0;\r\n        }\r\n        else {\r\n            let gfx = null;\r\n            if (nameOrGraphic instanceof Graphic) {\r\n                gfx = nameOrGraphic;\r\n            }\r\n            else {\r\n                gfx = this._graphics.getGraphic(nameOrGraphic);\r\n            }\r\n            this.graphics = this.graphics.filter((g) => g.graphic !== gfx);\r\n            this._graphics.recalculateBounds();\r\n        }\r\n    }\r\n    /**\r\n     * Show a graphic by name or instance at an offset, graphics are shown in the order in which `show()` is called.\r\n     *\r\n     * If `show()` is called multiple times for the same graphic it will be shown multiple times.\r\n     * @param nameOrGraphic\r\n     * @param options\r\n     */\r\n    show(nameOrGraphic, options) {\r\n        options = { ...options };\r\n        let gfx;\r\n        if (nameOrGraphic instanceof Graphic) {\r\n            gfx = this._graphics.copyGraphics ? nameOrGraphic.clone() : nameOrGraphic;\r\n        }\r\n        else {\r\n            gfx = this._graphics.getGraphic(nameOrGraphic);\r\n            if (!gfx) {\r\n                Logger.getInstance().error(`No such graphic added to component named ${nameOrGraphic}. These named graphics are available: `, this._graphics.getNames());\r\n            }\r\n        }\r\n        if (gfx) {\r\n            this.graphics.push({ graphic: gfx, options });\r\n            this._graphics.recalculateBounds();\r\n            return gfx;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Use a specific graphic, swap out any current graphics being shown\r\n     * @param nameOrGraphic\r\n     * @param options\r\n     */\r\n    use(nameOrGraphic, options) {\r\n        options = { ...options };\r\n        this.hide();\r\n        return this.show(nameOrGraphic, options);\r\n    }\r\n    /**\r\n     * Current order of the layer, higher numbers are on top, lower numbers are on the bottom.\r\n     *\r\n     * For example a layer with `order = -1` would be under a layer of `order = 1`\r\n     */\r\n    get order() {\r\n        return this._options.order;\r\n    }\r\n    /**\r\n     * Set the order of the layer, higher numbers are on top, lower numbers are on the bottom.\r\n     *\r\n     * For example a layer with `order = -1` would be under a layer of `order = 1`\r\n     */\r\n    set order(order) {\r\n        this._options.order = order;\r\n    }\r\n    /**\r\n     * Get or set the pixel offset from the layer anchor for all graphics in the layer\r\n     */\r\n    get offset() {\r\n        var _a;\r\n        return (_a = this._options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n    }\r\n    set offset(value) {\r\n        this._options.offset = value;\r\n    }\r\n    get currentKeys() {\r\n        var _a;\r\n        return (_a = this.name) !== null && _a !== void 0 ? _a : 'anonymous';\r\n    }\r\n    clone(graphicsComponent) {\r\n        const layer = new GraphicsLayer({ ...this._options }, graphicsComponent);\r\n        layer.graphics = [...this.graphics.map(g => ({ graphic: g.graphic.clone(), options: { ...g.options } }))];\r\n        return layer;\r\n    }\r\n}\r\nclass GraphicsLayers {\r\n    constructor(_component) {\r\n        this._component = _component;\r\n        this._layers = [];\r\n        this._layerMap = {};\r\n        this.default = new GraphicsLayer({ name: 'default', order: 0 }, _component);\r\n        this._maybeAddLayer(this.default);\r\n    }\r\n    create(options) {\r\n        const layer = new GraphicsLayer(options, this._component);\r\n        return this._maybeAddLayer(layer);\r\n    }\r\n    get(name) {\r\n        if (name) {\r\n            return this._getLayer(name);\r\n        }\r\n        return this._layers;\r\n    }\r\n    currentKeys() {\r\n        const graphicsLayerKeys = [];\r\n        for (const layer of this._layers) {\r\n            graphicsLayerKeys.push(layer.currentKeys);\r\n        }\r\n        return graphicsLayerKeys;\r\n    }\r\n    has(name) {\r\n        return name in this._layerMap;\r\n    }\r\n    _maybeAddLayer(layer) {\r\n        if (this._layerMap[layer.name]) {\r\n            // todo log warning\r\n            return this._layerMap[layer.name];\r\n        }\r\n        this._layerMap[layer.name] = layer;\r\n        this._layers.push(layer);\r\n        this._layers.sort((a, b) => a.order - b.order);\r\n        return layer;\r\n    }\r\n    _getLayer(name) {\r\n        return this._layerMap[name];\r\n    }\r\n    clone(graphicsComponent) {\r\n        const layers = new GraphicsLayers(graphicsComponent);\r\n        layers._layerMap = {};\r\n        layers._layers = [];\r\n        layers.default = this.default.clone(graphicsComponent);\r\n        layers._maybeAddLayer(layers.default);\r\n        // Remove the default layer out of the clone\r\n        const clonedLayers = this._layers.filter(l => l.name !== 'default').map(l => l.clone(graphicsComponent));\r\n        clonedLayers.forEach(layer => layers._maybeAddLayer(layer));\r\n        return layers;\r\n    }\r\n}\r\n/**\r\n * Component to manage drawings, using with the position component\r\n */\r\nclass GraphicsComponent extends Component {\r\n    getGraphic(name) {\r\n        return this._graphics[name];\r\n    }\r\n    /**\r\n     * Get registered graphics names\r\n     */\r\n    getNames() {\r\n        return Object.keys(this._graphics);\r\n    }\r\n    constructor(options) {\r\n        super();\r\n        this.type = 'ex.graphics';\r\n        this._graphics = {};\r\n        /**\r\n         * Sets or gets wether any drawing should be visible in this component\r\n         */\r\n        this.visible = true;\r\n        /**\r\n         * Sets or gets wither all drawings should have an opacity applied\r\n         */\r\n        this.opacity = 1;\r\n        /**\r\n         * Offset to apply to graphics by default\r\n         */\r\n        this.offset = Vector.Zero;\r\n        /**\r\n         * Anchor to apply to graphics by default\r\n         */\r\n        this.anchor = Vector.Half;\r\n        /**\r\n         * Flip all graphics horizontally along the y-axis\r\n         */\r\n        this.flipHorizontal = false;\r\n        /**\r\n         * Flip all graphics vertically along the x-axis\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * If set to true graphics added to the component will be copied. This can affect performance\r\n         */\r\n        this.copyGraphics = false;\r\n        this._localBounds = null;\r\n        // Defaults\r\n        options = {\r\n            visible: this.visible,\r\n            ...options\r\n        };\r\n        const { current, anchor, opacity, visible, graphics, offset, copyGraphics, onPreDraw, onPostDraw } = options;\r\n        this._graphics = graphics || {};\r\n        this.offset = offset !== null && offset !== void 0 ? offset : this.offset;\r\n        this.opacity = opacity !== null && opacity !== void 0 ? opacity : this.opacity;\r\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : this.anchor;\r\n        this.copyGraphics = copyGraphics !== null && copyGraphics !== void 0 ? copyGraphics : this.copyGraphics;\r\n        this.onPreDraw = onPreDraw !== null && onPreDraw !== void 0 ? onPreDraw : this.onPreDraw;\r\n        this.onPostDraw = onPostDraw !== null && onPostDraw !== void 0 ? onPostDraw : this.onPostDraw;\r\n        this.visible = !!visible;\r\n        this.layers = new GraphicsLayers(this);\r\n        if (current && this._graphics[current]) {\r\n            this.show(this._graphics[current]);\r\n        }\r\n    }\r\n    /**\r\n     * Returns the currently displayed graphics and their offsets, empty array if hidden\r\n     */\r\n    get current() {\r\n        return this.layers.default.graphics;\r\n    }\r\n    /**\r\n     * Returns all graphics associated with this component\r\n     */\r\n    get graphics() {\r\n        return this._graphics;\r\n    }\r\n    add(nameOrGraphic, graphic) {\r\n        let name = 'default';\r\n        let graphicToSet = null;\r\n        if (typeof nameOrGraphic === 'string') {\r\n            name = nameOrGraphic;\r\n            graphicToSet = graphic;\r\n        }\r\n        else {\r\n            graphicToSet = nameOrGraphic;\r\n        }\r\n        this._graphics[name] = this.copyGraphics ? graphicToSet.clone() : graphicToSet;\r\n        if (name === 'default') {\r\n            this.show('default');\r\n        }\r\n        return graphicToSet;\r\n    }\r\n    /**\r\n     * Show a graphic by name on the **default** layer, returns the new [[Graphic]]\r\n     */\r\n    show(nameOrGraphic, options) {\r\n        const result = this.layers.default.show(nameOrGraphic, options);\r\n        this.recalculateBounds();\r\n        return result;\r\n    }\r\n    /**\r\n     * Use a graphic only, swap out any graphics on the **default** layer, returns the new [[Graphic]]\r\n     * @param nameOrGraphic\r\n     * @param options\r\n     */\r\n    use(nameOrGraphic, options) {\r\n        const result = this.layers.default.use(nameOrGraphic, options);\r\n        this.recalculateBounds();\r\n        return result;\r\n    }\r\n    hide(nameOrGraphic) {\r\n        this.layers.default.hide(nameOrGraphic);\r\n    }\r\n    set localBounds(bounds) {\r\n        this._localBounds = bounds;\r\n    }\r\n    recalculateBounds() {\r\n        let bb = new BoundingBox();\r\n        for (const layer of this.layers.get()) {\r\n            for (const { graphic, options } of layer.graphics) {\r\n                let anchor = this.anchor;\r\n                let offset = this.offset;\r\n                if (options === null || options === void 0 ? void 0 : options.anchor) {\r\n                    anchor = options.anchor;\r\n                }\r\n                if (options === null || options === void 0 ? void 0 : options.offset) {\r\n                    offset = options.offset;\r\n                }\r\n                const bounds = graphic.localBounds;\r\n                const offsetX = -bounds.width * anchor.x + offset.x;\r\n                const offsetY = -bounds.height * anchor.y + offset.y;\r\n                bb = graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(vec(offsetX + layer.offset.x, offsetY + layer.offset.y)).combine(bb);\r\n            }\r\n        }\r\n        this._localBounds = bb;\r\n    }\r\n    get localBounds() {\r\n        if (!this._localBounds || this._localBounds.hasZeroDimensions()) {\r\n            this.recalculateBounds();\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    /**\r\n     * Update underlying graphics if necesary, called internally\r\n     * @param elapsed\r\n     * @internal\r\n     */\r\n    update(elapsed, idempotencyToken = 0) {\r\n        for (const layer of this.layers.get()) {\r\n            for (const { graphic } of layer.graphics) {\r\n                if (hasGraphicsTick(graphic)) {\r\n                    graphic === null || graphic === void 0 ? void 0 : graphic.tick(elapsed, idempotencyToken);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    clone() {\r\n        const graphics = new GraphicsComponent();\r\n        graphics._graphics = { ...this._graphics };\r\n        graphics.offset = this.offset.clone();\r\n        graphics.opacity = this.opacity;\r\n        graphics.anchor = this.anchor.clone();\r\n        graphics.copyGraphics = this.copyGraphics;\r\n        graphics.onPreDraw = this.onPreDraw;\r\n        graphics.onPostDraw = this.onPostDraw;\r\n        graphics.visible = this.visible;\r\n        graphics.layers = this.layers.clone(graphics);\r\n        return graphics;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Rectangle.ts\n\r\n/**\r\n * A Rectangle [[Graphic]] for drawing rectangles to the [[ExcaliburGraphicsContext]]\r\n */\r\nclass Rectangle extends Raster {\r\n    constructor(options) {\r\n        super(options);\r\n        this.width = options.width;\r\n        this.height = options.height;\r\n        this.rasterize();\r\n    }\r\n    clone() {\r\n        return new Rectangle({\r\n            width: this.width,\r\n            height: this.height,\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        if (this.color) {\r\n            ctx.fillRect(0, 0, this.width, this.height);\r\n        }\r\n        if (this.strokeColor) {\r\n            ctx.strokeRect(0, 0, this.width, this.height);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Circle.ts\n\r\n\r\n/**\r\n * A circle [[Graphic]] for drawing circles to the [[ExcaliburGraphicsContext]]\r\n *\r\n * Circles default to [[ImageFiltering.Blended]]\r\n */\r\nclass Circle extends Raster {\r\n    get radius() {\r\n        return this._radius;\r\n    }\r\n    set radius(value) {\r\n        this._radius = value;\r\n        this.width = this._radius * 2;\r\n        this.height = this._radius * 2;\r\n        this.flagDirty();\r\n    }\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        super(options);\r\n        this._radius = 0;\r\n        const lineWidth = (_a = options.lineWidth) !== null && _a !== void 0 ? _a : (options.strokeColor ? 1 : 0); // default lineWidth in canvas is 1px\r\n        this.padding = (_b = options.padding) !== null && _b !== void 0 ? _b : 2 + (lineWidth / 2); // default 2 padding for circles looks nice\r\n        this.radius = options.radius;\r\n        this.filtering = (_c = options.filtering) !== null && _c !== void 0 ? _c : ImageFiltering.Blended;\r\n        this.rasterize();\r\n    }\r\n    clone() {\r\n        return new Circle({\r\n            radius: this.radius,\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        if (this.radius > 0) {\r\n            ctx.beginPath();\r\n            ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\r\n            if (this.color) {\r\n                ctx.fill();\r\n            }\r\n            if (this.strokeColor) {\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerComponent.ts\n\r\n/**\r\n * Add this component to optionally configure how the pointer\r\n * system detects pointer events.\r\n *\r\n * By default the collider shape is used and graphics bounds is not.\r\n *\r\n * If both collider shape and graphics bounds are enabled it will fire events if either or\r\n * are intersecting the pointer.\r\n */\r\nclass PointerComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.pointer';\r\n        /**\r\n         * Use any existing Collider component geometry for pointer events. This is useful if you want\r\n         * user pointer events only to trigger on the same collision geometry used in the collider component\r\n         * for collision resolution. Default is `true`.\r\n         */\r\n        this.useColliderShape = true;\r\n        /**\r\n         * Use any existing Graphics component bounds for pointers. This is useful if you want the axis aligned\r\n         * bounds around the graphic to trigger pointer events. Default is `false`.\r\n         */\r\n        this.useGraphicsBounds = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/EasingFunctions.ts\n\r\n/**\r\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\r\n * Given a time, the function will return a value from positive startValue to positive endValue.\r\n *\r\n * ```js\r\n * function Linear (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInQuad (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutQuad (t) {\r\n *    return t * (2 - t);\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutQuad (t) {\r\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInCubic (t) {\r\n *    return t * t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutCubic (t) {\r\n *    return (--t) * t * t + 1;\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutCubic (t) {\r\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n * }\r\n * ```\r\n */\r\nclass EasingFunctions {\r\n    static CreateReversibleEasingFunction(easing) {\r\n        return (time, start, end, duration) => {\r\n            if (end < start) {\r\n                return start - (easing(time, end, start, duration) - end);\r\n            }\r\n            else {\r\n                return easing(time, start, end, duration);\r\n            }\r\n        };\r\n    }\r\n    static CreateVectorEasingFunction(easing) {\r\n        return (time, start, end, duration) => {\r\n            return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\r\n        };\r\n    }\r\n}\r\nEasingFunctions.Linear = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    return (endValue * currentTime) / duration + startValue;\r\n});\r\nEasingFunctions.EaseInQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    return endValue * currentTime * currentTime + startValue;\r\n});\r\nEasingFunctions.EaseOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    return -endValue * currentTime * (currentTime - 2) + startValue;\r\n});\r\nEasingFunctions.EaseInOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration / 2;\r\n    if (currentTime < 1) {\r\n        return (endValue / 2) * currentTime * currentTime + startValue;\r\n    }\r\n    currentTime--;\r\n    return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\r\n});\r\nEasingFunctions.EaseInCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    return endValue * currentTime * currentTime * currentTime + startValue;\r\n});\r\nEasingFunctions.EaseOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    currentTime--;\r\n    return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\r\n});\r\nEasingFunctions.EaseInOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration / 2;\r\n    if (currentTime < 1) {\r\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\r\n    }\r\n    currentTime -= 2;\r\n    return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\r\n});\r\n\n;// CONCATENATED MODULE: ./Actions/ActionQueue.ts\n/**\r\n * Action Queues represent an ordered sequence of actions\r\n *\r\n * Action queues are part of the [[ActionContext|Action API]] and\r\n * store the list of actions to be executed for an [[Actor]].\r\n *\r\n * Actors implement [[Actor.actions]] which can be manipulated by\r\n * advanced users to adjust the actions currently being executed in the\r\n * queue.\r\n */\r\nclass ActionQueue {\r\n    constructor(entity) {\r\n        this._actions = [];\r\n        this._completedActions = [];\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Add an action to the sequence\r\n     * @param action\r\n     */\r\n    add(action) {\r\n        this._actions.push(action);\r\n    }\r\n    /**\r\n     * Remove an action by reference from the sequence\r\n     * @param action\r\n     */\r\n    remove(action) {\r\n        const index = this._actions.indexOf(action);\r\n        this._actions.splice(index, 1);\r\n    }\r\n    /**\r\n     * Removes all actions from this sequence\r\n     */\r\n    clearActions() {\r\n        this._actions.length = 0;\r\n        this._completedActions.length = 0;\r\n        if (this._currentAction) {\r\n            this._currentAction.stop();\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @returns The total list of actions in this sequence complete or not\r\n     */\r\n    getActions() {\r\n        return this._actions.concat(this._completedActions);\r\n    }\r\n    /**\r\n     *\r\n     * @returns `true` if there are more actions to process in the sequence\r\n     */\r\n    hasNext() {\r\n        return this._actions.length > 0;\r\n    }\r\n    /**\r\n     * @returns `true` if the current sequence of actions is done\r\n     */\r\n    isComplete() {\r\n        return this._actions.length === 0;\r\n    }\r\n    /**\r\n     * Resets the sequence of actions, this is used to restart a sequence from the beginning\r\n     */\r\n    reset() {\r\n        this._actions = this.getActions();\r\n        const len = this._actions.length;\r\n        for (let i = 0; i < len; i++) {\r\n            this._actions[i].reset();\r\n        }\r\n        this._completedActions = [];\r\n    }\r\n    /**\r\n     * Update the queue which updates actions and handles completing actions\r\n     * @param elapsedMs\r\n     */\r\n    update(elapsedMs) {\r\n        if (this._actions.length > 0) {\r\n            this._currentAction = this._actions[0];\r\n            this._currentAction.update(elapsedMs);\r\n            if (this._currentAction.isComplete(this._entity)) {\r\n                this._completedActions.push(this._actions.shift());\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Repeat.ts\n\r\nclass Repeat {\r\n    constructor(entity, repeatBuilder, repeat) {\r\n        this._stopped = false;\r\n        this._repeatBuilder = repeatBuilder;\r\n        this._repeatContext = new ActionContext(entity);\r\n        this._actionQueue = this._repeatContext.getQueue();\r\n        this._repeat = repeat;\r\n        this._originalRepeat = repeat;\r\n        this._repeatBuilder(this._repeatContext);\r\n        this._repeat--; // current execution is the first repeat\r\n    }\r\n    update(delta) {\r\n        if (this._actionQueue.isComplete()) {\r\n            this._actionQueue.clearActions();\r\n            this._repeatBuilder(this._repeatContext);\r\n            this._repeat--;\r\n        }\r\n        this._actionQueue.update(delta);\r\n    }\r\n    isComplete() {\r\n        return this._stopped || (this._repeat <= 0 && this._actionQueue.isComplete());\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._repeat = this._originalRepeat;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/RepeatForever.ts\n\r\n/**\r\n * RepeatForever Action implementation, it is recommended you use the fluent action\r\n * context API.\r\n *\r\n *\r\n */\r\nclass RepeatForever {\r\n    constructor(entity, repeatBuilder) {\r\n        this._stopped = false;\r\n        this._repeatBuilder = repeatBuilder;\r\n        this._repeatContext = new ActionContext(entity);\r\n        this._actionQueue = this._repeatContext.getQueue();\r\n        this._repeatBuilder(this._repeatContext);\r\n    }\r\n    update(delta) {\r\n        if (this._stopped) {\r\n            return;\r\n        }\r\n        if (this._actionQueue.isComplete()) {\r\n            this._actionQueue.clearActions();\r\n            this._repeatBuilder(this._repeatContext);\r\n        }\r\n        this._actionQueue.update(delta);\r\n    }\r\n    isComplete() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n        this._actionQueue.clearActions();\r\n    }\r\n    reset() {\r\n        return;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/MoveBy.ts\n\r\n\r\n\r\n\r\nclass MoveBy {\r\n    constructor(entity, offsetX, offsetY, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._entity = entity;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._speed = speed;\r\n        this._offset = new Vector(offsetX, offsetY);\r\n        if (speed <= 0) {\r\n            Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\r\n            throw new Error('Speed must be greater than 0 pixels per second');\r\n        }\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n            this._end = this._start.add(this._offset);\r\n            this._distance = this._offset.size;\r\n            this._dir = this._end.sub(this._start).normalize();\r\n        }\r\n        if (this.isComplete(this._entity)) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n        else {\r\n            this._motion.vel = this._dir.scale(this._speed);\r\n        }\r\n    }\r\n    isComplete(entity) {\r\n        const tx = entity.get(TransformComponent);\r\n        return this._stopped || tx.pos.distance(this._start) >= this._distance;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/MoveTo.ts\n\r\n\r\n\r\nclass MoveTo {\r\n    constructor(entity, destx, desty, speed) {\r\n        this.entity = entity;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._end = new Vector(destx, desty);\r\n        this._speed = speed;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n            this._distance = this._start.distance(this._end);\r\n            this._dir = this._end.sub(this._start).normalize();\r\n        }\r\n        const m = this._dir.scale(this._speed);\r\n        this._motion.vel = vec(m.x, m.y);\r\n        if (this.isComplete(this.entity)) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n    }\r\n    isComplete(entity) {\r\n        const tx = entity.get(TransformComponent);\r\n        return this._stopped || new Vector(tx.pos.x, tx.pos.y).distance(this._start) >= this._distance;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/RotationType.ts\n/**\r\n * An enum that describes the strategies that rotation actions can use\r\n */\r\nvar RotationType;\r\n(function (RotationType) {\r\n    /**\r\n     * Rotation via `ShortestPath` will use the smallest angle\r\n     * between the starting and ending points. This strategy is the default behavior.\r\n     */\r\n    RotationType[RotationType[\"ShortestPath\"] = 0] = \"ShortestPath\";\r\n    /**\r\n     * Rotation via `LongestPath` will use the largest angle\r\n     * between the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"LongestPath\"] = 1] = \"LongestPath\";\r\n    /**\r\n     * Rotation via `Clockwise` will travel in a clockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"Clockwise\"] = 2] = \"Clockwise\";\r\n    /**\r\n     * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"CounterClockwise\"] = 3] = \"CounterClockwise\";\r\n})(RotationType || (RotationType = {}));\r\n\n;// CONCATENATED MODULE: ./Actions/Action/RotateTo.ts\n\r\n\r\n\r\n\r\nclass RotateTo {\r\n    constructor(entity, angleRadians, speed, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._end = angleRadians;\r\n        this._speed = speed;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._tx.rotation;\r\n            this._currentNonCannonAngle = this._tx.rotation;\r\n            const distance1 = Math.abs(this._end - this._start);\r\n            const distance2 = TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (!this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        this._motion.angularVelocity = this._direction * this._speed;\r\n        this._currentNonCannonAngle += this._direction * this._speed * (_delta / 1000);\r\n        if (this.isComplete()) {\r\n            this._tx.rotation = this._end;\r\n            this._motion.angularVelocity = 0;\r\n            this._stopped = true;\r\n        }\r\n    }\r\n    isComplete() {\r\n        const distanceTraveled = Math.abs(this._currentNonCannonAngle - this._start);\r\n        return this._stopped || distanceTraveled >= Math.abs(this._distance);\r\n    }\r\n    stop() {\r\n        this._motion.angularVelocity = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/RotateBy.ts\n\r\n\r\n\r\n\r\nclass RotateBy {\r\n    constructor(entity, angleRadiansOffset, speed, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._speed = speed;\r\n        this._offset = angleRadiansOffset;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._tx.rotation;\r\n            this._currentNonCannonAngle = this._tx.rotation;\r\n            this._end = this._start + this._offset;\r\n            const distance1 = Math.abs(this._end - this._start);\r\n            const distance2 = TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortDistance >= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (this._shortDistance <= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        this._motion.angularVelocity = this._direction * this._speed;\r\n        this._currentNonCannonAngle += this._direction * this._speed * (_delta / 1000);\r\n        if (this.isComplete()) {\r\n            this._tx.rotation = this._end;\r\n            this._motion.angularVelocity = 0;\r\n            this._stopped = true;\r\n        }\r\n    }\r\n    isComplete() {\r\n        const distanceTraveled = Math.abs(this._currentNonCannonAngle - this._start);\r\n        return this._stopped || distanceTraveled >= Math.abs(this._distance);\r\n    }\r\n    stop() {\r\n        this._motion.angularVelocity = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._start = undefined;\r\n        this._currentNonCannonAngle = undefined;\r\n        this._distance = undefined;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/ScaleTo.ts\n\r\n\r\n\r\nclass ScaleTo {\r\n    constructor(entity, scaleX, scaleY, speedX, speedY) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._endX = scaleX;\r\n        this._endY = scaleY;\r\n        this._speedX = speedX;\r\n        this._speedY = speedY;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startX = this._tx.scale.x;\r\n            this._startY = this._tx.scale.y;\r\n            this._distanceX = Math.abs(this._endX - this._startX);\r\n            this._distanceY = Math.abs(this._endY - this._startY);\r\n        }\r\n        if (!(Math.abs(this._tx.scale.x - this._startX) >= this._distanceX)) {\r\n            const directionX = this._endY < this._startY ? -1 : 1;\r\n            this._motion.scaleFactor.x = this._speedX * directionX;\r\n        }\r\n        else {\r\n            this._motion.scaleFactor.x = 0;\r\n        }\r\n        if (!(Math.abs(this._tx.scale.y - this._startY) >= this._distanceY)) {\r\n            const directionY = this._endY < this._startY ? -1 : 1;\r\n            this._motion.scaleFactor.y = this._speedY * directionY;\r\n        }\r\n        else {\r\n            this._motion.scaleFactor.y = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._tx.scale = vec(this._endX, this._endY);\r\n            this._motion.scaleFactor.x = 0;\r\n            this._motion.scaleFactor.y = 0;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return (this._stopped ||\r\n            (Math.abs(this._tx.scale.x - this._startX) >= (this._distanceX - 0.01) &&\r\n                Math.abs(this._tx.scale.y - this._startY) >= (this._distanceY - 0.01)));\r\n    }\r\n    stop() {\r\n        this._motion.scaleFactor.x = 0;\r\n        this._motion.scaleFactor.y = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/ScaleBy.ts\n\r\n\r\n\r\nclass ScaleBy {\r\n    constructor(entity, scaleOffsetX, scaleOffsetY, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._offset = new Vector(scaleOffsetX, scaleOffsetY);\r\n        this._speedX = this._speedY = speed;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startScale = this._tx.scale.clone();\r\n            this._endScale = this._startScale.add(this._offset);\r\n            this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\r\n            this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\r\n            this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\r\n            this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\r\n        }\r\n        this._motion.scaleFactor.x = this._speedX * this._directionX;\r\n        this._motion.scaleFactor.y = this._speedY * this._directionY;\r\n        if (this.isComplete()) {\r\n            this._tx.scale = this._endScale;\r\n            this._motion.scaleFactor.x = 0;\r\n            this._motion.scaleFactor.y = 0;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return (this._stopped ||\r\n            (Math.abs(this._tx.scale.x - this._startScale.x) >= (this._distanceX - 0.01) &&\r\n                Math.abs(this._tx.scale.y - this._startScale.y) >= (this._distanceY - 0.01)));\r\n    }\r\n    stop() {\r\n        this._motion.scaleFactor.x = 0;\r\n        this._motion.scaleFactor.y = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/CallMethod.ts\nclass CallMethod {\r\n    constructor(method) {\r\n        this._method = null;\r\n        this._hasBeenCalled = false;\r\n        this._method = method;\r\n    }\r\n    update(_delta) {\r\n        this._method();\r\n        this._hasBeenCalled = true;\r\n    }\r\n    isComplete() {\r\n        return this._hasBeenCalled;\r\n    }\r\n    reset() {\r\n        this._hasBeenCalled = false;\r\n    }\r\n    stop() {\r\n        this._hasBeenCalled = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/EaseTo.ts\n\r\n\r\n\r\nclass EaseTo {\r\n    constructor(entity, x, y, duration, easingFcn) {\r\n        this.easingFcn = easingFcn;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1 * 1000; // 1 second\r\n        this._lerpStart = new Vector(0, 0);\r\n        this._lerpEnd = new Vector(0, 0);\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = new Vector(x, y);\r\n    }\r\n    _initialize() {\r\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._currentLerpTime = 0;\r\n    }\r\n    update(delta) {\r\n        if (!this._initialized) {\r\n            this._initialize();\r\n            this._initialized = true;\r\n        }\r\n        // Need to update lerp time first, otherwise the first update will always be zero\r\n        this._currentLerpTime += delta;\r\n        let newX = this._tx.pos.x;\r\n        let newY = this._tx.pos.y;\r\n        if (this._currentLerpTime < this._lerpDuration) {\r\n            if (this._lerpEnd.x < this._lerpStart.x) {\r\n                newX =\r\n                    this._lerpStart.x -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\r\n            }\r\n            else {\r\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n            }\r\n            if (this._lerpEnd.y < this._lerpStart.y) {\r\n                newY =\r\n                    this._lerpStart.y -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\r\n            }\r\n            else {\r\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n            }\r\n            // Given the lerp position figure out the velocity in pixels per second\r\n            this._motion.vel = vec((newX - this._tx.pos.x) / (delta / 1000), (newY - this._tx.pos.y) / (delta / 1000));\r\n        }\r\n        else {\r\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\r\n            this._motion.vel = Vector.Zero;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._currentLerpTime >= this._lerpDuration;\r\n    }\r\n    reset() {\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._currentLerpTime = 0;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/EaseBy.ts\n\r\n\r\n\r\nclass EaseBy {\r\n    constructor(entity, offsetX, offsetY, duration, easingFcn) {\r\n        this.easingFcn = easingFcn;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1 * 1000; // 1 second\r\n        this._lerpStart = new Vector(0, 0);\r\n        this._lerpEnd = new Vector(0, 0);\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._lerpDuration = duration;\r\n        this._offset = new Vector(offsetX, offsetY);\r\n    }\r\n    _initialize() {\r\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._currentLerpTime = 0;\r\n        this._lerpEnd = this._lerpStart.add(this._offset);\r\n    }\r\n    update(delta) {\r\n        if (!this._initialized) {\r\n            this._initialize();\r\n            this._initialized = true;\r\n        }\r\n        // Need to update lerp time first, otherwise the first update will always be zero\r\n        this._currentLerpTime += delta;\r\n        let newX = this._tx.pos.x;\r\n        let newY = this._tx.pos.y;\r\n        if (this._currentLerpTime < this._lerpDuration) {\r\n            if (this._lerpEnd.x < this._lerpStart.x) {\r\n                newX =\r\n                    this._lerpStart.x -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\r\n            }\r\n            else {\r\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n            }\r\n            if (this._lerpEnd.y < this._lerpStart.y) {\r\n                newY =\r\n                    this._lerpStart.y -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\r\n            }\r\n            else {\r\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n            }\r\n            // Given the lerp position figure out the velocity in pixels per second\r\n            this._motion.vel = vec((newX - this._tx.pos.x) / (delta / 1000), (newY - this._tx.pos.y) / (delta / 1000));\r\n        }\r\n        else {\r\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\r\n            this._motion.vel = Vector.Zero;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._currentLerpTime >= this._lerpDuration;\r\n    }\r\n    reset() {\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._currentLerpTime = 0;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Blink.ts\n\r\nclass Blink {\r\n    constructor(entity, timeVisible, timeNotVisible, numBlinks = 1) {\r\n        this._timeVisible = 0;\r\n        this._timeNotVisible = 0;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n        this._stopped = false;\r\n        this._started = false;\r\n        this._graphics = entity.get(GraphicsComponent);\r\n        this._timeVisible = timeVisible;\r\n        this._timeNotVisible = timeNotVisible;\r\n        this._duration = (timeVisible + timeNotVisible) * numBlinks;\r\n    }\r\n    update(delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._elapsedTime = 0;\r\n            this._totalTime = 0;\r\n        }\r\n        if (!this._graphics) {\r\n            return;\r\n        }\r\n        this._elapsedTime += delta;\r\n        this._totalTime += delta;\r\n        if (this._graphics.visible && this._elapsedTime >= this._timeVisible) {\r\n            this._graphics.visible = false;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (!this._graphics.visible && this._elapsedTime >= this._timeNotVisible) {\r\n            this._graphics.visible = true;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._graphics.visible = true;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._totalTime >= this._duration;\r\n    }\r\n    stop() {\r\n        if (this._graphics) {\r\n            this._graphics.visible = true;\r\n        }\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Fade.ts\n\r\n\r\nclass Fade {\r\n    constructor(entity, endOpacity, speed) {\r\n        this._multiplier = 1;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._graphics = entity.get(GraphicsComponent);\r\n        this._endOpacity = endOpacity;\r\n        this._speed = this._ogspeed = speed;\r\n    }\r\n    update(delta) {\r\n        if (!this._graphics) {\r\n            return;\r\n        }\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._speed = this._ogspeed;\r\n            // determine direction when we start\r\n            if (this._endOpacity < this._graphics.opacity) {\r\n                this._multiplier = -1;\r\n            }\r\n            else {\r\n                this._multiplier = 1;\r\n            }\r\n        }\r\n        if (this._speed > 0) {\r\n            this._graphics.opacity += (this._multiplier *\r\n                (Math.abs(this._graphics.opacity - this._endOpacity) * delta)) / this._speed;\r\n        }\r\n        this._speed -= delta;\r\n        if (this.isComplete()) {\r\n            this._graphics.opacity = this._endOpacity;\r\n        }\r\n        Logger.getInstance().debug('[Action fade] Actor opacity:', this._graphics.opacity);\r\n    }\r\n    isComplete() {\r\n        return this._stopped || Math.abs(this._graphics.opacity - this._endOpacity) < 0.05;\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Delay.ts\nclass Delay {\r\n    constructor(delay) {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._delay = delay;\r\n    }\r\n    update(delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        this._elapsedTime += delta;\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._elapsedTime >= this._delay;\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Die.ts\n\r\nclass Die {\r\n    constructor(entity) {\r\n        this._stopped = false;\r\n        this._entity = entity;\r\n    }\r\n    update(_delta) {\r\n        this._entity.get(ActionsComponent).clearActions();\r\n        this._entity.kill();\r\n        this._stopped = true;\r\n    }\r\n    isComplete() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        return;\r\n    }\r\n    reset() {\r\n        return;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Follow.ts\n\r\n\r\n\r\nclass Follow {\r\n    constructor(entity, entityToFollow, followDistance) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._followTx = entityToFollow.get(TransformComponent);\r\n        this._followMotion = entityToFollow.get(MotionComponent);\r\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = new Vector(this._followTx.pos.x, this._followTx.pos.y);\r\n        this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\r\n        this._speed = 0;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        const actorToFollowSpeed = Math.sqrt(Math.pow(this._followMotion.vel.x, 2) + Math.pow(this._followMotion.vel.y, 2));\r\n        if (actorToFollowSpeed !== 0) {\r\n            this._speed = actorToFollowSpeed;\r\n        }\r\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = vec(this._followTx.pos.x, this._followTx.pos.y);\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        if (this._distanceBetween >= this._maximumDistance) {\r\n            const m = this._dir.scale(this._speed);\r\n            this._motion.vel = vec(m.x, m.y);\r\n        }\r\n        else {\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n        if (this.isComplete()) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    isComplete() {\r\n        // the actor following should never stop unless specified to do so\r\n        return this._stopped;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Meet.ts\n\r\n\r\n\r\nclass Meet {\r\n    constructor(actor, actorToMeet, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._speedWasSpecified = false;\r\n        this._tx = actor.get(TransformComponent);\r\n        this._motion = actor.get(MotionComponent);\r\n        this._meetTx = actorToMeet.get(TransformComponent);\r\n        this._meetMotion = actorToMeet.get(MotionComponent);\r\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = new Vector(this._meetTx.pos.x, this._meetTx.pos.y);\r\n        this._speed = speed || 0;\r\n        if (speed !== undefined) {\r\n            this._speedWasSpecified = true;\r\n        }\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        const actorToMeetSpeed = Math.sqrt(Math.pow(this._meetMotion.vel.x, 2) + Math.pow(this._meetMotion.vel.y, 2));\r\n        if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\r\n            this._speed = actorToMeetSpeed;\r\n        }\r\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = vec(this._meetTx.pos.x, this._meetTx.pos.y);\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        const m = this._dir.scale(this._speed);\r\n        this._motion.vel = vec(m.x, m.y);\r\n        if (this.isComplete()) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._distanceBetween <= 1;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._distanceBetween = undefined;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/ActionContext.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The fluent Action API allows you to perform \"actions\" on\r\n * [[Actor|Actors]] such as following, moving, rotating, and\r\n * more. You can implement your own actions by implementing\r\n * the [[Action]] interface.\r\n */\r\nclass ActionContext {\r\n    constructor(entity) {\r\n        this._entity = entity;\r\n        this._queue = new ActionQueue(entity);\r\n    }\r\n    getQueue() {\r\n        return this._queue;\r\n    }\r\n    update(elapsedMs) {\r\n        this._queue.update(elapsedMs);\r\n    }\r\n    /**\r\n     * Clears all queued actions from the Actor\r\n     */\r\n    clearActions() {\r\n        this._queue.clearActions();\r\n    }\r\n    runAction(action) {\r\n        action.reset();\r\n        this._queue.add(action);\r\n        return this;\r\n    }\r\n    easeTo(...args) {\r\n        var _a, _b;\r\n        let x = 0;\r\n        let y = 0;\r\n        let duration = 0;\r\n        let easingFcn = EasingFunctions.Linear;\r\n        if (args[0] instanceof Vector) {\r\n            x = args[0].x;\r\n            y = args[0].y;\r\n            duration = args[1];\r\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\r\n        }\r\n        else {\r\n            x = args[0];\r\n            y = args[1];\r\n            duration = args[2];\r\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\r\n        }\r\n        this._queue.add(new EaseTo(this._entity, x, y, duration, easingFcn));\r\n        return this;\r\n    }\r\n    easeBy(...args) {\r\n        var _a, _b;\r\n        let offsetX = 0;\r\n        let offsetY = 0;\r\n        let duration = 0;\r\n        let easingFcn = EasingFunctions.Linear;\r\n        if (args[0] instanceof Vector) {\r\n            offsetX = args[0].x;\r\n            offsetY = args[0].y;\r\n            duration = args[1];\r\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\r\n        }\r\n        else {\r\n            offsetX = args[0];\r\n            offsetY = args[1];\r\n            duration = args[2];\r\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\r\n        }\r\n        this._queue.add(new EaseBy(this._entity, offsetX, offsetY, duration, easingFcn));\r\n        return this;\r\n    }\r\n    moveTo(xOrPos, yOrSpeed, speedOrUndefined) {\r\n        let x = 0;\r\n        let y = 0;\r\n        let speed = 0;\r\n        if (xOrPos instanceof Vector) {\r\n            x = xOrPos.x;\r\n            y = xOrPos.y;\r\n            speed = yOrSpeed;\r\n        }\r\n        else {\r\n            x = xOrPos;\r\n            y = yOrSpeed;\r\n            speed = speedOrUndefined;\r\n        }\r\n        this._queue.add(new MoveTo(this._entity, x, y, speed));\r\n        return this;\r\n    }\r\n    moveBy(xOffsetOrVector, yOffsetOrSpeed, speedOrUndefined) {\r\n        let xOffset = 0;\r\n        let yOffset = 0;\r\n        let speed = 0;\r\n        if (xOffsetOrVector instanceof Vector) {\r\n            xOffset = xOffsetOrVector.x;\r\n            yOffset = xOffsetOrVector.y;\r\n            speed = yOffsetOrSpeed;\r\n        }\r\n        else {\r\n            xOffset = xOffsetOrVector;\r\n            yOffset = yOffsetOrSpeed;\r\n            speed = speedOrUndefined;\r\n        }\r\n        this._queue.add(new MoveBy(this._entity, xOffset, yOffset, speed));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will rotate an actor to the specified angle at the speed\r\n     * specified (in radians per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param speed         The angular velocity of the rotation specified in radians per second\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    rotateTo(angleRadians, speed, rotationType) {\r\n        this._queue.add(new RotateTo(this._entity, angleRadians, speed, rotationType));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\r\n     * in radians/sec and return back the actor. This method is part\r\n     * of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\r\n     * @param speed          The speed in radians/sec the actor should rotate at\r\n     * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\r\n     */\r\n    rotateBy(angleRadiansOffset, speed, rotationType) {\r\n        this._queue.add(new RotateBy(this._entity, angleRadiansOffset, speed, rotationType));\r\n        return this;\r\n    }\r\n    scaleTo(sizeXOrVector, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\r\n        let sizeX = 1;\r\n        let sizeY = 1;\r\n        let speedX = 0;\r\n        let speedY = 0;\r\n        if (sizeXOrVector instanceof Vector && sizeYOrSpeed instanceof Vector) {\r\n            sizeX = sizeXOrVector.x;\r\n            sizeY = sizeXOrVector.y;\r\n            speedX = sizeYOrSpeed.x;\r\n            speedY = sizeYOrSpeed.y;\r\n        }\r\n        if (typeof sizeXOrVector === 'number' && typeof sizeYOrSpeed === 'number') {\r\n            sizeX = sizeXOrVector;\r\n            sizeY = sizeYOrSpeed;\r\n            speedX = speedXOrUndefined;\r\n            speedY = speedYOrUndefined;\r\n        }\r\n        this._queue.add(new ScaleTo(this._entity, sizeX, sizeY, speedX, speedY));\r\n        return this;\r\n    }\r\n    scaleBy(sizeOffsetXOrVector, sizeOffsetYOrSpeed, speed) {\r\n        let sizeOffsetX = 1;\r\n        let sizeOffsetY = 1;\r\n        if (sizeOffsetXOrVector instanceof Vector) {\r\n            sizeOffsetX = sizeOffsetXOrVector.x;\r\n            sizeOffsetY = sizeOffsetXOrVector.y;\r\n            speed = sizeOffsetYOrSpeed;\r\n        }\r\n        if (typeof sizeOffsetXOrVector === 'number' && typeof sizeOffsetYOrSpeed === 'number') {\r\n            sizeOffsetX = sizeOffsetXOrVector;\r\n            sizeOffsetY = sizeOffsetYOrSpeed;\r\n        }\r\n        this._queue.add(new ScaleBy(this._entity, sizeOffsetX, sizeOffsetY, speed));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause an actor to blink (become visible and not\r\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\r\n     * the actor should be visible per blink, and the amount of time not visible.\r\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n     * @param numBlinks       The number of times to blink\r\n     */\r\n    blink(timeVisible, timeNotVisible, numBlinks = 1) {\r\n        this._queue.add(new Blink(this._entity, timeVisible, timeNotVisible, numBlinks));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause an actor's opacity to change from its current value\r\n     * to the provided value by a specified time (in milliseconds). This method is\r\n     * part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param opacity  The ending opacity\r\n     * @param time     The time it should take to fade the actor (in milliseconds)\r\n     */\r\n    fade(opacity, time) {\r\n        this._queue.add(new Fade(this._entity, opacity, time));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will delay the next action from executing for a certain\r\n     * amount of time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n     */\r\n    delay(time) {\r\n        this._queue.add(new Delay(time));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will add an action to the queue that will remove the actor from the\r\n     * scene once it has completed its previous  Any actions on the\r\n     * action queue after this action will not be executed.\r\n     */\r\n    die() {\r\n        this._queue.add(new Die(this._entity));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method allows you to call an arbitrary method as the next action in the\r\n     * action queue. This is useful if you want to execute code in after a specific\r\n     * action, i.e An actor arrives at a destination after traversing a path\r\n     */\r\n    callMethod(method) {\r\n        this._queue.add(new CallMethod(method));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\r\n     * will repeat forever\r\n     */\r\n    repeat(repeatBuilder, times) {\r\n        if (!times) {\r\n            this.repeatForever(repeatBuilder);\r\n            return this;\r\n        }\r\n        this._queue.add(new Repeat(this._entity, repeatBuilder, times));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     */\r\n    repeatForever(repeatBuilder) {\r\n        this._queue.add(new RepeatForever(this._entity, repeatBuilder));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the entity to follow another at a specified distance\r\n     * @param entity           The entity to follow\r\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n     */\r\n    follow(entity, followDistance) {\r\n        if (followDistance === undefined) {\r\n            this._queue.add(new Follow(this._entity, entity));\r\n        }\r\n        else {\r\n            this._queue.add(new Follow(this._entity, entity, followDistance));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the entity to move towards another until they\r\n     * collide \"meet\" at a specified speed.\r\n     * @param entity  The entity to meet\r\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n     */\r\n    meet(entity, speed) {\r\n        if (speed === undefined) {\r\n            this._queue.add(new Meet(this._entity, entity));\r\n        }\r\n        else {\r\n            this._queue.add(new Meet(this._entity, entity, speed));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     */\r\n    toPromise() {\r\n        const temp = new Promise((resolve) => {\r\n            this._queue.add(new CallMethod(() => {\r\n                resolve();\r\n            }));\r\n        });\r\n        return temp;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/ActionsComponent.ts\n\r\n\r\n\r\n\r\n;\r\nclass ActionsComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.actions';\r\n        this.dependencies = [TransformComponent, MotionComponent];\r\n    }\r\n    onAdd(entity) {\r\n        this._ctx = new ActionContext(entity);\r\n    }\r\n    onRemove() {\r\n        this._ctx = null;\r\n    }\r\n    /**\r\n     * Returns the internal action queue\r\n     * @returns action queue\r\n     */\r\n    getQueue() {\r\n        var _a;\r\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.getQueue();\r\n    }\r\n    runAction(action) {\r\n        var _a;\r\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.runAction(action);\r\n    }\r\n    /**\r\n     * Updates the internal action context, performing action and moving through the internal queue\r\n     * @param elapsedMs\r\n     */\r\n    update(elapsedMs) {\r\n        var _a;\r\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.update(elapsedMs);\r\n    }\r\n    /**\r\n     * Clears all queued actions from the Actor\r\n     */\r\n    clearActions() {\r\n        var _a;\r\n        (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.clearActions();\r\n    }\r\n    easeTo(...args) {\r\n        return this._ctx.easeTo.apply(this._ctx, args);\r\n    }\r\n    easeBy(...args) {\r\n        return this._ctx.easeBy.apply(this._ctx, args);\r\n    }\r\n    moveTo(xOrPos, yOrSpeed, speedOrUndefined) {\r\n        return this._ctx.moveTo.apply(this._ctx, [xOrPos, yOrSpeed, speedOrUndefined]);\r\n    }\r\n    moveBy(xOffsetOrVector, yOffsetOrSpeed, speedOrUndefined) {\r\n        return this._ctx.moveBy.apply(this._ctx, [xOffsetOrVector, yOffsetOrSpeed, speedOrUndefined]);\r\n    }\r\n    /**\r\n     * This method will rotate an actor to the specified angle at the speed\r\n     * specified (in radians per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param speed         The angular velocity of the rotation specified in radians per second\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    rotateTo(angleRadians, speed, rotationType) {\r\n        return this._ctx.rotateTo(angleRadians, speed, rotationType);\r\n    }\r\n    /**\r\n     * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\r\n     * in radians/sec and return back the actor. This method is part\r\n     * of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\r\n     * @param speed          The speed in radians/sec the actor should rotate at\r\n     * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\r\n     */\r\n    rotateBy(angleRadiansOffset, speed, rotationType) {\r\n        return this._ctx.rotateBy(angleRadiansOffset, speed, rotationType);\r\n    }\r\n    scaleTo(sizeXOrVector, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\r\n        return this._ctx.scaleTo.apply(this._ctx, [sizeXOrVector, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined]);\r\n    }\r\n    scaleBy(sizeOffsetXOrVector, sizeOffsetYOrSpeed, speed) {\r\n        return this._ctx.scaleBy.apply(this._ctx, [sizeOffsetXOrVector, sizeOffsetYOrSpeed, speed]);\r\n    }\r\n    /**\r\n     * This method will cause an actor to blink (become visible and not\r\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\r\n     * the actor should be visible per blink, and the amount of time not visible.\r\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n     * @param numBlinks       The number of times to blink\r\n     */\r\n    blink(timeVisible, timeNotVisible, numBlinks) {\r\n        return this._ctx.blink(timeVisible, timeNotVisible, numBlinks);\r\n    }\r\n    /**\r\n     * This method will cause an actor's opacity to change from its current value\r\n     * to the provided value by a specified time (in milliseconds). This method is\r\n     * part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param opacity  The ending opacity\r\n     * @param time     The time it should take to fade the actor (in milliseconds)\r\n     */\r\n    fade(opacity, time) {\r\n        return this._ctx.fade(opacity, time);\r\n    }\r\n    /**\r\n     * This method will delay the next action from executing for a certain\r\n     * amount of time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n     */\r\n    delay(time) {\r\n        return this._ctx.delay(time);\r\n    }\r\n    /**\r\n     * This method will add an action to the queue that will remove the actor from the\r\n     * scene once it has completed its previous  Any actions on the\r\n     * action queue after this action will not be executed.\r\n     */\r\n    die() {\r\n        return this._ctx.die();\r\n    }\r\n    /**\r\n     * This method allows you to call an arbitrary method as the next action in the\r\n     * action queue. This is useful if you want to execute code in after a specific\r\n     * action, i.e An actor arrives at a destination after traversing a path\r\n     */\r\n    callMethod(method) {\r\n        return this._ctx.callMethod(method);\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\r\n     * will repeat forever\r\n     */\r\n    repeat(repeatBuilder, times) {\r\n        return this._ctx.repeat(repeatBuilder, times);\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     */\r\n    repeatForever(repeatBuilder) {\r\n        return this._ctx.repeatForever(repeatBuilder);\r\n    }\r\n    /**\r\n     * This method will cause the entity to follow another at a specified distance\r\n     * @param entity           The entity to follow\r\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n     */\r\n    follow(entity, followDistance) {\r\n        return this._ctx.follow(entity, followDistance);\r\n    }\r\n    /**\r\n     * This method will cause the entity to move towards another until they\r\n     * collide \"meet\" at a specified speed.\r\n     * @param entity  The entity to meet\r\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n     */\r\n    meet(entity, speed) {\r\n        return this._ctx.meet(entity, speed);\r\n    }\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     */\r\n    toPromise() {\r\n        return this._ctx.toPromise();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/FontCommon.ts\n/**\r\n * Enum representing the different font size units\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\r\n */\r\nvar FontUnit;\r\n(function (FontUnit) {\r\n    /**\r\n     * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\r\n     */\r\n    FontUnit[\"Em\"] = \"em\";\r\n    /**\r\n     * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\r\n     */\r\n    FontUnit[\"Rem\"] = \"rem\";\r\n    /**\r\n     * Pixel is a unit of length in screen pixels\r\n     */\r\n    FontUnit[\"Px\"] = \"px\";\r\n    /**\r\n     * Point is a physical unit length (1/72 of an inch)\r\n     */\r\n    FontUnit[\"Pt\"] = \"pt\";\r\n    /**\r\n     * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\r\n     */\r\n    FontUnit[\"Percent\"] = \"%\";\r\n})(FontUnit || (FontUnit = {}));\r\n/**\r\n * Enum representing the different horizontal text alignments\r\n */\r\nvar TextAlign;\r\n(function (TextAlign) {\r\n    /**\r\n     * The text is left-aligned.\r\n     */\r\n    TextAlign[\"Left\"] = \"left\";\r\n    /**\r\n     * The text is right-aligned.\r\n     */\r\n    TextAlign[\"Right\"] = \"right\";\r\n    /**\r\n     * The text is centered.\r\n     */\r\n    TextAlign[\"Center\"] = \"center\";\r\n    /**\r\n     * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\r\n     * right-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[\"Start\"] = \"start\";\r\n    /**\r\n     * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\r\n     * left-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[\"End\"] = \"end\";\r\n})(TextAlign || (TextAlign = {}));\r\n/**\r\n * Enum representing the different baseline text alignments\r\n */\r\nvar BaseAlign;\r\n(function (BaseAlign) {\r\n    /**\r\n     * The text baseline is the top of the em square.\r\n     */\r\n    BaseAlign[\"Top\"] = \"top\";\r\n    /**\r\n     * The text baseline is the hanging baseline.  Currently unsupported; this will act like\r\n     * alphabetic.\r\n     */\r\n    BaseAlign[\"Hanging\"] = \"hanging\";\r\n    /**\r\n     * The text baseline is the middle of the em square.\r\n     */\r\n    BaseAlign[\"Middle\"] = \"middle\";\r\n    /**\r\n     * The text baseline is the normal alphabetic baseline.\r\n     */\r\n    BaseAlign[\"Alphabetic\"] = \"alphabetic\";\r\n    /**\r\n     * The text baseline is the ideographic baseline; this is the bottom of\r\n     * the body of the characters, if the main body of characters protrudes\r\n     * beneath the alphabetic baseline.  Currently unsupported; this will\r\n     * act like alphabetic.\r\n     */\r\n    BaseAlign[\"Ideographic\"] = \"ideographic\";\r\n    /**\r\n     * The text baseline is the bottom of the bounding box.  This differs\r\n     * from the ideographic baseline in that the ideographic baseline\r\n     * doesn't consider descenders.\r\n     */\r\n    BaseAlign[\"Bottom\"] = \"bottom\";\r\n})(BaseAlign || (BaseAlign = {}));\r\n/**\r\n * Enum representing the different possible font styles\r\n */\r\nvar FontStyle;\r\n(function (FontStyle) {\r\n    FontStyle[\"Normal\"] = \"normal\";\r\n    FontStyle[\"Italic\"] = \"italic\";\r\n    FontStyle[\"Oblique\"] = \"oblique\";\r\n})(FontStyle || (FontStyle = {}));\r\n/**\r\n * Enum representing the text direction, useful for other languages, or writing text in reverse\r\n */\r\nvar Direction;\r\n(function (Direction) {\r\n    Direction[\"LeftToRight\"] = \"ltr\";\r\n    Direction[\"RightToLeft\"] = \"rtl\";\r\n})(Direction || (Direction = {}));\r\n\n;// CONCATENATED MODULE: ./Graphics/FontTextInstance.ts\n\r\n\r\n\r\n\r\nclass FontTextInstance {\r\n    constructor(font, text, color, maxWidth) {\r\n        this.font = font;\r\n        this.text = text;\r\n        this.color = color;\r\n        this.maxWidth = maxWidth;\r\n        this._textFragments = [];\r\n        this.disposed = false;\r\n        this._dirty = true;\r\n        this.canvas = document.createElement('canvas');\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this.dimensions = this.measureText(text);\r\n        this._setDimension(this.dimensions, this.ctx);\r\n        this._lastHashCode = this.getHashCode();\r\n    }\r\n    measureText(text, maxWidth) {\r\n        if (this.disposed) {\r\n            throw Error('Accessing disposed text instance! ' + this.text);\r\n        }\r\n        let lines = null;\r\n        if (maxWidth != null) {\r\n            lines = this._getLinesFromText(text, maxWidth);\r\n        }\r\n        else {\r\n            lines = text.split('\\n');\r\n        }\r\n        const maxWidthLine = lines.reduce((a, b) => {\r\n            return a.length > b.length ? a : b;\r\n        });\r\n        this._applyFont(this.ctx); // font must be applied to the context to measure it\r\n        const metrics = this.ctx.measureText(maxWidthLine);\r\n        let textHeight = Math.abs(metrics.actualBoundingBoxAscent) + Math.abs(metrics.actualBoundingBoxDescent);\r\n        // TODO lineheight makes the text bounds wonky\r\n        const lineAdjustedHeight = textHeight * lines.length;\r\n        textHeight = lineAdjustedHeight;\r\n        const bottomBounds = lineAdjustedHeight - Math.abs(metrics.actualBoundingBoxAscent);\r\n        const x = 0;\r\n        const y = 0;\r\n        const measurement = new BoundingBox({\r\n            left: x - Math.abs(metrics.actualBoundingBoxLeft) - this.font.padding,\r\n            top: y - Math.abs(metrics.actualBoundingBoxAscent) - this.font.padding,\r\n            bottom: y + bottomBounds + this.font.padding,\r\n            right: x + Math.abs(metrics.actualBoundingBoxRight) + this.font.padding\r\n        });\r\n        return measurement;\r\n    }\r\n    _setDimension(textBounds, bitmap) {\r\n        // Changing the width and height clears the context properties\r\n        // We double the bitmap width to account for all possible alignment\r\n        // We scale by \"quality\" so we render text without jaggies\r\n        bitmap.canvas.width = (textBounds.width + this.font.padding * 2) * 2 * this.font.quality;\r\n        bitmap.canvas.height = (textBounds.height + this.font.padding * 2) * 2 * this.font.quality;\r\n    }\r\n    static getHashCode(font, text, color) {\r\n        var _a;\r\n        const hash = text +\r\n            '__hashcode__' +\r\n            font.fontString +\r\n            font.showDebug +\r\n            font.textAlign +\r\n            font.baseAlign +\r\n            font.direction +\r\n            JSON.stringify(font.shadow) +\r\n            (font.padding.toString() +\r\n                font.smoothing.toString() +\r\n                font.lineWidth.toString() +\r\n                font.lineDash.toString() +\r\n                ((_a = font.strokeColor) === null || _a === void 0 ? void 0 : _a.toString()) +\r\n                (color ? color.toString() : font.color.toString()));\r\n        return hash;\r\n    }\r\n    getHashCode(includeColor = true) {\r\n        return FontTextInstance.getHashCode(this.font, this.text, includeColor ? this.color : undefined);\r\n    }\r\n    _applyRasterProperties(ctx) {\r\n        var _a, _b;\r\n        ctx.translate(this.font.padding, this.font.padding);\r\n        ctx.imageSmoothingEnabled = this.font.smoothing;\r\n        ctx.lineWidth = this.font.lineWidth;\r\n        ctx.setLineDash((_a = this.font.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\r\n        ctx.strokeStyle = (_b = this.font.strokeColor) === null || _b === void 0 ? void 0 : _b.toString();\r\n        ctx.fillStyle = this.color.toString();\r\n    }\r\n    _applyFont(ctx) {\r\n        ctx.resetTransform();\r\n        ctx.translate(this.font.padding + ctx.canvas.width / 2, this.font.padding + ctx.canvas.height / 2);\r\n        ctx.scale(this.font.quality, this.font.quality);\r\n        ctx.textAlign = this.font.textAlign;\r\n        ctx.textBaseline = this.font.baseAlign;\r\n        ctx.font = this.font.fontString;\r\n        ctx.direction = this.font.direction;\r\n        if (this.font.shadow) {\r\n            ctx.shadowColor = this.font.shadow.color.toString();\r\n            ctx.shadowBlur = this.font.shadow.blur;\r\n            ctx.shadowOffsetX = this.font.shadow.offset.x;\r\n            ctx.shadowOffsetY = this.font.shadow.offset.y;\r\n        }\r\n    }\r\n    _drawText(ctx, lines, lineHeight) {\r\n        this._applyRasterProperties(ctx);\r\n        this._applyFont(ctx);\r\n        for (let i = 0; i < lines.length; i++) {\r\n            const line = lines[i];\r\n            if (this.color) {\r\n                ctx.fillText(line, 0, i * lineHeight);\r\n            }\r\n            if (this.font.strokeColor) {\r\n                ctx.strokeText(line, 0, i * lineHeight);\r\n            }\r\n        }\r\n        if (this.font.showDebug) {\r\n            // Horizontal line\r\n            /* istanbul ignore next */\r\n            line(ctx, Color.Green, -ctx.canvas.width / 2, 0, ctx.canvas.width / 2, 0, 2);\r\n            // Vertical line\r\n            /* istanbul ignore next */\r\n            line(ctx, Color.Red, 0, -ctx.canvas.height / 2, 0, ctx.canvas.height / 2, 2);\r\n        }\r\n    }\r\n    _splitTextBitmap(bitmap) {\r\n        const textImages = [];\r\n        let currentX = 0;\r\n        let currentY = 0;\r\n        // 4k is the max for mobile devices\r\n        const width = Math.min(4096, bitmap.canvas.width);\r\n        const height = Math.min(4096, bitmap.canvas.height);\r\n        // Splits the original bitmap into 4k max chunks\r\n        while (currentX < bitmap.canvas.width) {\r\n            while (currentY < bitmap.canvas.height) {\r\n                // create new bitmap\r\n                const canvas = document.createElement('canvas');\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                const ctx = canvas.getContext('2d');\r\n                // draw current slice to new bitmap in < 4k chunks\r\n                ctx.drawImage(bitmap.canvas, currentX, currentY, width, height, 0, 0, width, height);\r\n                textImages.push({ x: currentX, y: currentY, canvas });\r\n                currentY += height;\r\n            }\r\n            currentX += width;\r\n            currentY = 0;\r\n        }\r\n        return textImages;\r\n    }\r\n    flagDirty() {\r\n        this._dirty = true;\r\n    }\r\n    render(ex, x, y, maxWidth) {\r\n        if (this.disposed) {\r\n            throw Error('Accessing disposed text instance! ' + this.text);\r\n        }\r\n        this._ex = ex;\r\n        const hashCode = this.getHashCode();\r\n        if (this._lastHashCode !== hashCode) {\r\n            this._dirty = true;\r\n        }\r\n        // Calculate image chunks\r\n        if (this._dirty) {\r\n            this.dimensions = this.measureText(this.text, maxWidth);\r\n            this._setDimension(this.dimensions, this.ctx);\r\n            const lines = this._getLinesFromText(this.text, maxWidth);\r\n            const lineHeight = this.dimensions.height / lines.length;\r\n            // draws the text to the main bitmap\r\n            this._drawText(this.ctx, lines, lineHeight);\r\n            // clear any out old fragments\r\n            if (ex instanceof ExcaliburGraphicsContextWebGL) {\r\n                for (const frag of this._textFragments) {\r\n                    ex.textureLoader.delete(frag.canvas);\r\n                }\r\n            }\r\n            // splits to < 4k fragments for large text\r\n            this._textFragments = this._splitTextBitmap(this.ctx);\r\n            if (ex instanceof ExcaliburGraphicsContextWebGL) {\r\n                for (const frag of this._textFragments) {\r\n                    ex.textureLoader.load(frag.canvas, this.font.filtering, true);\r\n                }\r\n            }\r\n            this._lastHashCode = hashCode;\r\n            this._dirty = false;\r\n        }\r\n        // draws the bitmap fragments to excalibur graphics context\r\n        for (const frag of this._textFragments) {\r\n            ex.drawImage(frag.canvas, 0, 0, frag.canvas.width, frag.canvas.height, frag.x / this.font.quality + x - this.ctx.canvas.width / this.font.quality / 2, frag.y / this.font.quality + y - this.ctx.canvas.height / this.font.quality / 2, frag.canvas.width / this.font.quality, frag.canvas.height / this.font.quality);\r\n        }\r\n    }\r\n    dispose() {\r\n        this.disposed = true;\r\n        this.dimensions = undefined;\r\n        this.canvas = undefined;\r\n        this.ctx = undefined;\r\n        if (this._ex instanceof ExcaliburGraphicsContextWebGL) {\r\n            for (const frag of this._textFragments) {\r\n                this._ex.textureLoader.delete(frag.canvas);\r\n            }\r\n        }\r\n        this._textFragments.length = 0;\r\n    }\r\n    _getLinesFromText(text, maxWidth) {\r\n        if (this._chachedText === text && this._cachedRenderWidth === maxWidth) {\r\n            return this._chachedLines;\r\n        }\r\n        const lines = text.split('\\n');\r\n        if (maxWidth == null) {\r\n            return lines;\r\n        }\r\n        // If the current line goes past the maxWidth, append a new line without modifying the underlying text.\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let line = lines[i];\r\n            let newLine = '';\r\n            if (this.measureText(line).width > maxWidth) {\r\n                while (this.measureText(line).width > maxWidth) {\r\n                    newLine = line[line.length - 1] + newLine;\r\n                    line = line.slice(0, -1); // Remove last character from line\r\n                }\r\n                // Update the array with our new values\r\n                lines[i] = line;\r\n                lines[i + 1] = newLine;\r\n            }\r\n        }\r\n        this._chachedText = text;\r\n        this._chachedLines = lines;\r\n        this._cachedRenderWidth = maxWidth;\r\n        return lines;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/FontCache.ts\n\r\n\r\nclass FontCache {\r\n    static measureText(text, font, maxWidth) {\r\n        const hash = FontTextInstance.getHashCode(font, text);\r\n        if (FontCache._MEASURE_CACHE.has(hash)) {\r\n            return FontCache._MEASURE_CACHE.get(hash);\r\n        }\r\n        FontCache._LOGGER.debug('Font text measurement cache miss');\r\n        const measurement = font.measureTextWithoutCache(text, maxWidth);\r\n        FontCache._MEASURE_CACHE.set(hash, measurement);\r\n        return measurement;\r\n    }\r\n    static getTextInstance(text, font, color) {\r\n        const hash = FontTextInstance.getHashCode(font, text, color);\r\n        let textInstance = FontCache._TEXT_CACHE.get(hash);\r\n        if (!textInstance) {\r\n            textInstance = new FontTextInstance(font, text, color);\r\n            FontCache._TEXT_CACHE.set(hash, textInstance);\r\n            FontCache._LOGGER.debug('Font text instance cache miss');\r\n        }\r\n        // Cache the bitmap for certain amount of time\r\n        FontCache._TEXT_USAGE.set(textInstance, performance.now());\r\n        return textInstance;\r\n    }\r\n    static checkAndClearCache() {\r\n        const deferred = [];\r\n        const currentHashCodes = new Set();\r\n        for (const [textInstance, time] of FontCache._TEXT_USAGE.entries()) {\r\n            // if bitmap hasn't been used in 100 ms clear it\r\n            if (time + 100 < performance.now()) {\r\n                FontCache._LOGGER.debug(`Text cache entry timed out ${textInstance.text}`);\r\n                deferred.push(textInstance);\r\n                textInstance.dispose();\r\n            }\r\n            else {\r\n                const hash = textInstance.getHashCode(false);\r\n                currentHashCodes.add(hash);\r\n            }\r\n        }\r\n        // Deferred removal of text instances\r\n        deferred.forEach((t) => {\r\n            FontCache._TEXT_USAGE.delete(t);\r\n        });\r\n        // Regenerate text instance cache\r\n        this._TEXT_CACHE.clear();\r\n        for (const [textInstance] of this._TEXT_USAGE.entries()) {\r\n            this._TEXT_CACHE.set(textInstance.getHashCode(), textInstance);\r\n        }\r\n        // Regenerated measurement cache\r\n        const newTextMeasurementCache = new Map();\r\n        for (const current of currentHashCodes) {\r\n            if (FontCache._MEASURE_CACHE.has(current)) {\r\n                newTextMeasurementCache.set(current, FontCache._MEASURE_CACHE.get(current));\r\n            }\r\n        }\r\n        this._MEASURE_CACHE.clear();\r\n        this._MEASURE_CACHE = newTextMeasurementCache;\r\n    }\r\n    static get cacheSize() {\r\n        return FontCache._TEXT_USAGE.size;\r\n    }\r\n    /**\r\n     * Force clear all cached text bitmaps\r\n     */\r\n    static clearCache() {\r\n        for (const [textInstance] of FontCache._TEXT_USAGE.entries()) {\r\n            textInstance.dispose();\r\n        }\r\n        FontCache._TEXT_USAGE.clear();\r\n        FontCache._TEXT_CACHE.clear();\r\n        FontCache._MEASURE_CACHE.clear();\r\n    }\r\n}\r\nFontCache._LOGGER = Logger.getInstance();\r\nFontCache._TEXT_USAGE = new Map();\r\nFontCache._TEXT_CACHE = new Map();\r\nFontCache._MEASURE_CACHE = new Map();\r\n\n;// CONCATENATED MODULE: ./Graphics/Font.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Represents a system or web font in Excalibur\r\n *\r\n * If no options specified, the system sans-serif 10 pixel is used\r\n *\r\n * If loading a custom web font be sure to have the font loaded before you use it https://erikonarheim.com/posts/dont-test-fonts/\r\n */\r\nclass Font extends Graphic {\r\n    constructor(options = {}) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u;\r\n        super(options); // <- Graphics properties\r\n        /**\r\n         * Set the font filtering mode, by default set to [[ImageFiltering.Blended]] regardless of the engine default smoothing\r\n         *\r\n         * If you have a pixel style font that may be a reason to switch this to [[ImageFiltering.Pixel]]\r\n         */\r\n        this.filtering = ImageFiltering.Blended;\r\n        /**\r\n         * Font quality determines the size of the underlying raster text, higher quality means less jagged edges.\r\n         * If quality is set to 1, then just enough raster bitmap is generated to render the text.\r\n         *\r\n         * You can think of quality as how zoomed in to the text you can get before seeing jagged edges.\r\n         *\r\n         * (Default 2)\r\n         */\r\n        this.quality = 2;\r\n        // Raster properties for fonts\r\n        this.padding = 2;\r\n        this.smoothing = false;\r\n        this.lineWidth = 1;\r\n        this.lineDash = [];\r\n        this.color = Color.Black;\r\n        this.family = 'sans-serif';\r\n        this.style = FontStyle.Normal;\r\n        this.bold = false;\r\n        this.unit = FontUnit.Px;\r\n        this.textAlign = TextAlign.Left;\r\n        this.baseAlign = BaseAlign.Alphabetic;\r\n        this.direction = Direction.LeftToRight;\r\n        this.size = 10;\r\n        this.shadow = null;\r\n        this._textBounds = new BoundingBox();\r\n        this._textMeasurement = new FontTextInstance(this, '', Color.Black);\r\n        // Raster properties\r\n        this.smoothing = (_a = options === null || options === void 0 ? void 0 : options.smoothing) !== null && _a !== void 0 ? _a : this.smoothing;\r\n        this.padding = (_b = options === null || options === void 0 ? void 0 : options.padding) !== null && _b !== void 0 ? _b : this.padding;\r\n        this.color = (_c = options === null || options === void 0 ? void 0 : options.color) !== null && _c !== void 0 ? _c : this.color;\r\n        this.strokeColor = (_d = options === null || options === void 0 ? void 0 : options.strokeColor) !== null && _d !== void 0 ? _d : this.strokeColor;\r\n        this.lineDash = (_e = options === null || options === void 0 ? void 0 : options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\r\n        this.lineWidth = (_f = options === null || options === void 0 ? void 0 : options.lineWidth) !== null && _f !== void 0 ? _f : this.lineWidth;\r\n        this.filtering = (_g = options === null || options === void 0 ? void 0 : options.filtering) !== null && _g !== void 0 ? _g : this.filtering;\r\n        // Font specific properties\r\n        this.family = (_h = options === null || options === void 0 ? void 0 : options.family) !== null && _h !== void 0 ? _h : this.family;\r\n        this.style = (_j = options === null || options === void 0 ? void 0 : options.style) !== null && _j !== void 0 ? _j : this.style;\r\n        this.bold = (_k = options === null || options === void 0 ? void 0 : options.bold) !== null && _k !== void 0 ? _k : this.bold;\r\n        this.size = (_l = options === null || options === void 0 ? void 0 : options.size) !== null && _l !== void 0 ? _l : this.size;\r\n        this.unit = (_m = options === null || options === void 0 ? void 0 : options.unit) !== null && _m !== void 0 ? _m : this.unit;\r\n        this.textAlign = (_o = options === null || options === void 0 ? void 0 : options.textAlign) !== null && _o !== void 0 ? _o : this.textAlign;\r\n        this.baseAlign = (_p = options === null || options === void 0 ? void 0 : options.baseAlign) !== null && _p !== void 0 ? _p : this.baseAlign;\r\n        this.direction = (_q = options === null || options === void 0 ? void 0 : options.direction) !== null && _q !== void 0 ? _q : this.direction;\r\n        this.quality = (_r = options === null || options === void 0 ? void 0 : options.quality) !== null && _r !== void 0 ? _r : this.quality;\r\n        if (options === null || options === void 0 ? void 0 : options.shadow) {\r\n            this.shadow = {};\r\n            this.shadow.blur = (_s = options.shadow.blur) !== null && _s !== void 0 ? _s : this.shadow.blur;\r\n            this.shadow.offset = (_t = options.shadow.offset) !== null && _t !== void 0 ? _t : this.shadow.offset;\r\n            this.shadow.color = (_u = options.shadow.color) !== null && _u !== void 0 ? _u : this.shadow.color;\r\n        }\r\n    }\r\n    clone() {\r\n        return new Font({\r\n            ...this.cloneGraphicOptions(),\r\n            size: this.size,\r\n            unit: this.unit,\r\n            family: this.family,\r\n            style: this.style,\r\n            bold: this.bold,\r\n            textAlign: this.textAlign,\r\n            baseAlign: this.baseAlign,\r\n            direction: this.direction,\r\n            shadow: this.shadow\r\n                ? {\r\n                    blur: this.shadow.blur,\r\n                    offset: this.shadow.offset,\r\n                    color: this.shadow.color\r\n                }\r\n                : null\r\n        });\r\n    }\r\n    get fontString() {\r\n        return `${this.style} ${this.bold ? 'bold' : ''} ${this.size}${this.unit} ${this.family}`;\r\n    }\r\n    get localBounds() {\r\n        return this._textBounds;\r\n    }\r\n    _drawImage(_ex, _x, _y) {\r\n        // TODO weird vestigial drawimage\r\n    }\r\n    _rotate(ex) {\r\n        var _a;\r\n        // TODO this needs to change depending on the bounding box...\r\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : this._textBounds.center;\r\n        ex.translate(origin.x, origin.y);\r\n        ex.rotate(this.rotation);\r\n        ex.translate(-origin.x, -origin.y);\r\n    }\r\n    _flip(ex) {\r\n        if (this.flipHorizontal) {\r\n            ex.translate(this._textBounds.width / this.scale.x, 0);\r\n            ex.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ex.translate(0, -this._textBounds.height / 2 / this.scale.y);\r\n            ex.scale(1, -1);\r\n        }\r\n    }\r\n    measureTextWithoutCache(text, maxWidth) {\r\n        return this._textMeasurement.measureText(text, maxWidth);\r\n    }\r\n    /**\r\n     * Returns a BoundingBox that is the total size of the text including multiple lines\r\n     *\r\n     * Does not include any padding or adjustment\r\n     * @param text\r\n     * @returns BoundingBox\r\n     */\r\n    measureText(text, maxWidth) {\r\n        return FontCache.measureText(text, this, maxWidth);\r\n    }\r\n    _postDraw(ex) {\r\n        ex.restore();\r\n    }\r\n    render(ex, text, colorOverride, x, y, maxWidth) {\r\n        const textInstance = FontCache.getTextInstance(text, this, colorOverride);\r\n        // Apply affine transformations\r\n        this._textBounds = textInstance.dimensions;\r\n        this._preDraw(ex, x, y);\r\n        textInstance.render(ex, x, y, maxWidth);\r\n        this._postDraw(ex);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Text.ts\n\r\n\r\n\r\n/**\r\n * Represent Text graphics in excalibur\r\n *\r\n * Useful for in game labels, ui, or overlays\r\n */\r\nclass Text extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this._text = '';\r\n        this._textWidth = 0;\r\n        this._textHeight = 0;\r\n        // This order is important font, color, then text\r\n        this.font = (_a = options.font) !== null && _a !== void 0 ? _a : new Font();\r\n        this.color = (_b = options.color) !== null && _b !== void 0 ? _b : this.color;\r\n        this.text = options.text;\r\n        this.maxWidth = options.maxWidth;\r\n    }\r\n    clone() {\r\n        var _a, _b;\r\n        return new Text({\r\n            text: this.text.slice(),\r\n            color: (_b = (_a = this.color) === null || _a === void 0 ? void 0 : _a.clone()) !== null && _b !== void 0 ? _b : Color.Black,\r\n            font: this.font.clone(),\r\n            maxWidth: this.maxWidth\r\n        });\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    set text(value) {\r\n        this._text = value;\r\n        this._calculateDimension();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n    }\r\n    get width() {\r\n        if (this._textWidth === 0) {\r\n            this._calculateDimension();\r\n        }\r\n        return this._textWidth * this.scale.x;\r\n    }\r\n    get height() {\r\n        if (this._textHeight === 0) {\r\n            this._calculateDimension();\r\n        }\r\n        return this._textHeight * this.scale.y;\r\n    }\r\n    _calculateDimension() {\r\n        const { width, height } = this.font.measureText(this._text, this.maxWidth);\r\n        this._textWidth = width;\r\n        this._textHeight = height;\r\n    }\r\n    get localBounds() {\r\n        return this.font.measureText(this._text, this.maxWidth).scale(this.scale);\r\n    }\r\n    _rotate(_ex) {\r\n        // None this is delegated to font\r\n        // This override erases the default behavior\r\n    }\r\n    _flip(_ex) {\r\n        // None this is delegated to font\r\n        // This override erases the default behavior\r\n    }\r\n    _preDraw(ex, x, y) {\r\n        if (this.isStale() || this.font.isStale()) {\r\n            this.font.flipHorizontal = this.flipHorizontal;\r\n            this.font.flipVertical = this.flipVertical;\r\n            this.font.rotation = this.rotation;\r\n            this.font.origin = this.origin;\r\n            this.font.opacity = this.opacity;\r\n        }\r\n        this.font.tint = this.tint;\r\n        super._preDraw(ex, x, y);\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        var _a;\r\n        let color = Color.Black;\r\n        if (this.font instanceof Font) {\r\n            color = (_a = this.color) !== null && _a !== void 0 ? _a : this.font.color;\r\n        }\r\n        const { width, height } = this.font.measureText(this._text, this.maxWidth);\r\n        this._textWidth = width;\r\n        this._textHeight = height;\r\n        this.font.render(ex, this._text, color, x, y, this.maxWidth);\r\n        if (this.font.showDebug) {\r\n            ex.debug.drawRect(x - width, y - height, width * 2, height * 2);\r\n            if (this.maxWidth != null) {\r\n                ex.debug.drawRect(x, y, this.maxWidth, this.height, {\r\n                    color: Color.Yellow\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actor.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Type guard for checking if something is an Actor\r\n * @param x\r\n */\r\nfunction isActor(x) {\r\n    return x instanceof Actor;\r\n}\r\nconst ActorEvents = {\r\n    CollisionStart: 'collisionstart',\r\n    CollisionEnd: 'collisionend',\r\n    PreCollision: 'precollision',\r\n    PostCollision: 'postcollision',\r\n    Kill: 'kill',\r\n    PreKill: 'prekill',\r\n    PostKill: 'postkill',\r\n    PreDraw: 'predraw',\r\n    PostDraw: 'postdraw',\r\n    PreDebugDraw: 'predebugdraw',\r\n    PostDebugDraw: 'postdebugdraw',\r\n    PointerUp: 'pointerup',\r\n    PointerDown: 'pointerdown',\r\n    PointerEnter: 'pointerenter',\r\n    PointerLeave: 'pointerleave',\r\n    PointerMove: 'pointermove',\r\n    PointerCancel: 'pointercancel',\r\n    Wheel: 'pointerwheel',\r\n    PointerDrag: 'pointerdragstart',\r\n    PointerDragEnd: 'pointerdragend',\r\n    PointerDragEnter: 'pointerdragenter',\r\n    PointerDragLeave: 'pointerdragleave',\r\n    PointerDragMove: 'pointerdragmove',\r\n    EnterViewPort: 'enterviewport',\r\n    ExitViewPort: 'exitviewport'\r\n};\r\n/**\r\n * The most important primitive in Excalibur is an `Actor`. Anything that\r\n * can move on the screen, collide with another `Actor`, respond to events,\r\n * or interact with the current scene, must be an actor. An `Actor` **must**\r\n * be part of a [[Scene]] for it to be drawn to the screen.\r\n */\r\nclass Actor extends Entity {\r\n    /**\r\n     * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\r\n     * acceleration, mass, inertia, etc.\r\n     */\r\n    get body() {\r\n        return this.get(BodyComponent);\r\n    }\r\n    /**\r\n     * Access the Actor's built in [[TransformComponent]]\r\n     */\r\n    get transform() {\r\n        return this.get(TransformComponent);\r\n    }\r\n    /**\r\n     * Access the Actor's built in [[MotionComponent]]\r\n     */\r\n    get motion() {\r\n        return this.get(MotionComponent);\r\n    }\r\n    /**\r\n     * Access to the Actor's built in [[GraphicsComponent]]\r\n     */\r\n    get graphics() {\r\n        return this.get(GraphicsComponent);\r\n    }\r\n    /**\r\n     * Access to the Actor's built in [[ColliderComponent]]\r\n     */\r\n    get collider() {\r\n        return this.get(ColliderComponent);\r\n    }\r\n    /**\r\n     * Access to the Actor's built in [[PointerComponent]] config\r\n     */\r\n    get pointer() {\r\n        return this.get(PointerComponent);\r\n    }\r\n    /**\r\n     * Useful for quickly scripting actor behavior, like moving to a place, patrolling back and forth, blinking, etc.\r\n     *\r\n     *  Access to the Actor's built in [[ActionsComponent]] which forwards to the\r\n     * [[ActionContext|Action context]] of the actor.\r\n     */\r\n    get actions() {\r\n        return this.get(ActionsComponent);\r\n    }\r\n    /**\r\n     * Gets the position vector of the actor in pixels\r\n     */\r\n    get pos() {\r\n        return this.transform.pos;\r\n    }\r\n    /**\r\n     * Sets the position vector of the actor in pixels\r\n     */\r\n    set pos(thePos) {\r\n        this.transform.pos = thePos.clone();\r\n    }\r\n    /**\r\n     * Gets the position vector of the actor from the last frame\r\n     */\r\n    get oldPos() {\r\n        return this.body.oldPos;\r\n    }\r\n    /**\r\n     * Sets the position vector of the actor in the last frame\r\n     */\r\n    set oldPos(thePos) {\r\n        this.body.oldPos.setTo(thePos.x, thePos.y);\r\n    }\r\n    /**\r\n     * Gets the velocity vector of the actor in pixels/sec\r\n     */\r\n    get vel() {\r\n        return this.motion.vel;\r\n    }\r\n    /**\r\n     * Sets the velocity vector of the actor in pixels/sec\r\n     */\r\n    set vel(theVel) {\r\n        this.motion.vel = theVel.clone();\r\n    }\r\n    /**\r\n     * Gets the velocity vector of the actor from the last frame\r\n     */\r\n    get oldVel() {\r\n        return this.body.oldVel;\r\n    }\r\n    /**\r\n     * Sets the velocity vector of the actor from the last frame\r\n     */\r\n    set oldVel(theVel) {\r\n        this.body.oldVel.setTo(theVel.x, theVel.y);\r\n    }\r\n    /**\r\n     * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\r\n     * useful to simulate a gravitational effect.\r\n     */\r\n    get acc() {\r\n        return this.motion.acc;\r\n    }\r\n    /**\r\n     * Sets the acceleration vector of teh actor in pixels/second/second\r\n     */\r\n    set acc(theAcc) {\r\n        this.motion.acc = theAcc.clone();\r\n    }\r\n    /**\r\n     * Sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n     */\r\n    set oldAcc(theAcc) {\r\n        this.body.oldAcc.setTo(theAcc.x, theAcc.y);\r\n    }\r\n    /**\r\n     * Gets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n     */\r\n    get oldAcc() {\r\n        return this.body.oldAcc;\r\n    }\r\n    /**\r\n     * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n     */\r\n    get rotation() {\r\n        return this.transform.rotation;\r\n    }\r\n    /**\r\n     * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n     */\r\n    set rotation(theAngle) {\r\n        this.transform.rotation = theAngle;\r\n    }\r\n    /**\r\n     * Gets the rotational velocity of the actor in radians/second\r\n     */\r\n    get angularVelocity() {\r\n        return this.motion.angularVelocity;\r\n    }\r\n    /**\r\n     * Sets the rotational velocity of the actor in radians/sec\r\n     */\r\n    set angularVelocity(angularVelocity) {\r\n        this.motion.angularVelocity = angularVelocity;\r\n    }\r\n    get scale() {\r\n        return this.get(TransformComponent).scale;\r\n    }\r\n    set scale(scale) {\r\n        this.get(TransformComponent).scale = scale;\r\n    }\r\n    get anchor() {\r\n        return this._anchor;\r\n    }\r\n    set anchor(vec) {\r\n        this._anchor = watch(vec, (v) => this._handleAnchorChange(v));\r\n        this._handleAnchorChange(vec);\r\n    }\r\n    _handleAnchorChange(v) {\r\n        if (this.graphics) {\r\n            this.graphics.anchor = v;\r\n        }\r\n    }\r\n    /**\r\n     * Indicates whether the actor is physically in the viewport\r\n     */\r\n    get isOffScreen() {\r\n        return this.hasTag('ex.offscreen');\r\n    }\r\n    get draggable() {\r\n        return this._draggable;\r\n    }\r\n    set draggable(isDraggable) {\r\n        if (isDraggable) {\r\n            if (isDraggable && !this._draggable) {\r\n                this.events.on('pointerdragstart', this._pointerDragStartHandler);\r\n                this.events.on('pointerdragend', this._pointerDragEndHandler);\r\n                this.events.on('pointerdragmove', this._pointerDragMoveHandler);\r\n                this.events.on('pointerdragleave', this._pointerDragLeaveHandler);\r\n            }\r\n            else if (!isDraggable && this._draggable) {\r\n                this.events.off('pointerdragstart', this._pointerDragStartHandler);\r\n                this.events.off('pointerdragend', this._pointerDragEndHandler);\r\n                this.events.off('pointerdragmove', this._pointerDragMoveHandler);\r\n                this.events.off('pointerdragleave', this._pointerDragLeaveHandler);\r\n            }\r\n            this._draggable = isDraggable;\r\n        }\r\n    }\r\n    /**\r\n     * Sets the color of the actor's current graphic\r\n     */\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(v) {\r\n        var _a;\r\n        this._color = v.clone();\r\n        const defaultLayer = this.graphics.layers.default;\r\n        const currentGraphic = (_a = defaultLayer.graphics[0]) === null || _a === void 0 ? void 0 : _a.graphic;\r\n        if (currentGraphic instanceof Raster || currentGraphic instanceof Text) {\r\n            currentGraphic.color = this._color;\r\n        }\r\n    }\r\n    // #endregion\r\n    /**\r\n     *\r\n     * @param config\r\n     */\r\n    constructor(config) {\r\n        super();\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * The anchor to apply all actor related transformations like rotation,\r\n         * translation, and scaling. By default the anchor is in the center of\r\n         * the actor. By default it is set to the center of the actor (.5, .5)\r\n         *\r\n         * An anchor of (.5, .5) will ensure that drawings are centered.\r\n         *\r\n         * Use `anchor.setTo` to set the anchor to a different point using\r\n         * values between 0 and 1. For example, anchoring to the top-left would be\r\n         * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\r\n         */\r\n        this._anchor = watch(Vector.Half, (v) => this._handleAnchorChange(v));\r\n        /**\r\n         * Convenience reference to the global logger\r\n         */\r\n        this.logger = Logger.getInstance();\r\n        /**\r\n         * Draggable helper\r\n         */\r\n        this._draggable = false;\r\n        this._dragging = false;\r\n        this._pointerDragStartHandler = () => {\r\n            this._dragging = true;\r\n        };\r\n        this._pointerDragEndHandler = () => {\r\n            this._dragging = false;\r\n        };\r\n        this._pointerDragMoveHandler = (pe) => {\r\n            if (this._dragging) {\r\n                this.pos = pe.worldPos;\r\n            }\r\n        };\r\n        this._pointerDragLeaveHandler = (pe) => {\r\n            if (this._dragging) {\r\n                this.pos = pe.worldPos;\r\n            }\r\n        };\r\n        const { name, x, y, pos, coordPlane, scale, width, height, radius, collider, vel, acc, rotation, angularVelocity, z, color, visible, anchor, collisionType, collisionGroup } = {\r\n            ...config\r\n        };\r\n        this._setName(name);\r\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : Actor.defaults.anchor.clone();\r\n        const tx = new TransformComponent();\r\n        this.addComponent(tx);\r\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\r\n        this.rotation = rotation !== null && rotation !== void 0 ? rotation : 0;\r\n        this.scale = scale !== null && scale !== void 0 ? scale : vec(1, 1);\r\n        this.z = z !== null && z !== void 0 ? z : 0;\r\n        tx.coordPlane = coordPlane !== null && coordPlane !== void 0 ? coordPlane : CoordPlane.World;\r\n        this.addComponent(new PointerComponent);\r\n        this.addComponent(new GraphicsComponent({\r\n            anchor: this.anchor\r\n        }));\r\n        this.addComponent(new MotionComponent());\r\n        this.vel = vel !== null && vel !== void 0 ? vel : Vector.Zero;\r\n        this.acc = acc !== null && acc !== void 0 ? acc : Vector.Zero;\r\n        this.angularVelocity = angularVelocity !== null && angularVelocity !== void 0 ? angularVelocity : 0;\r\n        this.addComponent(new ActionsComponent());\r\n        this.addComponent(new BodyComponent());\r\n        this.body.collisionType = collisionType !== null && collisionType !== void 0 ? collisionType : CollisionType.Passive;\r\n        if (collisionGroup) {\r\n            this.body.group = collisionGroup;\r\n        }\r\n        if (collider) {\r\n            this.addComponent(new ColliderComponent(collider));\r\n        }\r\n        else if (radius) {\r\n            this.addComponent(new ColliderComponent(Shape.Circle(radius)));\r\n        }\r\n        else {\r\n            if (width > 0 && height > 0) {\r\n                this.addComponent(new ColliderComponent(Shape.Box(width, height, this.anchor)));\r\n            }\r\n            else {\r\n                this.addComponent(new ColliderComponent()); // no collider\r\n            }\r\n        }\r\n        this.graphics.visible = visible !== null && visible !== void 0 ? visible : true;\r\n        if (color) {\r\n            this.color = color;\r\n            if (width && height) {\r\n                this.graphics.add(new Rectangle({\r\n                    color: color,\r\n                    width,\r\n                    height\r\n                }));\r\n            }\r\n            else if (radius) {\r\n                this.graphics.add(new Circle({\r\n                    color: color,\r\n                    radius\r\n                }));\r\n            }\r\n        }\r\n    }\r\n    clone() {\r\n        const clone = new Actor({\r\n            color: this.color.clone(),\r\n            anchor: this.anchor.clone()\r\n        });\r\n        clone.clearComponents();\r\n        clone.processComponentRemoval();\r\n        // Clone the current actors components\r\n        const components = this.getComponents();\r\n        for (const c of components) {\r\n            clone.addComponent(c.clone(), true);\r\n        }\r\n        return clone;\r\n    }\r\n    /**\r\n     * `onInitialize` is called before the first update of the actor. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     *\r\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\r\n     */\r\n    onInitialize(_engine) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\r\n     *\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * @internal\r\n     */\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n        for (const child of this.children) {\r\n            child._initialize(engine);\r\n        }\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    // #endregion\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPreKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    _prekill(_scene) {\r\n        this.events.emit('prekill', new PreKillEvent(this));\r\n        this.onPreKill(_scene);\r\n    }\r\n    /**\r\n     * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\r\n     *\r\n     * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\r\n     */\r\n    onPreKill(_scene) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPostKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postkill(_scene) {\r\n        this.events.emit('postkill', new PostKillEvent(this));\r\n        this.onPostKill(_scene);\r\n    }\r\n    /**\r\n     * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\r\n     *\r\n     * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\r\n     */\r\n    onPostKill(_scene) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * If the current actor is a member of the scene, this will remove\r\n     * it from the scene graph. It will no longer be drawn or updated.\r\n     */\r\n    kill() {\r\n        if (this.scene) {\r\n            this._prekill(this.scene);\r\n            this.events.emit('kill', new KillEvent(this));\r\n            super.kill();\r\n            this._postkill(this.scene);\r\n        }\r\n        else {\r\n            this.logger.warn(`Cannot kill actor named \"${this.name}\", it was never added to the Scene`);\r\n        }\r\n    }\r\n    /**\r\n     * If the current actor is killed, it will now not be killed.\r\n     */\r\n    unkill() {\r\n        this.active = true;\r\n    }\r\n    /**\r\n     * Indicates wether the actor has been killed.\r\n     */\r\n    isKilled() {\r\n        return !this.active;\r\n    }\r\n    /**\r\n     * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     */\r\n    get z() {\r\n        return this.get(TransformComponent).z;\r\n    }\r\n    /**\r\n     * Sets the z-index of an actor and updates it in the drawing list for the scene.\r\n     * The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     * @param newZ new z-index to assign\r\n     */\r\n    set z(newZ) {\r\n        this.get(TransformComponent).z = newZ;\r\n    }\r\n    /**\r\n     * Get the center point of an actor (global position)\r\n     */\r\n    get center() {\r\n        const globalPos = this.getGlobalPos();\r\n        return new Vector(globalPos.x + this.width / 2 - this.anchor.x * this.width, globalPos.y + this.height / 2 - this.anchor.y * this.height);\r\n    }\r\n    /**\r\n     * Get the local center point of an actor\r\n     */\r\n    get localCenter() {\r\n        return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\r\n    }\r\n    get width() {\r\n        return this.collider.localBounds.width * this.getGlobalScale().x;\r\n    }\r\n    get height() {\r\n        return this.collider.localBounds.height * this.getGlobalScale().y;\r\n    }\r\n    /**\r\n     * Gets this actor's rotation taking into account any parent relationships\r\n     *\r\n     * @returns Rotation angle in radians\r\n     */\r\n    getGlobalRotation() {\r\n        return this.get(TransformComponent).globalRotation;\r\n    }\r\n    /**\r\n     * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\r\n     *\r\n     * @returns Position in world coordinates\r\n     */\r\n    getGlobalPos() {\r\n        return this.get(TransformComponent).globalPos;\r\n    }\r\n    /**\r\n     * Gets the global scale of the Actor\r\n     */\r\n    getGlobalScale() {\r\n        return this.get(TransformComponent).globalScale;\r\n    }\r\n    // #region Collision\r\n    /**\r\n     * Tests whether the x/y specified are contained in the actor\r\n     * @param x  X coordinate to test (in world coordinates)\r\n     * @param y  Y coordinate to test (in world coordinates)\r\n     * @param recurse checks whether the x/y are contained in any child actors (if they exist).\r\n     */\r\n    contains(x, y, recurse = false) {\r\n        const point = vec(x, y);\r\n        const collider = this.get(ColliderComponent);\r\n        collider.update();\r\n        const geom = collider.get();\r\n        if (!geom) {\r\n            return false;\r\n        }\r\n        const containment = geom.contains(point);\r\n        if (recurse) {\r\n            return (containment ||\r\n                this.children.some((child) => {\r\n                    return child.contains(x, y, true);\r\n                }));\r\n        }\r\n        return containment;\r\n    }\r\n    /**\r\n     * Returns true if the two actor.collider's surfaces are less than or equal to the distance specified from each other\r\n     * @param actor     Actor to test\r\n     * @param distance  Distance in pixels to test\r\n     */\r\n    within(actor, distance) {\r\n        const collider = this.get(ColliderComponent);\r\n        const otherCollider = actor.get(ColliderComponent);\r\n        const me = collider.get();\r\n        const other = otherCollider.get();\r\n        if (me && other) {\r\n            return me.getClosestLineBetween(other).getLength() <= distance;\r\n        }\r\n        return false;\r\n    }\r\n    // #endregion\r\n    // #region Update\r\n    /**\r\n     * Called by the Engine, updates the state of the actor\r\n     * @internal\r\n     * @param engine The reference to the current game engine\r\n     * @param delta  The time elapsed since the last update in milliseconds\r\n     */\r\n    update(engine, delta) {\r\n        this._initialize(engine);\r\n        this._preupdate(engine, delta);\r\n        this._postupdate(engine, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before an actor is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after an actor is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(engine, delta) {\r\n        this.events.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(engine, delta) {\r\n        this.events.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    }\r\n}\r\n// #region Properties\r\n/**\r\n * Set defaults for all Actors\r\n */\r\nActor.defaults = {\r\n    anchor: Vector.Half\r\n};\r\n\n;// CONCATENATED MODULE: ./ScreenElement.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Type guard to detect a screen element\r\n */\r\nfunction isScreenElement(actor) {\r\n    return actor instanceof ScreenElement;\r\n}\r\n/**\r\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\r\n * not participate in collisions. Drawn on top of all other actors.\r\n */\r\nclass ScreenElement extends Actor {\r\n    constructor(config) {\r\n        var _a, _b;\r\n        super({ ...config });\r\n        this.get(TransformComponent).coordPlane = CoordPlane.Screen;\r\n        this.anchor = (_a = config === null || config === void 0 ? void 0 : config.anchor) !== null && _a !== void 0 ? _a : vec(0, 0);\r\n        this.body.collisionType = (_b = config === null || config === void 0 ? void 0 : config.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\r\n        this.pointer.useGraphicsBounds = true;\r\n        this.pointer.useColliderShape = false;\r\n        if (!(config === null || config === void 0 ? void 0 : config.collider) &&\r\n            (config === null || config === void 0 ? void 0 : config.width) > 0 &&\r\n            (config === null || config === void 0 ? void 0 : config.height) > 0) {\r\n            this.collider.useBoxCollider(this.width, this.height, this.anchor);\r\n        }\r\n    }\r\n    _initialize(engine) {\r\n        this._engine = engine;\r\n        super._initialize(engine);\r\n    }\r\n    contains(x, y, useWorld = true) {\r\n        if (useWorld) {\r\n            return super.contains(x, y);\r\n        }\r\n        const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\r\n        return super.contains(coords.x, coords.y);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Timer.ts\n\r\n\r\n/**\r\n * The Excalibur timer hooks into the internal timer and fires callbacks,\r\n * after a certain interval, optionally repeating.\r\n */\r\nclass Timer {\r\n    get complete() {\r\n        return this._complete;\r\n    }\r\n    constructor(fcn, interval, repeats, numberOfRepeats, randomRange, random) {\r\n        this._logger = Logger.getInstance();\r\n        this.id = 0;\r\n        this._elapsedTime = 0;\r\n        this._totalTimeAlive = 0;\r\n        this._running = false;\r\n        this._numberOfTicks = 0;\r\n        this.interval = 10;\r\n        this.repeats = false;\r\n        this.maxNumberOfRepeats = -1;\r\n        this.randomRange = [0, 0];\r\n        this._baseInterval = 10;\r\n        this._generateRandomInterval = () => {\r\n            return this._baseInterval + this.random.integer(this.randomRange[0], this.randomRange[1]);\r\n        };\r\n        this._complete = false;\r\n        this.scene = null;\r\n        if (typeof fcn !== 'function') {\r\n            const options = fcn;\r\n            fcn = options.fcn;\r\n            interval = options.interval;\r\n            repeats = options.repeats;\r\n            numberOfRepeats = options.numberOfRepeats;\r\n            randomRange = options.randomRange;\r\n            random = options.random;\r\n        }\r\n        if (!!numberOfRepeats && numberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = numberOfRepeats;\r\n            if (!repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this.id = Timer._MAX_ID++;\r\n        this._callbacks = [];\r\n        this._baseInterval = this.interval = interval;\r\n        if (!!randomRange) {\r\n            if (randomRange[0] > randomRange[1]) {\r\n                throw new Error('min value must be lower than max value for range');\r\n            }\r\n            //We use the instance of ex.Random to generate the range\r\n            this.random = random !== null && random !== void 0 ? random : new Random();\r\n            this.randomRange = randomRange;\r\n            this.interval = this._generateRandomInterval();\r\n            this.on(() => {\r\n                this.interval = this._generateRandomInterval();\r\n            });\r\n        }\r\n        ;\r\n        this.repeats = repeats || this.repeats;\r\n        if (fcn) {\r\n            this.on(fcn);\r\n        }\r\n    }\r\n    /**\r\n     * Adds a new callback to be fired after the interval is complete\r\n     * @param fcn The callback to be added to the callback list, to be fired after the interval is complete.\r\n     */\r\n    on(fcn) {\r\n        this._callbacks.push(fcn);\r\n    }\r\n    /**\r\n     * Removes a callback from the callback list to be fired after the interval is complete.\r\n     * @param fcn The callback to be removed from the callback list, to be fired after the interval is complete.\r\n     */\r\n    off(fcn) {\r\n        const index = this._callbacks.indexOf(fcn);\r\n        this._callbacks.splice(index, 1);\r\n    }\r\n    /**\r\n     * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\r\n     * @param delta  Number of elapsed milliseconds since the last update.\r\n     */\r\n    update(delta) {\r\n        if (this._running) {\r\n            this._totalTimeAlive += delta;\r\n            this._elapsedTime += delta;\r\n            if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\r\n                this._complete = true;\r\n                this._running = false;\r\n                this._elapsedTime = 0;\r\n            }\r\n            if (!this.complete && this._elapsedTime >= this.interval) {\r\n                this._callbacks.forEach((c) => {\r\n                    c.call(this);\r\n                });\r\n                this._numberOfTicks++;\r\n                if (this.repeats) {\r\n                    this._elapsedTime = 0;\r\n                }\r\n                else {\r\n                    this._complete = true;\r\n                    this._running = false;\r\n                    this._elapsedTime = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\r\n     *\r\n     * Warning** you may need to call `timer.start()` again if the timer had completed\r\n     * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\r\n     * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\r\n     */\r\n    reset(newInterval, newNumberOfRepeats) {\r\n        if (!!newInterval && newInterval >= 0) {\r\n            this._baseInterval = this.interval = newInterval;\r\n        }\r\n        if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = newNumberOfRepeats;\r\n            if (!this.repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this._complete = false;\r\n        this._elapsedTime = 0;\r\n        this._numberOfTicks = 0;\r\n    }\r\n    get timesRepeated() {\r\n        return this._numberOfTicks;\r\n    }\r\n    getTimeRunning() {\r\n        return this._totalTimeAlive;\r\n    }\r\n    /**\r\n     * @returns milliseconds until the next action callback, if complete will return 0\r\n     */\r\n    get timeToNextAction() {\r\n        if (this.complete) {\r\n            return 0;\r\n        }\r\n        return this.interval - this._elapsedTime;\r\n    }\r\n    /**\r\n     * @returns milliseconds elapsed toward the next action\r\n     */\r\n    get timeElapsedTowardNextAction() {\r\n        return this._elapsedTime;\r\n    }\r\n    get isRunning() {\r\n        return this._running;\r\n    }\r\n    /**\r\n     * Pauses the timer, time will no longer increment towards the next call\r\n     */\r\n    pause() {\r\n        this._running = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Resumes the timer, time will now increment towards the next call.\r\n     */\r\n    resume() {\r\n        this._running = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Starts the timer, if the timer was complete it will restart the timer and reset the elapsed time counter\r\n     */\r\n    start() {\r\n        if (!this.scene) {\r\n            this._logger.warn('Cannot start a timer not part of a scene, timer wont start until added');\r\n        }\r\n        this._running = true;\r\n        if (this.complete) {\r\n            this._complete = false;\r\n            this._elapsedTime = 0;\r\n            this._numberOfTicks = 0;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Stops the timer and resets the elapsed time counter towards the next action invocation\r\n     */\r\n    stop() {\r\n        this._running = false;\r\n        this._elapsedTime = 0;\r\n        this._numberOfTicks = 0;\r\n        return this;\r\n    }\r\n    /**\r\n     * Cancels the timer, preventing any further executions.\r\n     */\r\n    cancel() {\r\n        this.pause();\r\n        if (this.scene) {\r\n            this.scene.cancelTimer(this);\r\n        }\r\n    }\r\n}\r\nTimer._MAX_ID = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/ParallaxComponent.ts\n\r\n\r\nclass ParallaxComponent extends Component {\r\n    constructor(parallaxFactor) {\r\n        super();\r\n        this.type = 'ex.parallax';\r\n        this.parallaxFactor = vec(1.0, 1.0);\r\n        this.parallaxFactor = parallaxFactor !== null && parallaxFactor !== void 0 ? parallaxFactor : this.parallaxFactor;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/DebugGraphicsComponent.ts\n\r\n/**\r\n * Provide arbitrary drawing for the purposes of debugging your game\r\n *\r\n * Will only show when the Engine is set to debug mode [[Engine.showDebug]] or [[Engine.toggleDebug]]\r\n *\r\n */\r\nclass DebugGraphicsComponent extends Component {\r\n    constructor(draw, useTransform = true) {\r\n        super();\r\n        this.draw = draw;\r\n        this.useTransform = useTransform;\r\n        this.type = 'ex.debuggraphics';\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./TileMap/TileMap.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst TileMapEvents = {\r\n    PreUpdate: 'preupdate',\r\n    PostUpdate: 'postupdate',\r\n    PreDraw: 'predraw',\r\n    PostDraw: 'postdraw'\r\n};\r\n/**\r\n * The TileMap provides a mechanism for doing flat 2D tiles rendered in a grid.\r\n *\r\n * TileMaps are useful for top down or side scrolling grid oriented games.\r\n */\r\nclass TileMap extends Entity {\r\n    flagCollidersDirty() {\r\n        this._collidersDirty = true;\r\n    }\r\n    flagTilesDirty() {\r\n        for (let i = 0; i < this.tiles.length; i++) {\r\n            if (this.tiles[i]) {\r\n                this.tiles[i].flagDirty();\r\n            }\r\n        }\r\n    }\r\n    get x() {\r\n        var _a;\r\n        return (_a = this._transform.pos.x) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    set x(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) {\r\n            this.get(TransformComponent).pos = vec(val, this.y);\r\n        }\r\n    }\r\n    get y() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos.y) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n    set y(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) {\r\n            this._transform.pos = vec(this.x, val);\r\n        }\r\n    }\r\n    get z() {\r\n        var _a;\r\n        return (_a = this._transform.z) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    set z(val) {\r\n        if (this._transform) {\r\n            this._transform.z = val;\r\n        }\r\n    }\r\n    get rotation() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.rotation) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n    set rotation(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.rotation) {\r\n            this._transform.rotation = val;\r\n        }\r\n    }\r\n    get scale() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.scale) !== null && _b !== void 0 ? _b : Vector.One;\r\n    }\r\n    set scale(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.scale) {\r\n            this._transform.scale = val;\r\n        }\r\n    }\r\n    get pos() {\r\n        return this._transform.pos;\r\n    }\r\n    set pos(val) {\r\n        this._transform.pos = val;\r\n    }\r\n    get vel() {\r\n        return this._motion.vel;\r\n    }\r\n    set vel(val) {\r\n        this._motion.vel = val;\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    /**\r\n     * @param options\r\n     */\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(null, options.name);\r\n        this.events = new EventEmitter();\r\n        this._token = 0;\r\n        this.logger = Logger.getInstance();\r\n        this.tiles = [];\r\n        this._rows = [];\r\n        this._cols = [];\r\n        this.renderFromTopOfGraphic = false;\r\n        this._collidersDirty = true;\r\n        this._originalOffsets = new WeakMap();\r\n        this.addComponent(new TransformComponent());\r\n        this.addComponent(new MotionComponent());\r\n        this.addComponent(new BodyComponent({\r\n            type: CollisionType.Fixed\r\n        }));\r\n        this.addComponent(new GraphicsComponent({\r\n            onPostDraw: (ctx, delta) => this.draw(ctx, delta)\r\n        }));\r\n        this.addComponent(new DebugGraphicsComponent((ctx) => this.debug(ctx)));\r\n        this.addComponent(new ColliderComponent());\r\n        this._graphics = this.get(GraphicsComponent);\r\n        this._transform = this.get(TransformComponent);\r\n        this._motion = this.get(MotionComponent);\r\n        this._collider = this.get(ColliderComponent);\r\n        this._composite = this._collider.useCompositeCollider([]);\r\n        this._transform.pos = (_a = options.pos) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n        this._oldPos = this._transform.pos.clone();\r\n        this._oldScale = this._transform.scale.clone();\r\n        this.renderFromTopOfGraphic = (_b = options.renderFromTopOfGraphic) !== null && _b !== void 0 ? _b : this.renderFromTopOfGraphic;\r\n        this.tileWidth = options.tileWidth;\r\n        this.tileHeight = options.tileHeight;\r\n        this.rows = options.rows;\r\n        this.columns = options.columns;\r\n        this.tiles = new Array(this.rows * this.columns);\r\n        this._rows = new Array(this.rows);\r\n        this._cols = new Array(this.columns);\r\n        let currentCol = [];\r\n        for (let i = 0; i < this.columns; i++) {\r\n            for (let j = 0; j < this.rows; j++) {\r\n                const cd = new Tile({\r\n                    x: i,\r\n                    y: j,\r\n                    map: this\r\n                });\r\n                cd.map = this;\r\n                this.tiles[i + j * this.columns] = cd;\r\n                currentCol.push(cd);\r\n                if (!this._rows[j]) {\r\n                    this._rows[j] = [];\r\n                }\r\n                this._rows[j].push(cd);\r\n            }\r\n            this._cols[i] = currentCol;\r\n            currentCol = [];\r\n        }\r\n        this._graphics.localBounds = new BoundingBox({\r\n            left: 0,\r\n            top: 0,\r\n            right: this.columns * this.tileWidth * this.scale.x,\r\n            bottom: this.rows * this.tileHeight * this.scale.y\r\n        });\r\n    }\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n        this._engine = engine;\r\n    }\r\n    _getOrSetColliderOriginalOffset(collider) {\r\n        if (!this._originalOffsets.has(collider)) {\r\n            const originalOffset = collider.offset;\r\n            this._originalOffsets.set(collider, originalOffset);\r\n            return originalOffset;\r\n        }\r\n        else {\r\n            return this._originalOffsets.get(collider);\r\n        }\r\n    }\r\n    /**\r\n     * Tiles colliders based on the solid tiles in the tilemap.\r\n     */\r\n    _updateColliders() {\r\n        this._collider.$colliderRemoved.notifyAll(this._composite);\r\n        this._composite.clearColliders();\r\n        const colliders = [];\r\n        this._composite = this._collider.useCompositeCollider([]);\r\n        let current;\r\n        // Bad square tesselation algo\r\n        for (let i = 0; i < this.columns; i++) {\r\n            // Scan column for colliders\r\n            for (let j = 0; j < this.rows; j++) {\r\n                // Columns start with a new collider\r\n                if (j === 0) {\r\n                    current = null;\r\n                }\r\n                const tile = this.tiles[i + j * this.columns];\r\n                // Current tile in column is solid build up current collider\r\n                if (tile.solid) {\r\n                    // Use custom collider otherwise bounding box\r\n                    if (tile.getColliders().length > 0) {\r\n                        // tile with custom collider interrupting the current run\r\n                        for (const collider of tile.getColliders()) {\r\n                            const originalOffset = this._getOrSetColliderOriginalOffset(collider);\r\n                            collider.offset = vec(tile.x * this.tileWidth * this.scale.x, tile.y * this.tileHeight * this.scale.y).add(originalOffset);\r\n                            collider.owner = this;\r\n                            this._composite.addCollider(collider);\r\n                        }\r\n                        //we push any current collider before nulling the current run\r\n                        if (current) {\r\n                            colliders.push(current);\r\n                        }\r\n                        current = null;\r\n                    }\r\n                    else {\r\n                        if (!current) {\r\n                            // no current run, start one\r\n                            current = tile.bounds;\r\n                        }\r\n                        else {\r\n                            // combine with current run\r\n                            current = current.combine(tile.bounds);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // Not solid skip and cut off the current collider\r\n                    if (current) {\r\n                        colliders.push(current);\r\n                    }\r\n                    current = null;\r\n                }\r\n            }\r\n            // After a column is complete check to see if it can be merged into the last one\r\n            if (current) {\r\n                // if previous is the same combine it\r\n                const prev = colliders[colliders.length - 1];\r\n                if (prev && prev.top === current.top && prev.bottom === current.bottom) {\r\n                    colliders[colliders.length - 1] = prev.combine(current);\r\n                }\r\n                else {\r\n                    // else new collider\r\n                    colliders.push(current);\r\n                }\r\n            }\r\n        }\r\n        for (const c of colliders) {\r\n            const collider = Shape.Box(c.width, c.height, Vector.Zero, vec(c.left - this.pos.x, c.top - this.pos.y));\r\n            collider.owner = this;\r\n            this._composite.addCollider(collider);\r\n        }\r\n        this._collider.update();\r\n        // Notify that colliders have been updated\r\n        this._collider.$colliderAdded.notifyAll(this._composite);\r\n    }\r\n    /**\r\n     * Returns the [[Tile]] by index (row major order)\r\n     */\r\n    getTileByIndex(index) {\r\n        return this.tiles[index];\r\n    }\r\n    /**\r\n     * Returns the [[Tile]] by its x and y integer coordinates\r\n     */\r\n    getTile(x, y) {\r\n        if (x < 0 || y < 0 || x >= this.columns || y >= this.rows) {\r\n            return null;\r\n        }\r\n        return this.tiles[x + y * this.columns];\r\n    }\r\n    /**\r\n     * Returns the [[Tile]] by testing a point in world coordinates,\r\n     * returns `null` if no Tile was found.\r\n     */\r\n    getTileByPoint(point) {\r\n        const x = Math.floor((point.x - this.pos.x) / (this.tileWidth * this.scale.x));\r\n        const y = Math.floor((point.y - this.pos.y) / (this.tileHeight * this.scale.y));\r\n        const tile = this.getTile(x, y);\r\n        if (x >= 0 && y >= 0 && x < this.columns && y < this.rows && tile) {\r\n            return tile;\r\n        }\r\n        return null;\r\n    }\r\n    getRows() {\r\n        return this._rows;\r\n    }\r\n    getColumns() {\r\n        return this._cols;\r\n    }\r\n    update(engine, delta) {\r\n        this.onPreUpdate(engine, delta);\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        if (!this._oldPos.equals(this.pos) ||\r\n            !this._oldScale.equals(this.scale)) {\r\n            this.flagCollidersDirty();\r\n            this.flagTilesDirty();\r\n        }\r\n        if (this._collidersDirty) {\r\n            this._collidersDirty = false;\r\n            this._updateColliders();\r\n        }\r\n        this._token++;\r\n        this.pos.clone(this._oldPos);\r\n        this.scale.clone(this._oldScale);\r\n        this._transform.pos = this.pos;\r\n        this.onPostUpdate(engine, delta);\r\n        this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n    }\r\n    /**\r\n     * Draws the tile map to the screen. Called by the [[Scene]].\r\n     * @param ctx ExcaliburGraphicsContext\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    draw(ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(ctx, delta, this)); // TODO fix event\r\n        let worldBounds = this._engine.screen.getWorldBounds();\r\n        // TODO can we trim this down by using world bounds?\r\n        let x = 0;\r\n        const xEnd = this.columns;\r\n        let y = 0;\r\n        const yEnd = this.rows;\r\n        let graphics, graphicsIndex, graphicsLen;\r\n        const maybeParallax = this.get(ParallaxComponent);\r\n        if (maybeParallax) {\r\n            let pos = this.pos;\r\n            const oneMinusFactor = Vector.One.sub(maybeParallax.parallaxFactor);\r\n            const parallaxOffset = this._engine.currentScene.camera.pos.scale(oneMinusFactor);\r\n            pos = pos.sub(parallaxOffset);\r\n            // adjust world bounds by parallax factor\r\n            worldBounds = worldBounds.translate(pos);\r\n        }\r\n        let tile;\r\n        for (x; x < xEnd; x++) {\r\n            for (y; y < yEnd; y++) {\r\n                tile = this.getTile(x, y);\r\n                // fixme: This has a large perf impact, we iterate over every tile in the tilemap\r\n                // this probably requires a spatial data structure to do more efficiently\r\n                if (!worldBounds.overlaps(tile.bounds)) {\r\n                    continue;\r\n                }\r\n                // get non-negative tile sprites\r\n                graphics = this.getTile(x, y).getGraphics();\r\n                for (graphicsIndex = 0, graphicsLen = graphics.length; graphicsIndex < graphicsLen; graphicsIndex++) {\r\n                    // draw sprite, warning if sprite doesn't exist\r\n                    const graphic = graphics[graphicsIndex];\r\n                    if (graphic) {\r\n                        if (hasGraphicsTick(graphic)) {\r\n                            graphic === null || graphic === void 0 ? void 0 : graphic.tick(delta, this._token);\r\n                        }\r\n                        const offsetY = this.renderFromTopOfGraphic ? 0 : (graphic.height - this.tileHeight);\r\n                        graphic.draw(ctx, x * this.tileWidth, y * this.tileHeight - offsetY);\r\n                    }\r\n                }\r\n            }\r\n            y = 0;\r\n        }\r\n        this.emit('postdraw', new PostDrawEvent(ctx, delta, this));\r\n    }\r\n    debug(gfx) {\r\n        const width = this.tileWidth * this.columns;\r\n        const height = this.tileHeight * this.rows;\r\n        const pos = Vector.Zero;\r\n        for (let r = 0; r < this.rows + 1; r++) {\r\n            const yOffset = vec(0, r * this.tileHeight);\r\n            gfx.drawLine(pos.add(yOffset), pos.add(vec(width, yOffset.y)), Color.Red, 2);\r\n        }\r\n        for (let c = 0; c < this.columns + 1; c++) {\r\n            const xOffset = vec(c * this.tileWidth, 0);\r\n            gfx.drawLine(pos.add(xOffset), pos.add(vec(xOffset.x, height)), Color.Red, 2);\r\n        }\r\n        const colliders = this._composite.getColliders();\r\n        for (const collider of colliders) {\r\n            const grayish = Color.Gray;\r\n            grayish.a = 0.5;\r\n            const bounds = collider.localBounds;\r\n            const pos = collider.worldPos.sub(this.pos);\r\n            gfx.drawRectangle(pos, bounds.width, bounds.height, grayish);\r\n        }\r\n    }\r\n}\r\n/**\r\n * TileMap Tile\r\n *\r\n * A light-weight object that occupies a space in a collision map. Generally\r\n * created by a [[TileMap]].\r\n *\r\n * Tiles can draw multiple sprites. Note that the order of drawing is the order\r\n * of the sprites in the array so the last one will be drawn on top. You can\r\n * use transparency to create layers this way.\r\n */\r\nclass Tile extends Entity {\r\n    // private _transform: TransformComponent;\r\n    /**\r\n     * Return the world position of the top left corner of the tile\r\n     */\r\n    get pos() {\r\n        if (this._posDirty) {\r\n            this._recalculate();\r\n            this._posDirty = false;\r\n        }\r\n        return this._pos;\r\n    }\r\n    /**\r\n     * Width of the tile in pixels\r\n     */\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    /**\r\n     * Height of the tile in pixels\r\n     */\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    /**\r\n     * Wether this tile should be treated as solid by the tilemap\r\n     */\r\n    get solid() {\r\n        return this._solid;\r\n    }\r\n    /**\r\n     * Wether this tile should be treated as solid by the tilemap\r\n     */\r\n    set solid(val) {\r\n        var _a;\r\n        (_a = this.map) === null || _a === void 0 ? void 0 : _a.flagCollidersDirty();\r\n        this._solid = val;\r\n    }\r\n    /**\r\n     * Current list of graphics for this tile\r\n     */\r\n    getGraphics() {\r\n        return this._graphics;\r\n    }\r\n    /**\r\n     * Add another [[Graphic]] to this TileMap tile\r\n     * @param graphic\r\n     */\r\n    addGraphic(graphic) {\r\n        this._graphics.push(graphic);\r\n    }\r\n    /**\r\n     * Remove an instance of a [[Graphic]] from this tile\r\n     */\r\n    removeGraphic(graphic) {\r\n        removeItemFromArray(graphic, this._graphics);\r\n    }\r\n    /**\r\n     * Clear all graphics from this tile\r\n     */\r\n    clearGraphics() {\r\n        this._graphics.length = 0;\r\n    }\r\n    /**\r\n     * Returns the list of colliders\r\n     */\r\n    getColliders() {\r\n        return this._colliders;\r\n    }\r\n    /**\r\n     * Adds a custom collider to the [[Tile]] to use instead of it's bounds\r\n     *\r\n     * If no collider is set but [[Tile.solid]] is set, the tile bounds are used as a collider.\r\n     *\r\n     * **Note!** the [[Tile.solid]] must be set to true for it to act as a \"fixed\" collider\r\n     * @param collider\r\n     */\r\n    addCollider(collider) {\r\n        this._colliders.push(collider);\r\n        this.map.flagCollidersDirty();\r\n    }\r\n    /**\r\n     * Removes a collider from the [[Tile]]\r\n     * @param collider\r\n     */\r\n    removeCollider(collider) {\r\n        const index = this._colliders.indexOf(collider);\r\n        if (index > -1) {\r\n            this._colliders.splice(index, 1);\r\n        }\r\n        this.map.flagCollidersDirty();\r\n    }\r\n    /**\r\n     * Clears all colliders from the [[Tile]]\r\n     */\r\n    clearColliders() {\r\n        this._colliders.length = 0;\r\n        this.map.flagCollidersDirty();\r\n    }\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super();\r\n        this._posDirty = false;\r\n        this._solid = false;\r\n        this._graphics = [];\r\n        /**\r\n         * Current list of colliders for this tile\r\n         */\r\n        this._colliders = [];\r\n        /**\r\n         * Arbitrary data storage per tile, useful for any game specific data\r\n         */\r\n        this.data = new Map();\r\n        this.x = options.x;\r\n        this.y = options.y;\r\n        this.map = options.map;\r\n        this._width = options.map.tileWidth * this.map.scale.x;\r\n        this._height = options.map.tileHeight * this.map.scale.y;\r\n        this.solid = (_a = options.solid) !== null && _a !== void 0 ? _a : this.solid;\r\n        this._graphics = (_b = options.graphics) !== null && _b !== void 0 ? _b : [];\r\n        this._recalculate();\r\n    }\r\n    flagDirty() {\r\n        return this._posDirty = true;\r\n    }\r\n    _recalculate() {\r\n        this._width = this.map.tileWidth * this.map.scale.x;\r\n        this._height = this.map.tileHeight * this.map.scale.y;\r\n        this._pos = this.map.pos.add(vec(this.x * this._width, this.y * this._height));\r\n        this._bounds = new BoundingBox(this._pos.x, this._pos.y, this._pos.x + this._width, this._pos.y + this._height);\r\n        this._posDirty = false;\r\n    }\r\n    /**\r\n     * Tile bounds in world space\r\n     */\r\n    get bounds() {\r\n        if (this._posDirty) {\r\n            this._recalculate();\r\n        }\r\n        return this._bounds;\r\n    }\r\n    /**\r\n     * Tile position in world space\r\n     */\r\n    get center() {\r\n        if (this._posDirty) {\r\n            this._recalculate();\r\n        }\r\n        return new Vector(this._pos.x + this._width / 2, this._pos.y + this._height / 2);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Camera.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Container to house convenience strategy methods\r\n * @internal\r\n */\r\nclass StrategyContainer {\r\n    constructor(camera) {\r\n        this.camera = camera;\r\n    }\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\r\n     * @param actor The actor to lock the camera to\r\n     */\r\n    lockToActor(actor) {\r\n        this.camera.addStrategy(new LockCameraToActorStrategy(actor));\r\n    }\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\r\n     * @param actor The actor to lock the camera to\r\n     * @param axis The axis to follow the actor on\r\n     */\r\n    lockToActorAxis(actor, axis) {\r\n        this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\r\n    }\r\n    /**\r\n     * Creates and adds the [[ElasticToActorStrategy]] on the current camera\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param actor Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    elasticToActor(actor, cameraElasticity, cameraFriction) {\r\n        this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\r\n    }\r\n    /**\r\n     * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\r\n     * @param actor Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    radiusAroundActor(actor, radius) {\r\n        this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\r\n    }\r\n    /**\r\n     * Creates and adds the [[LimitCameraBoundsStrategy]] on the current camera\r\n     * @param box The bounding box to limit the camera to.\r\n     */\r\n    limitCameraBounds(box) {\r\n        this.camera.addStrategy(new LimitCameraBoundsStrategy(box));\r\n    }\r\n}\r\n/**\r\n * Camera axis enum\r\n */\r\nvar Axis;\r\n(function (Axis) {\r\n    Axis[Axis[\"X\"] = 0] = \"X\";\r\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\r\n})(Axis || (Axis = {}));\r\n/**\r\n * Lock a camera to the exact x/y position of an actor.\r\n */\r\nclass LockCameraToActorStrategy {\r\n    constructor(target) {\r\n        this.target = target;\r\n        this.action = (target, _cam, _eng, _delta) => {\r\n            const center = target.center;\r\n            return center;\r\n        };\r\n    }\r\n}\r\n/**\r\n * Lock a camera to a specific axis around an actor.\r\n */\r\nclass LockCameraToActorAxisStrategy {\r\n    constructor(target, axis) {\r\n        this.target = target;\r\n        this.axis = axis;\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const center = target.center;\r\n            const currentFocus = cam.getFocus();\r\n            if (this.axis === Axis.X) {\r\n                return new Vector(center.x, currentFocus.y);\r\n            }\r\n            else {\r\n                return new Vector(currentFocus.x, center.y);\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\r\n */\r\nclass ElasticToActorStrategy {\r\n    /**\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param target Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    constructor(target, cameraElasticity, cameraFriction) {\r\n        this.target = target;\r\n        this.cameraElasticity = cameraElasticity;\r\n        this.cameraFriction = cameraFriction;\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const position = target.center;\r\n            let focus = cam.getFocus();\r\n            let cameraVel = cam.vel.clone();\r\n            // Calculate the stretch vector, using the spring equation\r\n            // F = kX\r\n            // https://en.wikipedia.org/wiki/Hooke's_law\r\n            // Apply to the current camera velocity\r\n            const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\r\n            cameraVel = cameraVel.add(stretch);\r\n            // Calculate the friction (-1 to apply a force in the opposition of motion)\r\n            // Apply to the current camera velocity\r\n            const friction = cameraVel.scale(-1).scale(this.cameraFriction);\r\n            cameraVel = cameraVel.add(friction);\r\n            // Update position by velocity deltas\r\n            focus = focus.add(cameraVel);\r\n            return focus;\r\n        };\r\n    }\r\n}\r\nclass RadiusAroundActorStrategy {\r\n    /**\r\n     *\r\n     * @param target Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    constructor(target, radius) {\r\n        this.target = target;\r\n        this.radius = radius;\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const position = target.center;\r\n            const focus = cam.getFocus();\r\n            const direction = position.sub(focus);\r\n            const distance = direction.size;\r\n            if (distance >= this.radius) {\r\n                const offset = distance - this.radius;\r\n                return focus.add(direction.normalize().scale(offset));\r\n            }\r\n            return focus;\r\n        };\r\n    }\r\n}\r\n/**\r\n * Prevent a camera from going beyond the given camera dimensions.\r\n */\r\nclass LimitCameraBoundsStrategy {\r\n    constructor(target) {\r\n        this.target = target;\r\n        /**\r\n         * Useful for limiting the camera to a [[TileMap]]'s dimensions, or a specific area inside the map.\r\n         *\r\n         * Note that this strategy does not perform any movement by itself.\r\n         * It only sets the camera position to within the given bounds when the camera has gone beyond them.\r\n         * Thus, it is a good idea to combine it with other camera strategies and set this strategy as the last one.\r\n         *\r\n         * Make sure that the camera bounds are at least as large as the viewport size.\r\n         *\r\n         * @param target The bounding box to limit the camera to\r\n         */\r\n        this.boundSizeChecked = false; // Check and warn only once\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const focus = cam.getFocus();\r\n            if (!this.boundSizeChecked) {\r\n                if (target.bottom - target.top < _eng.drawHeight || target.right - target.left < _eng.drawWidth) {\r\n                    Logger.getInstance().warn('Camera bounds should not be smaller than the engine viewport');\r\n                }\r\n                this.boundSizeChecked = true;\r\n            }\r\n            let focusX = focus.x;\r\n            let focusY = focus.y;\r\n            if (focus.x < target.left + _eng.halfDrawWidth) {\r\n                focusX = target.left + _eng.halfDrawWidth;\r\n            }\r\n            else if (focus.x > target.right - _eng.halfDrawWidth) {\r\n                focusX = target.right - _eng.halfDrawWidth;\r\n            }\r\n            if (focus.y < target.top + _eng.halfDrawHeight) {\r\n                focusY = target.top + _eng.halfDrawHeight;\r\n            }\r\n            else if (focus.y > target.bottom - _eng.halfDrawHeight) {\r\n                focusY = target.bottom - _eng.halfDrawHeight;\r\n            }\r\n            return vec(focusX, focusY);\r\n        };\r\n    }\r\n}\r\nconst CameraEvents = {\r\n    Initialize: 'initialize',\r\n    PreUpdate: 'preupdate',\r\n    PostUpdate: 'postupdate'\r\n};\r\n/**\r\n * Cameras\r\n *\r\n * [[Camera]] is the base class for all Excalibur cameras. Cameras are used\r\n * to move around your game and set focus. They are used to determine\r\n * what is \"off screen\" and can be used to scale the game.\r\n *\r\n */\r\nclass Camera {\r\n    constructor() {\r\n        this.events = new EventEmitter();\r\n        this.transform = AffineMatrix.identity();\r\n        this.inverse = AffineMatrix.identity();\r\n        this._cameraStrategies = [];\r\n        this.strategy = new StrategyContainer(this);\r\n        /**\r\n         * Get or set current zoom of the camera, defaults to 1\r\n         */\r\n        this._z = 1;\r\n        /**\r\n         * Get or set rate of change in zoom, defaults to 0\r\n         */\r\n        this.dz = 0;\r\n        /**\r\n         * Get or set zoom acceleration\r\n         */\r\n        this.az = 0;\r\n        /**\r\n         * Current rotation of the camera\r\n         */\r\n        this.rotation = 0;\r\n        this._angularVelocity = 0;\r\n        /**\r\n         * Get or set the camera's position\r\n         */\r\n        this._posChanged = false;\r\n        this._pos = watchAny(Vector.Zero, () => (this._posChanged = true));\r\n        /**\r\n         * Get or set the camera's velocity\r\n         */\r\n        this.vel = Vector.Zero;\r\n        /**\r\n         * Get or set the camera's acceleration\r\n         */\r\n        this.acc = Vector.Zero;\r\n        this._cameraMoving = false;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1000; // 1 second\r\n        this._lerpStart = null;\r\n        this._lerpEnd = null;\r\n        //camera effects\r\n        this._isShaking = false;\r\n        this._shakeMagnitudeX = 0;\r\n        this._shakeMagnitudeY = 0;\r\n        this._shakeDuration = 0;\r\n        this._elapsedShakeTime = 0;\r\n        this._xShake = 0;\r\n        this._yShake = 0;\r\n        this._isZooming = false;\r\n        this._zoomStart = 1;\r\n        this._zoomEnd = 1;\r\n        this._currentZoomTime = 0;\r\n        this._zoomDuration = 0;\r\n        this._zoomEasing = EasingFunctions.EaseInOutCubic;\r\n        this._easing = EasingFunctions.EaseInOutCubic;\r\n        this._halfWidth = 0;\r\n        this._halfHeight = 0;\r\n        this._viewport = null;\r\n        this._isInitialized = false;\r\n    }\r\n    get zoom() {\r\n        return this._z;\r\n    }\r\n    set zoom(val) {\r\n        this._z = val;\r\n        if (this._engine) {\r\n            this._halfWidth = this._engine.halfDrawWidth;\r\n            this._halfHeight = this._engine.halfDrawHeight;\r\n        }\r\n    }\r\n    /**\r\n     * Get or set the camera's angular velocity\r\n     */\r\n    get angularVelocity() {\r\n        return this._angularVelocity;\r\n    }\r\n    set angularVelocity(value) {\r\n        this._angularVelocity = value;\r\n    }\r\n    get pos() {\r\n        return this._pos;\r\n    }\r\n    set pos(vec) {\r\n        this._pos = watchAny(vec, () => (this._posChanged = true));\r\n        this._posChanged = true;\r\n    }\r\n    /**\r\n     * Get the camera's x position\r\n     */\r\n    get x() {\r\n        return this.pos.x;\r\n    }\r\n    /**\r\n     * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\r\n     */\r\n    set x(value) {\r\n        if (!this._follow && !this._cameraMoving) {\r\n            this.pos = vec(value, this.pos.y);\r\n        }\r\n    }\r\n    /**\r\n     * Get the camera's y position\r\n     */\r\n    get y() {\r\n        return this.pos.y;\r\n    }\r\n    /**\r\n     * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\r\n     */\r\n    set y(value) {\r\n        if (!this._follow && !this._cameraMoving) {\r\n            this.pos = vec(this.pos.x, value);\r\n        }\r\n    }\r\n    /**\r\n     * Get or set the camera's x velocity\r\n     */\r\n    get dx() {\r\n        return this.vel.x;\r\n    }\r\n    set dx(value) {\r\n        this.vel = vec(value, this.vel.y);\r\n    }\r\n    /**\r\n     * Get or set the camera's y velocity\r\n     */\r\n    get dy() {\r\n        return this.vel.y;\r\n    }\r\n    set dy(value) {\r\n        this.vel = vec(this.vel.x, value);\r\n    }\r\n    /**\r\n     * Get or set the camera's x acceleration\r\n     */\r\n    get ax() {\r\n        return this.acc.x;\r\n    }\r\n    set ax(value) {\r\n        this.acc = vec(value, this.acc.y);\r\n    }\r\n    /**\r\n     * Get or set the camera's y acceleration\r\n     */\r\n    get ay() {\r\n        return this.acc.y;\r\n    }\r\n    set ay(value) {\r\n        this.acc = vec(this.acc.x, value);\r\n    }\r\n    /**\r\n     * Returns the focal point of the camera, a new point giving the x and y position of the camera\r\n     */\r\n    getFocus() {\r\n        return this.pos;\r\n    }\r\n    /**\r\n     * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\r\n     *\r\n     * @param pos The target position to move to\r\n     * @param duration The duration in milliseconds the move should last\r\n     * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\r\n     * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\r\n     *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\r\n     */\r\n    move(pos, duration, easingFn = EasingFunctions.EaseInOutCubic) {\r\n        if (typeof easingFn !== 'function') {\r\n            throw 'Please specify an EasingFunction';\r\n        }\r\n        // cannot move when following an actor\r\n        if (this._follow) {\r\n            return Promise.reject(pos);\r\n        }\r\n        // resolve existing promise, if any\r\n        if (this._lerpPromise && this._lerpResolve) {\r\n            this._lerpResolve(pos);\r\n        }\r\n        this._lerpPromise = new Promise((resolve) => {\r\n            this._lerpResolve = resolve;\r\n        });\r\n        this._lerpStart = this.getFocus().clone();\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = pos;\r\n        this._currentLerpTime = 0;\r\n        this._cameraMoving = true;\r\n        this._easing = easingFn;\r\n        return this._lerpPromise;\r\n    }\r\n    /**\r\n     * Sets the camera to shake at the specified magnitudes for the specified duration\r\n     * @param magnitudeX  The x magnitude of the shake\r\n     * @param magnitudeY  The y magnitude of the shake\r\n     * @param duration    The duration of the shake in milliseconds\r\n     */\r\n    shake(magnitudeX, magnitudeY, duration) {\r\n        this._isShaking = true;\r\n        this._shakeMagnitudeX = magnitudeX;\r\n        this._shakeMagnitudeY = magnitudeY;\r\n        this._shakeDuration = duration;\r\n    }\r\n    /**\r\n     * Zooms the camera in or out by the specified scale over the specified duration.\r\n     * If no duration is specified, it take effect immediately.\r\n     * @param scale    The scale of the zoom\r\n     * @param duration The duration of the zoom in milliseconds\r\n     */\r\n    zoomOverTime(scale, duration = 0, easingFn = EasingFunctions.EaseInOutCubic) {\r\n        this._zoomPromise = new Promise((resolve) => {\r\n            this._zoomResolve = resolve;\r\n        });\r\n        if (duration) {\r\n            this._isZooming = true;\r\n            this._zoomEasing = easingFn;\r\n            this._currentZoomTime = 0;\r\n            this._zoomDuration = duration;\r\n            this._zoomStart = this.zoom;\r\n            this._zoomEnd = scale;\r\n        }\r\n        else {\r\n            this._isZooming = false;\r\n            this.zoom = scale;\r\n            return Promise.resolve(true);\r\n        }\r\n        return this._zoomPromise;\r\n    }\r\n    /**\r\n     * Gets the bounding box of the viewport of this camera in world coordinates\r\n     */\r\n    get viewport() {\r\n        if (this._viewport) {\r\n            return this._viewport;\r\n        }\r\n        return new BoundingBox(0, 0, 0, 0);\r\n    }\r\n    /**\r\n     * Adds a new camera strategy to this camera\r\n     * @param cameraStrategy Instance of an [[CameraStrategy]]\r\n     */\r\n    addStrategy(cameraStrategy) {\r\n        this._cameraStrategies.push(cameraStrategy);\r\n    }\r\n    /**\r\n     * Removes a camera strategy by reference\r\n     * @param cameraStrategy Instance of an [[CameraStrategy]]\r\n     */\r\n    removeStrategy(cameraStrategy) {\r\n        removeItemFromArray(cameraStrategy, this._cameraStrategies);\r\n    }\r\n    /**\r\n     * Clears all camera strategies from the camera\r\n     */\r\n    clearAllStrategies() {\r\n        this._cameraStrategies.length = 0;\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(engine, delta) {\r\n        this.events.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // Overridable\r\n    }\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(engine, delta) {\r\n        this.events.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // Overridable\r\n    }\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    _initialize(_engine) {\r\n        if (!this.isInitialized) {\r\n            this._engine = _engine;\r\n            this._screen = _engine.screen;\r\n            const currentRes = this._screen.contentArea;\r\n            let center = vec(currentRes.width / 2, currentRes.height / 2);\r\n            if (!this._engine.loadingComplete) {\r\n                // If there was a loading screen, we peek the configured resolution\r\n                const res = this._screen.peekResolution();\r\n                if (res) {\r\n                    center = vec(res.width / 2, res.height / 2);\r\n                }\r\n            }\r\n            this._halfWidth = center.x;\r\n            this._halfHeight = center.y;\r\n            // If the user has not set the camera pos, apply default center screen position\r\n            if (!this._posChanged) {\r\n                this.pos = center;\r\n            }\r\n            // First frame bootstrap\r\n            // Ensure camera tx is correct\r\n            // Run update twice to ensure properties are init'd\r\n            this.updateTransform();\r\n            // Run strategies for first frame\r\n            this.runStrategies(_engine, _engine.clock.elapsed());\r\n            // Setup the first frame viewport\r\n            this.updateViewport();\r\n            // It's important to update the camera after strategies\r\n            // This prevents jitter\r\n            this.updateTransform();\r\n            this.onInitialize(_engine);\r\n            this.events.emit('initialize', new InitializeEvent(_engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    onInitialize(_engine) {\r\n        // Overridable\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    runStrategies(engine, delta) {\r\n        for (const s of this._cameraStrategies) {\r\n            this.pos = s.action.call(s, s.target, this, engine, delta);\r\n        }\r\n    }\r\n    updateViewport() {\r\n        // recalc viewport\r\n        this._viewport = new BoundingBox(this.x - this._halfWidth, this.y - this._halfHeight, this.x + this._halfWidth, this.y + this._halfHeight);\r\n    }\r\n    update(_engine, delta) {\r\n        this._initialize(_engine);\r\n        this._preupdate(_engine, delta);\r\n        // Update placements based on linear algebra\r\n        this.pos = this.pos.add(this.vel.scale(delta / 1000));\r\n        this.zoom += (this.dz * delta) / 1000;\r\n        this.vel = this.vel.add(this.acc.scale(delta / 1000));\r\n        this.dz += (this.az * delta) / 1000;\r\n        this.rotation += (this.angularVelocity * delta) / 1000;\r\n        if (this._isZooming) {\r\n            if (this._currentZoomTime < this._zoomDuration) {\r\n                const zoomEasing = this._zoomEasing;\r\n                const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\r\n                this.zoom = newZoom;\r\n                this._currentZoomTime += delta;\r\n            }\r\n            else {\r\n                this._isZooming = false;\r\n                this.zoom = this._zoomEnd;\r\n                this._currentZoomTime = 0;\r\n                this._zoomResolve(true);\r\n            }\r\n        }\r\n        if (this._cameraMoving) {\r\n            if (this._currentLerpTime < this._lerpDuration) {\r\n                const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\r\n                const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\r\n                this.pos = lerpPoint;\r\n                this._currentLerpTime += delta;\r\n            }\r\n            else {\r\n                this.pos = this._lerpEnd;\r\n                const end = this._lerpEnd.clone();\r\n                this._lerpStart = null;\r\n                this._lerpEnd = null;\r\n                this._currentLerpTime = 0;\r\n                this._cameraMoving = false;\r\n                // Order matters here, resolve should be last so any chain promises have a clean slate\r\n                this._lerpResolve(end);\r\n            }\r\n        }\r\n        if (this._isDoneShaking()) {\r\n            this._isShaking = false;\r\n            this._elapsedShakeTime = 0;\r\n            this._shakeMagnitudeX = 0;\r\n            this._shakeMagnitudeY = 0;\r\n            this._shakeDuration = 0;\r\n            this._xShake = 0;\r\n            this._yShake = 0;\r\n        }\r\n        else {\r\n            this._elapsedShakeTime += delta;\r\n            this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\r\n            this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\r\n        }\r\n        this.runStrategies(_engine, delta);\r\n        this.updateViewport();\r\n        // It's important to update the camera after strategies\r\n        // This prevents jitter\r\n        this.updateTransform();\r\n        this._postupdate(_engine, delta);\r\n    }\r\n    /**\r\n     * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\r\n     * @param ctx Canvas context to apply transformations\r\n     */\r\n    draw(ctx) {\r\n        ctx.multiply(this.transform);\r\n    }\r\n    updateTransform() {\r\n        // center the camera\r\n        const newCanvasWidth = this._screen.resolution.width / this.zoom;\r\n        const newCanvasHeight = this._screen.resolution.height / this.zoom;\r\n        const cameraPos = vec(-this.x + newCanvasWidth / 2 + this._xShake, -this.y + newCanvasHeight / 2 + this._yShake);\r\n        // Calculate camera transform\r\n        this.transform.reset();\r\n        this.transform.scale(this.zoom, this.zoom);\r\n        // rotate about the focus\r\n        this.transform.translate(newCanvasWidth / 2, newCanvasHeight / 2);\r\n        this.transform.rotate(this.rotation);\r\n        this.transform.translate(-newCanvasWidth / 2, -newCanvasHeight / 2);\r\n        this.transform.translate(cameraPos.x, cameraPos.y);\r\n        this.transform.inverse(this.inverse);\r\n    }\r\n    _isDoneShaking() {\r\n        return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Trigger.ts\n\r\n\r\n\r\n\r\n\r\nconst TriggerEvents = {\r\n    ExitTrigger: 'exittrigger',\r\n    EnterTrigger: 'entertrigger'\r\n};\r\nconst triggerDefaults = {\r\n    pos: Vector.Zero,\r\n    width: 10,\r\n    height: 10,\r\n    visible: false,\r\n    action: () => {\r\n        return;\r\n    },\r\n    filter: () => true,\r\n    repeat: -1\r\n};\r\n/**\r\n * Triggers are a method of firing arbitrary code on collision. These are useful\r\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\r\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\r\n */\r\nclass Trigger extends Actor {\r\n    /**\r\n     *\r\n     * @param opts Trigger options\r\n     */\r\n    constructor(opts) {\r\n        super({ x: opts.pos.x, y: opts.pos.y, width: opts.width, height: opts.height });\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * Action to fire when triggered by collision\r\n         */\r\n        this.action = () => {\r\n            return;\r\n        };\r\n        /**\r\n         * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\r\n         * filter return true for the collided actor.\r\n         */\r\n        this.filter = () => true;\r\n        /**\r\n         * Number of times to repeat before killing the trigger,\r\n         */\r\n        this.repeat = -1;\r\n        opts = {\r\n            ...triggerDefaults,\r\n            ...opts\r\n        };\r\n        this.filter = opts.filter || this.filter;\r\n        this.repeat = opts.repeat || this.repeat;\r\n        this.action = opts.action || this.action;\r\n        if (opts.target) {\r\n            this.target = opts.target;\r\n        }\r\n        this.graphics.visible = opts.visible;\r\n        this.body.collisionType = CollisionType.Passive;\r\n        this.events.on('collisionstart', (evt) => {\r\n            if (this.filter(evt.other)) {\r\n                this.emit('enter', new EnterTriggerEvent(this, evt.other));\r\n                this._dispatchAction();\r\n                // remove trigger if its done, -1 repeat forever\r\n                if (this.repeat === 0) {\r\n                    this.kill();\r\n                }\r\n            }\r\n        });\r\n        this.events.on('collisionend', (evt) => {\r\n            if (this.filter(evt.other)) {\r\n                this.emit('exit', new ExitTriggerEvent(this, evt.other));\r\n            }\r\n        });\r\n    }\r\n    set target(target) {\r\n        this._target = target;\r\n        this.filter = (actor) => actor === target;\r\n    }\r\n    get target() {\r\n        return this._target;\r\n    }\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n    }\r\n    _dispatchAction() {\r\n        if (this.repeat !== 0) {\r\n            this.action.call(this);\r\n            this.repeat--;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/System.ts\n/**\r\n * Enum that determines whether to run the system in the update or draw phase\r\n */\r\nvar SystemType;\r\n(function (SystemType) {\r\n    SystemType[\"Update\"] = \"update\";\r\n    SystemType[\"Draw\"] = \"draw\";\r\n})(SystemType || (SystemType = {}));\r\n/**\r\n * An Excalibur [[System]] that updates entities of certain types.\r\n * Systems are scene specific\r\n *\r\n * Excalibur Systems currently require at least 1 Component type to operated\r\n *\r\n * Multiple types are declared as a type union\r\n * For example:\r\n *\r\n * ```typescript\r\n * class MySystem extends System<ComponentA | ComponentB> {\r\n *   public readonly types = ['a', 'b'] as const;\r\n *   public readonly systemType = SystemType.Update;\r\n *   public update(entities: Entity<ComponentA | ComponentB>) {\r\n *      ...\r\n *   }\r\n * }\r\n * ```\r\n */\r\nclass System {\r\n    constructor() {\r\n        /**\r\n         * System can execute in priority order, by default all systems are priority 0. Lower values indicated higher priority.\r\n         * For a system to execute before all other a lower priority value (-1 for example) must be set.\r\n         * For a system to execute after all other a higher priority value (10 for example) must be set.\r\n         */\r\n        this.priority = 0;\r\n    }\r\n    /**\r\n     * Systems observe when entities match their types or no longer match their types, override\r\n     * @param _entityAddedOrRemoved\r\n     */\r\n    notify(_entityAddedOrRemoved) {\r\n        // Override me\r\n    }\r\n}\r\n/**\r\n * An [[Entity]] with [[Component]] types that matches a [[System]] types exists in the current scene.\r\n */\r\nclass AddedEntity {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Entity Added';\r\n    }\r\n}\r\n/**\r\n * Type guard to check for AddedEntity messages\r\n * @param x\r\n */\r\nfunction isAddedSystemEntity(x) {\r\n    return !!x && x.type === 'Entity Added';\r\n}\r\n/**\r\n * An [[Entity]] with [[Component]] types that no longer matches a [[System]] types exists in the current scene.\r\n */\r\nclass RemovedEntity {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Entity Removed';\r\n    }\r\n}\r\n/**\r\n * type guard to check for the RemovedEntity message\r\n */\r\nfunction isRemoveSystemEntity(x) {\r\n    return !!x && x.type === 'Entity Removed';\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/EntityManager.ts\n\r\n\r\n// Add/Remove entities and components\r\nclass EntityManager {\r\n    constructor(_world) {\r\n        this._world = _world;\r\n        this.entities = [];\r\n        this._entityIndex = {};\r\n        this._entitiesToRemove = [];\r\n    }\r\n    /**\r\n     * Runs the entity lifecycle\r\n     * @param _context\r\n     */\r\n    updateEntities(_context, elapsed) {\r\n        for (const entity of this.entities) {\r\n            // TODO is this right?\r\n            entity.update(_context.engine, elapsed);\r\n            if (!entity.active) {\r\n                this.removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    findEntitiesForRemoval() {\r\n        for (const entity of this.entities) {\r\n            if (!entity.active) {\r\n                this.removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * EntityManager observes changes on entities\r\n     * @param message\r\n     */\r\n    notify(message) {\r\n        if (isAddedComponent(message)) {\r\n            // we don't need the component, it's already on the entity\r\n            this._world.queryManager.addEntity(message.data.entity);\r\n        }\r\n        if (isRemovedComponent(message)) {\r\n            this._world.queryManager.removeComponent(message.data.entity, message.data.component);\r\n        }\r\n    }\r\n    /**\r\n     * Adds an entity to be tracked by the EntityManager\r\n     * @param entity\r\n     */\r\n    addEntity(entity) {\r\n        entity.active = true;\r\n        entity.scene = this._world.context;\r\n        if (entity && !this._entityIndex[entity.id]) {\r\n            this._entityIndex[entity.id] = entity;\r\n            this.entities.push(entity);\r\n            this._world.queryManager.addEntity(entity);\r\n            entity.componentAdded$.register(this);\r\n            entity.componentRemoved$.register(this);\r\n            // if entity has children\r\n            entity.children.forEach((c) => {\r\n                c.scene = entity.scene;\r\n                this.addEntity(c);\r\n            });\r\n            entity.childrenAdded$.register({\r\n                notify: (e) => {\r\n                    this.addEntity(e);\r\n                }\r\n            });\r\n            entity.childrenRemoved$.register({\r\n                notify: (e) => {\r\n                    this.removeEntity(e, false);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    removeEntity(idOrEntity, deferred = true) {\r\n        var _a;\r\n        let id = 0;\r\n        if (idOrEntity instanceof Entity) {\r\n            id = idOrEntity.id;\r\n        }\r\n        else {\r\n            id = idOrEntity;\r\n        }\r\n        const entity = this._entityIndex[id];\r\n        if (entity && entity.active) {\r\n            entity.active = false;\r\n        }\r\n        if (entity && deferred) {\r\n            this._entitiesToRemove.push(entity);\r\n            return;\r\n        }\r\n        delete this._entityIndex[id];\r\n        if (entity) {\r\n            entity.scene = null;\r\n            removeItemFromArray(entity, this.entities);\r\n            this._world.queryManager.removeEntity(entity);\r\n            entity.componentAdded$.unregister(this);\r\n            entity.componentRemoved$.unregister(this);\r\n            // if entity has children\r\n            entity.children.forEach((c) => {\r\n                c.scene = null;\r\n                this.removeEntity(c, deferred);\r\n            });\r\n            entity.childrenAdded$.clear();\r\n            entity.childrenRemoved$.clear();\r\n            // stats\r\n            if ((_a = this._world.context) === null || _a === void 0 ? void 0 : _a.engine) {\r\n                this._world.context.engine.stats.currFrame.actors.killed++;\r\n            }\r\n        }\r\n    }\r\n    processEntityRemovals() {\r\n        for (const entity of this._entitiesToRemove) {\r\n            if (entity.active) {\r\n                continue;\r\n            }\r\n            this.removeEntity(entity, false);\r\n        }\r\n        this._entitiesToRemove.length = 0;\r\n    }\r\n    processComponentRemovals() {\r\n        for (const entity of this.entities) {\r\n            entity.processComponentRemoval();\r\n        }\r\n    }\r\n    getById(id) {\r\n        return this._entityIndex[id];\r\n    }\r\n    getByName(name) {\r\n        return this.entities.filter(e => e.name === name);\r\n    }\r\n    clear() {\r\n        for (const entity of this.entities) {\r\n            this.removeEntity(entity);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Util.ts\nconst buildTypeKey = (types) => {\r\n    const key = [...types].sort((a, b) => a.localeCompare(b)).join('+');\r\n    return key;\r\n};\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Query.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Represents query for entities that match a list of types that is cached and observable\r\n *\r\n * Queries can be strongly typed by supplying a type union in the optional type parameter\r\n * ```typescript\r\n * const queryAB = new ex.Query<ComponentTypeA | ComponentTypeB>(['A', 'B']);\r\n * ```\r\n */\r\nclass Query extends Observable {\r\n    get key() {\r\n        if (this._key) {\r\n            return this._key;\r\n        }\r\n        return (this._key = buildTypeKey(this.types));\r\n    }\r\n    constructor(types) {\r\n        super();\r\n        this._entities = [];\r\n        if (types[0] instanceof Function) {\r\n            this.types = types.map(T => (new T).type);\r\n        }\r\n        else {\r\n            this.types = types;\r\n        }\r\n    }\r\n    /**\r\n     * Returns a list of entities that match the query\r\n     *\r\n     * @param sort Optional sorting function to sort entities returned from the query\r\n     */\r\n    getEntities(sort) {\r\n        if (sort) {\r\n            this._entities.sort(sort);\r\n        }\r\n        return this._entities;\r\n    }\r\n    /**\r\n     * Add an entity to the query, will only be added if the entity matches the query types\r\n     * @param entity\r\n     */\r\n    addEntity(entity) {\r\n        if (!contains(this._entities, entity) && this.matches(entity)) {\r\n            this._entities.push(entity);\r\n            this.notifyAll(new AddedEntity(entity));\r\n        }\r\n    }\r\n    /**\r\n     * If the entity is part of the query it will be removed regardless of types\r\n     * @param entity\r\n     */\r\n    removeEntity(entity) {\r\n        if (removeItemFromArray(entity, this._entities)) {\r\n            this.notifyAll(new RemovedEntity(entity));\r\n        }\r\n    }\r\n    /**\r\n     * Removes all entities and observers from the query\r\n     */\r\n    clear() {\r\n        this._entities.length = 0;\r\n        for (const observer of this.observers) {\r\n            this.unregister(observer);\r\n        }\r\n    }\r\n    matches(typesOrEntity) {\r\n        let types = [];\r\n        if (typesOrEntity instanceof Entity) {\r\n            types = typesOrEntity.types;\r\n        }\r\n        else {\r\n            types = typesOrEntity;\r\n        }\r\n        let matches = true;\r\n        for (const type of this.types) {\r\n            matches = matches && types.indexOf(type) > -1;\r\n            if (!matches) {\r\n                return false;\r\n            }\r\n        }\r\n        return matches;\r\n    }\r\n    contain(type) {\r\n        return this.types.indexOf(type) > -1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/QueryManager.ts\n\r\n\r\n/**\r\n * The query manager is responsible for updating all queries when entities/components change\r\n */\r\nclass QueryManager {\r\n    constructor(_world) {\r\n        this._world = _world;\r\n        this._queries = {};\r\n    }\r\n    /**\r\n     * Adds a query to the manager and populates with any entities that match\r\n     * @param query\r\n     */\r\n    _addQuery(query) {\r\n        this._queries[buildTypeKey(query.types)] = query;\r\n        for (const entity of this._world.entityManager.entities) {\r\n            query.addEntity(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Removes the query if there are no observers left\r\n     * @param query\r\n     */\r\n    maybeRemoveQuery(query) {\r\n        if (query.observers.length === 0) {\r\n            query.clear();\r\n            delete this._queries[buildTypeKey(query.types)];\r\n        }\r\n    }\r\n    /**\r\n     * Adds the entity to any matching query in the query manage\r\n     * @param entity\r\n     */\r\n    addEntity(entity) {\r\n        for (const queryType in this._queries) {\r\n            if (this._queries[queryType]) {\r\n                this._queries[queryType].addEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Removes an entity from queries if the removed component disqualifies it\r\n     * @param entity\r\n     * @param component\r\n     */\r\n    removeComponent(entity, component) {\r\n        for (const queryType in this._queries) {\r\n            // If the component being removed from an entity is a part of a query,\r\n            // it is now disqualified from that query, remove it\r\n            if (this._queries[queryType].contain(component.type)) {\r\n                this._queries[queryType].removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Removes an entity from all queries it is currently a part of\r\n     * @param entity\r\n     */\r\n    removeEntity(entity) {\r\n        for (const queryType in this._queries) {\r\n            this._queries[queryType].removeEntity(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a populated query and returns, if the query already exists that will be returned instead of a new instance\r\n     * @param types\r\n     */\r\n    createQuery(types) {\r\n        const maybeExistingQuery = this.getQuery(types);\r\n        if (maybeExistingQuery) {\r\n            return maybeExistingQuery;\r\n        }\r\n        const query = new Query(types);\r\n        this._addQuery(query);\r\n        return query;\r\n    }\r\n    /**\r\n     * Retrieves an existing query by types if it exists otherwise returns null\r\n     * @param types\r\n     */\r\n    getQuery(types) {\r\n        const key = buildTypeKey(types);\r\n        if (this._queries[key]) {\r\n            return this._queries[key];\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/SystemManager.ts\n\r\n/**\r\n * The SystemManager is responsible for keeping track of all systems in a scene.\r\n * Systems are scene specific\r\n */\r\nclass SystemManager {\r\n    constructor(_world) {\r\n        this._world = _world;\r\n        /**\r\n         * List of systems, to add a new system call [[SystemManager.addSystem]]\r\n         */\r\n        this.systems = [];\r\n        this.initialized = false;\r\n    }\r\n    /**\r\n     * Get a system registered in the manager by type\r\n     * @param systemType\r\n     */\r\n    get(systemType) {\r\n        return this.systems.find((s) => s instanceof systemType);\r\n    }\r\n    /**\r\n     * Adds a system to the manager, it will now be updated every frame\r\n     * @param system\r\n     */\r\n    addSystem(system) {\r\n        // validate system has types\r\n        if (!system.types || system.types.length === 0) {\r\n            throw new Error(`Attempted to add a System without any types`);\r\n        }\r\n        const query = this._world.queryManager.createQuery(system.types);\r\n        this.systems.push(system);\r\n        this.systems.sort((a, b) => a.priority - b.priority);\r\n        query.register(system);\r\n        // If systems are added and the manager has already been init'd\r\n        // then immediately init the system\r\n        if (this.initialized && system.initialize) {\r\n            system.initialize(this._world.context);\r\n        }\r\n    }\r\n    /**\r\n     * Removes a system from the manager, it will no longer be updated\r\n     * @param system\r\n     */\r\n    removeSystem(system) {\r\n        removeItemFromArray(system, this.systems);\r\n        const query = this._world.queryManager.getQuery(system.types);\r\n        if (query) {\r\n            query.unregister(system);\r\n            this._world.queryManager.maybeRemoveQuery(query);\r\n        }\r\n    }\r\n    /**\r\n     * Initialize all systems in the manager\r\n     *\r\n     * Systems added after initialize() will be initialized on add\r\n     */\r\n    initialize() {\r\n        if (!this.initialized) {\r\n            this.initialized = true;\r\n            for (const s of this.systems) {\r\n                if (s.initialize) {\r\n                    s.initialize(this._world.context);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Updates all systems\r\n     * @param type whether this is an update or draw system\r\n     * @param context context reference\r\n     * @param delta time in milliseconds\r\n     */\r\n    updateSystems(type, context, delta) {\r\n        const systems = this.systems.filter((s) => s.systemType === type);\r\n        for (const s of systems) {\r\n            if (s.preupdate) {\r\n                s.preupdate(context, delta);\r\n            }\r\n        }\r\n        for (const s of systems) {\r\n            // Get entities that match the system types, pre-sort\r\n            const entities = this._world.queryManager.getQuery(s.types).getEntities(s.sort);\r\n            // Initialize entities if needed\r\n            if (context instanceof Scene) {\r\n                for (const entity of entities) {\r\n                    entity._initialize(context === null || context === void 0 ? void 0 : context.engine);\r\n                }\r\n            }\r\n            s.update(entities, delta);\r\n        }\r\n        for (const s of systems) {\r\n            if (s.postupdate) {\r\n                s.postupdate(context, delta);\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        for (const system of this.systems) {\r\n            this.removeSystem(system);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/World.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The World is a self-contained entity component system for a particular context.\r\n */\r\nclass World {\r\n    /**\r\n     * The context type is passed to the system updates\r\n     * @param context\r\n     */\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.queryManager = new QueryManager(this);\r\n        this.entityManager = new EntityManager(this);\r\n        this.systemManager = new SystemManager(this);\r\n    }\r\n    /**\r\n     * Update systems by type and time elapsed in milliseconds\r\n     */\r\n    update(type, delta) {\r\n        if (type === SystemType.Update) {\r\n            this.entityManager.updateEntities(this.context, delta);\r\n        }\r\n        this.systemManager.updateSystems(type, this.context, delta);\r\n        this.entityManager.findEntitiesForRemoval();\r\n        this.entityManager.processComponentRemovals();\r\n        this.entityManager.processEntityRemovals();\r\n    }\r\n    add(entityOrSystem) {\r\n        if (entityOrSystem instanceof Entity) {\r\n            this.entityManager.addEntity(entityOrSystem);\r\n        }\r\n        if (entityOrSystem instanceof System) {\r\n            this.systemManager.addSystem(entityOrSystem);\r\n        }\r\n    }\r\n    remove(entityOrSystem, deferred = true) {\r\n        if (entityOrSystem instanceof Entity) {\r\n            this.entityManager.removeEntity(entityOrSystem, deferred);\r\n        }\r\n        if (entityOrSystem instanceof System) {\r\n            this.systemManager.removeSystem(entityOrSystem);\r\n        }\r\n    }\r\n    clearEntities() {\r\n        this.entityManager.clear();\r\n    }\r\n    clearSystems() {\r\n        this.systemManager.clear();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Integrator.ts\n\r\nclass EulerIntegrator {\r\n    static integrate(transform, motion, totalAcc, elapsedMs) {\r\n        const seconds = elapsedMs / 1000;\r\n        // This code looks a little wild, but it's to avoid creating any new Vector instances\r\n        // integration is done in a tight loop so this is key to avoid GC'ing\r\n        motion.vel.addEqual(totalAcc.scale(seconds, EulerIntegrator._ACC));\r\n        transform.pos\r\n            .add(motion.vel.scale(seconds, EulerIntegrator._VEL), EulerIntegrator._POS)\r\n            .addEqual(totalAcc.scale(0.5 * seconds * seconds, EulerIntegrator._VEL_ACC));\r\n        motion.angularVelocity += motion.torque * (1.0 / motion.inertia) * seconds;\r\n        const rotation = transform.rotation + motion.angularVelocity * seconds;\r\n        transform.scale.add(motion.scaleFactor.scale(seconds, this._SCALE_FACTOR), EulerIntegrator._SCALE);\r\n        const tx = transform.get();\r\n        tx.setTransform(EulerIntegrator._POS, rotation, EulerIntegrator._SCALE);\r\n    }\r\n}\r\n// Scratch vectors to avoid allocation\r\nEulerIntegrator._POS = new Vector(0, 0);\r\nEulerIntegrator._SCALE = new Vector(1, 1);\r\nEulerIntegrator._ACC = new Vector(0, 0);\r\nEulerIntegrator._VEL = new Vector(0, 0);\r\nEulerIntegrator._VEL_ACC = new Vector(0, 0);\r\nEulerIntegrator._SCALE_FACTOR = new Vector(0, 0);\r\n\n;// CONCATENATED MODULE: ./Collision/MotionSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass MotionSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.motion'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n    }\r\n    update(entities, elapsedMs) {\r\n        let transform;\r\n        let motion;\r\n        for (let i = 0; i < entities.length; i++) {\r\n            transform = entities[i].get(TransformComponent);\r\n            motion = entities[i].get(MotionComponent);\r\n            const optionalBody = entities[i].get(BodyComponent);\r\n            if (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.sleeping) {\r\n                continue;\r\n            }\r\n            const totalAcc = motion.acc.clone();\r\n            if ((optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.collisionType) === CollisionType.Active && (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.useGravity)) {\r\n                totalAcc.addEqual(Physics.gravity);\r\n            }\r\n            optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.captureOldTransform();\r\n            // Update transform and motion based on Euler linear algebra\r\n            EulerIntegrator.integrate(transform, motion, totalAcc, elapsedMs);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/ArcadeSolver.ts\n\r\n\r\n\r\n\r\n/**\r\n * ArcadeSolver is the default in Excalibur. It solves collisions so that there is no overlap between contacts,\r\n * and negates velocity along the collision normal.\r\n *\r\n * This is usually the type of collisions used for 2D games that don't need a more realistic collision simulation.\r\n *\r\n */\r\nclass ArcadeSolver {\r\n    constructor() {\r\n        this.directionMap = new Map();\r\n        this.distanceMap = new Map();\r\n    }\r\n    solve(contacts) {\r\n        // Events and init\r\n        this.preSolve(contacts);\r\n        // Remove any canceled contacts\r\n        contacts = contacts.filter(c => !c.isCanceled());\r\n        // Sort contacts by distance to avoid artifacts with seams\r\n        // It's important to solve in a specific order\r\n        contacts.sort((a, b) => {\r\n            const aDist = this.distanceMap.get(a.id);\r\n            const bDist = this.distanceMap.get(b.id);\r\n            return aDist - bDist;\r\n        });\r\n        for (const contact of contacts) {\r\n            // Solve position first in arcade\r\n            this.solvePosition(contact);\r\n            // Solve velocity second in arcade\r\n            this.solveVelocity(contact);\r\n        }\r\n        // Events and any contact house-keeping the solver needs\r\n        this.postSolve(contacts);\r\n        return contacts;\r\n    }\r\n    preSolve(contacts) {\r\n        const epsilon = .0001;\r\n        for (const contact of contacts) {\r\n            if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\r\n                // Cancel near 0 mtv collisions\r\n                contact.cancel();\r\n                continue;\r\n            }\r\n            const side = Side.fromDirection(contact.mtv);\r\n            const mtv = contact.mtv.negate();\r\n            const distance = contact.colliderA.worldPos.squareDistance(contact.colliderB.worldPos);\r\n            this.distanceMap.set(contact.id, distance);\r\n            // Publish collision events on both participants\r\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, mtv));\r\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate()));\r\n        }\r\n    }\r\n    postSolve(contacts) {\r\n        var _a, _b;\r\n        for (const contact of contacts) {\r\n            if (contact.isCanceled()) {\r\n                continue;\r\n            }\r\n            const colliderA = contact.colliderA;\r\n            const colliderB = contact.colliderB;\r\n            const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                    continue;\r\n                }\r\n            }\r\n            const side = Side.fromDirection(contact.mtv);\r\n            const mtv = contact.mtv.negate();\r\n            // Publish collision events on both participants\r\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, mtv));\r\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate()));\r\n        }\r\n    }\r\n    solvePosition(contact) {\r\n        var _a, _b;\r\n        const epsilon = .0001;\r\n        // if bounds no longer intersect skip to the next\r\n        // this removes jitter from overlapping/stacked solid tiles or a wall of solid tiles\r\n        if (!contact.colliderA.bounds.overlaps(contact.colliderB.bounds, epsilon)) {\r\n            // Cancel the contact to prevent and solving\r\n            contact.cancel();\r\n            return;\r\n        }\r\n        if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\r\n            // Cancel near 0 mtv collisions\r\n            contact.cancel();\r\n            return;\r\n        }\r\n        let mtv = contact.mtv;\r\n        const colliderA = contact.colliderA;\r\n        const colliderB = contact.colliderB;\r\n        const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                return;\r\n            }\r\n            if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType === CollisionType.Active) {\r\n                // split overlaps if both are Active\r\n                mtv = mtv.scale(0.5);\r\n            }\r\n            // Resolve overlaps\r\n            if (bodyA.collisionType === CollisionType.Active) {\r\n                bodyA.globalPos.x -= mtv.x;\r\n                bodyA.globalPos.y -= mtv.y;\r\n                colliderA.update(bodyA.transform.get());\r\n            }\r\n            if (bodyB.collisionType === CollisionType.Active) {\r\n                bodyB.globalPos.x += mtv.x;\r\n                bodyB.globalPos.y += mtv.y;\r\n                colliderB.update(bodyB.transform.get());\r\n            }\r\n        }\r\n    }\r\n    solveVelocity(contact) {\r\n        var _a, _b;\r\n        if (contact.isCanceled()) {\r\n            return;\r\n        }\r\n        const colliderA = contact.colliderA;\r\n        const colliderB = contact.colliderB;\r\n        const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                return;\r\n            }\r\n            const normal = contact.normal;\r\n            const opposite = normal.negate();\r\n            if (bodyA.collisionType === CollisionType.Active) {\r\n                // only adjust velocity if the contact normal is opposite to the current velocity\r\n                // this avoids catching edges on a platform when sliding off\r\n                if (bodyA.vel.normalize().dot(opposite) < 0) {\r\n                    // Cancel out velocity opposite direction of collision normal\r\n                    const velAdj = normal.scale(normal.dot(bodyA.vel.negate()));\r\n                    bodyA.vel = bodyA.vel.add(velAdj);\r\n                }\r\n            }\r\n            if (bodyB.collisionType === CollisionType.Active) {\r\n                // only adjust velocity if the contact normal is opposite to the current velocity\r\n                // this avoids catching edges on a platform\r\n                if (bodyB.vel.normalize().dot(normal) < 0) {\r\n                    const velAdj = opposite.scale(opposite.dot(bodyB.vel.negate()));\r\n                    bodyB.vel = bodyB.vel.add(velAdj);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/ContactConstraintPoint.ts\n\r\n\r\n/**\r\n * Holds information about contact points, meant to be reused over multiple frames of contact\r\n */\r\nclass ContactConstraintPoint {\r\n    constructor(point, local, contact) {\r\n        this.point = point;\r\n        this.local = local;\r\n        this.contact = contact;\r\n        /**\r\n         * Impulse accumulated over time in normal direction\r\n         */\r\n        this.normalImpulse = 0;\r\n        /**\r\n         * Impulse accumulated over time in the tangent direction\r\n         */\r\n        this.tangentImpulse = 0;\r\n        /**\r\n         * Effective mass seen in the normal direction\r\n         */\r\n        this.normalMass = 0;\r\n        /**\r\n         * Effective mass seen in the tangent direction\r\n         */\r\n        this.tangentMass = 0;\r\n        /**\r\n         * Direction from center of mass of bodyA to contact point\r\n         */\r\n        this.aToContact = new Vector(0, 0);\r\n        /**\r\n         * Direction from center of mass of bodyB to contact point\r\n         */\r\n        this.bToContact = new Vector(0, 0);\r\n        /**\r\n         * Original contact velocity combined with bounciness\r\n         */\r\n        this.originalVelocityAndRestitution = 0;\r\n        this.update();\r\n    }\r\n    /**\r\n     * Updates the contact information\r\n     */\r\n    update() {\r\n        var _a, _b;\r\n        const bodyA = (_a = this.contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = this.contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            const normal = this.contact.normal;\r\n            const tangent = this.contact.tangent;\r\n            this.aToContact = this.point.sub(bodyA.globalPos);\r\n            this.bToContact = this.point.sub(bodyB.globalPos);\r\n            const aToContactNormal = this.aToContact.cross(normal);\r\n            const bToContactNormal = this.bToContact.cross(normal);\r\n            this.normalMass =\r\n                bodyA.inverseMass +\r\n                    bodyB.inverseMass +\r\n                    bodyA.inverseInertia * aToContactNormal * aToContactNormal +\r\n                    bodyB.inverseInertia * bToContactNormal * bToContactNormal;\r\n            const aToContactTangent = this.aToContact.cross(tangent);\r\n            const bToContactTangent = this.bToContact.cross(tangent);\r\n            this.tangentMass =\r\n                bodyA.inverseMass +\r\n                    bodyB.inverseMass +\r\n                    bodyA.inverseInertia * aToContactTangent * aToContactTangent +\r\n                    bodyB.inverseInertia * bToContactTangent * bToContactTangent;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns the relative velocity between bodyA and bodyB\r\n     */\r\n    getRelativeVelocity() {\r\n        var _a, _b;\r\n        const bodyA = (_a = this.contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = this.contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            // Relative velocity in linear terms\r\n            // Angular to linear velocity formula -> omega = velocity/radius so omega x radius = velocity\r\n            const velA = bodyA.vel.add(Vector.cross(bodyA.angularVelocity, this.aToContact));\r\n            const velB = bodyB.vel.add(Vector.cross(bodyB.angularVelocity, this.bToContact));\r\n            return velB.sub(velA);\r\n        }\r\n        return Vector.Zero;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/RealisticSolver.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass RealisticSolver {\r\n    constructor() {\r\n        this.lastFrameContacts = new Map();\r\n        // map contact id to contact points\r\n        this.idToContactConstraint = new Map();\r\n    }\r\n    getContactConstraints(id) {\r\n        var _a;\r\n        return (_a = this.idToContactConstraint.get(id)) !== null && _a !== void 0 ? _a : [];\r\n    }\r\n    solve(contacts) {\r\n        // Events and init\r\n        this.preSolve(contacts);\r\n        // Remove any canceled contacts\r\n        contacts = contacts.filter(c => !c.isCanceled());\r\n        // Solve velocity first\r\n        this.solveVelocity(contacts);\r\n        // Solve position last because non-overlap is the most important\r\n        this.solvePosition(contacts);\r\n        // Events and any contact house-keeping the solver needs\r\n        this.postSolve(contacts);\r\n        return contacts;\r\n    }\r\n    preSolve(contacts) {\r\n        var _a, _b, _c;\r\n        const epsilon = .0001;\r\n        for (const contact of contacts) {\r\n            if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\r\n                // Cancel near 0 mtv collisions\r\n                contact.cancel();\r\n                continue;\r\n            }\r\n            // Publish collision events on both participants\r\n            const side = Side.fromDirection(contact.mtv);\r\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv));\r\n            contact.colliderA.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\r\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate()));\r\n            contact.colliderB.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\r\n            // Match awake state for sleeping\r\n            contact.matchAwake();\r\n        }\r\n        // Keep track of contacts that done\r\n        const finishedContactIds = Array.from(this.idToContactConstraint.keys());\r\n        for (const contact of contacts) {\r\n            // Remove all current contacts that are not done\r\n            const index = finishedContactIds.indexOf(contact.id);\r\n            if (index > -1) {\r\n                finishedContactIds.splice(index, 1);\r\n            }\r\n            const contactPoints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\r\n            let pointIndex = 0;\r\n            const bodyA = contact.colliderA.owner.get(BodyComponent);\r\n            const bodyB = contact.colliderB.owner.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                for (const point of contact.points) {\r\n                    const normal = contact.normal;\r\n                    const tangent = contact.tangent;\r\n                    const aToContact = point.sub(bodyA.globalPos);\r\n                    const bToContact = point.sub(bodyB.globalPos);\r\n                    const aToContactNormal = aToContact.cross(normal);\r\n                    const bToContactNormal = bToContact.cross(normal);\r\n                    const normalMass = bodyA.inverseMass +\r\n                        bodyB.inverseMass +\r\n                        bodyA.inverseInertia * aToContactNormal * aToContactNormal +\r\n                        bodyB.inverseInertia * bToContactNormal * bToContactNormal;\r\n                    const aToContactTangent = aToContact.cross(tangent);\r\n                    const bToContactTangent = bToContact.cross(tangent);\r\n                    const tangentMass = bodyA.inverseMass +\r\n                        bodyB.inverseMass +\r\n                        bodyA.inverseInertia * aToContactTangent * aToContactTangent +\r\n                        bodyB.inverseInertia * bToContactTangent * bToContactTangent;\r\n                    // Preserve normal/tangent impulse by re-using the contact point if it's close\r\n                    if (contactPoints[pointIndex] && ((_c = (_b = contactPoints[pointIndex]) === null || _b === void 0 ? void 0 : _b.point) === null || _c === void 0 ? void 0 : _c.squareDistance(point)) < 4) {\r\n                        contactPoints[pointIndex].point = point;\r\n                        contactPoints[pointIndex].local = contact.localPoints[pointIndex];\r\n                    }\r\n                    else {\r\n                        // new contact if it's not close or doesn't exist\r\n                        contactPoints[pointIndex] = new ContactConstraintPoint(point, contact.localPoints[pointIndex], contact);\r\n                    }\r\n                    // Update contact point calculations\r\n                    contactPoints[pointIndex].aToContact = aToContact;\r\n                    contactPoints[pointIndex].bToContact = bToContact;\r\n                    contactPoints[pointIndex].normalMass = 1.0 / normalMass;\r\n                    contactPoints[pointIndex].tangentMass = 1.0 / tangentMass;\r\n                    // Calculate relative velocity before solving to accurately do restitution\r\n                    const restitution = bodyA.bounciness > bodyB.bounciness ? bodyA.bounciness : bodyB.bounciness;\r\n                    const relativeVelocity = contact.normal.dot(contactPoints[pointIndex].getRelativeVelocity());\r\n                    contactPoints[pointIndex].originalVelocityAndRestitution = 0;\r\n                    if (relativeVelocity < -0.1) { // TODO what's a good threshold here?\r\n                        contactPoints[pointIndex].originalVelocityAndRestitution = -restitution * relativeVelocity;\r\n                    }\r\n                    pointIndex++;\r\n                }\r\n            }\r\n            this.idToContactConstraint.set(contact.id, contactPoints);\r\n        }\r\n        // Clean up any contacts that did not occur last frame\r\n        for (const id of finishedContactIds) {\r\n            this.idToContactConstraint.delete(id);\r\n        }\r\n        // Warm contacts with accumulated impulse\r\n        // Useful for tall stacks\r\n        if (Physics.warmStart) {\r\n            this.warmStart(contacts);\r\n        }\r\n        else {\r\n            for (const contact of contacts) {\r\n                const contactPoints = this.getContactConstraints(contact.id);\r\n                for (const point of contactPoints) {\r\n                    point.normalImpulse = 0;\r\n                    point.tangentImpulse = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    postSolve(contacts) {\r\n        for (const contact of contacts) {\r\n            const bodyA = contact.colliderA.owner.get(BodyComponent);\r\n            const bodyB = contact.colliderB.owner.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                // Skip post solve for active+passive collisions\r\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                    continue;\r\n                }\r\n                // Update motion values for sleeping\r\n                bodyA.updateMotion();\r\n                bodyB.updateMotion();\r\n            }\r\n            // Publish collision events on both participants\r\n            const side = Side.fromDirection(contact.mtv);\r\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv));\r\n            contact.colliderA.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\r\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate()));\r\n            contact.colliderB.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\r\n        }\r\n        // Store contacts\r\n        this.lastFrameContacts.clear();\r\n        for (const c of contacts) {\r\n            this.lastFrameContacts.set(c.id, c);\r\n        }\r\n    }\r\n    /**\r\n     * Warm up body's based on previous frame contact points\r\n     * @param contacts\r\n     */\r\n    warmStart(contacts) {\r\n        var _a, _b, _c;\r\n        for (const contact of contacts) {\r\n            const bodyA = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            const bodyB = (_b = contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                const contactPoints = (_c = this.idToContactConstraint.get(contact.id)) !== null && _c !== void 0 ? _c : [];\r\n                for (const point of contactPoints) {\r\n                    if (Physics.warmStart) {\r\n                        const normalImpulse = contact.normal.scale(point.normalImpulse);\r\n                        const tangentImpulse = contact.tangent.scale(point.tangentImpulse);\r\n                        const impulse = normalImpulse.add(tangentImpulse);\r\n                        bodyA.applyImpulse(point.point, impulse.negate());\r\n                        bodyB.applyImpulse(point.point, impulse);\r\n                    }\r\n                    else {\r\n                        point.normalImpulse = 0;\r\n                        point.tangentImpulse = 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Iteratively solve the position overlap constraint\r\n     * @param contacts\r\n     */\r\n    solvePosition(contacts) {\r\n        var _a, _b, _c;\r\n        for (let i = 0; i < Physics.positionIterations; i++) {\r\n            for (const contact of contacts) {\r\n                const bodyA = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n                const bodyB = (_b = contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n                if (bodyA && bodyB) {\r\n                    // Skip solving active+passive\r\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                        continue;\r\n                    }\r\n                    const constraints = (_c = this.idToContactConstraint.get(contact.id)) !== null && _c !== void 0 ? _c : [];\r\n                    for (const point of constraints) {\r\n                        const normal = contact.normal;\r\n                        const separation = CollisionJumpTable.FindContactSeparation(contact, point.local);\r\n                        const steeringConstant = Physics.steeringFactor; //0.2;\r\n                        const maxCorrection = -5;\r\n                        const slop = Physics.slop; //1;\r\n                        // Clamp to avoid over-correction\r\n                        // Remember that we are shooting for 0 overlap in the end\r\n                        const steeringForce = clamp(steeringConstant * (separation + slop), maxCorrection, 0);\r\n                        const impulse = normal.scale(-steeringForce * point.normalMass);\r\n                        // This is a pseudo impulse, meaning we aren't doing a real impulse calculation\r\n                        // We adjust position and rotation instead of doing the velocity\r\n                        if (bodyA.collisionType === CollisionType.Active) {\r\n                            // TODO make applyPseudoImpulse function?\r\n                            const impulseForce = impulse.negate().scale(bodyA.inverseMass);\r\n                            if (bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\r\n                                impulseForce.x = 0;\r\n                            }\r\n                            if (bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\r\n                                impulseForce.y = 0;\r\n                            }\r\n                            bodyA.globalPos = bodyA.globalPos.add(impulseForce);\r\n                            if (!bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\r\n                                bodyA.rotation -= point.aToContact.cross(impulse) * bodyA.inverseInertia;\r\n                            }\r\n                        }\r\n                        if (bodyB.collisionType === CollisionType.Active) {\r\n                            const impulseForce = impulse.scale(bodyB.inverseMass);\r\n                            if (bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\r\n                                impulseForce.x = 0;\r\n                            }\r\n                            if (bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\r\n                                impulseForce.y = 0;\r\n                            }\r\n                            bodyB.globalPos = bodyB.globalPos.add(impulseForce);\r\n                            if (!bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\r\n                                bodyB.rotation += point.bToContact.cross(impulse) * bodyB.inverseInertia;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    solveVelocity(contacts) {\r\n        var _a, _b, _c;\r\n        for (let i = 0; i < Physics.velocityIterations; i++) {\r\n            for (const contact of contacts) {\r\n                const bodyA = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n                const bodyB = (_b = contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n                if (bodyA && bodyB) {\r\n                    // Skip solving active+passive\r\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                        continue;\r\n                    }\r\n                    const friction = Math.min(bodyA.friction, bodyB.friction);\r\n                    const constraints = (_c = this.idToContactConstraint.get(contact.id)) !== null && _c !== void 0 ? _c : [];\r\n                    // Friction constraint\r\n                    for (const point of constraints) {\r\n                        const relativeVelocity = point.getRelativeVelocity();\r\n                        // Negate velocity in tangent direction to simulate friction\r\n                        const tangentVelocity = -relativeVelocity.dot(contact.tangent);\r\n                        let impulseDelta = tangentVelocity * point.tangentMass;\r\n                        // Clamping based in Erin Catto's GDC 2006 talk\r\n                        // Correct clamping https://github.com/erincatto/box2d-lite/blob/master/docs/GDC2006_Catto_Erin_PhysicsTutorial.pdf\r\n                        // Accumulated fiction impulse is always between -uMaxFriction < dT < uMaxFriction\r\n                        // But deltas can vary\r\n                        const maxFriction = friction * point.normalImpulse;\r\n                        const newImpulse = clamp(point.tangentImpulse + impulseDelta, -maxFriction, maxFriction);\r\n                        impulseDelta = newImpulse - point.tangentImpulse;\r\n                        point.tangentImpulse = newImpulse;\r\n                        const impulse = contact.tangent.scale(impulseDelta);\r\n                        bodyA.applyImpulse(point.point, impulse.negate());\r\n                        bodyB.applyImpulse(point.point, impulse);\r\n                    }\r\n                    // Bounce constraint\r\n                    for (const point of constraints) {\r\n                        // Need to recalc relative velocity because the previous step could have changed vel\r\n                        const relativeVelocity = point.getRelativeVelocity();\r\n                        // Compute impulse in normal direction\r\n                        const normalVelocity = relativeVelocity.dot(contact.normal);\r\n                        // Per Erin it is a mistake to apply the restitution inside the iteration\r\n                        // From Erin Catto's Box2D we keep original contact velocity and adjust by small impulses\r\n                        let impulseDelta = -point.normalMass * (normalVelocity - point.originalVelocityAndRestitution);\r\n                        // Clamping based in Erin Catto's GDC 2014 talk\r\n                        // Accumulated impulse stored in the contact is always positive (dV > 0)\r\n                        // But deltas can be negative\r\n                        const newImpulse = Math.max(point.normalImpulse + impulseDelta, 0);\r\n                        impulseDelta = newImpulse - point.normalImpulse;\r\n                        point.normalImpulse = newImpulse;\r\n                        const impulse = contact.normal.scale(impulseDelta);\r\n                        bodyA.applyImpulse(point.point, impulse.negate());\r\n                        bodyB.applyImpulse(point.point, impulse);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/CollisionSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CollisionSystem extends System {\r\n    constructor(physics) {\r\n        super();\r\n        this.types = ['ex.transform', 'ex.motion', 'ex.collider'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n        this._realisticSolver = new RealisticSolver();\r\n        this._arcadeSolver = new ArcadeSolver();\r\n        this._lastFrameContacts = new Map();\r\n        this._currentFrameContacts = new Map();\r\n        this._processor = physics.collisionProcessor;\r\n        this._trackCollider = (c) => this._processor.track(c);\r\n        this._untrackCollider = (c) => this._processor.untrack(c);\r\n    }\r\n    notify(message) {\r\n        if (isAddedSystemEntity(message)) {\r\n            const colliderComponent = message.data.get(ColliderComponent);\r\n            colliderComponent.$colliderAdded.subscribe(this._trackCollider);\r\n            colliderComponent.$colliderRemoved.subscribe(this._untrackCollider);\r\n            const collider = colliderComponent.get();\r\n            if (collider) {\r\n                this._processor.track(collider);\r\n            }\r\n        }\r\n        else {\r\n            const colliderComponent = message.data.get(ColliderComponent);\r\n            const collider = colliderComponent.get();\r\n            if (colliderComponent && collider) {\r\n                this._processor.untrack(collider);\r\n            }\r\n        }\r\n    }\r\n    initialize(scene) {\r\n        this._engine = scene.engine;\r\n    }\r\n    update(entities, elapsedMs) {\r\n        var _a, _b, _c, _d;\r\n        if (!Physics.enabled) {\r\n            return;\r\n        }\r\n        // Collect up all the colliders and update them\r\n        let colliders = [];\r\n        for (const entity of entities) {\r\n            const colliderComp = entity.get(ColliderComponent);\r\n            const collider = colliderComp === null || colliderComp === void 0 ? void 0 : colliderComp.get();\r\n            if (colliderComp && ((_a = colliderComp.owner) === null || _a === void 0 ? void 0 : _a.active) && collider) {\r\n                colliderComp.update();\r\n                if (collider instanceof CompositeCollider) {\r\n                    const compositeColliders = collider.getColliders();\r\n                    colliders = colliders.concat(compositeColliders);\r\n                }\r\n                else {\r\n                    colliders.push(collider);\r\n                }\r\n            }\r\n        }\r\n        // Update the spatial partitioning data structures\r\n        // TODO if collider invalid it will break the processor\r\n        // TODO rename \"update\" to something more specific\r\n        this._processor.update(colliders);\r\n        // Run broadphase on all colliders and locates potential collisions\r\n        const pairs = this._processor.broadphase(colliders, elapsedMs);\r\n        this._currentFrameContacts.clear();\r\n        // Given possible pairs find actual contacts\r\n        let contacts = this._processor.narrowphase(pairs, (_d = (_c = (_b = this._engine) === null || _b === void 0 ? void 0 : _b.debug) === null || _c === void 0 ? void 0 : _c.stats) === null || _d === void 0 ? void 0 : _d.currFrame);\r\n        const solver = this.getSolver();\r\n        // Solve, this resolves the position/velocity so entities aren't overlapping\r\n        contacts = solver.solve(contacts);\r\n        // Record contacts for start/end\r\n        for (const contact of contacts) {\r\n            // Process composite ids, things with the same composite id are treated as the same collider for start/end\r\n            const index = contact.id.indexOf('|');\r\n            if (index > 0) {\r\n                const compositeId = contact.id.substring(index + 1);\r\n                this._currentFrameContacts.set(compositeId, contact);\r\n            }\r\n            else {\r\n                this._currentFrameContacts.set(contact.id, contact);\r\n            }\r\n        }\r\n        // Emit contact start/end events\r\n        this.runContactStartEnd();\r\n        // reset the last frame cache\r\n        this._lastFrameContacts.clear();\r\n        // Keep track of collisions contacts that have started or ended\r\n        this._lastFrameContacts = new Map(this._currentFrameContacts);\r\n    }\r\n    getSolver() {\r\n        return Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Realistic ? this._realisticSolver : this._arcadeSolver;\r\n    }\r\n    debug(ex) {\r\n        this._processor.debug(ex);\r\n    }\r\n    runContactStartEnd() {\r\n        // Composite collider collisions may have a duplicate id because we want to treat those as a singular start/end\r\n        for (const [id, c] of this._currentFrameContacts) {\r\n            // find all new contacts\r\n            if (!this._lastFrameContacts.has(id)) {\r\n                const colliderA = c.colliderA;\r\n                const colliderB = c.colliderB;\r\n                colliderA.events.emit('collisionstart', new CollisionStartEvent(colliderA, colliderB, c));\r\n                colliderA.events.emit('contactstart', new ContactStartEvent(colliderA, colliderB, c));\r\n                colliderB.events.emit('collisionstart', new CollisionStartEvent(colliderB, colliderA, c));\r\n                colliderB.events.emit('contactstart', new ContactStartEvent(colliderB, colliderA, c));\r\n            }\r\n        }\r\n        // find all contacts that have ceased\r\n        for (const [id, c] of this._lastFrameContacts) {\r\n            if (!this._currentFrameContacts.has(id)) {\r\n                const colliderA = c.colliderA;\r\n                const colliderB = c.colliderB;\r\n                colliderA.events.emit('collisionend', new CollisionEndEvent(colliderA, colliderB));\r\n                colliderA.events.emit('contactend', new ContactEndEvent(colliderA, colliderB));\r\n                colliderB.events.emit('collisionend', new CollisionEndEvent(colliderB, colliderA));\r\n                colliderB.events.emit('contactend', new ContactEndEvent(colliderB, colliderA));\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Animation.ts\n\r\n\r\n\r\n\r\nvar AnimationDirection;\r\n(function (AnimationDirection) {\r\n    /**\r\n     * Animation is playing forwards\r\n     */\r\n    AnimationDirection[\"Forward\"] = \"forward\";\r\n    /**\r\n     * Animation is playing backwards\r\n     */\r\n    AnimationDirection[\"Backward\"] = \"backward\";\r\n})(AnimationDirection || (AnimationDirection = {}));\r\nvar AnimationStrategy;\r\n(function (AnimationStrategy) {\r\n    /**\r\n     * Animation ends without displaying anything\r\n     */\r\n    AnimationStrategy[\"End\"] = \"end\";\r\n    /**\r\n     * Animation loops to the first frame after the last frame\r\n     */\r\n    AnimationStrategy[\"Loop\"] = \"loop\";\r\n    /**\r\n     * Animation plays to the last frame, then backwards to the first frame, then repeats\r\n     */\r\n    AnimationStrategy[\"PingPong\"] = \"pingpong\";\r\n    /**\r\n     * Animation ends stopping on the last frame\r\n     */\r\n    AnimationStrategy[\"Freeze\"] = \"freeze\";\r\n})(AnimationStrategy || (AnimationStrategy = {}));\r\nconst AnimationEvents = {\r\n    Frame: 'frame',\r\n    Loop: 'loop',\r\n    Ended: 'ended'\r\n};\r\n/**\r\n * Create an Animation given a list of [[Frame|frames]] in [[AnimationOptions]]\r\n *\r\n * To create an Animation from a [[SpriteSheet]], use [[Animation.fromSpriteSheet]]\r\n */\r\nclass Animation extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this.events = new EventEmitter();\r\n        this.frames = [];\r\n        this.strategy = AnimationStrategy.Loop;\r\n        this.frameDuration = 100;\r\n        this.timeScale = 1;\r\n        this._idempotencyToken = -1;\r\n        this._firstTick = true;\r\n        this._currentFrame = 0;\r\n        this._timeLeftInFrame = 0;\r\n        this._pingPongDirection = 1;\r\n        this._done = false;\r\n        this._playing = true;\r\n        this._reversed = false;\r\n        this.frames = options.frames;\r\n        this.strategy = (_a = options.strategy) !== null && _a !== void 0 ? _a : this.strategy;\r\n        this.frameDuration = options.totalDuration ? options.totalDuration / this.frames.length : (_b = options.frameDuration) !== null && _b !== void 0 ? _b : this.frameDuration;\r\n        if (options.reverse) {\r\n            this.reverse();\r\n        }\r\n        this.goToFrame(0);\r\n    }\r\n    clone() {\r\n        return new Animation({\r\n            frames: this.frames.map((f) => ({ ...f })),\r\n            frameDuration: this.frameDuration,\r\n            reverse: this._reversed,\r\n            strategy: this.strategy,\r\n            ...this.cloneGraphicOptions()\r\n        });\r\n    }\r\n    get width() {\r\n        const maybeFrame = this.currentFrame;\r\n        if (maybeFrame) {\r\n            return Math.abs(maybeFrame.graphic.width * this.scale.x);\r\n        }\r\n        return 0;\r\n    }\r\n    get height() {\r\n        const maybeFrame = this.currentFrame;\r\n        if (maybeFrame) {\r\n            return Math.abs(maybeFrame.graphic.height * this.scale.y);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Create an Animation from a [[SpriteSheet]], a list of indices into the sprite sheet, a duration per frame\r\n     * and optional [[AnimationStrategy]]\r\n     *\r\n     * Example:\r\n     * ```typescript\r\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\r\n     *\r\n     * const anim = Animation.fromSpriteSheet(spriteSheet, range(0, 5), 200, AnimationStrategy.Loop);\r\n     * ```\r\n     *\r\n     * @param spriteSheet\r\n     * @param frameIndices\r\n     * @param durationPerFrameMs\r\n     * @param strategy\r\n     */\r\n    static fromSpriteSheet(spriteSheet, frameIndices, durationPerFrameMs, strategy = AnimationStrategy.Loop) {\r\n        const maxIndex = spriteSheet.sprites.length - 1;\r\n        const invalidIndices = frameIndices.filter((index) => index < 0 || index > maxIndex);\r\n        if (invalidIndices.length) {\r\n            Animation._LOGGER.warn(`Indices into SpriteSheet were provided that don\\'t exist: ${invalidIndices.join(',')} no frame will be shown`);\r\n        }\r\n        return new Animation({\r\n            frames: spriteSheet.sprites\r\n                .filter((_, index) => frameIndices.indexOf(index) > -1)\r\n                .map((f) => ({\r\n                graphic: f,\r\n                duration: durationPerFrameMs\r\n            })),\r\n            strategy: strategy\r\n        });\r\n    }\r\n    /**\r\n     * Create an [[Animation]] from a [[SpriteSheet]] given a list of coordinates\r\n     *\r\n     * Example:\r\n     * ```typescript\r\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\r\n     *\r\n     * const anim = Animation.fromSpriteSheetCoordinates({\r\n     *  spriteSheet,\r\n     *  frameCoordinates: [\r\n     *    {x: 0, y: 5, duration: 100},\r\n     *    {x: 1, y: 5, duration: 200},\r\n     *    {x: 2, y: 5, duration: 100},\r\n     *    {x: 3, y: 5, duration: 500}\r\n     *  ],\r\n     *  strategy: AnimationStrategy.PingPong\r\n     * });\r\n     * ```\r\n     *\r\n     * @param options\r\n     * @returns Animation\r\n     */\r\n    static fromSpriteSheetCoordinates(options) {\r\n        const { spriteSheet, frameCoordinates, durationPerFrameMs, strategy, reverse } = options;\r\n        const defaultDuration = durationPerFrameMs !== null && durationPerFrameMs !== void 0 ? durationPerFrameMs : 100;\r\n        const frames = [];\r\n        for (const coord of frameCoordinates) {\r\n            const { x, y, duration } = coord;\r\n            const sprite = spriteSheet.getSprite(x, y);\r\n            if (sprite) {\r\n                frames.push({\r\n                    graphic: sprite,\r\n                    duration: duration !== null && duration !== void 0 ? duration : defaultDuration\r\n                });\r\n            }\r\n            else {\r\n                Animation._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${x}, ${y}), please check your SpriteSheet to confirm that sprite exists`);\r\n            }\r\n        }\r\n        return new Animation({\r\n            frames,\r\n            strategy,\r\n            reverse\r\n        });\r\n    }\r\n    /**\r\n     * Returns the current Frame of the animation\r\n     *\r\n     * Use [[Animation.currentFrameIndex]] to get the frame number and\r\n     * [[Animation.goToFrame]] to set the current frame index\r\n     */\r\n    get currentFrame() {\r\n        if (this._currentFrame >= 0 && this._currentFrame < this.frames.length) {\r\n            return this.frames[this._currentFrame];\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the current frame index of the animation\r\n     *\r\n     * Use [[Animation.currentFrame]] to grab the current [[Frame]] object\r\n     */\r\n    get currentFrameIndex() {\r\n        return this._currentFrame;\r\n    }\r\n    /**\r\n     * Returns `true` if the animation is playing\r\n     */\r\n    get isPlaying() {\r\n        return this._playing;\r\n    }\r\n    /**\r\n     * Reverses the play direction of the Animation, this preserves the current frame\r\n     */\r\n    reverse() {\r\n        // Don't mutate with the original frame list, create a copy\r\n        this.frames = this.frames.slice().reverse();\r\n        this._reversed = !this._reversed;\r\n    }\r\n    /**\r\n     * Returns the current play direction of the animation\r\n     */\r\n    get direction() {\r\n        // Keep logically consistent with ping-pong direction\r\n        // If ping-pong is forward = 1 and reversed is true then we are logically reversed\r\n        const reversed = (this._reversed && this._pingPongDirection === 1) ? true : false;\r\n        return reversed ? AnimationDirection.Backward : AnimationDirection.Forward;\r\n    }\r\n    /**\r\n     * Plays or resumes the animation from the current frame\r\n     */\r\n    play() {\r\n        this._playing = true;\r\n    }\r\n    /**\r\n     * Pauses the animation on the current frame\r\n     */\r\n    pause() {\r\n        this._playing = false;\r\n        this._firstTick = true; // firstTick must be set to emit the proper frame event\r\n    }\r\n    /**\r\n     * Reset the animation back to the beginning, including if the animation were done\r\n     */\r\n    reset() {\r\n        this._done = false;\r\n        this._firstTick = true;\r\n        this._currentFrame = 0;\r\n    }\r\n    /**\r\n     * Returns `true` if the animation can end\r\n     */\r\n    get canFinish() {\r\n        switch (this.strategy) {\r\n            case AnimationStrategy.End:\r\n            case AnimationStrategy.Freeze: {\r\n                return true;\r\n            }\r\n            default: {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the animation is done, for looping type animations\r\n     * `ex.AnimationStrategy.PingPong` and `ex.AnimationStrategy.Loop` this will always return `false`\r\n     *\r\n     * See the `ex.Animation.canFinish()` method to know if an animation type can end\r\n     */\r\n    get done() {\r\n        return this._done;\r\n    }\r\n    /**\r\n     * Jump the animation immediately to a specific frame if it exists\r\n     * @param frameNumber\r\n     */\r\n    goToFrame(frameNumber) {\r\n        this._currentFrame = frameNumber;\r\n        this._timeLeftInFrame = this.frameDuration;\r\n        const maybeFrame = this.frames[this._currentFrame];\r\n        if (maybeFrame && !this._done) {\r\n            this._timeLeftInFrame = (maybeFrame === null || maybeFrame === void 0 ? void 0 : maybeFrame.duration) || this.frameDuration;\r\n            this.events.emit('frame', { ...maybeFrame, frameIndex: this.currentFrameIndex });\r\n        }\r\n    }\r\n    _nextFrame() {\r\n        const currentFrame = this._currentFrame;\r\n        if (this._done) {\r\n            return currentFrame;\r\n        }\r\n        let next = -1;\r\n        switch (this.strategy) {\r\n            case AnimationStrategy.Loop: {\r\n                next = (currentFrame + 1) % this.frames.length;\r\n                if (next === 0) {\r\n                    this.events.emit('loop', this);\r\n                }\r\n                break;\r\n            }\r\n            case AnimationStrategy.End: {\r\n                next = currentFrame + 1;\r\n                if (next >= this.frames.length) {\r\n                    this._done = true;\r\n                    this._currentFrame = this.frames.length;\r\n                    this.events.emit('end', this);\r\n                }\r\n                break;\r\n            }\r\n            case AnimationStrategy.Freeze: {\r\n                next = clamp(currentFrame + 1, 0, this.frames.length - 1);\r\n                if (next >= this.frames.length - 1) {\r\n                    this._done = true;\r\n                    this.events.emit('end', this);\r\n                }\r\n                break;\r\n            }\r\n            case AnimationStrategy.PingPong: {\r\n                if (currentFrame + this._pingPongDirection >= this.frames.length) {\r\n                    this._pingPongDirection = -1;\r\n                    this.events.emit('loop', this);\r\n                }\r\n                if (currentFrame + this._pingPongDirection < 0) {\r\n                    this._pingPongDirection = 1;\r\n                    this.events.emit('loop', this);\r\n                }\r\n                next = currentFrame + (this._pingPongDirection % this.frames.length);\r\n                break;\r\n            }\r\n        }\r\n        return next;\r\n    }\r\n    /**\r\n     * Called internally by Excalibur to update the state of the animation potential update the current frame\r\n     * @param elapsedMilliseconds Milliseconds elapsed\r\n     * @param idempotencyToken Prevents double ticking in a frame by passing a unique token to the frame\r\n     */\r\n    tick(elapsedMilliseconds, idempotencyToken = 0) {\r\n        if (this._idempotencyToken === idempotencyToken) {\r\n            return;\r\n        }\r\n        this._idempotencyToken = idempotencyToken;\r\n        if (!this._playing) {\r\n            return;\r\n        }\r\n        // if it's the first frame emit frame event\r\n        if (this._firstTick) {\r\n            this._firstTick = false;\r\n            this.events.emit('frame', { ...this.currentFrame, frameIndex: this.currentFrameIndex });\r\n        }\r\n        this._timeLeftInFrame -= elapsedMilliseconds * this.timeScale;\r\n        if (this._timeLeftInFrame <= 0) {\r\n            this.goToFrame(this._nextFrame());\r\n        }\r\n    }\r\n    _drawImage(ctx, x, y) {\r\n        if (this.currentFrame) {\r\n            this.currentFrame.graphic.draw(ctx, x, y);\r\n        }\r\n    }\r\n}\r\nAnimation._LOGGER = Logger.getInstance();\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsGroup.ts\n\r\n\r\n\r\nclass GraphicsGroup extends Graphic {\r\n    constructor(options) {\r\n        super(options);\r\n        this.members = [];\r\n        this.members = options.members;\r\n        this._updateDimensions();\r\n    }\r\n    clone() {\r\n        return new GraphicsGroup({\r\n            members: [...this.members],\r\n            ...this.cloneGraphicOptions()\r\n        });\r\n    }\r\n    _updateDimensions() {\r\n        let bb = new BoundingBox();\r\n        for (const { graphic, pos } of this.members) {\r\n            bb = graphic.localBounds.translate(pos).combine(bb);\r\n        }\r\n        this.width = bb.width;\r\n        this.height = bb.height;\r\n        return bb;\r\n    }\r\n    get localBounds() {\r\n        let bb = new BoundingBox();\r\n        for (const { graphic, pos } of this.members) {\r\n            bb = graphic.localBounds.translate(pos).combine(bb);\r\n        }\r\n        return bb;\r\n    }\r\n    _isAnimationOrGroup(graphic) {\r\n        return graphic instanceof Animation || graphic instanceof GraphicsGroup;\r\n    }\r\n    tick(elapsedMilliseconds, idempotencyToken) {\r\n        for (const member of this.members) {\r\n            const maybeAnimation = member.graphic;\r\n            if (this._isAnimationOrGroup(maybeAnimation)) {\r\n                maybeAnimation.tick(elapsedMilliseconds, idempotencyToken);\r\n            }\r\n        }\r\n    }\r\n    reset() {\r\n        for (const member of this.members) {\r\n            const maybeAnimation = member.graphic;\r\n            if (this._isAnimationOrGroup(maybeAnimation)) {\r\n                maybeAnimation.reset();\r\n            }\r\n        }\r\n    }\r\n    _preDraw(ex, x, y) {\r\n        this._updateDimensions();\r\n        super._preDraw(ex, x, y);\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        for (const member of this.members) {\r\n            ex.save();\r\n            ex.translate(x, y);\r\n            member.graphic.draw(ex, member.pos.x, member.pos.y);\r\n            if (this.showDebug) {\r\n                /* istanbul ignore next */\r\n                ex.debug.drawRect(0, 0, this.width, this.height);\r\n            }\r\n            ex.restore();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Configurable.ts\n/**\r\n * Configurable helper extends base type and makes all properties available as option bag arguments\r\n * @internal\r\n * @param base\r\n */\r\nfunction Configurable(base) {\r\n    return class extends base {\r\n        assign(props) {\r\n            //set the value of every property that was passed in,\r\n            //if the constructor previously set this value, it will be overridden here\r\n            for (const k in props) {\r\n                // eslint-disable-next-line\r\n                if (typeof this[k] !== 'function') {\r\n                    // eslint-disable-next-line\r\n                    this[k] = props[k];\r\n                }\r\n            }\r\n        }\r\n        constructor(...args) {\r\n            super(...args);\r\n            //get the number of arguments that aren't undefined. TS passes a value to all parameters\r\n            //of whatever ctor is the implementation, so args.length doesn't work here.\r\n            const size = args.filter(function (value) {\r\n                return value !== undefined;\r\n            }).length;\r\n            if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\r\n                this.assign(args[0]);\r\n            }\r\n        }\r\n    };\r\n}\r\n\n;// CONCATENATED MODULE: ./Particles.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * An enum that represents the types of emitter nozzles\r\n */\r\nvar EmitterType;\r\n(function (EmitterType) {\r\n    /**\r\n     * Constant for the circular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Circle\"] = 0] = \"Circle\";\r\n    /**\r\n     * Constant for the rectangular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Rectangle\"] = 1] = \"Rectangle\";\r\n})(EmitterType || (EmitterType = {}));\r\n/**\r\n * @hidden\r\n */\r\nclass ParticleImpl extends Entity {\r\n    constructor(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        super();\r\n        this.position = new Vector(0, 0);\r\n        this.velocity = new Vector(0, 0);\r\n        this.acceleration = new Vector(0, 0);\r\n        this.particleRotationalVelocity = 0;\r\n        this.currentRotation = 0;\r\n        this.focus = null;\r\n        this.focusAccel = 0;\r\n        this.opacity = 1;\r\n        this.beginColor = Color.White;\r\n        this.endColor = Color.White;\r\n        // Life is counted in ms\r\n        this.life = 300;\r\n        this.fadeFlag = false;\r\n        // Color transitions\r\n        this._rRate = 1;\r\n        this._gRate = 1;\r\n        this._bRate = 1;\r\n        this._aRate = 0;\r\n        this._currentColor = Color.White;\r\n        this.emitter = null;\r\n        this.particleSize = 5;\r\n        this.particleSprite = null;\r\n        this.sizeRate = 0;\r\n        this.elapsedMultiplier = 0;\r\n        this.visible = true;\r\n        this.isOffscreen = false;\r\n        let emitter = emitterOrConfig;\r\n        if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\r\n            const config = emitterOrConfig;\r\n            emitter = config.emitter;\r\n            life = config.life;\r\n            opacity = config.opacity;\r\n            endColor = config.endColor;\r\n            beginColor = config.beginColor;\r\n            position = config.position;\r\n            velocity = config.velocity;\r\n            acceleration = config.acceleration;\r\n            startSize = config.startSize;\r\n            endSize = config.endSize;\r\n        }\r\n        this.emitter = emitter;\r\n        this.life = life || this.life;\r\n        this.opacity = opacity || this.opacity;\r\n        this.endColor = endColor || this.endColor.clone();\r\n        this.beginColor = beginColor || this.beginColor.clone();\r\n        this._currentColor = this.beginColor.clone();\r\n        if (this.emitter.particleTransform === ParticleTransform.Global) {\r\n            const globalPos = this.emitter.transform.globalPos;\r\n            this.position = (position || this.position).add(globalPos);\r\n            this.velocity = (velocity || this.velocity).rotate(this.emitter.transform.globalRotation);\r\n        }\r\n        else {\r\n            this.velocity = velocity || this.velocity;\r\n            this.position = (position || this.position);\r\n        }\r\n        this.acceleration = acceleration || this.acceleration;\r\n        this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\r\n        this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\r\n        this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\r\n        this._aRate = this.opacity / this.life;\r\n        this.startSize = startSize || 0;\r\n        this.endSize = endSize || 0;\r\n        if (this.endSize > 0 && this.startSize > 0) {\r\n            this.sizeRate = (this.endSize - this.startSize) / this.life;\r\n            this.particleSize = this.startSize;\r\n        }\r\n        this.addComponent((this.transform = new TransformComponent()));\r\n        this.addComponent((this.graphics = new GraphicsComponent()));\r\n        this.transform.pos = this.position;\r\n        this.transform.rotation = this.currentRotation;\r\n        this.transform.scale = vec(1, 1); // TODO wut\r\n        if (this.particleSprite) {\r\n            this.graphics.opacity = this.opacity;\r\n            this.graphics.use(this.particleSprite);\r\n        }\r\n        else {\r\n            this.graphics.localBounds = BoundingBox.fromDimension(this.particleSize, this.particleSize, Vector.Half);\r\n            this.graphics.onPostDraw = (ctx) => {\r\n                ctx.save();\r\n                this.graphics.opacity = this.opacity;\r\n                const tmpColor = this._currentColor.clone();\r\n                tmpColor.a = 1;\r\n                ctx.debug.drawPoint(vec(0, 0), { color: tmpColor, size: this.particleSize });\r\n                ctx.restore();\r\n            };\r\n        }\r\n    }\r\n    kill() {\r\n        this.emitter.removeParticle(this);\r\n    }\r\n    update(_engine, delta) {\r\n        this.life = this.life - delta;\r\n        this.elapsedMultiplier = this.elapsedMultiplier + delta;\r\n        if (this.life < 0) {\r\n            this.kill();\r\n        }\r\n        if (this.fadeFlag) {\r\n            this.opacity = clamp(this._aRate * this.life, 0.0001, 1);\r\n        }\r\n        if (this.startSize > 0 && this.endSize > 0) {\r\n            this.particleSize = clamp(this.sizeRate * delta + this.particleSize, Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\r\n        }\r\n        this._currentColor.r = clamp(this._currentColor.r + this._rRate * delta, 0, 255);\r\n        this._currentColor.g = clamp(this._currentColor.g + this._gRate * delta, 0, 255);\r\n        this._currentColor.b = clamp(this._currentColor.b + this._bRate * delta, 0, 255);\r\n        this._currentColor.a = clamp(this.opacity, 0.0001, 1);\r\n        if (this.focus) {\r\n            const accel = this.focus\r\n                .sub(this.position)\r\n                .normalize()\r\n                .scale(this.focusAccel)\r\n                .scale(delta / 1000);\r\n            this.velocity = this.velocity.add(accel);\r\n        }\r\n        else {\r\n            this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\r\n        }\r\n        this.position = this.position.add(this.velocity.scale(delta / 1000));\r\n        if (this.particleRotationalVelocity) {\r\n            this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\r\n        }\r\n        this.transform.pos = this.position;\r\n        this.transform.rotation = this.currentRotation;\r\n        this.transform.scale = vec(1, 1); // todo wut\r\n        this.graphics.opacity = this.opacity;\r\n    }\r\n}\r\n/**\r\n * Particle is used in a [[ParticleEmitter]]\r\n */\r\nclass Particle extends Configurable(ParticleImpl) {\r\n    constructor(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        super(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize);\r\n    }\r\n}\r\nvar ParticleTransform;\r\n(function (ParticleTransform) {\r\n    /**\r\n     * [[ParticleTransform.Global]] is the default and emits particles as if\r\n     * they were world space objects, useful for most effects.\r\n     */\r\n    ParticleTransform[\"Global\"] = \"global\";\r\n    /**\r\n     * [[ParticleTransform.Local]] particles are children of the emitter and move relative to the emitter\r\n     * as they would in a parent/child actor relationship.\r\n     */\r\n    ParticleTransform[\"Local\"] = \"local\";\r\n})(ParticleTransform || (ParticleTransform = {}));\r\n/**\r\n * Using a particle emitter is a great way to create interesting effects\r\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\r\n * extend [[Actor]] allowing you to use all of the features that come with.\r\n */\r\nclass ParticleEmitter extends Actor {\r\n    /**\r\n     * Gets the opacity of each particle from 0 to 1.0\r\n     */\r\n    get opacity() {\r\n        return super.graphics.opacity;\r\n    }\r\n    /**\r\n     * Gets the opacity of each particle from 0 to 1.0\r\n     */\r\n    set opacity(opacity) {\r\n        super.graphics.opacity = opacity;\r\n    }\r\n    /**\r\n     * Gets or sets the sprite that a particle should use\r\n     */\r\n    get particleSprite() {\r\n        return this._sprite;\r\n    }\r\n    set particleSprite(val) {\r\n        if (val) {\r\n            this._sprite = val;\r\n        }\r\n    }\r\n    /**\r\n     * @param config particle emitter options bag\r\n     */\r\n    constructor(config) {\r\n        var _a, _b;\r\n        super({ width: (_a = config.width) !== null && _a !== void 0 ? _a : 0, height: (_b = config.height) !== null && _b !== void 0 ? _b : 0 });\r\n        this._particlesToEmit = 0;\r\n        this.numParticles = 0;\r\n        /**\r\n         * Gets or sets the isEmitting flag\r\n         */\r\n        this.isEmitting = true;\r\n        /**\r\n         * Gets or sets the backing particle collection\r\n         */\r\n        this.particles = [];\r\n        /**\r\n         * Gets or sets the backing deadParticle collection\r\n         */\r\n        this.deadParticles = [];\r\n        /**\r\n         * Gets or sets the minimum particle velocity\r\n         */\r\n        this.minVel = 0;\r\n        /**\r\n         * Gets or sets the maximum particle velocity\r\n         */\r\n        this.maxVel = 0;\r\n        /**\r\n         * Gets or sets the acceleration vector for all particles\r\n         */\r\n        this.acceleration = new Vector(0, 0);\r\n        /**\r\n         * Gets or sets the minimum angle in radians\r\n         */\r\n        this.minAngle = 0;\r\n        /**\r\n         * Gets or sets the maximum angle in radians\r\n         */\r\n        this.maxAngle = 0;\r\n        /**\r\n         * Gets or sets the emission rate for particles (particles/sec)\r\n         */\r\n        this.emitRate = 1; //particles/sec\r\n        /**\r\n         * Gets or sets the life of each particle in milliseconds\r\n         */\r\n        this.particleLife = 2000;\r\n        /**\r\n         * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\r\n         */\r\n        this.fadeFlag = false;\r\n        /**\r\n         * Gets or sets the optional focus where all particles should accelerate towards\r\n         */\r\n        this.focus = null;\r\n        /**\r\n         * Gets or sets the acceleration for focusing particles if a focus has been specified\r\n         */\r\n        this.focusAccel = null;\r\n        /**\r\n         * Gets or sets the optional starting size for the particles\r\n         */\r\n        this.startSize = null;\r\n        /**\r\n         * Gets or sets the optional ending size for the particles\r\n         */\r\n        this.endSize = null;\r\n        /**\r\n         * Gets or sets the minimum size of all particles\r\n         */\r\n        this.minSize = 5;\r\n        /**\r\n         * Gets or sets the maximum size of all particles\r\n         */\r\n        this.maxSize = 5;\r\n        /**\r\n         * Gets or sets the beginning color of all particles\r\n         */\r\n        this.beginColor = Color.White;\r\n        /**\r\n         * Gets or sets the ending color of all particles\r\n         */\r\n        this.endColor = Color.White;\r\n        this._sprite = null;\r\n        /**\r\n         * Gets or sets the emitter type for the particle emitter\r\n         */\r\n        this.emitterType = EmitterType.Rectangle;\r\n        /**\r\n         * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\r\n         */\r\n        this.radius = 0;\r\n        /**\r\n         * Gets or sets the particle rotational speed velocity\r\n         */\r\n        this.particleRotationalVelocity = 0;\r\n        /**\r\n         * Indicates whether particles should start with a random rotation\r\n         */\r\n        this.randomRotation = false;\r\n        /**\r\n         * Gets or sets the emitted particle transform style, [[ParticleTransform.Global]] is the default and emits particles as if\r\n         * they were world space objects, useful for most effects.\r\n         *\r\n         * If set to [[ParticleTransform.Local]] particles are children of the emitter and move relative to the emitter\r\n         * as they would in a parent/child actor relationship.\r\n         */\r\n        this.particleTransform = ParticleTransform.Global;\r\n        const { x, y, pos, isEmitting, minVel, maxVel, acceleration, minAngle, maxAngle, emitRate, particleLife, opacity, fadeFlag, focus, focusAccel, startSize, endSize, minSize, maxSize, beginColor, endColor, particleSprite, emitterType, radius, particleRotationalVelocity, particleTransform, randomRotation, random } = { ...config };\r\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\r\n        this.isEmitting = isEmitting !== null && isEmitting !== void 0 ? isEmitting : this.isEmitting;\r\n        this.minVel = minVel !== null && minVel !== void 0 ? minVel : this.minVel;\r\n        this.maxVel = maxVel !== null && maxVel !== void 0 ? maxVel : this.maxVel;\r\n        this.acceleration = acceleration !== null && acceleration !== void 0 ? acceleration : this.acceleration;\r\n        this.minAngle = minAngle !== null && minAngle !== void 0 ? minAngle : this.minAngle;\r\n        this.maxAngle = maxAngle !== null && maxAngle !== void 0 ? maxAngle : this.maxAngle;\r\n        this.emitRate = emitRate !== null && emitRate !== void 0 ? emitRate : this.emitRate;\r\n        this.particleLife = particleLife !== null && particleLife !== void 0 ? particleLife : this.particleLife;\r\n        this.opacity = opacity !== null && opacity !== void 0 ? opacity : this.opacity;\r\n        this.fadeFlag = fadeFlag !== null && fadeFlag !== void 0 ? fadeFlag : this.fadeFlag;\r\n        this.focus = focus !== null && focus !== void 0 ? focus : this.focus;\r\n        this.focusAccel = focusAccel !== null && focusAccel !== void 0 ? focusAccel : this.focusAccel;\r\n        this.startSize = startSize !== null && startSize !== void 0 ? startSize : this.startSize;\r\n        this.endSize = endSize !== null && endSize !== void 0 ? endSize : this.endSize;\r\n        this.minSize = minSize !== null && minSize !== void 0 ? minSize : this.minSize;\r\n        this.maxSize = maxSize !== null && maxSize !== void 0 ? maxSize : this.maxSize;\r\n        this.beginColor = beginColor !== null && beginColor !== void 0 ? beginColor : this.beginColor;\r\n        this.endColor = endColor !== null && endColor !== void 0 ? endColor : this.endColor;\r\n        this.particleSprite = particleSprite !== null && particleSprite !== void 0 ? particleSprite : this.particleSprite;\r\n        this.emitterType = emitterType !== null && emitterType !== void 0 ? emitterType : this.emitterType;\r\n        this.radius = radius !== null && radius !== void 0 ? radius : this.radius;\r\n        this.particleRotationalVelocity = particleRotationalVelocity !== null && particleRotationalVelocity !== void 0 ? particleRotationalVelocity : this.particleRotationalVelocity;\r\n        this.randomRotation = randomRotation !== null && randomRotation !== void 0 ? randomRotation : this.randomRotation;\r\n        this.particleTransform = particleTransform !== null && particleTransform !== void 0 ? particleTransform : this.particleTransform;\r\n        this.body.collisionType = CollisionType.PreventCollision;\r\n        this.random = random !== null && random !== void 0 ? random : new Random();\r\n    }\r\n    removeParticle(particle) {\r\n        this.deadParticles.push(particle);\r\n    }\r\n    /**\r\n     * Causes the emitter to emit particles\r\n     * @param particleCount  Number of particles to emit right now\r\n     */\r\n    emitParticles(particleCount) {\r\n        var _a;\r\n        for (let i = 0; i < particleCount; i++) {\r\n            const p = this._createParticle();\r\n            this.particles.push(p);\r\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\r\n                if (this.particleTransform === ParticleTransform.Global) {\r\n                    this.scene.world.add(p);\r\n                }\r\n                else {\r\n                    this.addChild(p);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    clearParticles() {\r\n        this.particles.length = 0;\r\n    }\r\n    // Creates a new particle given the constraints of the emitter\r\n    _createParticle() {\r\n        // todo implement emitter constraints;\r\n        let ranX = 0;\r\n        let ranY = 0;\r\n        const angle = randomInRange(this.minAngle, this.maxAngle, this.random);\r\n        const vel = randomInRange(this.minVel, this.maxVel, this.random);\r\n        const size = this.startSize || randomInRange(this.minSize, this.maxSize, this.random);\r\n        const dx = vel * Math.cos(angle);\r\n        const dy = vel * Math.sin(angle);\r\n        if (this.emitterType === EmitterType.Rectangle) {\r\n            ranX = randomInRange(0, this.width, this.random);\r\n            ranY = randomInRange(0, this.height, this.random);\r\n        }\r\n        else if (this.emitterType === EmitterType.Circle) {\r\n            const radius = randomInRange(0, this.radius, this.random);\r\n            ranX = radius * Math.cos(angle);\r\n            ranY = radius * Math.sin(angle);\r\n        }\r\n        const p = new Particle(this, this.particleLife, this.opacity, this.beginColor, this.endColor, new Vector(ranX, ranY), new Vector(dx, dy), this.acceleration, this.startSize, this.endSize);\r\n        p.fadeFlag = this.fadeFlag;\r\n        p.particleSize = size;\r\n        if (this.particleSprite) {\r\n            p.particleSprite = this.particleSprite;\r\n            p.graphics.opacity = this.opacity;\r\n            p.graphics.use(this._sprite);\r\n        }\r\n        p.particleRotationalVelocity = this.particleRotationalVelocity;\r\n        if (this.randomRotation) {\r\n            p.currentRotation = randomInRange(0, Math.PI * 2, this.random);\r\n        }\r\n        if (this.focus) {\r\n            p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\r\n            p.focusAccel = this.focusAccel;\r\n        }\r\n        return p;\r\n    }\r\n    update(engine, delta) {\r\n        var _a;\r\n        super.update(engine, delta);\r\n        if (this.isEmitting) {\r\n            this._particlesToEmit += this.emitRate * (delta / 1000);\r\n            if (this._particlesToEmit > 1.0) {\r\n                this.emitParticles(Math.floor(this._particlesToEmit));\r\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\r\n            }\r\n        }\r\n        // deferred removal\r\n        for (let i = 0; i < this.deadParticles.length; i++) {\r\n            removeItemFromArray(this.deadParticles[i], this.particles);\r\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\r\n                this.scene.world.remove(this.deadParticles[i], false);\r\n            }\r\n        }\r\n        this.deadParticles.length = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GraphicsSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.graphics'];\r\n        this.systemType = SystemType.Draw;\r\n        this.priority = 0;\r\n        this._token = 0;\r\n        this._sortedTransforms = [];\r\n        this._zHasChanged = false;\r\n        this._zIndexUpdate = () => {\r\n            this._zHasChanged = true;\r\n        };\r\n    }\r\n    get sortedTransforms() {\r\n        return this._sortedTransforms;\r\n    }\r\n    initialize(scene) {\r\n        this._camera = scene.camera;\r\n        this._engine = scene.engine;\r\n    }\r\n    preupdate() {\r\n        // Graphics context could be switched to fallback in a new frame\r\n        this._graphicsContext = this._engine.graphicsContext;\r\n        if (this._zHasChanged) {\r\n            this._sortedTransforms.sort((a, b) => {\r\n                return a.z - b.z;\r\n            });\r\n            this._zHasChanged = false;\r\n        }\r\n    }\r\n    notify(entityAddedOrRemoved) {\r\n        if (isAddedSystemEntity(entityAddedOrRemoved)) {\r\n            const tx = entityAddedOrRemoved.data.get(TransformComponent);\r\n            this._sortedTransforms.push(tx);\r\n            tx.zIndexChanged$.subscribe(this._zIndexUpdate);\r\n            this._zHasChanged = true;\r\n        }\r\n        else {\r\n            const tx = entityAddedOrRemoved.data.get(TransformComponent);\r\n            tx.zIndexChanged$.unsubscribe(this._zIndexUpdate);\r\n            const index = this._sortedTransforms.indexOf(tx);\r\n            if (index > -1) {\r\n                this._sortedTransforms.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n    update(_entities, delta) {\r\n        this._token++;\r\n        let graphics;\r\n        FontCache.checkAndClearCache();\r\n        // This is a performance enhancement, most things are in world space\r\n        // so if we can only do this once saves a ton of transform updates\r\n        this._graphicsContext.save();\r\n        if (this._camera) {\r\n            this._camera.draw(this._graphicsContext);\r\n        }\r\n        for (const transform of this._sortedTransforms) {\r\n            const entity = transform.owner;\r\n            // If the entity is offscreen skip\r\n            if (entity.hasTag('ex.offscreen')) {\r\n                continue;\r\n            }\r\n            graphics = entity.get(GraphicsComponent);\r\n            // Exit if graphics set to not visible\r\n            if (!graphics.visible) {\r\n                continue;\r\n            }\r\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\r\n            if (transform.coordPlane === CoordPlane.Screen) {\r\n                this._graphicsContext.restore();\r\n            }\r\n            this._graphicsContext.save();\r\n            if (transform.coordPlane === CoordPlane.Screen) {\r\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\r\n            }\r\n            // Tick any graphics state (but only once) for animations and graphics groups\r\n            graphics.update(delta, this._token);\r\n            // Apply parallax\r\n            const parallax = entity.get(ParallaxComponent);\r\n            if (parallax) {\r\n                // We use the Tiled formula\r\n                // https://doc.mapeditor.org/en/latest/manual/layers/#parallax-scrolling-factor\r\n                // cameraPos * (1 - parallaxFactor)\r\n                const oneMinusFactor = Vector.One.sub(parallax.parallaxFactor);\r\n                const parallaxOffset = this._camera.pos.scale(oneMinusFactor);\r\n                this._graphicsContext.translate(parallaxOffset.x, parallaxOffset.y);\r\n            }\r\n            // Position the entity + estimate lag\r\n            this._applyTransform(entity);\r\n            // If there is a material enable it on the context\r\n            if (graphics.material) {\r\n                this._graphicsContext.material = graphics.material;\r\n            }\r\n            // Optionally run the onPreDraw graphics lifecycle draw\r\n            if (graphics.onPreDraw) {\r\n                graphics.onPreDraw(this._graphicsContext, delta);\r\n            }\r\n            // TODO remove this hack on the particle redo\r\n            const particleOpacity = (entity instanceof Particle) ? entity.opacity : 1;\r\n            this._graphicsContext.opacity *= graphics.opacity * particleOpacity;\r\n            // Draw the graphics component\r\n            this._drawGraphicsComponent(graphics);\r\n            // Optionally run the onPostDraw graphics lifecycle draw\r\n            if (graphics.onPostDraw) {\r\n                graphics.onPostDraw(this._graphicsContext, delta);\r\n            }\r\n            this._graphicsContext.restore();\r\n            // Reset the transform back to the original world space\r\n            if (transform.coordPlane === CoordPlane.Screen) {\r\n                this._graphicsContext.save();\r\n                if (this._camera) {\r\n                    this._camera.draw(this._graphicsContext);\r\n                }\r\n            }\r\n        }\r\n        this._graphicsContext.restore();\r\n    }\r\n    _drawGraphicsComponent(graphicsComponent) {\r\n        var _a, _b;\r\n        if (graphicsComponent.visible) {\r\n            const flipHorizontal = graphicsComponent.flipHorizontal;\r\n            const flipVertical = graphicsComponent.flipVertical;\r\n            for (const layer of graphicsComponent.layers.get()) {\r\n                for (const { graphic, options } of layer.graphics) {\r\n                    let anchor = graphicsComponent.anchor;\r\n                    let offset = graphicsComponent.offset;\r\n                    // handle layer specific overrides\r\n                    if (options === null || options === void 0 ? void 0 : options.anchor) {\r\n                        anchor = options.anchor;\r\n                    }\r\n                    if (options === null || options === void 0 ? void 0 : options.offset) {\r\n                        offset = options.offset;\r\n                    }\r\n                    // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\r\n                    const offsetX = -graphic.width * anchor.x + offset.x;\r\n                    const offsetY = -graphic.height * anchor.y + offset.y;\r\n                    const oldFlipHorizontal = graphic.flipHorizontal;\r\n                    const oldFlipVertical = graphic.flipVertical;\r\n                    if (flipHorizontal || flipVertical) {\r\n                        // flip any currently flipped graphics\r\n                        graphic.flipHorizontal = flipHorizontal ? !oldFlipHorizontal : oldFlipHorizontal;\r\n                        graphic.flipVertical = flipVertical ? !oldFlipVertical : oldFlipVertical;\r\n                    }\r\n                    graphic === null || graphic === void 0 ? void 0 : graphic.draw(this._graphicsContext, offsetX + layer.offset.x, offsetY + layer.offset.y);\r\n                    if (flipHorizontal || flipVertical) {\r\n                        graphic.flipHorizontal = oldFlipHorizontal;\r\n                        graphic.flipVertical = oldFlipVertical;\r\n                    }\r\n                    if (((_a = this._engine) === null || _a === void 0 ? void 0 : _a.isDebug) && this._engine.debug.graphics.showBounds) {\r\n                        const offset = vec(offsetX + layer.offset.x, offsetY + layer.offset.y);\r\n                        if (graphic instanceof GraphicsGroup) {\r\n                            for (const g of graphic.members) {\r\n                                (_b = g.graphic) === null || _b === void 0 ? void 0 : _b.localBounds.translate(offset.add(g.pos)).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\r\n                            }\r\n                        }\r\n                        else {\r\n                            /* istanbul ignore next */\r\n                            graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(offset).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * This applies the current entity transform to the graphics context\r\n     * @param entity\r\n     */\r\n    _applyTransform(entity) {\r\n        const ancestors = entity.getAncestors();\r\n        for (const ancestor of ancestors) {\r\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\r\n            const optionalBody = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(BodyComponent);\r\n            let interpolatedPos = transform.pos;\r\n            let interpolatedScale = transform.scale;\r\n            let interpolatedRotation = transform.rotation;\r\n            if (optionalBody) {\r\n                if (this._engine.fixedUpdateFps &&\r\n                    optionalBody.__oldTransformCaptured &&\r\n                    optionalBody.enableFixedUpdateInterpolate) {\r\n                    // Interpolate graphics if needed\r\n                    const blend = this._engine.currentFrameLagMs / (1000 / this._engine.fixedUpdateFps);\r\n                    interpolatedPos = transform.pos.scale(blend).add(optionalBody.oldPos.scale(1.0 - blend));\r\n                    interpolatedScale = transform.scale.scale(blend).add(optionalBody.oldScale.scale(1.0 - blend));\r\n                    // Rotational lerp https://stackoverflow.com/a/30129248\r\n                    const cosine = (1.0 - blend) * Math.cos(optionalBody.oldRotation) + blend * Math.cos(transform.rotation);\r\n                    const sine = (1.0 - blend) * Math.sin(optionalBody.oldRotation) + blend * Math.sin(transform.rotation);\r\n                    interpolatedRotation = Math.atan2(sine, cosine);\r\n                }\r\n            }\r\n            if (transform) {\r\n                this._graphicsContext.z = transform.z;\r\n                this._graphicsContext.translate(interpolatedPos.x, interpolatedPos.y);\r\n                this._graphicsContext.scale(interpolatedScale.x, interpolatedScale.y);\r\n                this._graphicsContext.rotate(interpolatedRotation);\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Debug/DebugSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass DebugSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform'];\r\n        this.systemType = SystemType.Draw;\r\n        this.priority = 999; // lowest priority\r\n    }\r\n    initialize(scene) {\r\n        this._graphicsContext = scene.engine.graphicsContext;\r\n        this._camera = scene.camera;\r\n        this._engine = scene.engine;\r\n        this._collisionSystem = scene.world.systemManager.get(CollisionSystem);\r\n    }\r\n    update(entities, _delta) {\r\n        var _a;\r\n        if (!this._engine.isDebug) {\r\n            return;\r\n        }\r\n        const filterSettings = this._engine.debug.filter;\r\n        let id;\r\n        let name;\r\n        const entitySettings = this._engine.debug.entity;\r\n        let tx;\r\n        const txSettings = this._engine.debug.transform;\r\n        let motion;\r\n        const motionSettings = this._engine.debug.motion;\r\n        let colliderComp;\r\n        const colliderSettings = this._engine.debug.collider;\r\n        const physicsSettings = this._engine.debug.physics;\r\n        let graphics;\r\n        const graphicsSettings = this._engine.debug.graphics;\r\n        let debugDraw;\r\n        let body;\r\n        const bodySettings = this._engine.debug.body;\r\n        const cameraSettings = this._engine.debug.camera;\r\n        for (const entity of entities) {\r\n            if (entity.hasTag('offscreen')) {\r\n                // skip offscreen entities\r\n                continue;\r\n            }\r\n            if (entity instanceof Particle) {\r\n                // Particles crush the renderer :(\r\n                continue;\r\n            }\r\n            if (filterSettings.useFilter) {\r\n                const allIds = filterSettings.ids.length === 0;\r\n                const idMatch = allIds || filterSettings.ids.includes(entity.id);\r\n                if (!idMatch) {\r\n                    continue;\r\n                }\r\n                const allNames = filterSettings.nameQuery === '';\r\n                const nameMatch = allNames || entity.name.includes(filterSettings.nameQuery);\r\n                if (!nameMatch) {\r\n                    continue;\r\n                }\r\n            }\r\n            let cursor = Vector.Zero;\r\n            const lineHeight = vec(0, 16);\r\n            id = entity.id;\r\n            name = entity.name;\r\n            tx = entity.get(TransformComponent);\r\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\r\n            this._pushCameraTransform(tx);\r\n            this._graphicsContext.save();\r\n            this._applyTransform(entity);\r\n            if (tx) {\r\n                if (txSettings.showAll || txSettings.showPosition) {\r\n                    this._graphicsContext.debug.drawPoint(Vector.Zero, { size: 4, color: txSettings.positionColor });\r\n                }\r\n                if (txSettings.showAll || txSettings.showPositionLabel) {\r\n                    this._graphicsContext.debug.drawText(`pos${tx.pos.toString(2)}`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (txSettings.showAll || txSettings.showZIndex) {\r\n                    this._graphicsContext.debug.drawText(`z(${tx.z.toFixed(1)})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (entitySettings.showAll || entitySettings.showId) {\r\n                    this._graphicsContext.debug.drawText(`id(${id}) ${entity.parent ? 'child of id(' + ((_a = entity.parent) === null || _a === void 0 ? void 0 : _a.id) + ')' : ''}`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (entitySettings.showAll || entitySettings.showName) {\r\n                    this._graphicsContext.debug.drawText(`name(${name})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (txSettings.showAll || txSettings.showRotation) {\r\n                    this._graphicsContext.drawLine(Vector.Zero, Vector.fromAngle(tx.rotation).scale(50).add(Vector.Zero), txSettings.rotationColor, 2);\r\n                    this._graphicsContext.debug.drawText(`rot deg(${toDegrees(tx.rotation).toFixed(2)})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (txSettings.showAll || txSettings.showScale) {\r\n                    this._graphicsContext.drawLine(Vector.Zero, tx.scale.add(Vector.Zero), txSettings.scaleColor, 2);\r\n                }\r\n            }\r\n            graphics = entity.get(GraphicsComponent);\r\n            if (graphics) {\r\n                if (graphicsSettings.showAll || graphicsSettings.showBounds) {\r\n                    const bounds = graphics.localBounds;\r\n                    bounds.draw(this._graphicsContext, graphicsSettings.boundsColor);\r\n                }\r\n            }\r\n            debugDraw = entity.get(DebugGraphicsComponent);\r\n            if (debugDraw) {\r\n                if (!debugDraw.useTransform) {\r\n                    this._graphicsContext.restore();\r\n                }\r\n                debugDraw.draw(this._graphicsContext);\r\n                if (!debugDraw.useTransform) {\r\n                    this._graphicsContext.save();\r\n                    this._applyTransform(entity);\r\n                }\r\n            }\r\n            body = entity.get(BodyComponent);\r\n            if (body) {\r\n                if (bodySettings.showAll || bodySettings.showCollisionGroup) {\r\n                    this._graphicsContext.debug.drawText(`collision group(${body.group.name})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showCollisionType) {\r\n                    this._graphicsContext.debug.drawText(`collision type(${body.collisionType})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showMass) {\r\n                    this._graphicsContext.debug.drawText(`mass(${body.mass})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showMotion) {\r\n                    this._graphicsContext.debug.drawText(`motion(${body.sleepMotion})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showSleeping) {\r\n                    this._graphicsContext.debug.drawText(`sleeping(${body.canSleep ? body.sleeping : 'cant sleep'})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n            }\r\n            this._graphicsContext.restore();\r\n            motion = entity.get(MotionComponent);\r\n            if (motion) {\r\n                if (motionSettings.showAll || motionSettings.showVelocity) {\r\n                    this._graphicsContext.debug.drawText(`vel${motion.vel.toString(2)}`, cursor.add(tx.globalPos));\r\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.vel), motionSettings.velocityColor, 2);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (motionSettings.showAll || motionSettings.showAcceleration) {\r\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.acc), motionSettings.accelerationColor, 2);\r\n                }\r\n            }\r\n            // Colliders live in world space already so after the restore()\r\n            colliderComp = entity.get(ColliderComponent);\r\n            if (colliderComp) {\r\n                const collider = colliderComp.get();\r\n                if ((colliderSettings.showAll || colliderSettings.showGeometry) && collider) {\r\n                    collider.debug(this._graphicsContext, colliderSettings.geometryColor);\r\n                }\r\n                if (colliderSettings.showAll || colliderSettings.showBounds) {\r\n                    if (collider instanceof CompositeCollider) {\r\n                        const colliders = collider.getColliders();\r\n                        for (const collider of colliders) {\r\n                            const bounds = collider.bounds;\r\n                            const pos = vec(bounds.left, bounds.top);\r\n                            this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\r\n                            if (colliderSettings.showAll || colliderSettings.showOwner) {\r\n                                this._graphicsContext.debug.drawText(`owner id(${collider.owner.id})`, pos);\r\n                            }\r\n                        }\r\n                        colliderComp.bounds.draw(this._graphicsContext, colliderSettings.boundsColor);\r\n                    }\r\n                    else if (collider) {\r\n                        const bounds = colliderComp.bounds;\r\n                        const pos = vec(bounds.left, bounds.top);\r\n                        this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\r\n                        if (colliderSettings.showAll || colliderSettings.showOwner) {\r\n                            this._graphicsContext.debug.drawText(`owner id(${colliderComp.owner.id})`, pos);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._popCameraTransform(tx);\r\n        }\r\n        this._graphicsContext.save();\r\n        this._camera.draw(this._graphicsContext);\r\n        if (physicsSettings.showAll || physicsSettings.showBroadphaseSpacePartitionDebug) {\r\n            this._collisionSystem.debug(this._graphicsContext);\r\n        }\r\n        if (physicsSettings.showAll || physicsSettings.showCollisionContacts || physicsSettings.showCollisionNormals) {\r\n            for (const [_, contact] of this._engine.debug.stats.currFrame.physics.contacts) {\r\n                if (physicsSettings.showAll || physicsSettings.showCollisionContacts) {\r\n                    for (const point of contact.points) {\r\n                        this._graphicsContext.debug.drawPoint(point, { size: 5, color: physicsSettings.collisionContactColor });\r\n                    }\r\n                }\r\n                if (physicsSettings.showAll || physicsSettings.showCollisionNormals) {\r\n                    for (const point of contact.points) {\r\n                        this._graphicsContext.debug.drawLine(point, contact.normal.scale(30).add(point), {\r\n                            color: physicsSettings.collisionNormalColor\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._graphicsContext.restore();\r\n        if (cameraSettings) {\r\n            this._graphicsContext.save();\r\n            this._camera.draw(this._graphicsContext);\r\n            if (cameraSettings.showAll || cameraSettings.showFocus) {\r\n                this._graphicsContext.drawCircle(this._camera.pos, 4, cameraSettings.focusColor);\r\n            }\r\n            if (cameraSettings.showAll || cameraSettings.showZoom) {\r\n                this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`, this._camera.pos);\r\n            }\r\n            this._graphicsContext.restore();\r\n        }\r\n        this._graphicsContext.flush();\r\n    }\r\n    /**\r\n     * This applies the current entity transform to the graphics context\r\n     * @param entity\r\n     */\r\n    _applyTransform(entity) {\r\n        const ancestors = entity.getAncestors();\r\n        for (const ancestor of ancestors) {\r\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\r\n            if (transform) {\r\n                this._graphicsContext.translate(transform.pos.x, transform.pos.y);\r\n                this._graphicsContext.scale(transform.scale.x, transform.scale.y);\r\n                this._graphicsContext.rotate(transform.rotation);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Applies the current camera transform if in world coordinates\r\n     * @param transform\r\n     */\r\n    _pushCameraTransform(transform) {\r\n        // Establish camera offset per entity\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            this._graphicsContext.save();\r\n            if (this._camera) {\r\n                this._camera.draw(this._graphicsContext);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Resets the current camera transform if in world coordinates\r\n     * @param transform\r\n     */\r\n    _popCameraTransform(transform) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            // Apply camera world offset\r\n            this._graphicsContext.restore();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerSystem.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The PointerSystem is responsible for dispatching pointer events to entities\r\n * that need them.\r\n *\r\n * The PointerSystem can be optionally configured by the [[PointerComponent]], by default Entities use\r\n * the [[Collider]]'s shape for pointer events.\r\n */\r\nclass PointerSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.pointer'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n        /**\r\n         * Optionally override component configuration for all entities\r\n         */\r\n        this.overrideUseColliderShape = false;\r\n        /**\r\n         * Optionally override component configuration for all entities\r\n         */\r\n        this.overrideUseGraphicsBounds = false;\r\n        this.lastFrameEntityToPointers = new Map();\r\n        this.currentFrameEntityToPointers = new Map();\r\n        this._sortedTransforms = [];\r\n        this._sortedEntities = [];\r\n        this._zHasChanged = false;\r\n        this._zIndexUpdate = () => {\r\n            this._zHasChanged = true;\r\n        };\r\n    }\r\n    initialize(scene) {\r\n        this._engine = scene.engine;\r\n    }\r\n    preupdate() {\r\n        // event receiver might change per frame\r\n        this._receiver = this._engine.input.pointers;\r\n        if (this._zHasChanged) {\r\n            this._sortedTransforms.sort((a, b) => {\r\n                return b.z - a.z;\r\n            });\r\n            this._sortedEntities = this._sortedTransforms.map(t => t.owner);\r\n            this._zHasChanged = false;\r\n        }\r\n    }\r\n    notify(entityAddedOrRemoved) {\r\n        if (isAddedSystemEntity(entityAddedOrRemoved)) {\r\n            const tx = entityAddedOrRemoved.data.get(TransformComponent);\r\n            this._sortedTransforms.push(tx);\r\n            this._sortedEntities.push(tx.owner);\r\n            tx.zIndexChanged$.subscribe(this._zIndexUpdate);\r\n            this._zHasChanged = true;\r\n        }\r\n        else {\r\n            const tx = entityAddedOrRemoved.data.get(TransformComponent);\r\n            tx.zIndexChanged$.unsubscribe(this._zIndexUpdate);\r\n            const index = this._sortedTransforms.indexOf(tx);\r\n            if (index > -1) {\r\n                this._sortedTransforms.splice(index, 1);\r\n                this._sortedEntities.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n    entityCurrentlyUnderPointer(entity, pointerId) {\r\n        return this.currentFrameEntityToPointers.has(entity.id) &&\r\n            this.currentFrameEntityToPointers.get(entity.id).includes(pointerId);\r\n    }\r\n    entityWasUnderPointer(entity, pointerId) {\r\n        return this.lastFrameEntityToPointers.has(entity.id) &&\r\n            this.lastFrameEntityToPointers.get(entity.id).includes(pointerId);\r\n    }\r\n    entered(entity, pointerId) {\r\n        return this.entityCurrentlyUnderPointer(entity, pointerId) &&\r\n            !this.lastFrameEntityToPointers.has(entity.id);\r\n    }\r\n    left(entity, pointerId) {\r\n        return !this.currentFrameEntityToPointers.has(entity.id) &&\r\n            this.entityWasUnderPointer(entity, pointerId);\r\n    }\r\n    addPointerToEntity(entity, pointerId) {\r\n        if (!this.currentFrameEntityToPointers.has(entity.id)) {\r\n            this.currentFrameEntityToPointers.set(entity.id, [pointerId]);\r\n            return;\r\n        }\r\n        const pointers = this.currentFrameEntityToPointers.get(entity.id);\r\n        this.currentFrameEntityToPointers.set(entity.id, pointers.concat(pointerId));\r\n    }\r\n    update(_entities) {\r\n        // Locate all the pointer/entity mappings\r\n        this._processPointerToEntity(this._sortedEntities);\r\n        // Dispatch pointer events on entities\r\n        this._dispatchEvents(this._sortedEntities);\r\n        // Clear last frame's events\r\n        this._receiver.update();\r\n        this.lastFrameEntityToPointers.clear();\r\n        this.lastFrameEntityToPointers = new Map(this.currentFrameEntityToPointers);\r\n        this.currentFrameEntityToPointers.clear();\r\n        this._receiver.clear();\r\n    }\r\n    _processPointerToEntity(entities) {\r\n        var _a;\r\n        let transform;\r\n        let collider;\r\n        let graphics;\r\n        let pointer;\r\n        // TODO probably a spatial partition optimization here to quickly query bounds for pointer\r\n        // doesn't seem to cause issues tho for perf\r\n        // Pre-process find entities under pointers\r\n        for (const entity of entities) {\r\n            transform = entity.get(TransformComponent);\r\n            pointer = (_a = entity.get(PointerComponent)) !== null && _a !== void 0 ? _a : new PointerComponent;\r\n            // Check collider contains pointer\r\n            collider = entity.get(ColliderComponent);\r\n            if (collider && (pointer.useColliderShape || this.overrideUseColliderShape)) {\r\n                collider.update();\r\n                const geom = collider.get();\r\n                if (geom) {\r\n                    for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n                        if (geom.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n                            this.addPointerToEntity(entity, pointerId);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Check graphics contains pointer\r\n            graphics = entity.get(GraphicsComponent);\r\n            if (graphics && (pointer.useGraphicsBounds || this.overrideUseGraphicsBounds)) {\r\n                const graphicBounds = graphics.localBounds.transform(transform.get().matrix);\r\n                for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n                    if (graphicBounds.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n                        this.addPointerToEntity(entity, pointerId);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _processDownAndEmit(entity) {\r\n        const lastDownPerPointer = new Map();\r\n        // Loop through down and dispatch to entities\r\n        for (const event of this._receiver.currentFrameDown) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                entity.events.emit('pointerdown', event);\r\n                if (this._receiver.isDragStart(event.pointerId)) {\r\n                    entity.events.emit('pointerdragstart', event);\r\n                }\r\n            }\r\n            lastDownPerPointer.set(event.pointerId, event);\r\n        }\r\n        return lastDownPerPointer;\r\n    }\r\n    _processUpAndEmit(entity) {\r\n        const lastUpPerPointer = new Map();\r\n        // Loop through up and dispatch to entities\r\n        for (const event of this._receiver.currentFrameUp) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                entity.events.emit('pointerup', event);\r\n                if (this._receiver.isDragEnd(event.pointerId)) {\r\n                    entity.events.emit('pointerdragend', event);\r\n                }\r\n            }\r\n            lastUpPerPointer.set(event.pointerId, event);\r\n        }\r\n        return lastUpPerPointer;\r\n    }\r\n    _processMoveAndEmit(entity) {\r\n        const lastMovePerPointer = new Map();\r\n        // Loop through move and dispatch to entities\r\n        for (const event of this._receiver.currentFrameMove) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                // move\r\n                entity.events.emit('pointermove', event);\r\n                if (this._receiver.isDragging(event.pointerId)) {\r\n                    entity.events.emit('pointerdragmove', event);\r\n                }\r\n            }\r\n            lastMovePerPointer.set(event.pointerId, event);\r\n        }\r\n        return lastMovePerPointer;\r\n    }\r\n    _processEnterLeaveAndEmit(entity, lastUpDownMoveEvents) {\r\n        // up, down, and move are considered for enter and leave\r\n        for (const event of lastUpDownMoveEvents) {\r\n            // enter\r\n            if (event.active && entity.active && this.entered(entity, event.pointerId)) {\r\n                entity.events.emit('pointerenter', event);\r\n                if (this._receiver.isDragging(event.pointerId)) {\r\n                    entity.events.emit('pointerdragenter', event);\r\n                }\r\n                break;\r\n            }\r\n            if (event.active && entity.active &&\r\n                // leave can happen on move\r\n                (this.left(entity, event.pointerId) ||\r\n                    // or leave can happen on pointer up\r\n                    (this.entityCurrentlyUnderPointer(entity, event.pointerId) && event.type === 'up'))) {\r\n                entity.events.emit('pointerleave', event);\r\n                if (this._receiver.isDragging(event.pointerId)) {\r\n                    entity.events.emit('pointerdragleave', event);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    _processCancelAndEmit(entity) {\r\n        // cancel\r\n        for (const event of this._receiver.currentFrameCancel) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                entity.events.emit('pointercancel', event);\r\n            }\r\n        }\r\n    }\r\n    _processWheelAndEmit(entity) {\r\n        // wheel\r\n        for (const event of this._receiver.currentFrameWheel) {\r\n            // Currently the wheel only fires under the primary pointer '0'\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, 0)) {\r\n                entity.events.emit('pointerwheel', event);\r\n            }\r\n        }\r\n    }\r\n    _dispatchEvents(entities) {\r\n        const lastFrameEntities = new Set(this.lastFrameEntityToPointers.keys());\r\n        const currentFrameEntities = new Set(this.currentFrameEntityToPointers.keys());\r\n        // Filter preserves z order\r\n        const entitiesWithEvents = entities.filter(e => lastFrameEntities.has(e.id) || currentFrameEntities.has(e.id));\r\n        let lastMovePerPointer;\r\n        let lastUpPerPointer;\r\n        let lastDownPerPointer;\r\n        // Dispatch events in entity z order\r\n        for (const entity of entitiesWithEvents) {\r\n            lastDownPerPointer = this._processDownAndEmit(entity);\r\n            lastUpPerPointer = this._processUpAndEmit(entity);\r\n            lastMovePerPointer = this._processMoveAndEmit(entity);\r\n            const lastUpDownMoveEvents = [\r\n                ...lastMovePerPointer.values(),\r\n                ...lastDownPerPointer.values(),\r\n                ...lastUpPerPointer.values()\r\n            ];\r\n            this._processEnterLeaveAndEmit(entity, lastUpDownMoveEvents);\r\n            this._processCancelAndEmit(entity);\r\n            this._processWheelAndEmit(entity);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/ActionsSystem.ts\n\r\n\r\nclass ActionsSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.actions'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n        this._actions = [];\r\n    }\r\n    notify(entityAddedOrRemoved) {\r\n        if (isAddedSystemEntity(entityAddedOrRemoved)) {\r\n            const action = entityAddedOrRemoved.data.get(ActionsComponent);\r\n            this._actions.push(action);\r\n        }\r\n        else {\r\n            const action = entityAddedOrRemoved.data.get(ActionsComponent);\r\n            const index = this._actions.indexOf(action);\r\n            if (index > -1) {\r\n                this._actions.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n    update(_entities, delta) {\r\n        for (const actions of this._actions) {\r\n            actions.update(delta);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./TileMap/IsometricEntityComponent.ts\n\r\nclass IsometricEntityComponent extends Component {\r\n    /**\r\n     * Specify the isometric map to use to position this entity's z-index\r\n     * @param map\r\n     */\r\n    constructor(map) {\r\n        super();\r\n        this.type = 'ex.isometricentity';\r\n        /**\r\n         * Vertical \"height\" in the isometric world\r\n         */\r\n        this.elevation = 0;\r\n        this.map = map;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./TileMap/IsometricEntitySystem.ts\n\r\n\r\n\r\nclass IsometricEntitySystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.isometricentity'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = 99;\r\n    }\r\n    update(entities, _delta) {\r\n        let transform;\r\n        let iso;\r\n        for (const entity of entities) {\r\n            transform = entity.get(TransformComponent);\r\n            iso = entity.get(IsometricEntityComponent);\r\n            const maxZindexPerElevation = Math.max(iso.map.columns * iso.map.tileWidth, iso.map.rows * iso.map.tileHeight);\r\n            const newZ = maxZindexPerElevation * iso.elevation + transform.pos.y;\r\n            transform.z = newZ;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/OffscreenSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass OffscreenSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.graphics'];\r\n        this.systemType = SystemType.Draw;\r\n        this.priority = -1;\r\n    }\r\n    initialize(scene) {\r\n        this._camera = scene.camera;\r\n        this._screen = scene.engine.screen;\r\n    }\r\n    update(entities) {\r\n        this._worldBounds = this._screen.getWorldBounds();\r\n        let transform;\r\n        let graphics;\r\n        let maybeParallax;\r\n        for (const entity of entities) {\r\n            graphics = entity.get(GraphicsComponent);\r\n            transform = entity.get(TransformComponent);\r\n            maybeParallax = entity.get(ParallaxComponent);\r\n            let parallaxOffset;\r\n            if (maybeParallax) {\r\n                // We use the Tiled formula\r\n                // https://doc.mapeditor.org/en/latest/manual/layers/#parallax-scrolling-factor\r\n                // cameraPos * (1 - parallaxFactor)\r\n                const oneMinusFactor = Vector.One.sub(maybeParallax.parallaxFactor);\r\n                parallaxOffset = this._camera.pos.scale(oneMinusFactor);\r\n            }\r\n            // Figure out if entities are offscreen\r\n            const entityOffscreen = this._isOffscreen(transform, graphics, parallaxOffset);\r\n            if (entityOffscreen && !entity.hasTag('ex.offscreen')) {\r\n                entity.events.emit('exitviewport', new ExitViewPortEvent(entity));\r\n                entity.addTag('ex.offscreen');\r\n            }\r\n            if (!entityOffscreen && entity.hasTag('ex.offscreen')) {\r\n                entity.events.emit('enterviewport', new EnterViewPortEvent(entity));\r\n                entity.removeTag('ex.offscreen');\r\n            }\r\n        }\r\n    }\r\n    _isOffscreen(transform, graphics, parallaxOffset) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            let bounds = graphics.localBounds;\r\n            if (parallaxOffset) {\r\n                bounds = bounds.translate(parallaxOffset);\r\n            }\r\n            const transformedBounds = bounds.transform(transform.get().matrix);\r\n            const graphicsOffscreen = !this._worldBounds.overlaps(transformedBounds);\r\n            return graphicsOffscreen;\r\n        }\r\n        else {\r\n            // TODO screen coordinates\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/PhysicsWorld.ts\n\r\nclass PhysicsWorld {\r\n    constructor() {\r\n        this.collisionProcessor = new DynamicTreeCollisionProcessor();\r\n    }\r\n    rayCast(ray, options) {\r\n        return this.collisionProcessor.rayCast(ray, options);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Scene.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst SceneEvents = {\r\n    Initialize: 'initialize',\r\n    Activate: 'activate',\r\n    Deactivate: 'deactivate',\r\n    PreUpdate: 'preupdate',\r\n    PostUpdate: 'postupdate',\r\n    PreDraw: 'predraw',\r\n    PostDraw: 'postdraw',\r\n    PreDebugDraw: 'predebugdraw',\r\n    PostDebugDraw: 'postdebugdraw'\r\n};\r\n/**\r\n * [[Actor|Actors]] are composed together into groupings called Scenes in\r\n * Excalibur. The metaphor models the same idea behind real world\r\n * actors in a scene. Only actors in scenes will be updated and drawn.\r\n *\r\n * Typical usages of a scene include: levels, menus, loading screens, etc.\r\n */\r\nclass Scene {\r\n    /**\r\n     * The actors in the current scene\r\n     */\r\n    get actors() {\r\n        return this.world.entityManager.entities.filter((e) => {\r\n            return e instanceof Actor;\r\n        });\r\n    }\r\n    /**\r\n     * The entities in the current scene\r\n     */\r\n    get entities() {\r\n        return this.world.entityManager.entities;\r\n    }\r\n    /**\r\n     * The triggers in the current scene\r\n     */\r\n    get triggers() {\r\n        return this.world.entityManager.entities.filter((e) => {\r\n            return e instanceof Trigger;\r\n        });\r\n    }\r\n    /**\r\n     * The [[TileMap]]s in the scene, if any\r\n     */\r\n    get tileMaps() {\r\n        return this.world.entityManager.entities.filter((e) => {\r\n            return e instanceof TileMap;\r\n        });\r\n    }\r\n    get timers() {\r\n        return this._timers;\r\n    }\r\n    constructor() {\r\n        // Initialize systems\r\n        this._logger = Logger.getInstance();\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * Gets or sets the current camera for the scene\r\n         */\r\n        this.camera = new Camera();\r\n        /**\r\n         * The ECS world for the scene\r\n         */\r\n        this.world = new World(this);\r\n        /**\r\n         * The Excalibur physics world for the scene. Used to interact\r\n         * with colliders included in the scene.\r\n         *\r\n         * Can be used to perform scene ray casts, track colliders, broadphase, and narrowphase.\r\n         */\r\n        this.physics = new PhysicsWorld();\r\n        this._isInitialized = false;\r\n        this._timers = [];\r\n        this._cancelQueue = [];\r\n        // Update\r\n        this.world.add(new ActionsSystem());\r\n        this.world.add(new MotionSystem());\r\n        this.world.add(new CollisionSystem(this.physics));\r\n        this.world.add(new PointerSystem());\r\n        this.world.add(new IsometricEntitySystem());\r\n        // Draw\r\n        this.world.add(new OffscreenSystem());\r\n        this.world.add(new GraphicsSystem());\r\n        this.world.add(new DebugSystem());\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    /**\r\n     * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     */\r\n    onInitialize(_engine) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * This is called when the scene is made active and started. It is meant to be overridden,\r\n     * this is where you should setup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    onActivate(_context) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\r\n     * this is where you should cleanup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    onDeactivate(_context) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before a scene is drawn.\r\n     *\r\n     */\r\n    onPreDraw(_ctx, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after a scene is drawn.\r\n     *\r\n     */\r\n    onPostDraw(_ctx, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Initializes actors in the scene\r\n     */\r\n    _initializeChildren() {\r\n        for (const child of this.entities) {\r\n            child._initialize(this.engine);\r\n        }\r\n    }\r\n    /**\r\n     * Gets whether or not the [[Scene]] has been initialized\r\n     */\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Initializes the scene before the first update, meant to be called by engine not by users of\r\n     * Excalibur\r\n     * @internal\r\n     */\r\n    _initialize(engine) {\r\n        if (!this.isInitialized) {\r\n            this.engine = engine;\r\n            // Initialize camera first\r\n            this.camera._initialize(engine);\r\n            this.world.systemManager.initialize();\r\n            // This order is important! we want to be sure any custom init that add actors\r\n            // fire before the actor init\r\n            this.onInitialize.call(this, engine);\r\n            this._initializeChildren();\r\n            this._logger.debug('Scene.onInitialize', this, engine);\r\n            this.events.emit('initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\r\n     * @internal\r\n     */\r\n    _activate(context) {\r\n        this._logger.debug('Scene.onActivate', this);\r\n        this.onActivate(context);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\r\n     * @internal\r\n     */\r\n    _deactivate(context) {\r\n        this._logger.debug('Scene.onDeactivate', this);\r\n        this.onDeactivate(context);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(_engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\r\n        this.onPreUpdate(_engine, delta);\r\n    }\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(_engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\r\n        this.onPostUpdate(_engine, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     *\r\n     * @internal\r\n     */\r\n    _predraw(_ctx, _delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\r\n        this.onPreDraw(_ctx, _delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     *\r\n     * @internal\r\n     */\r\n    _postdraw(_ctx, _delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\r\n        this.onPostDraw(_ctx, _delta);\r\n    }\r\n    /**\r\n     * Updates all the actors and timers in the scene. Called by the [[Engine]].\r\n     * @param engine  Reference to the current Engine\r\n     * @param delta   The number of milliseconds since the last update\r\n     */\r\n    update(engine, delta) {\r\n        this._preupdate(engine, delta);\r\n        // TODO differed entity removal for timers\r\n        let i, len;\r\n        // Remove timers in the cancel queue before updating them\r\n        for (i = 0, len = this._cancelQueue.length; i < len; i++) {\r\n            this.removeTimer(this._cancelQueue[i]);\r\n        }\r\n        this._cancelQueue.length = 0;\r\n        // Cycle through timers updating timers\r\n        for (const timer of this._timers) {\r\n            timer.update(delta);\r\n        }\r\n        this.world.update(SystemType.Update, delta);\r\n        // Camera last keeps renders smooth that are based on entity/actor\r\n        if (this.camera) {\r\n            this.camera.update(engine, delta);\r\n        }\r\n        this._collectActorStats(engine);\r\n        this._postupdate(engine, delta);\r\n    }\r\n    /**\r\n     * Draws all the actors in the Scene. Called by the [[Engine]].\r\n     *\r\n     * @param ctx    The current rendering context\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    draw(ctx, delta) {\r\n        var _a;\r\n        this._predraw(ctx, delta);\r\n        this.world.update(SystemType.Draw, delta);\r\n        if ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.isDebug) {\r\n            this.debugDraw(ctx);\r\n        }\r\n        this._postdraw(ctx, delta);\r\n    }\r\n    /**\r\n     * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\r\n     * @param ctx  The current rendering context\r\n     */\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx) {\r\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n        // pass\r\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n    }\r\n    /**\r\n     * Checks whether an actor is contained in this scene or not\r\n     */\r\n    contains(actor) {\r\n        return this.actors.indexOf(actor) > -1;\r\n    }\r\n    add(entity) {\r\n        this.emit('entityadded', { target: entity });\r\n        this.world.add(entity);\r\n        entity.scene = this;\r\n        if (entity instanceof Timer) {\r\n            if (!contains(this._timers, entity)) {\r\n                this.addTimer(entity);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    /**\r\n     * Removes an [[Entity]] (Actor, TileMap, Trigger, etc) or [[Timer]] from it's current scene\r\n     * and adds it to this scene.\r\n     *\r\n     * Useful if you want to have an object be present in only 1 scene at a time.\r\n     * @param entity\r\n     */\r\n    transfer(entity) {\r\n        let scene;\r\n        if (entity instanceof Entity && entity.scene && entity.scene !== this) {\r\n            scene = entity.scene;\r\n            entity.scene.world.remove(entity, false);\r\n        }\r\n        if (entity instanceof Timer && entity.scene) {\r\n            scene = entity.scene;\r\n            entity.scene.removeTimer(entity);\r\n        }\r\n        scene === null || scene === void 0 ? void 0 : scene.emit('entityremoved', { target: entity });\r\n        this.add(entity);\r\n    }\r\n    remove(entity) {\r\n        if (entity instanceof Entity) {\r\n            this.emit('entityremoved', { target: entity });\r\n            if (entity.active) {\r\n                entity.kill();\r\n            }\r\n            this.world.remove(entity);\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.removeTimer(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Removes all entities and timers from the scene, optionally indicate whether deferred should or shouldn't be used.\r\n     *\r\n     * By default entities use deferred removal\r\n     * @param deferred\r\n     */\r\n    clear(deferred = true) {\r\n        for (const entity of this.entities) {\r\n            this.world.remove(entity, deferred);\r\n        }\r\n        for (const timer of this.timers) {\r\n            this.removeTimer(timer);\r\n        }\r\n    }\r\n    /**\r\n     * Adds a [[Timer]] to the scene\r\n     * @param timer  The timer to add\r\n     */\r\n    addTimer(timer) {\r\n        this._timers.push(timer);\r\n        timer.scene = this;\r\n        return timer;\r\n    }\r\n    /**\r\n     * Removes a [[Timer]] from the scene.\r\n     * @warning Can be dangerous, use [[cancelTimer]] instead\r\n     * @param timer  The timer to remove\r\n     */\r\n    removeTimer(timer) {\r\n        const i = this._timers.indexOf(timer);\r\n        if (i !== -1) {\r\n            this._timers.splice(i, 1);\r\n        }\r\n        return timer;\r\n    }\r\n    /**\r\n     * Cancels a [[Timer]], removing it from the scene nicely\r\n     * @param timer  The timer to cancel\r\n     */\r\n    cancelTimer(timer) {\r\n        this._cancelQueue.push(timer);\r\n        return timer;\r\n    }\r\n    /**\r\n     * Tests whether a [[Timer]] is active in the scene\r\n     */\r\n    isTimerActive(timer) {\r\n        return this._timers.indexOf(timer) > -1 && !timer.complete;\r\n    }\r\n    isCurrentScene() {\r\n        if (this.engine) {\r\n            return this.engine.currentScene === this;\r\n        }\r\n        return false;\r\n    }\r\n    _collectActorStats(engine) {\r\n        const screenElements = this.actors.filter((a) => a instanceof ScreenElement);\r\n        for (const _ui of screenElements) {\r\n            engine.stats.currFrame.actors.ui++;\r\n        }\r\n        for (const actor of this.actors) {\r\n            engine.stats.currFrame.actors.alive++;\r\n            for (const child of actor.children) {\r\n                if (isScreenElement(child)) {\r\n                    // TODO not true\r\n                    engine.stats.currFrame.actors.ui++;\r\n                }\r\n                else {\r\n                    engine.stats.currFrame.actors.alive++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/ColorBlindnessMode.ts\nvar ColorBlindnessMode;\r\n(function (ColorBlindnessMode) {\r\n    ColorBlindnessMode[\"Protanope\"] = \"Protanope\";\r\n    ColorBlindnessMode[\"Deuteranope\"] = \"Deuteranope\";\r\n    ColorBlindnessMode[\"Tritanope\"] = \"Tritanope\";\r\n})(ColorBlindnessMode || (ColorBlindnessMode = {}));\r\n\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/color-blind-fragment.glsl\n/* harmony default export */ const color_blind_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n// our texture\\r\\nuniform sampler2D u_image;\\r\\n// the texCoords passed in from the vertex shader.\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// color blind type\\r\\nuniform int u_type;\\r\\n\\r\\n// simulation?\\r\\nuniform bool u_simulate;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  vec4 o =  texture(u_image, v_texcoord);\\r\\n  // RGB to LMS matrix conversion\\r\\n  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\\r\\n  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\\r\\n  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\\r\\n  // Simulate color blindness\\r\\n  float l;\\r\\n  float m;\\r\\n  float s;\\r\\n  //MODE CODE//\\r\\n  if (u_type == 0) {\\r\\n    // Protanope\\r\\n    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;;\\r\\n  } else if (u_type == 1) {\\r\\n    // Deuteranope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;\\r\\n  } else if (u_type == 2) {\\r\\n    // Tritanope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\\r\\n  }\\r\\n\\r\\n  // LMS to RGB matrix conversion\\r\\n  vec4 error; // simulate the colors\\r\\n  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\\r\\n  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\\r\\n  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\\r\\n  error.a = 1.0;\\r\\n  vec4 diff = o - error;\\r\\n  vec4 correction; // correct the colors\\r\\n  correction.r = 0.0;\\r\\n  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\\r\\n  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\\r\\n  correction = o + correction;\\r\\n  correction.a = o.a;\\r\\n  //SIMULATE//\\r\\n\\r\\n  // sim \\r\\n  if (u_simulate) {\\r\\n    fragColor = error.rgba;\\r\\n  } else {\\r\\n    fragColor = correction.rgba;\\r\\n  }\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/ScreenShader.ts\n\r\n\r\n\r\n/**\r\n * Helper that defines a whole screen renderer, just provide a fragment source!\r\n *\r\n * Currently supports 1 varying\r\n * - vec2 a_texcoord between 0-1 which corresponds to screen position\r\n */\r\nclass ScreenShader {\r\n    constructor(gl, fragmentSource) {\r\n        this._shader = new Shader({\r\n            gl,\r\n            vertexSource: `#version 300 es\r\n      in vec2 a_position;\r\n      in vec2 a_texcoord;\r\n      out vec2 v_texcoord;\r\n\r\n      void main() {\r\n        gl_Position = vec4(a_position, 0.0, 1.0);\r\n        // Pass the texcoord to the fragment shader.\r\n        v_texcoord = a_texcoord;\r\n      }`,\r\n            fragmentSource: fragmentSource\r\n        });\r\n        this._shader.compile();\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            gl,\r\n            type: 'static',\r\n            // clip space quad + uv since we don't need a camera\r\n            data: new Float32Array([\r\n                -1, -1, 0, 0,\r\n                -1, 1, 0, 1,\r\n                1, -1, 1, 0,\r\n                1, -1, 1, 0,\r\n                -1, 1, 0, 1,\r\n                1, 1, 1, 1\r\n            ])\r\n        });\r\n        this._layout = new VertexLayout({\r\n            gl,\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_texcoord', 2]\r\n            ]\r\n        });\r\n        this._buffer.upload();\r\n    }\r\n    getShader() {\r\n        return this._shader;\r\n    }\r\n    getLayout() {\r\n        return this._layout;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/ColorBlindnessPostProcessor.ts\n\r\n\r\n\r\nclass ColorBlindnessPostProcessor {\r\n    constructor(_colorBlindnessMode, simulate = false) {\r\n        this._colorBlindnessMode = _colorBlindnessMode;\r\n        this._simulate = false;\r\n        this._simulate = simulate;\r\n    }\r\n    initialize(gl) {\r\n        this._shader = new ScreenShader(gl, color_blind_fragment);\r\n        this.simulate = this._simulate;\r\n        this.colorBlindnessMode = this._colorBlindnessMode;\r\n    }\r\n    getShader() {\r\n        return this._shader.getShader();\r\n    }\r\n    getLayout() {\r\n        return this._shader.getLayout();\r\n    }\r\n    set colorBlindnessMode(colorBlindMode) {\r\n        this._colorBlindnessMode = colorBlindMode;\r\n        if (this._shader) {\r\n            const shader = this._shader.getShader();\r\n            shader.use();\r\n            if (this._colorBlindnessMode === ColorBlindnessMode.Protanope) {\r\n                shader.setUniformInt('u_type', 0);\r\n            }\r\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Deuteranope) {\r\n                shader.setUniformInt('u_type', 1);\r\n            }\r\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Tritanope) {\r\n                shader.setUniformInt('u_type', 2);\r\n            }\r\n        }\r\n    }\r\n    get colorBlindnessMode() {\r\n        return this._colorBlindnessMode;\r\n    }\r\n    set simulate(value) {\r\n        this._simulate = value;\r\n        if (this._shader) {\r\n            const shader = this._shader.getShader();\r\n            shader.use();\r\n            shader.setUniformBoolean('u_simulate', value);\r\n        }\r\n    }\r\n    get simulate() {\r\n        return this._simulate;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Debug/DebugFlags.ts\n\r\n\r\n\r\nclass ColorBlindFlags {\r\n    constructor(engine) {\r\n        this._engine = engine;\r\n        this._colorBlindPostProcessor = new ColorBlindnessPostProcessor(ColorBlindnessMode.Protanope);\r\n    }\r\n    /**\r\n     * Correct colors for a specified color blindness\r\n     * @param colorBlindness\r\n     */\r\n    correct(colorBlindness) {\r\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\r\n            this.clear();\r\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\r\n            this._colorBlindPostProcessor.simulate = false;\r\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\r\n        }\r\n    }\r\n    /**\r\n     * Simulate colors for a specified color blindness\r\n     * @param colorBlindness\r\n     */\r\n    simulate(colorBlindness) {\r\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\r\n            this.clear();\r\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\r\n            this._colorBlindPostProcessor.simulate = true;\r\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\r\n        }\r\n    }\r\n    /**\r\n     * Remove color blindness post processor\r\n     */\r\n    clear() {\r\n        this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Debug/Debug.ts\n\r\n\r\n/**\r\n * Debug statistics and flags for Excalibur. If polling these values, it would be\r\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\r\n * updated during a frame.\r\n */\r\nclass Debug {\r\n    constructor(engine) {\r\n        /**\r\n         * Performance statistics\r\n         */\r\n        this.stats = {\r\n            /**\r\n             * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[postframe]] event. See [[FrameStats]]\r\n             */\r\n            currFrame: new FrameStats(),\r\n            /**\r\n             * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[FrameStats]]\r\n             */\r\n            prevFrame: new FrameStats()\r\n        };\r\n        /**\r\n         * Filter debug context to named entities or entity ids\r\n         */\r\n        this.filter = {\r\n            /**\r\n             * Toggle filter on or off (default off) must be on for DebugDraw to use filters\r\n             */\r\n            useFilter: false,\r\n            /**\r\n             * Query for entities by name, if the entity name contains `nameQuery` it will be included\r\n             */\r\n            nameQuery: '',\r\n            /**\r\n             * Query for Entity ids, if the id matches it will be included\r\n             */\r\n            ids: []\r\n        };\r\n        /**\r\n         * Entity debug settings\r\n         */\r\n        this.entity = {\r\n            showAll: false,\r\n            showId: true,\r\n            showName: false\r\n        };\r\n        /**\r\n         * Transform component debug settings\r\n         */\r\n        this.transform = {\r\n            showAll: false,\r\n            showPosition: false,\r\n            showPositionLabel: false,\r\n            positionColor: Color.Yellow,\r\n            showZIndex: false,\r\n            showScale: false,\r\n            scaleColor: Color.Green,\r\n            showRotation: false,\r\n            rotationColor: Color.Blue\r\n        };\r\n        /**\r\n         * Graphics component debug settings\r\n         */\r\n        this.graphics = {\r\n            showAll: false,\r\n            showBounds: true,\r\n            boundsColor: Color.Yellow\r\n        };\r\n        /**\r\n         * Collider component debug settings\r\n         */\r\n        this.collider = {\r\n            showAll: false,\r\n            showBounds: true,\r\n            boundsColor: Color.Blue,\r\n            showOwner: false,\r\n            showGeometry: true,\r\n            geometryColor: Color.Green\r\n        };\r\n        /**\r\n         * Physics simulation debug settings\r\n         */\r\n        this.physics = {\r\n            showAll: false,\r\n            showBroadphaseSpacePartitionDebug: false,\r\n            showCollisionNormals: false,\r\n            collisionNormalColor: Color.Cyan,\r\n            showCollisionContacts: true,\r\n            collisionContactColor: Color.Red\r\n        };\r\n        /**\r\n         * Motion component debug settings\r\n         */\r\n        this.motion = {\r\n            showAll: false,\r\n            showVelocity: false,\r\n            velocityColor: Color.Yellow,\r\n            showAcceleration: false,\r\n            accelerationColor: Color.Red\r\n        };\r\n        /**\r\n         * Body component debug settings\r\n         */\r\n        this.body = {\r\n            showAll: false,\r\n            showCollisionGroup: false,\r\n            showCollisionType: false,\r\n            showSleeping: false,\r\n            showMotion: false,\r\n            showMass: false\r\n        };\r\n        /**\r\n         * Camera debug settings\r\n         */\r\n        this.camera = {\r\n            showAll: false,\r\n            showFocus: false,\r\n            focusColor: Color.Red,\r\n            showZoom: false\r\n        };\r\n        this._engine = engine;\r\n        this.colorBlindMode = new ColorBlindFlags(this._engine);\r\n    }\r\n    /**\r\n     * Switch the current excalibur clock with the [[TestClock]] and return\r\n     * it in the same running state.\r\n     *\r\n     * This is useful when you need to debug frame by frame.\r\n     */\r\n    useTestClock() {\r\n        const clock = this._engine.clock;\r\n        const wasRunning = clock.isRunning();\r\n        clock.stop();\r\n        const testClock = clock.toTestClock();\r\n        if (wasRunning) {\r\n            testClock.start();\r\n        }\r\n        this._engine.clock = testClock;\r\n        return testClock;\r\n    }\r\n    /**\r\n     * Switch the current excalibur clock with the [[StandardClock]] and\r\n     * return it in the same running state.\r\n     *\r\n     * This is useful when you need to switch back to normal mode after\r\n     * debugging.\r\n     */\r\n    useStandardClock() {\r\n        const currentClock = this._engine.clock;\r\n        const wasRunning = currentClock.isRunning();\r\n        currentClock.stop();\r\n        const standardClock = currentClock.toStandardClock();\r\n        if (wasRunning) {\r\n            standardClock.start();\r\n        }\r\n        this._engine.clock = standardClock;\r\n        return standardClock;\r\n    }\r\n}\r\n/**\r\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\r\n * creating instances of this every frame.\r\n */\r\nclass FrameStats {\r\n    constructor() {\r\n        this._id = 0;\r\n        this._delta = 0;\r\n        this._fps = 0;\r\n        this._actorStats = {\r\n            alive: 0,\r\n            killed: 0,\r\n            ui: 0,\r\n            get remaining() {\r\n                return this.alive - this.killed;\r\n            },\r\n            get total() {\r\n                return this.remaining + this.ui;\r\n            }\r\n        };\r\n        this._durationStats = {\r\n            update: 0,\r\n            draw: 0,\r\n            get total() {\r\n                return this.update + this.draw;\r\n            }\r\n        };\r\n        this._physicsStats = new PhysicsStats();\r\n        this._graphicsStats = {\r\n            drawCalls: 0,\r\n            drawnImages: 0\r\n        };\r\n    }\r\n    /**\r\n     * Zero out values or clone other IFrameStat stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    reset(otherStats) {\r\n        if (otherStats) {\r\n            this.id = otherStats.id;\r\n            this.delta = otherStats.delta;\r\n            this.fps = otherStats.fps;\r\n            this.actors.alive = otherStats.actors.alive;\r\n            this.actors.killed = otherStats.actors.killed;\r\n            this.actors.ui = otherStats.actors.ui;\r\n            this.duration.update = otherStats.duration.update;\r\n            this.duration.draw = otherStats.duration.draw;\r\n            this._physicsStats.reset(otherStats.physics);\r\n            this.graphics.drawCalls = otherStats.graphics.drawCalls;\r\n            this.graphics.drawnImages = otherStats.graphics.drawnImages;\r\n        }\r\n        else {\r\n            this.id = this.delta = this.fps = 0;\r\n            this.actors.alive = this.actors.killed = this.actors.ui = 0;\r\n            this.duration.update = this.duration.draw = 0;\r\n            this._physicsStats.reset();\r\n            this.graphics.drawnImages = this.graphics.drawCalls = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    clone() {\r\n        const fs = new FrameStats();\r\n        fs.reset(this);\r\n        return fs;\r\n    }\r\n    /**\r\n     * Gets the frame's id\r\n     */\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    /**\r\n     * Sets the frame's id\r\n     */\r\n    set id(value) {\r\n        this._id = value;\r\n    }\r\n    /**\r\n     * Gets the frame's delta (time since last frame)\r\n     */\r\n    get delta() {\r\n        return this._delta;\r\n    }\r\n    /**\r\n     * Sets the frame's delta (time since last frame). Internal use only.\r\n     * @internal\r\n     */\r\n    set delta(value) {\r\n        this._delta = value;\r\n    }\r\n    /**\r\n     * Gets the frame's frames-per-second (FPS)\r\n     */\r\n    get fps() {\r\n        return this._fps;\r\n    }\r\n    /**\r\n     * Sets the frame's frames-per-second (FPS). Internal use only.\r\n     * @internal\r\n     */\r\n    set fps(value) {\r\n        this._fps = value;\r\n    }\r\n    /**\r\n     * Gets the frame's actor statistics\r\n     */\r\n    get actors() {\r\n        return this._actorStats;\r\n    }\r\n    /**\r\n     * Gets the frame's duration statistics\r\n     */\r\n    get duration() {\r\n        return this._durationStats;\r\n    }\r\n    /**\r\n     * Gets the frame's physics statistics\r\n     */\r\n    get physics() {\r\n        return this._physicsStats;\r\n    }\r\n    /**\r\n     * Gets the frame's graphics statistics\r\n     */\r\n    get graphics() {\r\n        return this._graphicsStats;\r\n    }\r\n}\r\nclass PhysicsStats {\r\n    constructor() {\r\n        this._pairs = 0;\r\n        this._collisions = 0;\r\n        this._contacts = new Map();\r\n        this._fastBodies = 0;\r\n        this._fastBodyCollisions = 0;\r\n        this._broadphase = 0;\r\n        this._narrowphase = 0;\r\n    }\r\n    /**\r\n     * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    reset(otherStats) {\r\n        if (otherStats) {\r\n            this.pairs = otherStats.pairs;\r\n            this.collisions = otherStats.collisions;\r\n            this.contacts = otherStats.contacts;\r\n            this.fastBodies = otherStats.fastBodies;\r\n            this.fastBodyCollisions = otherStats.fastBodyCollisions;\r\n            this.broadphase = otherStats.broadphase;\r\n            this.narrowphase = otherStats.narrowphase;\r\n        }\r\n        else {\r\n            this.pairs = this.collisions = this.fastBodies = 0;\r\n            this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\r\n            this.contacts.clear();\r\n        }\r\n    }\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    clone() {\r\n        const ps = new PhysicsStats();\r\n        ps.reset(this);\r\n        return ps;\r\n    }\r\n    get pairs() {\r\n        return this._pairs;\r\n    }\r\n    set pairs(value) {\r\n        this._pairs = value;\r\n    }\r\n    get collisions() {\r\n        return this._collisions;\r\n    }\r\n    set collisions(value) {\r\n        this._collisions = value;\r\n    }\r\n    get contacts() {\r\n        return this._contacts;\r\n    }\r\n    set contacts(contacts) {\r\n        this._contacts = contacts;\r\n    }\r\n    get fastBodies() {\r\n        return this._fastBodies;\r\n    }\r\n    set fastBodies(value) {\r\n        this._fastBodies = value;\r\n    }\r\n    get fastBodyCollisions() {\r\n        return this._fastBodyCollisions;\r\n    }\r\n    set fastBodyCollisions(value) {\r\n        this._fastBodyCollisions = value;\r\n    }\r\n    get broadphase() {\r\n        return this._broadphase;\r\n    }\r\n    set broadphase(value) {\r\n        this._broadphase = value;\r\n    }\r\n    get narrowphase() {\r\n        return this._narrowphase;\r\n    }\r\n    set narrowphase(value) {\r\n        this._narrowphase = value;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Browser.ts\nclass BrowserComponent {\r\n    on(eventName, handler) {\r\n        if (this._nativeHandlers[eventName]) {\r\n            this.off(eventName, this._nativeHandlers[eventName]);\r\n        }\r\n        this._nativeHandlers[eventName] = this._decorate(handler);\r\n        this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\r\n    }\r\n    off(eventName, handler) {\r\n        if (!handler) {\r\n            handler = this._nativeHandlers[eventName];\r\n        }\r\n        this.nativeComponent.removeEventListener(eventName, handler);\r\n        this._nativeHandlers[eventName] = null;\r\n    }\r\n    _decorate(handler) {\r\n        return (evt) => {\r\n            if (!this._paused) {\r\n                handler(evt);\r\n            }\r\n        };\r\n    }\r\n    pause() {\r\n        this._paused = true;\r\n    }\r\n    resume() {\r\n        this._paused = false;\r\n    }\r\n    clear() {\r\n        for (const event in this._nativeHandlers) {\r\n            this.off(event);\r\n        }\r\n    }\r\n    constructor(nativeComponent) {\r\n        this.nativeComponent = nativeComponent;\r\n        this._paused = false;\r\n        this._nativeHandlers = {};\r\n    }\r\n}\r\nclass BrowserEvents {\r\n    constructor(_windowGlobal, _documentGlobal) {\r\n        this._windowGlobal = _windowGlobal;\r\n        this._documentGlobal = _documentGlobal;\r\n        this._windowComponent = new BrowserComponent(this._windowGlobal);\r\n        this._documentComponent = new BrowserComponent(this._documentGlobal);\r\n    }\r\n    get window() {\r\n        return this._windowComponent;\r\n    }\r\n    get document() {\r\n        return this._documentComponent;\r\n    }\r\n    pause() {\r\n        this.window.pause();\r\n        this.document.pause();\r\n    }\r\n    resume() {\r\n        this.window.resume();\r\n        this.document.resume();\r\n    }\r\n    clear() {\r\n        this.window.clear();\r\n        this.document.clear();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/global-coordinates.ts\n\r\nclass GlobalCoordinates {\r\n    static fromPagePosition(xOrPos, yOrEngine, engineOrUndefined) {\r\n        let pageX;\r\n        let pageY;\r\n        let pagePos;\r\n        let engine;\r\n        if (arguments.length === 3) {\r\n            pageX = xOrPos;\r\n            pageY = yOrEngine;\r\n            pagePos = new Vector(pageX, pageY);\r\n            engine = engineOrUndefined;\r\n        }\r\n        else {\r\n            pagePos = xOrPos;\r\n            pageX = pagePos.x;\r\n            pageY = pagePos.y;\r\n            engine = yOrEngine;\r\n        }\r\n        const screenPos = engine.screen.pageToScreenCoordinates(pagePos);\r\n        const worldPos = engine.screen.screenToWorldCoordinates(screenPos);\r\n        return new GlobalCoordinates(worldPos, pagePos, screenPos);\r\n    }\r\n    constructor(worldPos, pagePos, screenPos) {\r\n        this.worldPos = worldPos;\r\n        this.pagePos = pagePos;\r\n        this.screenPos = screenPos;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerEvent.ts\nclass PointerEvent {\r\n    cancel() {\r\n        this.active = false;\r\n    }\r\n    get pagePos() {\r\n        return this.coordinates.pagePos;\r\n    }\r\n    get screenPos() {\r\n        return this.coordinates.screenPos;\r\n    }\r\n    get worldPos() {\r\n        return this.coordinates.worldPos;\r\n    }\r\n    constructor(type, pointerId, button, pointerType, coordinates, nativeEvent) {\r\n        this.type = type;\r\n        this.pointerId = pointerId;\r\n        this.button = button;\r\n        this.pointerType = pointerType;\r\n        this.coordinates = coordinates;\r\n        this.nativeEvent = nativeEvent;\r\n        this.active = true;\r\n    }\r\n    ;\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/WheelEvent.ts\nclass WheelEvent {\r\n    cancel() {\r\n        this.active = false;\r\n    }\r\n    constructor(x, y, pageX, pageY, screenX, screenY, index, deltaX, deltaY, deltaZ, deltaMode, ev) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.pageX = pageX;\r\n        this.pageY = pageY;\r\n        this.screenX = screenX;\r\n        this.screenY = screenY;\r\n        this.index = index;\r\n        this.deltaX = deltaX;\r\n        this.deltaY = deltaY;\r\n        this.deltaZ = deltaZ;\r\n        this.deltaMode = deltaMode;\r\n        this.ev = ev;\r\n        this.active = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerAbstraction.ts\n\r\n\r\nclass PointerAbstraction {\r\n    constructor() {\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * The last position on the document this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        this.lastPagePos = Vector.Zero;\r\n        /**\r\n         * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        this.lastScreenPos = Vector.Zero;\r\n        /**\r\n         * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        this.lastWorldPos = Vector.Zero;\r\n        this._onPointerMove = (ev) => {\r\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\r\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\r\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\r\n        };\r\n        this._onPointerDown = (ev) => {\r\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\r\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\r\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\r\n        };\r\n        this.on('move', this._onPointerMove);\r\n        this.on('down', this._onPointerDown);\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/WheelDeltaMode.ts\nvar WheelDeltaMode;\r\n(function (WheelDeltaMode) {\r\n    WheelDeltaMode[\"Pixel\"] = \"Pixel\";\r\n    WheelDeltaMode[\"Line\"] = \"Line\";\r\n    WheelDeltaMode[\"Page\"] = \"Page\";\r\n})(WheelDeltaMode || (WheelDeltaMode = {}));\r\n\n;// CONCATENATED MODULE: ./Input/NativePointerButton.ts\n/**\r\n * Native browser button enumeration\r\n */\r\nvar NativePointerButton;\r\n(function (NativePointerButton) {\r\n    NativePointerButton[NativePointerButton[\"NoButton\"] = -1] = \"NoButton\";\r\n    NativePointerButton[NativePointerButton[\"Left\"] = 0] = \"Left\";\r\n    NativePointerButton[NativePointerButton[\"Middle\"] = 1] = \"Middle\";\r\n    NativePointerButton[NativePointerButton[\"Right\"] = 2] = \"Right\";\r\n    NativePointerButton[NativePointerButton[\"Unknown\"] = 3] = \"Unknown\";\r\n})(NativePointerButton || (NativePointerButton = {}));\r\n\n;// CONCATENATED MODULE: ./Input/PointerButton.ts\n/**\r\n * The mouse button being pressed.\r\n */\r\nvar PointerButton;\r\n(function (PointerButton) {\r\n    PointerButton[\"Left\"] = \"Left\";\r\n    PointerButton[\"Middle\"] = \"Middle\";\r\n    PointerButton[\"Right\"] = \"Right\";\r\n    PointerButton[\"Unknown\"] = \"Unknown\";\r\n    PointerButton[\"NoButton\"] = \"NoButton\";\r\n})(PointerButton || (PointerButton = {}));\r\n\n;// CONCATENATED MODULE: ./Input/PointerType.ts\n/**\r\n * The type of pointer for a [[PointerEvent]].\r\n */\r\nvar PointerType;\r\n(function (PointerType) {\r\n    PointerType[\"Touch\"] = \"Touch\";\r\n    PointerType[\"Mouse\"] = \"Mouse\";\r\n    PointerType[\"Pen\"] = \"Pen\";\r\n    PointerType[\"Unknown\"] = \"Unknown\";\r\n})(PointerType || (PointerType = {}));\r\n\n;// CONCATENATED MODULE: ./Input/PointerEventReceiver.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst PointerEvents = {\r\n    Move: 'move',\r\n    Down: 'down',\r\n    Up: 'up',\r\n    Wheel: 'wheel'\r\n};\r\n/**\r\n * Is this event a native touch event?\r\n */\r\nfunction isTouchEvent(value) {\r\n    // Guard for Safari <= 13.1\r\n    return globalThis.TouchEvent && value instanceof globalThis.TouchEvent;\r\n}\r\n/**\r\n * Is this event a native pointer event\r\n */\r\nfunction isPointerEvent(value) {\r\n    // Guard for Safari <= 13.1\r\n    return globalThis.PointerEvent && value instanceof globalThis.PointerEvent;\r\n}\r\n/**\r\n * The PointerEventProcessor is responsible for collecting all the events from the canvas and transforming them into GlobalCoordinates\r\n */\r\nclass PointerEventReceiver {\r\n    constructor(target, engine) {\r\n        this.target = target;\r\n        this.engine = engine;\r\n        this.events = new EventEmitter();\r\n        this.primary = new PointerAbstraction();\r\n        this._activeNativePointerIdsToNormalized = new Map();\r\n        this.lastFramePointerCoords = new Map();\r\n        this.currentFramePointerCoords = new Map();\r\n        this.currentFramePointerDown = new Map();\r\n        this.lastFramePointerDown = new Map();\r\n        this.currentFrameDown = [];\r\n        this.currentFrameUp = [];\r\n        this.currentFrameMove = [];\r\n        this.currentFrameCancel = [];\r\n        this.currentFrameWheel = [];\r\n        this._pointers = [this.primary];\r\n        this._boundHandle = this._handle.bind(this);\r\n        this._boundWheel = this._handleWheel.bind(this);\r\n    }\r\n    /**\r\n     * Creates a new PointerEventReceiver with a new target and engine while preserving existing pointer event\r\n     * handlers.\r\n     * @param target\r\n     * @param engine\r\n     */\r\n    recreate(target, engine) {\r\n        const eventReceiver = new PointerEventReceiver(target, engine);\r\n        eventReceiver.primary = this.primary;\r\n        eventReceiver._pointers = this._pointers;\r\n        return eventReceiver;\r\n    }\r\n    /**\r\n     * Locates a specific pointer by id, creates it if it doesn't exist\r\n     * @param index\r\n     */\r\n    at(index) {\r\n        if (index >= this._pointers.length) {\r\n            // Ensure there is a pointer to retrieve\r\n            for (let i = this._pointers.length - 1, max = index; i < max; i++) {\r\n                this._pointers.push(new PointerAbstraction());\r\n            }\r\n        }\r\n        return this._pointers[index];\r\n    }\r\n    /**\r\n     * The number of pointers currently being tracked by excalibur\r\n     */\r\n    count() {\r\n        return this._pointers.length;\r\n    }\r\n    /**\r\n     * Is the specified pointer id down this frame\r\n     * @param pointerId\r\n     */\r\n    isDown(pointerId) {\r\n        var _a;\r\n        return (_a = this.currentFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    /**\r\n     * Was the specified pointer id down last frame\r\n     * @param pointerId\r\n     */\r\n    wasDown(pointerId) {\r\n        var _a;\r\n        return (_a = this.lastFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    /**\r\n     * Whether the Pointer is currently dragging.\r\n     */\r\n    isDragging(pointerId) {\r\n        return this.isDown(pointerId);\r\n    }\r\n    /**\r\n     * Whether the Pointer just started dragging.\r\n     */\r\n    isDragStart(pointerId) {\r\n        return this.isDown(pointerId) && !this.wasDown(pointerId);\r\n    }\r\n    /**\r\n     * Whether the Pointer just ended dragging.\r\n     */\r\n    isDragEnd(pointerId) {\r\n        return !this.isDown(pointerId) && this.wasDown(pointerId);\r\n    }\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Called internally by excalibur\r\n     *\r\n     * Updates the current frame pointer info and emits raw pointer events\r\n     *\r\n     * This does not emit events to entities, see PointerSystem\r\n     */\r\n    update() {\r\n        this.lastFramePointerDown = new Map(this.currentFramePointerDown);\r\n        this.lastFramePointerCoords = new Map(this.currentFramePointerCoords);\r\n        for (const event of this.currentFrameDown) {\r\n            this.emit('down', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('down', event);\r\n            this.primary.emit('pointerdown', event);\r\n        }\r\n        for (const event of this.currentFrameUp) {\r\n            this.emit('up', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('up', event);\r\n        }\r\n        for (const event of this.currentFrameMove) {\r\n            this.emit('move', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('move', event);\r\n        }\r\n        for (const event of this.currentFrameCancel) {\r\n            this.emit('cancel', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('cancel', event);\r\n        }\r\n        for (const event of this.currentFrameWheel) {\r\n            this.emit('wheel', event);\r\n            this.primary.emit('pointerwheel', event);\r\n        }\r\n    }\r\n    /**\r\n     * Clears the current frame event and pointer data\r\n     */\r\n    clear() {\r\n        for (const event of this.currentFrameUp) {\r\n            this.currentFramePointerCoords.delete(event.pointerId);\r\n            const ids = this._activeNativePointerIdsToNormalized.entries();\r\n            for (const [native, normalized] of ids) {\r\n                if (normalized === event.pointerId) {\r\n                    this._activeNativePointerIdsToNormalized.delete(native);\r\n                }\r\n            }\r\n        }\r\n        this.currentFrameDown.length = 0;\r\n        this.currentFrameUp.length = 0;\r\n        this.currentFrameMove.length = 0;\r\n        this.currentFrameCancel.length = 0;\r\n        this.currentFrameWheel.length = 0;\r\n    }\r\n    /**\r\n     * Initializes the pointer event receiver so that it can start listening to native\r\n     * browser events.\r\n     */\r\n    init(options) {\r\n        var _a;\r\n        // Disabling the touch action avoids browser/platform gestures from firing on the canvas\r\n        // It is important on mobile to have touch action 'none'\r\n        // https://stackoverflow.com/questions/48124372/pointermove-event-not-working-with-touch-why-not\r\n        if (this.target === this.engine.canvas) {\r\n            this.engine.canvas.style.touchAction = 'none';\r\n        }\r\n        else {\r\n            document.body.style.touchAction = 'none';\r\n        }\r\n        // Preferred pointer events\r\n        if (window.PointerEvent) {\r\n            this.target.addEventListener('pointerdown', this._boundHandle);\r\n            this.target.addEventListener('pointerup', this._boundHandle);\r\n            this.target.addEventListener('pointermove', this._boundHandle);\r\n            this.target.addEventListener('pointercancel', this._boundHandle);\r\n        }\r\n        else {\r\n            // Touch Events\r\n            this.target.addEventListener('touchstart', this._boundHandle);\r\n            this.target.addEventListener('touchend', this._boundHandle);\r\n            this.target.addEventListener('touchmove', this._boundHandle);\r\n            this.target.addEventListener('touchcancel', this._boundHandle);\r\n            // Mouse Events\r\n            this.target.addEventListener('mousedown', this._boundHandle);\r\n            this.target.addEventListener('mouseup', this._boundHandle);\r\n            this.target.addEventListener('mousemove', this._boundHandle);\r\n        }\r\n        // MDN MouseWheelEvent\r\n        const wheelOptions = {\r\n            passive: !(this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\r\n                this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas)\r\n        };\r\n        if ('onwheel' in document.createElement('div')) {\r\n            // Modern Browsers\r\n            this.target.addEventListener('wheel', this._boundWheel, wheelOptions);\r\n        }\r\n        else if (document.onmousewheel !== undefined) {\r\n            // Webkit and IE\r\n            this.target.addEventListener('mousewheel', this._boundWheel, wheelOptions);\r\n        }\r\n        else {\r\n            // Remaining browser and older Firefox\r\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel, wheelOptions);\r\n        }\r\n        const grabWindowFocus = (_a = options === null || options === void 0 ? void 0 : options.grabWindowFocus) !== null && _a !== void 0 ? _a : true;\r\n        // Handle cross origin iframe\r\n        if (grabWindowFocus && isCrossOriginIframe()) {\r\n            const grabFocus = () => {\r\n                window.focus();\r\n            };\r\n            // Preferred pointer events\r\n            if (window.PointerEvent) {\r\n                this.target.addEventListener('pointerdown', grabFocus);\r\n            }\r\n            else {\r\n                // Touch Events\r\n                this.target.addEventListener('touchstart', grabFocus);\r\n                // Mouse Events\r\n                this.target.addEventListener('mousedown', grabFocus);\r\n            }\r\n        }\r\n    }\r\n    detach() {\r\n        // Preferred pointer events\r\n        if (window.PointerEvent) {\r\n            this.target.removeEventListener('pointerdown', this._boundHandle);\r\n            this.target.removeEventListener('pointerup', this._boundHandle);\r\n            this.target.removeEventListener('pointermove', this._boundHandle);\r\n            this.target.removeEventListener('pointercancel', this._boundHandle);\r\n        }\r\n        else {\r\n            // Touch Events\r\n            this.target.removeEventListener('touchstart', this._boundHandle);\r\n            this.target.removeEventListener('touchend', this._boundHandle);\r\n            this.target.removeEventListener('touchmove', this._boundHandle);\r\n            this.target.removeEventListener('touchcancel', this._boundHandle);\r\n            // Mouse Events\r\n            this.target.removeEventListener('mousedown', this._boundHandle);\r\n            this.target.removeEventListener('mouseup', this._boundHandle);\r\n            this.target.removeEventListener('mousemove', this._boundHandle);\r\n        }\r\n        if ('onwheel' in document.createElement('div')) {\r\n            // Modern Browsers\r\n            this.target.removeEventListener('wheel', this._boundWheel);\r\n        }\r\n        else if (document.onmousewheel !== undefined) {\r\n            // Webkit and IE\r\n            this.target.addEventListener('mousewheel', this._boundWheel);\r\n        }\r\n        else {\r\n            // Remaining browser and older Firefox\r\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel);\r\n        }\r\n    }\r\n    /**\r\n     * Take native pointer id and map it to index in active pointers\r\n     * @param nativePointerId\r\n     */\r\n    _normalizePointerId(nativePointerId) {\r\n        // Add to the the native pointer set id\r\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, -1);\r\n        // Native pointer ids in ascending order\r\n        const currentPointerIds = Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((a, b) => a - b);\r\n        // The index into sorted ids will be the new id, will always have an id\r\n        const id = currentPointerIds.findIndex(p => p === nativePointerId);\r\n        // Save the mapping so we can reverse it later\r\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, id);\r\n        // ignore pointer because game isn't watching\r\n        return id;\r\n    }\r\n    /**\r\n     * Responsible for handling and parsing pointer events\r\n     */\r\n    _handle(ev) {\r\n        ev.preventDefault();\r\n        const eventCoords = new Map();\r\n        let button;\r\n        let pointerType;\r\n        if (isTouchEvent(ev)) {\r\n            button = PointerButton.Unknown;\r\n            pointerType = PointerType.Touch;\r\n            // https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent\r\n            for (let i = 0; i < ev.changedTouches.length; i++) {\r\n                const touch = ev.changedTouches[i];\r\n                const coordinates = GlobalCoordinates.fromPagePosition(touch.pageX, touch.pageY, this.engine);\r\n                const nativePointerId = i + 1;\r\n                const pointerId = this._normalizePointerId(nativePointerId);\r\n                this.currentFramePointerCoords.set(pointerId, coordinates);\r\n                eventCoords.set(pointerId, coordinates);\r\n            }\r\n        }\r\n        else {\r\n            button = this._nativeButtonToPointerButton(ev.button);\r\n            pointerType = PointerType.Mouse;\r\n            const coordinates = GlobalCoordinates.fromPagePosition(ev.pageX, ev.pageY, this.engine);\r\n            let nativePointerId = 1;\r\n            if (isPointerEvent(ev)) {\r\n                nativePointerId = ev.pointerId;\r\n                pointerType = this._stringToPointerType(ev.pointerType);\r\n            }\r\n            const pointerId = this._normalizePointerId(nativePointerId);\r\n            this.currentFramePointerCoords.set(pointerId, coordinates);\r\n            eventCoords.set(pointerId, coordinates);\r\n        }\r\n        for (const [pointerId, coord] of eventCoords.entries()) {\r\n            switch (ev.type) {\r\n                case 'mousedown':\r\n                case 'pointerdown':\r\n                case 'touchstart':\r\n                    this.currentFrameDown.push(new PointerEvent('down', pointerId, button, pointerType, coord, ev));\r\n                    this.currentFramePointerDown.set(pointerId, true);\r\n                    break;\r\n                case 'mouseup':\r\n                case 'pointerup':\r\n                case 'touchend':\r\n                    this.currentFrameUp.push(new PointerEvent('up', pointerId, button, pointerType, coord, ev));\r\n                    this.currentFramePointerDown.set(pointerId, false);\r\n                    break;\r\n                case 'mousemove':\r\n                case 'pointermove':\r\n                case 'touchmove':\r\n                    this.currentFrameMove.push(new PointerEvent('move', pointerId, button, pointerType, coord, ev));\r\n                    break;\r\n                case 'touchcancel':\r\n                case 'pointercancel':\r\n                    this.currentFrameCancel.push(new PointerEvent('cancel', pointerId, button, pointerType, coord, ev));\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    _handleWheel(ev) {\r\n        // Should we prevent page scroll because of this event\r\n        if (this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\r\n            (this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && ev.target === this.engine.canvas)) {\r\n            ev.preventDefault();\r\n        }\r\n        const screen = this.engine.screen.pageToScreenCoordinates(vec(ev.pageX, ev.pageY));\r\n        const world = this.engine.screen.screenToWorldCoordinates(screen);\r\n        /**\r\n         * A constant used to normalize wheel events across different browsers\r\n         *\r\n         * This normalization factor is pulled from\r\n         * https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\r\n         */\r\n        const ScrollWheelNormalizationFactor = -1 / 40;\r\n        const deltaX = ev.deltaX || ev.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\r\n        const deltaY = ev.deltaY || ev.wheelDeltaY * ScrollWheelNormalizationFactor || ev.wheelDelta * ScrollWheelNormalizationFactor || ev.detail || 0;\r\n        const deltaZ = ev.deltaZ || 0;\r\n        let deltaMode = WheelDeltaMode.Pixel;\r\n        if (ev.deltaMode) {\r\n            if (ev.deltaMode === 1) {\r\n                deltaMode = WheelDeltaMode.Line;\r\n            }\r\n            else if (ev.deltaMode === 2) {\r\n                deltaMode = WheelDeltaMode.Page;\r\n            }\r\n        }\r\n        const we = new WheelEvent(world.x, world.y, ev.pageX, ev.pageY, screen.x, screen.y, 0, deltaX, deltaY, deltaZ, deltaMode, ev);\r\n        this.currentFrameWheel.push(we);\r\n    }\r\n    /**\r\n     * Triggers an excalibur pointer event in a world space pos\r\n     *\r\n     * Useful for testing pointers in excalibur\r\n     * @param type\r\n     * @param pos\r\n     */\r\n    triggerEvent(type, pos) {\r\n        const page = this.engine.screen.worldToPageCoordinates(pos);\r\n        // Send an event to the event receiver\r\n        if (window.PointerEvent) {\r\n            this._handle(new window.PointerEvent('pointer' + type, {\r\n                pointerId: 0,\r\n                clientX: page.x,\r\n                clientY: page.y\r\n            }));\r\n        }\r\n        else {\r\n            // Safari hack\r\n            this._handle(new window.MouseEvent('mouse' + type, {\r\n                clientX: page.x,\r\n                clientY: page.y\r\n            }));\r\n        }\r\n        // Force update pointer system\r\n        const pointerSystem = this.engine.currentScene.world.systemManager.get(PointerSystem);\r\n        const transformEntities = this.engine.currentScene.world.queryManager.createQuery(pointerSystem.types);\r\n        pointerSystem.preupdate();\r\n        pointerSystem.update(transformEntities.getEntities());\r\n    }\r\n    _nativeButtonToPointerButton(s) {\r\n        switch (s) {\r\n            case NativePointerButton.NoButton:\r\n                return PointerButton.NoButton;\r\n            case NativePointerButton.Left:\r\n                return PointerButton.Left;\r\n            case NativePointerButton.Middle:\r\n                return PointerButton.Middle;\r\n            case NativePointerButton.Right:\r\n                return PointerButton.Right;\r\n            case NativePointerButton.Unknown:\r\n                return PointerButton.Unknown;\r\n            default:\r\n                return fail(s);\r\n        }\r\n    }\r\n    _stringToPointerType(s) {\r\n        switch (s) {\r\n            case 'touch':\r\n                return PointerType.Touch;\r\n            case 'mouse':\r\n                return PointerType.Mouse;\r\n            case 'pen':\r\n                return PointerType.Pen;\r\n            default:\r\n                return PointerType.Unknown;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Fps.ts\nclass FpsSampler {\r\n    constructor(options) {\r\n        var _a;\r\n        this._samplePeriod = 100;\r\n        this._currentFrameTime = 0;\r\n        this._frames = 0;\r\n        this._previousSampleTime = 0;\r\n        this._beginFrameTime = 0;\r\n        this._fps = options.initialFps;\r\n        this._samplePeriod = (_a = options.samplePeriod) !== null && _a !== void 0 ? _a : this._samplePeriod;\r\n        this._currentFrameTime = 1000 / options.initialFps;\r\n        this._nowFn = options.nowFn;\r\n        this._previousSampleTime = this._nowFn();\r\n    }\r\n    /**\r\n     * Start of code block to sample FPS for\r\n     */\r\n    start() {\r\n        this._beginFrameTime = this._nowFn();\r\n    }\r\n    /**\r\n     * End of code block to sample FPS for\r\n     */\r\n    end() {\r\n        this._frames++;\r\n        const time = this._nowFn();\r\n        this._currentFrameTime = time - this._beginFrameTime;\r\n        if (time >= this._previousSampleTime + this._samplePeriod) {\r\n            this._fps = (this._frames * 1000) / (time - this._previousSampleTime);\r\n            this._previousSampleTime = time;\r\n            this._frames = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Return the currently sampled fps over the last sample period, by default every 100ms\r\n     */\r\n    get fps() {\r\n        return this._fps;\r\n    }\r\n    /**\r\n     * Return the instantaneous fps, this can be less useful because it will fluctuate given the current frames time\r\n     */\r\n    get instant() {\r\n        return 1000 / this._currentFrameTime;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Clock.ts\n\r\n\r\n/**\r\n * Abstract Clock is the base type of all Clocks\r\n *\r\n * It has a few opinions\r\n * 1. It manages the calculation of what \"elapsed\" time means and thus maximum fps\r\n * 2. The default timing api is implemented in now()\r\n *\r\n * To implement your own clock, extend Clock and override start/stop to start and stop the clock, then call update() with whatever\r\n * method is unique to your clock implementation.\r\n */\r\nclass Clock {\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        this._onFatalException = () => { };\r\n        this._maxFps = Infinity;\r\n        this._lastTime = 0;\r\n        this._elapsed = 1;\r\n        this._scheduledCbs = [];\r\n        this._totalElapsed = 0;\r\n        this._options = options;\r\n        this.tick = options.tick;\r\n        this._lastTime = (_a = this.now()) !== null && _a !== void 0 ? _a : 0;\r\n        this._maxFps = (_b = options.maxFps) !== null && _b !== void 0 ? _b : this._maxFps;\r\n        this._onFatalException = (_c = options.onFatalException) !== null && _c !== void 0 ? _c : this._onFatalException;\r\n        this.fpsSampler = new FpsSampler({\r\n            initialFps: 60,\r\n            nowFn: () => this.now()\r\n        });\r\n    }\r\n    /**\r\n     * Get the elapsed time for the last completed frame\r\n     */\r\n    elapsed() {\r\n        return this._elapsed;\r\n    }\r\n    /**\r\n     * Get the current time in milliseconds\r\n     */\r\n    now() {\r\n        return performance.now();\r\n    }\r\n    toTestClock() {\r\n        const testClock = new TestClock({\r\n            ...this._options,\r\n            defaultUpdateMs: 16.6\r\n        });\r\n        return testClock;\r\n    }\r\n    toStandardClock() {\r\n        const clock = new StandardClock({\r\n            ...this._options\r\n        });\r\n        return clock;\r\n    }\r\n    setFatalExceptionHandler(handler) {\r\n        this._onFatalException = handler;\r\n    }\r\n    /**\r\n     * Schedule a callback to fire given a timeout in milliseconds using the excalibur [[Clock]]\r\n     *\r\n     * This is useful to use over the built in browser `setTimeout` because callbacks will be tied to the\r\n     * excalibur update clock, instead of browser time, this means that callbacks wont fire if the game is\r\n     * stopped or paused.\r\n     *\r\n     * @param cb callback to fire\r\n     * @param timeoutMs Optionally specify a timeout in milliseconds from now, default is 0ms which means the next possible tick\r\n     */\r\n    schedule(cb, timeoutMs = 0) {\r\n        // Scheduled based on internal elapsed time\r\n        const scheduledTime = this._totalElapsed + timeoutMs;\r\n        this._scheduledCbs.push([cb, scheduledTime]);\r\n    }\r\n    _runScheduledCbs() {\r\n        // walk backwards to delete items as we loop\r\n        for (let i = this._scheduledCbs.length - 1; i > -1; i--) {\r\n            if (this._scheduledCbs[i][1] <= this._totalElapsed) {\r\n                this._scheduledCbs[i][0]();\r\n                this._scheduledCbs.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    update(overrideUpdateMs) {\r\n        try {\r\n            this.fpsSampler.start();\r\n            // Get the time to calculate time-elapsed\r\n            const now = this.now();\r\n            let elapsed = now - this._lastTime || 1; // first frame\r\n            // Constrain fps\r\n            const fpsInterval = (1000 / this._maxFps);\r\n            // only run frame if enough time has elapsed\r\n            if (elapsed >= fpsInterval) {\r\n                let leftover = 0;\r\n                if (fpsInterval !== 0) {\r\n                    leftover = (elapsed % fpsInterval);\r\n                    elapsed = elapsed - leftover; // shift elapsed to be \"in phase\" with the current loop fps\r\n                }\r\n                // Resolves issue #138 if the game has been paused, or blurred for\r\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\r\n                // and provides more expected behavior when the engine comes back\r\n                // into focus\r\n                if (elapsed > 200) {\r\n                    elapsed = 1;\r\n                }\r\n                // tick the mainloop and run scheduled callbacks\r\n                this._elapsed = overrideUpdateMs || elapsed;\r\n                this._totalElapsed += this._elapsed;\r\n                this._runScheduledCbs();\r\n                this.tick(overrideUpdateMs || elapsed);\r\n                if (fpsInterval !== 0) {\r\n                    this._lastTime = now - leftover;\r\n                }\r\n                else {\r\n                    this._lastTime = now;\r\n                }\r\n                this.fpsSampler.end();\r\n            }\r\n        }\r\n        catch (e) {\r\n            this._onFatalException(e);\r\n            this.stop();\r\n        }\r\n    }\r\n}\r\n/**\r\n * The [[StandardClock]] implements the requestAnimationFrame browser api to run the tick()\r\n */\r\nclass StandardClock extends Clock {\r\n    constructor(options) {\r\n        super(options);\r\n        this._running = false;\r\n    }\r\n    isRunning() {\r\n        return this._running;\r\n    }\r\n    start() {\r\n        if (this._running) {\r\n            return;\r\n        }\r\n        this._running = true;\r\n        const mainloop = () => {\r\n            // stop the loop\r\n            if (!this._running) {\r\n                return;\r\n            }\r\n            try {\r\n                // request next loop\r\n                this._requestId = window.requestAnimationFrame(mainloop);\r\n                this.update();\r\n            }\r\n            catch (e) {\r\n                window.cancelAnimationFrame(this._requestId);\r\n                throw e;\r\n            }\r\n        };\r\n        // begin the first frame\r\n        mainloop();\r\n    }\r\n    stop() {\r\n        this._running = false;\r\n    }\r\n}\r\n/**\r\n * The TestClock is meant for debugging interactions in excalibur that require precise timing to replicate or test\r\n */\r\nclass TestClock extends Clock {\r\n    constructor(options) {\r\n        super({\r\n            ...options\r\n        });\r\n        this._logger = Logger.getInstance();\r\n        this._running = false;\r\n        this._currentTime = 0;\r\n        this._updateMs = options.defaultUpdateMs;\r\n    }\r\n    /**\r\n     * Get the current time in milliseconds\r\n     */\r\n    now() {\r\n        var _a;\r\n        return (_a = this._currentTime) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    isRunning() {\r\n        return this._running;\r\n    }\r\n    start() {\r\n        this._running = true;\r\n    }\r\n    stop() {\r\n        this._running = false;\r\n    }\r\n    /**\r\n     * Manually step the clock forward 1 tick, optionally specify an elapsed time in milliseconds\r\n     * @param overrideUpdateMs\r\n     */\r\n    step(overrideUpdateMs) {\r\n        const time = overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs;\r\n        if (this._running) {\r\n            // to be comparable to RAF this needs to be a full blown Task\r\n            // For example, images cannot decode synchronously in a single step\r\n            this.update(time);\r\n            this._currentTime += time;\r\n        }\r\n        else {\r\n            this._logger.warn('The clock is not running, no step will be performed');\r\n        }\r\n    }\r\n    /**\r\n     * Run a number of steps that tick the clock, optionally specify an elapsed time in milliseconds\r\n     * @param numberOfSteps\r\n     * @param overrideUpdateMs\r\n     */\r\n    run(numberOfSteps, overrideUpdateMs) {\r\n        for (let i = 0; i < numberOfSteps; i++) {\r\n            this.step(overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs);\r\n        }\r\n    }\r\n}\r\n\n// EXTERNAL MODULE: ./Util/Toaster.css\nvar Util_Toaster = __webpack_require__(7379);\n;// CONCATENATED MODULE: ./Util/Toaster.ts\n\r\n/**\r\n * The Toaster is only meant to be called from inside Excalibur to display messages to players\r\n */\r\nclass Toaster {\r\n    constructor() {\r\n        this._toasterCss = Util_Toaster/* default */.Z.toString();\r\n        this._isInitialized = false;\r\n    }\r\n    _initialize() {\r\n        if (!this._isInitialized) {\r\n            this._container = document.createElement('div');\r\n            this._container.id = 'ex-toast-container';\r\n            document.body.appendChild(this._container);\r\n            this._isInitialized = true;\r\n            this._styleBlock = document.createElement('style');\r\n            this._styleBlock.textContent = this._toasterCss;\r\n            document.head.appendChild(this._styleBlock);\r\n        }\r\n    }\r\n    dispose() {\r\n        this._container.parentElement.removeChild(this._container);\r\n        this._styleBlock.parentElement.removeChild(this._styleBlock);\r\n        this._isInitialized = false;\r\n    }\r\n    _createFragment(message) {\r\n        const toastMessage = document.createElement('span');\r\n        toastMessage.innerText = message;\r\n        return toastMessage;\r\n    }\r\n    /**\r\n     * Display a toast message to a player\r\n     * @param message Text of the message, messages may have a single \"[LINK]\" to influence placement\r\n     * @param linkTarget Optionally specify a link location\r\n     * @param linkName Optionally specify a name for that link location\r\n     */\r\n    toast(message, linkTarget, linkName) {\r\n        this._initialize();\r\n        const toast = document.createElement('div');\r\n        toast.className = 'ex-toast-message';\r\n        const messageFragments = message.split('[LINK]').map(message => this._createFragment(message));\r\n        if (linkTarget) {\r\n            const link = document.createElement('a');\r\n            link.href = linkTarget;\r\n            if (linkName) {\r\n                link.innerText = linkName;\r\n            }\r\n            else {\r\n                link.innerText = linkTarget;\r\n            }\r\n            messageFragments.splice(1, 0, link);\r\n        }\r\n        // Assembly message\r\n        const finalMessage = document.createElement('div');\r\n        messageFragments.forEach(message => {\r\n            finalMessage.appendChild(message);\r\n        });\r\n        toast.appendChild(finalMessage);\r\n        // Dismiss button\r\n        const dismissBtn = document.createElement('button');\r\n        dismissBtn.innerText = 'x';\r\n        dismissBtn.addEventListener('click', () => {\r\n            this._container.removeChild(toast);\r\n        });\r\n        toast.appendChild(dismissBtn);\r\n        // Escape to dismiss\r\n        const keydownHandler = (evt) => {\r\n            if (evt.key === 'Escape') {\r\n                try {\r\n                    this._container.removeChild(toast);\r\n                }\r\n                catch (_a) {\r\n                    // pass\r\n                }\r\n            }\r\n            document.removeEventListener('keydown', keydownHandler);\r\n        };\r\n        document.addEventListener('keydown', keydownHandler);\r\n        // Insert into container\r\n        const first = this._container.firstChild;\r\n        this._container.insertBefore(toast, first);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/InputMapper.ts\n/**\r\n * This allows you to map multiple inputs to specific commands! This is especially useful when\r\n * you need to allow multiple input sources to control a specific action.\r\n */\r\nclass InputMapper {\r\n    constructor(inputs) {\r\n        this.inputs = inputs;\r\n        this._handlers = new Map();\r\n    }\r\n    /**\r\n     * Executes the input map, called internally by Excalibur\r\n     */\r\n    execute() {\r\n        for (const [input, command] of this._handlers.entries()) {\r\n            const results = input(this.inputs);\r\n            if (results) {\r\n                command(results);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * This allows you to map multiple inputs to specific commands! This is useful\r\n     *\r\n     * The inputHandler should return a truthy value if you wish the commandHandler to fire.\r\n     *\r\n     * Example:\r\n     * ```typescript\r\n     * const moveRight = (amount: number) => { actor.vel.x = 100 * amount }\r\n     * const moveLeft = (amount: number) => { actor.vel.x = -100 * amount }\r\n     * const moveUp = (amount: number) => { actor.vel.y = -100 * amount }\r\n     * const moveDown = (amount: number) => { actor.vel.y = 100 * amount }\r\n     *\r\n     * engine.inputMapper.on(({keyboard}) => keyboard.isHeld(ex.Keys.ArrowRight) ? 1 : 0, moveRight);\r\n     * engine.inputMapper.on(({gamepads}) => gamepads.at(0).isButtonPressed(ex.Buttons.DpadRight) ? 1 : 0, moveRight);\r\n     * engine.inputMapper.on(({gamepads}) => gamepads.at(0).getAxes(ex.Axes.LeftStickX) > 0 ?\r\n     *  gamepads.at(0).getAxes(ex.Axes.LeftStickX) : 0, moveRight);\r\n     * ```\r\n     * @param inputHandler\r\n     * @param commandHandler\r\n     */\r\n    on(inputHandler, commandHandler) {\r\n        this._handlers.set(inputHandler, commandHandler);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Engine.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\npolyfill();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst EngineEvents = {\r\n    FallbackGraphicsContext: 'fallbackgraphicscontext',\r\n    Initialize: 'initialize',\r\n    Visible: 'visible',\r\n    Hidden: 'hidden',\r\n    Start: 'start',\r\n    Stop: 'stop',\r\n    PreUpdate: 'preupdate',\r\n    PostUpdate: 'postupdate',\r\n    PreFrame: 'preframe',\r\n    PostFrame: 'postframe',\r\n    PreDraw: 'predraw',\r\n    PostDraw: 'postdraw'\r\n};\r\n/**\r\n * Enum representing the different mousewheel event bubble prevention\r\n */\r\nvar ScrollPreventionMode;\r\n(function (ScrollPreventionMode) {\r\n    /**\r\n     * Do not prevent any page scrolling\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Prevent page scroll if mouse is over the game canvas\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"Canvas\"] = 1] = \"Canvas\";\r\n    /**\r\n     * Prevent all page scrolling via mouse wheel\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"All\"] = 2] = \"All\";\r\n})(ScrollPreventionMode || (ScrollPreventionMode = {}));\r\n/**\r\n * The Excalibur Engine\r\n *\r\n * The [[Engine]] is the main driver for a game. It is responsible for\r\n * starting/stopping the game, maintaining state, transmitting events,\r\n * loading resources, and managing the scene.\r\n */\r\nclass Engine {\r\n    /**\r\n     * The width of the game canvas in pixels (physical width component of the\r\n     * resolution of the canvas element)\r\n     */\r\n    get canvasWidth() {\r\n        return this.screen.canvasWidth;\r\n    }\r\n    /**\r\n     * Returns half width of the game canvas in pixels (half physical width component)\r\n     */\r\n    get halfCanvasWidth() {\r\n        return this.screen.halfCanvasWidth;\r\n    }\r\n    /**\r\n     * The height of the game canvas in pixels, (physical height component of\r\n     * the resolution of the canvas element)\r\n     */\r\n    get canvasHeight() {\r\n        return this.screen.canvasHeight;\r\n    }\r\n    /**\r\n     * Returns half height of the game canvas in pixels (half physical height component)\r\n     */\r\n    get halfCanvasHeight() {\r\n        return this.screen.halfCanvasHeight;\r\n    }\r\n    /**\r\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawWidth() {\r\n        return this.screen.drawWidth;\r\n    }\r\n    /**\r\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawWidth() {\r\n        return this.screen.halfDrawWidth;\r\n    }\r\n    /**\r\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawHeight() {\r\n        return this.screen.drawHeight;\r\n    }\r\n    /**\r\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawHeight() {\r\n        return this.screen.halfDrawHeight;\r\n    }\r\n    /**\r\n     * Returns whether excalibur detects the current screen to be HiDPI\r\n     */\r\n    get isHiDpi() {\r\n        return this.screen.isHiDpi;\r\n    }\r\n    /**\r\n     * Access [[stats]] that holds frame statistics.\r\n     */\r\n    get stats() {\r\n        return this.debug.stats;\r\n    }\r\n    /**\r\n     * Indicates whether the engine is set to fullscreen or not\r\n     */\r\n    get isFullscreen() {\r\n        return this.screen.isFullScreen;\r\n    }\r\n    /**\r\n     * Indicates the current [[DisplayMode]] of the engine.\r\n     */\r\n    get displayMode() {\r\n        return this.screen.displayMode;\r\n    }\r\n    /**\r\n     * Returns the calculated pixel ration for use in rendering\r\n     */\r\n    get pixelRatio() {\r\n        return this.screen.pixelRatio;\r\n    }\r\n    get isDebug() {\r\n        return this._isDebug;\r\n    }\r\n    /**\r\n     * Hints the graphics context to truncate fractional world space coordinates\r\n     */\r\n    get snapToPixel() {\r\n        return this.graphicsContext.snapToPixel;\r\n    }\r\n    ;\r\n    set snapToPixel(shouldSnapToPixel) {\r\n        this.graphicsContext.snapToPixel = shouldSnapToPixel;\r\n    }\r\n    ;\r\n    emit(eventName, event) {\r\n        this.events.emit(eventName, event);\r\n    }\r\n    on(eventName, handler) {\r\n        return this.events.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        return this.events.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this.events.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Creates a new game using the given [[EngineOptions]]. By default, if no options are provided,\r\n     * the game will be rendered full screen (taking up all available browser window space).\r\n     * You can customize the game rendering through [[EngineOptions]].\r\n     *\r\n     * Example:\r\n     *\r\n     * ```js\r\n     * var game = new ex.Engine({\r\n     *   width: 0, // the width of the canvas\r\n     *   height: 0, // the height of the canvas\r\n     *   enableCanvasTransparency: true, // the transparencySection of the canvas\r\n     *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\r\n     *   displayMode: ex.DisplayMode.FullScreen, // the display mode\r\n     *   pointerScope: ex.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\r\n     *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\r\n     * });\r\n     *\r\n     * // call game.start, which is a Promise\r\n     * game.start().then(function () {\r\n     *   // ready, set, go!\r\n     * });\r\n     * ```\r\n     */\r\n    constructor(options) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        /**\r\n         * Listen to and emit events on the Engine\r\n         */\r\n        this.events = new EventEmitter();\r\n        /**\r\n         * Optionally set the maximum fps if not set Excalibur will go as fast as the device allows.\r\n         *\r\n         * You may want to constrain max fps if your game cannot maintain fps consistently, it can look and feel better to have a 30fps game than\r\n         * one that bounces between 30fps and 60fps\r\n         */\r\n        this.maxFps = Number.POSITIVE_INFINITY;\r\n        /**\r\n         * Contains all the scenes currently registered with Excalibur\r\n         */\r\n        this.scenes = {};\r\n        this._suppressPlayButton = false;\r\n        /**\r\n         * Indicates whether audio should be paused when the game is no longer visible.\r\n         */\r\n        this.pauseAudioWhenHidden = true;\r\n        /**\r\n         * Indicates whether the engine should draw with debug information\r\n         */\r\n        this._isDebug = false;\r\n        /**\r\n         * Sets the Transparency for the engine.\r\n         */\r\n        this.enableCanvasTransparency = true;\r\n        /**\r\n         * The action to take when a fatal exception is thrown\r\n         */\r\n        this.onFatalException = (e) => {\r\n            Logger.getInstance().fatal(e);\r\n        };\r\n        this._toaster = new Toaster();\r\n        this._timescale = 1.0;\r\n        this._isInitialized = false;\r\n        this._deferredGoTo = null;\r\n        this._originalOptions = {};\r\n        this._performanceThresholdTriggered = false;\r\n        this._fpsSamples = [];\r\n        this._loadingComplete = false;\r\n        this._isReady = false;\r\n        this._isReadyPromise = new Promise(resolve => {\r\n            this._isReadyResolve = resolve;\r\n        });\r\n        /**\r\n         * Returns the current frames elapsed milliseconds\r\n         */\r\n        this.currentFrameElapsedMs = 0;\r\n        /**\r\n         * Returns the current frame lag when in fixed update mode\r\n         */\r\n        this.currentFrameLagMs = 0;\r\n        this._lagMs = 0;\r\n        this._screenShotRequests = [];\r\n        options = { ...Engine._DEFAULT_ENGINE_OPTIONS, ...options };\r\n        this._originalOptions = options;\r\n        Flags.freeze();\r\n        // Initialize browser events facade\r\n        this.browser = new BrowserEvents(window, document);\r\n        // Check compatibility\r\n        const detector = new Detector();\r\n        if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\r\n            const message = document.createElement('div');\r\n            message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\r\n            document.body.appendChild(message);\r\n            detector.failedTests.forEach(function (test) {\r\n                const testMessage = document.createElement('div');\r\n                testMessage.innerText = 'Browser feature missing ' + test;\r\n                document.body.appendChild(testMessage);\r\n            });\r\n            if (options.canvasElementId) {\r\n                const canvas = document.getElementById(options.canvasElementId);\r\n                if (canvas) {\r\n                    canvas.parentElement.removeChild(canvas);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        else {\r\n            this._compatible = true;\r\n        }\r\n        // Use native console API for color fun\r\n        // eslint-disable-next-line no-console\r\n        if (console.log && !options.suppressConsoleBootMessage) {\r\n            // eslint-disable-next-line no-console\r\n            console.log(`%cPowered by Excalibur.js (v${EX_VERSION})`, 'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\r\n            // eslint-disable-next-line no-console\r\n            console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\r\n            // eslint-disable-next-line no-console\r\n            console.log('Visit', 'http://excaliburjs.com', 'for more information');\r\n        }\r\n        // Suppress play button\r\n        if (options.suppressPlayButton) {\r\n            this._suppressPlayButton = true;\r\n        }\r\n        this._logger = Logger.getInstance();\r\n        // If debug is enabled, let's log browser features to the console.\r\n        if (this._logger.defaultLevel === LogLevel.Debug) {\r\n            detector.logBrowserFeatures();\r\n        }\r\n        this._logger.debug('Building engine...');\r\n        this.canvasElementId = options.canvasElementId;\r\n        if (options.canvasElementId) {\r\n            this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\r\n            this.canvas = document.getElementById(options.canvasElementId);\r\n        }\r\n        else if (options.canvasElement) {\r\n            this._logger.debug('Using Canvas element specified:', options.canvasElement);\r\n            this.canvas = options.canvasElement;\r\n        }\r\n        else {\r\n            this._logger.debug('Using generated canvas element');\r\n            this.canvas = document.createElement('canvas');\r\n        }\r\n        let displayMode = (_a = options.displayMode) !== null && _a !== void 0 ? _a : DisplayMode.Fixed;\r\n        if ((options.width && options.height) || options.viewport) {\r\n            if (options.displayMode === undefined) {\r\n                displayMode = DisplayMode.Fixed;\r\n            }\r\n            this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\r\n        }\r\n        else if (!options.displayMode) {\r\n            this._logger.debug('Engine viewport is fit');\r\n            displayMode = DisplayMode.FitScreen;\r\n        }\r\n        this._originalDisplayMode = displayMode;\r\n        // Canvas 2D fallback can be flagged on\r\n        let useCanvasGraphicsContext = Flags.isEnabled('use-canvas-context');\r\n        if (!useCanvasGraphicsContext) {\r\n            // Attempt webgl first\r\n            try {\r\n                this.graphicsContext = new ExcaliburGraphicsContextWebGL({\r\n                    canvasElement: this.canvas,\r\n                    enableTransparency: this.enableCanvasTransparency,\r\n                    smoothing: options.antialiasing,\r\n                    backgroundColor: options.backgroundColor,\r\n                    snapToPixel: options.snapToPixel,\r\n                    useDrawSorting: options.useDrawSorting\r\n                });\r\n            }\r\n            catch (e) {\r\n                this._logger.warn(`Excalibur could not load webgl for some reason (${e.message}) and loaded a Canvas 2D fallback. ` +\r\n                    `Some features of Excalibur will not work in this mode. \\n\\n` +\r\n                    'Read more about this issue at https://excaliburjs.com/docs/webgl');\r\n                // fallback to canvas in case of failure\r\n                useCanvasGraphicsContext = true;\r\n            }\r\n        }\r\n        if (useCanvasGraphicsContext) {\r\n            this.graphicsContext = new ExcaliburGraphicsContext2DCanvas({\r\n                canvasElement: this.canvas,\r\n                enableTransparency: this.enableCanvasTransparency,\r\n                smoothing: options.antialiasing,\r\n                backgroundColor: options.backgroundColor,\r\n                snapToPixel: options.snapToPixel,\r\n                useDrawSorting: options.useDrawSorting\r\n            });\r\n        }\r\n        this.screen = new Screen({\r\n            canvas: this.canvas,\r\n            context: this.graphicsContext,\r\n            antialiasing: (_b = options.antialiasing) !== null && _b !== void 0 ? _b : true,\r\n            browser: this.browser,\r\n            viewport: (_c = options.viewport) !== null && _c !== void 0 ? _c : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\r\n            resolution: options.resolution,\r\n            displayMode,\r\n            pixelRatio: options.suppressHiDPIScaling ? 1 : ((_d = options.pixelRatio) !== null && _d !== void 0 ? _d : null)\r\n        });\r\n        // Set default filtering based on antialiasing\r\n        TextureLoader.filtering = options.antialiasing ? ImageFiltering.Blended : ImageFiltering.Pixel;\r\n        if (options.backgroundColor) {\r\n            this.backgroundColor = options.backgroundColor.clone();\r\n        }\r\n        this.maxFps = (_e = options.maxFps) !== null && _e !== void 0 ? _e : this.maxFps;\r\n        this.fixedUpdateFps = (_f = options.fixedUpdateFps) !== null && _f !== void 0 ? _f : this.fixedUpdateFps;\r\n        this.clock = new StandardClock({\r\n            maxFps: this.maxFps,\r\n            tick: this._mainloop.bind(this),\r\n            onFatalException: (e) => this.onFatalException(e)\r\n        });\r\n        this.enableCanvasTransparency = options.enableCanvasTransparency;\r\n        this._loader = new Loader();\r\n        this._loader.wireEngine(this);\r\n        this.debug = new Debug(this);\r\n        this._initialize(options);\r\n        this.rootScene = this.currentScene = new Scene();\r\n        this.addScene('root', this.rootScene);\r\n        window.___EXCALIBUR_DEVTOOL = this;\r\n    }\r\n    _monitorPerformanceThresholdAndTriggerFallback() {\r\n        const { allow } = this._originalOptions.configurePerformanceCanvas2DFallback;\r\n        let { threshold, showPlayerMessage } = this._originalOptions.configurePerformanceCanvas2DFallback;\r\n        if (threshold === undefined) {\r\n            threshold = Engine._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold;\r\n        }\r\n        if (showPlayerMessage === undefined) {\r\n            showPlayerMessage = Engine._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage;\r\n        }\r\n        if (!Flags.isEnabled('use-canvas-context') && allow && this.ready && !this._performanceThresholdTriggered) {\r\n            // Calculate Average fps for last X number of frames after start\r\n            if (this._fpsSamples.length === threshold.numberOfFrames) {\r\n                this._fpsSamples.splice(0, 1);\r\n            }\r\n            this._fpsSamples.push(this.clock.fpsSampler.fps);\r\n            let total = 0;\r\n            for (let i = 0; i < this._fpsSamples.length; i++) {\r\n                total += this._fpsSamples[i];\r\n            }\r\n            const average = total / this._fpsSamples.length;\r\n            if (this._fpsSamples.length === threshold.numberOfFrames) {\r\n                if (average <= threshold.fps) {\r\n                    this._performanceThresholdTriggered = true;\r\n                    this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.\\n` +\r\n                        'this might mean your browser doesn\\'t have webgl enabled or hardware acceleration is unavailable.\\n\\n' +\r\n                        'If in Chrome:\\n' +\r\n                        '  * Visit Settings > Advanced > System, and ensure \"Use Hardware Acceleration\" is checked.\\n' +\r\n                        '  * Visit chrome://flags/#ignore-gpu-blocklist and ensure \"Override software rendering list\" is \"enabled\"\\n' +\r\n                        'If in Firefox, visit about:config\\n' +\r\n                        '  * Ensure webgl.disabled = false\\n' +\r\n                        '  * Ensure webgl.force-enabled = true\\n' +\r\n                        '  * Ensure layers.acceleration.force-enabled = true\\n\\n' +\r\n                        'Read more about this issue at https://excaliburjs.com/docs/performance');\r\n                    if (showPlayerMessage) {\r\n                        this._toaster.toast('Excalibur is encountering performance issues. ' +\r\n                            'It\\'s possible that your browser doesn\\'t have hardware acceleration enabled. ' +\r\n                            'Visit [LINK] for more information and potential solutions.', 'https://excaliburjs.com/docs/performance');\r\n                    }\r\n                    this.useCanvas2DFallback();\r\n                    this.emit('fallbackgraphicscontext', this.graphicsContext);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Switches the engine's graphics context to the 2D Canvas.\r\n     * @warning Some features of Excalibur will not work in this mode.\r\n     */\r\n    useCanvas2DFallback() {\r\n        var _a, _b, _c;\r\n        // Swap out the canvas\r\n        const newCanvas = this.canvas.cloneNode(false);\r\n        this.canvas.parentNode.replaceChild(newCanvas, this.canvas);\r\n        this.canvas = newCanvas;\r\n        const options = this._originalOptions;\r\n        const displayMode = this._originalDisplayMode;\r\n        // New graphics context\r\n        this.graphicsContext = new ExcaliburGraphicsContext2DCanvas({\r\n            canvasElement: this.canvas,\r\n            enableTransparency: this.enableCanvasTransparency,\r\n            smoothing: options.antialiasing,\r\n            backgroundColor: options.backgroundColor,\r\n            snapToPixel: options.snapToPixel,\r\n            useDrawSorting: options.useDrawSorting\r\n        });\r\n        // Reset screen\r\n        if (this.screen) {\r\n            this.screen.dispose();\r\n        }\r\n        this.screen = new Screen({\r\n            canvas: this.canvas,\r\n            context: this.graphicsContext,\r\n            antialiasing: (_a = options.antialiasing) !== null && _a !== void 0 ? _a : true,\r\n            browser: this.browser,\r\n            viewport: (_b = options.viewport) !== null && _b !== void 0 ? _b : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\r\n            resolution: options.resolution,\r\n            displayMode,\r\n            pixelRatio: options.suppressHiDPIScaling ? 1 : ((_c = options.pixelRatio) !== null && _c !== void 0 ? _c : null)\r\n        });\r\n        this.screen.setCurrentCamera(this.currentScene.camera);\r\n        // Reset pointers\r\n        this.input.pointers.detach();\r\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\r\n        this.input.pointers = this.input.pointers.recreate(pointerTarget, this);\r\n        this.input.pointers.init();\r\n    }\r\n    /**\r\n     * Returns a BoundingBox of the top left corner of the screen\r\n     * and the bottom right corner of the screen.\r\n     */\r\n    getWorldBounds() {\r\n        return this.screen.getWorldBounds();\r\n    }\r\n    /**\r\n     * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\r\n     */\r\n    get timescale() {\r\n        return this._timescale;\r\n    }\r\n    /**\r\n     * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\r\n     * when using time-based movement.\r\n     */\r\n    set timescale(value) {\r\n        if (value <= 0) {\r\n            Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\r\n            return;\r\n        }\r\n        this._timescale = value;\r\n    }\r\n    /**\r\n     * Adds a [[Timer]] to the [[currentScene]].\r\n     * @param timer  The timer to add to the [[currentScene]].\r\n     */\r\n    addTimer(timer) {\r\n        return this.currentScene.addTimer(timer);\r\n    }\r\n    /**\r\n     * Removes a [[Timer]] from the [[currentScene]].\r\n     * @param timer  The timer to remove to the [[currentScene]].\r\n     */\r\n    removeTimer(timer) {\r\n        return this.currentScene.removeTimer(timer);\r\n    }\r\n    /**\r\n     * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\r\n     * would levels or menus.\r\n     *\r\n     * @param key  The name of the scene, must be unique\r\n     * @param scene The scene to add to the engine\r\n     */\r\n    addScene(key, scene) {\r\n        if (this.scenes[key]) {\r\n            this._logger.warn('Scene', key, 'already exists overwriting');\r\n        }\r\n        this.scenes[key] = scene;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    removeScene(entity) {\r\n        if (entity instanceof Scene) {\r\n            // remove scene\r\n            for (const key in this.scenes) {\r\n                if (this.scenes.hasOwnProperty(key)) {\r\n                    if (this.scenes[key] === entity) {\r\n                        delete this.scenes[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (typeof entity === 'string') {\r\n            // remove scene\r\n            delete this.scenes[entity];\r\n        }\r\n    }\r\n    add(entity) {\r\n        if (arguments.length === 2) {\r\n            this.addScene(arguments[0], arguments[1]);\r\n            return;\r\n        }\r\n        if (this._deferredGoTo && this.scenes[this._deferredGoTo]) {\r\n            this.scenes[this._deferredGoTo].add(entity);\r\n        }\r\n        else {\r\n            this.currentScene.add(entity);\r\n        }\r\n    }\r\n    remove(entity) {\r\n        if (entity instanceof Entity) {\r\n            this.currentScene.remove(entity);\r\n        }\r\n        if (entity instanceof Scene) {\r\n            this.removeScene(entity);\r\n        }\r\n        if (typeof entity === 'string') {\r\n            this.removeScene(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Changes the currently updating and drawing scene to a different,\r\n     * named scene. Calls the [[Scene]] lifecycle events.\r\n     * @param key  The key of the scene to transition to.\r\n     * @param data Optional data to send to the scene's onActivate method\r\n     */\r\n    goToScene(key, data) {\r\n        // if not yet initialized defer goToScene\r\n        if (!this.isInitialized) {\r\n            this._deferredGoTo = key;\r\n            return;\r\n        }\r\n        if (this.scenes[key]) {\r\n            const previousScene = this.currentScene;\r\n            const nextScene = this.scenes[key];\r\n            this._logger.debug('Going to scene:', key);\r\n            // only deactivate when initialized\r\n            if (this.currentScene.isInitialized) {\r\n                const context = { engine: this, previousScene, nextScene };\r\n                this.currentScene._deactivate.apply(this.currentScene, [context, nextScene]);\r\n                this.currentScene.events.emit('deactivate', new DeactivateEvent(context, this.currentScene));\r\n            }\r\n            // set current scene to new one\r\n            this.currentScene = nextScene;\r\n            this.screen.setCurrentCamera(nextScene.camera);\r\n            // initialize the current scene if has not been already\r\n            this.currentScene._initialize(this);\r\n            const context = { engine: this, previousScene, nextScene, data };\r\n            this.currentScene._activate.apply(this.currentScene, [context, nextScene]);\r\n            this.currentScene.events.emit('activate', new ActivateEvent(context, this.currentScene));\r\n        }\r\n        else {\r\n            this._logger.error('Scene', key, 'does not exist!');\r\n        }\r\n    }\r\n    /**\r\n     * Transforms the current x, y from screen coordinates to world coordinates\r\n     * @param point  Screen coordinate to convert\r\n     */\r\n    screenToWorldCoordinates(point) {\r\n        return this.screen.screenToWorldCoordinates(point);\r\n    }\r\n    /**\r\n     * Transforms a world coordinate, to a screen coordinate\r\n     * @param point  World coordinate to convert\r\n     */\r\n    worldToScreenCoordinates(point) {\r\n        return this.screen.worldToScreenCoordinates(point);\r\n    }\r\n    /**\r\n     * Initializes the internal canvas, rendering context, display mode, and native event listeners\r\n     */\r\n    _initialize(options) {\r\n        var _a, _b, _c, _d;\r\n        this.pageScrollPreventionMode = options.scrollPreventionMode;\r\n        // initialize inputs\r\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\r\n        this.input = {\r\n            keyboard: new Keyboard(),\r\n            pointers: new PointerEventReceiver(pointerTarget, this),\r\n            gamepads: new Gamepads()\r\n        };\r\n        this.input.keyboard.init({\r\n            grabWindowFocus: (_b = (_a = this._originalOptions) === null || _a === void 0 ? void 0 : _a.grabWindowFocus) !== null && _b !== void 0 ? _b : true\r\n        });\r\n        this.input.pointers.init({\r\n            grabWindowFocus: (_d = (_c = this._originalOptions) === null || _c === void 0 ? void 0 : _c.grabWindowFocus) !== null && _d !== void 0 ? _d : true\r\n        });\r\n        this.input.gamepads.init();\r\n        this.inputMapper = new InputMapper(this.input);\r\n        // Issue #385 make use of the visibility api\r\n        // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n        this.browser.document.on('visibilitychange', () => {\r\n            if (document.visibilityState === 'hidden') {\r\n                this.events.emit('hidden', new HiddenEvent(this));\r\n                this._logger.debug('Window hidden');\r\n            }\r\n            else if (document.visibilityState === 'visible') {\r\n                this.events.emit('visible', new VisibleEvent(this));\r\n                this._logger.debug('Window visible');\r\n            }\r\n        });\r\n        if (!this.canvasElementId && !options.canvasElement) {\r\n            document.body.appendChild(this.canvas);\r\n        }\r\n    }\r\n    onInitialize(_engine) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * If supported by the browser, this will set the antialiasing flag on the\r\n     * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\r\n     * image resources.\r\n     * @param isSmooth  Set smoothing to true or false\r\n     */\r\n    setAntialiasing(isSmooth) {\r\n        this.screen.antialiasing = isSmooth;\r\n    }\r\n    /**\r\n     * Return the current smoothing status of the canvas\r\n     */\r\n    getAntialiasing() {\r\n        return this.screen.antialiasing;\r\n    }\r\n    /**\r\n     * Gets whether the actor is Initialized\r\n     */\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    _overrideInitialize(engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            this.events.emit('initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n            if (this._deferredGoTo) {\r\n                const deferredScene = this._deferredGoTo;\r\n                this._deferredGoTo = null;\r\n                this.goToScene(deferredScene);\r\n            }\r\n            else {\r\n                this.goToScene('root');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Updates the entire state of the game\r\n     * @param delta  Number of milliseconds elapsed since the last update.\r\n     */\r\n    _update(delta) {\r\n        if (!this.ready) {\r\n            // suspend updates until loading is finished\r\n            this._loader.update(this, delta);\r\n            // Update input listeners\r\n            this.input.keyboard.update();\r\n            this.input.gamepads.update();\r\n            this.inputMapper.execute();\r\n            return;\r\n        }\r\n        // Publish preupdate events\r\n        this._preupdate(delta);\r\n        // process engine level events\r\n        this.currentScene.update(this, delta);\r\n        // Update graphics postprocessors\r\n        this.graphicsContext.updatePostProcessors(delta);\r\n        // Publish update event\r\n        this._postupdate(delta);\r\n        // Update input listeners\r\n        this.input.keyboard.update();\r\n        this.input.gamepads.update();\r\n        this.inputMapper.execute();\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _preupdate(delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(this, delta, this));\r\n        this.onPreUpdate(this, delta);\r\n    }\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _postupdate(delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(this, delta, this));\r\n        this.onPostUpdate(this, delta);\r\n    }\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Draws the entire game\r\n     * @param delta  Number of milliseconds elapsed since the last draw.\r\n     */\r\n    _draw(delta) {\r\n        this.graphicsContext.beginDrawLifecycle();\r\n        this.graphicsContext.clear();\r\n        this._predraw(this.graphicsContext, delta);\r\n        // Drawing nothing else while loading\r\n        if (!this._isReady) {\r\n            this._loader.canvas.draw(this.graphicsContext, 0, 0);\r\n            this.graphicsContext.flush();\r\n            return;\r\n        }\r\n        this.graphicsContext.backgroundColor = this.backgroundColor;\r\n        this.currentScene.draw(this.graphicsContext, delta);\r\n        this._postdraw(this.graphicsContext, delta);\r\n        // Flush any pending drawings\r\n        this.graphicsContext.flush();\r\n        this.graphicsContext.endDrawLifecycle();\r\n        this._checkForScreenShots();\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _predraw(_ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\r\n        this.onPreDraw(_ctx, delta);\r\n    }\r\n    onPreDraw(_ctx, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _postdraw(_ctx, delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\r\n        this.onPostDraw(_ctx, delta);\r\n    }\r\n    onPostDraw(_ctx, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Enable or disable Excalibur debugging functionality.\r\n     * @param toggle a value that debug drawing will be changed to\r\n     */\r\n    showDebug(toggle) {\r\n        this._isDebug = toggle;\r\n    }\r\n    /**\r\n     * Toggle Excalibur debugging functionality.\r\n     */\r\n    toggleDebug() {\r\n        this._isDebug = !this._isDebug;\r\n        return this._isDebug;\r\n    }\r\n    /**\r\n     * Returns true when loading is totally complete and the player has clicked start\r\n     */\r\n    get loadingComplete() {\r\n        return this._loadingComplete;\r\n    }\r\n    get ready() {\r\n        return this._isReady;\r\n    }\r\n    isReady() {\r\n        return this._isReadyPromise;\r\n    }\r\n    /**\r\n     * Starts the internal game loop for Excalibur after loading\r\n     * any provided assets.\r\n     * @param loader  Optional [[Loader]] to use to load resources. The default loader is [[Loader]], override to provide your own\r\n     * custom loader.\r\n     *\r\n     * Note: start() only resolves AFTER the user has clicked the play button\r\n     */\r\n    async start(loader) {\r\n        if (!this._compatible) {\r\n            throw new Error('Excalibur is incompatible with your browser');\r\n        }\r\n        // Wire loader if we have it\r\n        if (loader) {\r\n            // Push the current user entered resolution/viewport\r\n            this.screen.pushResolutionAndViewport();\r\n            // Configure resolution for loader, it expects resolution === viewport\r\n            this.screen.resolution = this.screen.viewport;\r\n            this.screen.applyResolutionAndViewport();\r\n            this._loader = loader;\r\n            this._loader.suppressPlayButton = this._suppressPlayButton || this._loader.suppressPlayButton;\r\n            this._loader.wireEngine(this);\r\n        }\r\n        // Start the excalibur clock which drives the mainloop\r\n        // has started is a slight misnomer, it's really mainloop started\r\n        this._logger.debug('Starting game clock...');\r\n        this.browser.resume();\r\n        this.clock.start();\r\n        this._logger.debug('Game clock started');\r\n        if (loader) {\r\n            await this.load(this._loader);\r\n            this._loadingComplete = true;\r\n            // reset back to previous user resolution/viewport\r\n            this.screen.popResolutionAndViewport();\r\n            this.screen.applyResolutionAndViewport();\r\n        }\r\n        this._loadingComplete = true;\r\n        // Initialize before ready\r\n        this._overrideInitialize(this);\r\n        this._isReady = true;\r\n        this._isReadyResolve();\r\n        this.emit('start', new GameStartEvent(this));\r\n        return this._isReadyPromise;\r\n    }\r\n    _mainloop(elapsed) {\r\n        this.emit('preframe', new PreFrameEvent(this, this.stats.prevFrame));\r\n        const delta = elapsed * this.timescale;\r\n        this.currentFrameElapsedMs = delta;\r\n        // reset frame stats (reuse existing instances)\r\n        const frameId = this.stats.prevFrame.id + 1;\r\n        this.stats.currFrame.reset();\r\n        this.stats.currFrame.id = frameId;\r\n        this.stats.currFrame.delta = delta;\r\n        this.stats.currFrame.fps = this.clock.fpsSampler.fps;\r\n        GraphicsDiagnostics.clear();\r\n        const beforeUpdate = this.clock.now();\r\n        const fixedTimestepMs = 1000 / this.fixedUpdateFps;\r\n        if (this.fixedUpdateFps) {\r\n            this._lagMs += delta;\r\n            while (this._lagMs >= fixedTimestepMs) {\r\n                this._update(fixedTimestepMs);\r\n                this._lagMs -= fixedTimestepMs;\r\n            }\r\n        }\r\n        else {\r\n            this._update(delta);\r\n        }\r\n        const afterUpdate = this.clock.now();\r\n        this.currentFrameLagMs = this._lagMs;\r\n        this._draw(delta);\r\n        const afterDraw = this.clock.now();\r\n        this.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\r\n        this.stats.currFrame.duration.draw = afterDraw - afterUpdate;\r\n        this.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\r\n        this.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\r\n        this.emit('postframe', new PostFrameEvent(this, this.stats.currFrame));\r\n        this.stats.prevFrame.reset(this.stats.currFrame);\r\n        this._monitorPerformanceThresholdAndTriggerFallback();\r\n    }\r\n    /**\r\n     * Stops Excalibur's main loop, useful for pausing the game.\r\n     */\r\n    stop() {\r\n        if (this.clock.isRunning()) {\r\n            this.emit('stop', new GameStopEvent(this));\r\n            this.browser.pause();\r\n            this.clock.stop();\r\n            this._logger.debug('Game stopped');\r\n        }\r\n    }\r\n    /**\r\n     * Returns the Engine's running status, Useful for checking whether engine is running or paused.\r\n     */\r\n    isRunning() {\r\n        return this.clock.isRunning();\r\n    }\r\n    /**\r\n     * Takes a screen shot of the current viewport and returns it as an\r\n     * HTML Image Element.\r\n     * @param preserveHiDPIResolution in the case of HiDPI return the full scaled backing image, by default false\r\n     */\r\n    screenshot(preserveHiDPIResolution = false) {\r\n        const screenShotPromise = new Promise((resolve) => {\r\n            this._screenShotRequests.push({ preserveHiDPIResolution, resolve });\r\n        });\r\n        return screenShotPromise;\r\n    }\r\n    _checkForScreenShots() {\r\n        // We must grab the draw buffer before we yield to the browser\r\n        // the draw buffer is cleared after compositing\r\n        // the reason for the asynchrony is setting `preserveDrawingBuffer: true`\r\n        // forces the browser to copy buffers which can have a mass perf impact on mobile\r\n        for (const request of this._screenShotRequests) {\r\n            const finalWidth = request.preserveHiDPIResolution ? this.canvas.width : this.screen.resolution.width;\r\n            const finalHeight = request.preserveHiDPIResolution ? this.canvas.height : this.screen.resolution.height;\r\n            const screenshot = document.createElement('canvas');\r\n            screenshot.width = finalWidth;\r\n            screenshot.height = finalHeight;\r\n            const ctx = screenshot.getContext('2d');\r\n            ctx.imageSmoothingEnabled = this.screen.antialiasing;\r\n            ctx.drawImage(this.canvas, 0, 0, finalWidth, finalHeight);\r\n            const result = new Image();\r\n            const raw = screenshot.toDataURL('image/png');\r\n            result.src = raw;\r\n            request.resolve(result);\r\n        }\r\n        // Reset state\r\n        this._screenShotRequests.length = 0;\r\n    }\r\n    /**\r\n     * Another option available to you to load resources into the game.\r\n     * Immediately after calling this the game will pause and the loading screen\r\n     * will appear.\r\n     * @param loader  Some [[Loadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\r\n     */\r\n    async load(loader) {\r\n        try {\r\n            await loader.load();\r\n        }\r\n        catch (e) {\r\n            this._logger.error('Error loading resources, things may not behave properly', e);\r\n            await Promise.resolve();\r\n        }\r\n    }\r\n}\r\n/**\r\n * Default [[EngineOptions]]\r\n */\r\nEngine._DEFAULT_ENGINE_OPTIONS = {\r\n    width: 0,\r\n    height: 0,\r\n    enableCanvasTransparency: true,\r\n    useDrawSorting: true,\r\n    configurePerformanceCanvas2DFallback: {\r\n        allow: true,\r\n        showPlayerMessage: false,\r\n        threshold: { fps: 20, numberOfFrames: 100 }\r\n    },\r\n    canvasElementId: '',\r\n    canvasElement: undefined,\r\n    snapToPixel: false,\r\n    pointerScope: PointerScope.Canvas,\r\n    suppressConsoleBootMessage: null,\r\n    suppressMinimumBrowserFeatureDetection: null,\r\n    suppressHiDPIScaling: null,\r\n    suppressPlayButton: null,\r\n    grabWindowFocus: true,\r\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\r\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\r\n};\r\n\n;// CONCATENATED MODULE: ./Math/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Debug/index.ts\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./EventDispatcher.ts\n\r\n/**\r\n * @deprecated Use [[EventEmitter]] will be removed in v0.29.0\r\n */\r\nclass EventDispatcher {\r\n    constructor() {\r\n        this._handlers = {};\r\n        this._wiredEventDispatchers = [];\r\n        this._deferedHandlerRemovals = [];\r\n    }\r\n    /**\r\n     * Clears any existing handlers or wired event dispatchers on this event dispatcher\r\n     */\r\n    clear() {\r\n        this._handlers = {};\r\n        this._wiredEventDispatchers = [];\r\n    }\r\n    _processDeferredHandlerRemovals() {\r\n        for (const eventHandler of this._deferedHandlerRemovals) {\r\n            this._removeHandler(eventHandler.name, eventHandler.handler);\r\n        }\r\n        this._deferedHandlerRemovals.length = 0;\r\n    }\r\n    /**\r\n     * Emits an event for target\r\n     * @param eventName  The name of the event to publish\r\n     * @param event      Optionally pass an event data object to the handler\r\n     */\r\n    emit(eventName, event) {\r\n        this._processDeferredHandlerRemovals();\r\n        if (!eventName) {\r\n            // key not mapped\r\n            return;\r\n        }\r\n        eventName = eventName.toLowerCase();\r\n        if (typeof event === 'undefined' || event === null) {\r\n            event = new GameEvent();\r\n        }\r\n        let i, len;\r\n        if (this._handlers[eventName]) {\r\n            i = 0;\r\n            len = this._handlers[eventName].length;\r\n            for (i; i < len; i++) {\r\n                this._handlers[eventName][i](event);\r\n            }\r\n        }\r\n        i = 0;\r\n        len = this._wiredEventDispatchers.length;\r\n        for (i; i < len; i++) {\r\n            this._wiredEventDispatchers[i].emit(eventName, event);\r\n        }\r\n    }\r\n    /**\r\n     * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\r\n     * @param eventName  The name of the event to subscribe to\r\n     * @param handler    The handler callback to fire on this event\r\n     */\r\n    on(eventName, handler) {\r\n        this._processDeferredHandlerRemovals();\r\n        eventName = eventName.toLowerCase();\r\n        if (!this._handlers[eventName]) {\r\n            this._handlers[eventName] = [];\r\n        }\r\n        this._handlers[eventName].push(handler);\r\n    }\r\n    /**\r\n     * Unsubscribe an event handler(s) from an event. If a specific handler\r\n     * is specified for an event, only that handler will be unsubscribed.\r\n     * Otherwise all handlers will be unsubscribed for that event.\r\n     *\r\n     * @param eventName  The name of the event to unsubscribe\r\n     * @param handler    Optionally the specific handler to unsubscribe\r\n     */\r\n    off(eventName, handler) {\r\n        this._deferedHandlerRemovals.push({ name: eventName, handler });\r\n    }\r\n    _removeHandler(eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        const eventHandlers = this._handlers[eventName];\r\n        if (eventHandlers) {\r\n            // if no explicit handler is give with the event name clear all handlers\r\n            if (!handler) {\r\n                this._handlers[eventName].length = 0;\r\n            }\r\n            else {\r\n                const index = eventHandlers.indexOf(handler);\r\n                if (index > -1) {\r\n                    this._handlers[eventName].splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    once(eventName, handler) {\r\n        this._processDeferredHandlerRemovals();\r\n        const metaHandler = (event) => {\r\n            const ev = event || new GameEvent();\r\n            this.off(eventName, metaHandler);\r\n            handler(ev);\r\n        };\r\n        this.on(eventName, metaHandler);\r\n    }\r\n    /**\r\n     * Wires this event dispatcher to also receive events from another\r\n     */\r\n    wire(eventDispatcher) {\r\n        eventDispatcher._wiredEventDispatchers.push(this);\r\n    }\r\n    /**\r\n     * Unwires this event dispatcher from another\r\n     */\r\n    unwire(eventDispatcher) {\r\n        const index = eventDispatcher._wiredEventDispatchers.indexOf(this);\r\n        if (index > -1) {\r\n            eventDispatcher._wiredEventDispatchers.splice(index, 1);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Label.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Labels are the way to draw small amounts of text to the screen. They are\r\n * actors and inherit all of the benefits and capabilities.\r\n */\r\nclass Label extends Actor {\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(newFont) {\r\n        this._font = newFont;\r\n        this._text.font = newFont;\r\n    }\r\n    /**\r\n     * The text to draw.\r\n     */\r\n    get text() {\r\n        return this._text.text;\r\n    }\r\n    set text(text) {\r\n        this._text.text = text;\r\n    }\r\n    get color() {\r\n        return this._text.color;\r\n    }\r\n    set color(color) {\r\n        if (this._text) {\r\n            this._text.color = color;\r\n        }\r\n    }\r\n    get opacity() {\r\n        return this._text.opacity;\r\n    }\r\n    set opacity(opacity) {\r\n        this._text.opacity = opacity;\r\n    }\r\n    /**\r\n     * The [[SpriteFont]] to use, if any. Overrides [[Font|font]] if present.\r\n     */\r\n    get spriteFont() {\r\n        return this._spriteFont;\r\n    }\r\n    set spriteFont(sf) {\r\n        if (sf) {\r\n            this._spriteFont = sf;\r\n            this._text.font = this._spriteFont;\r\n        }\r\n    }\r\n    /**\r\n     * Build a new label\r\n     * @param options\r\n     */\r\n    constructor(options) {\r\n        super(options);\r\n        this._font = new Font();\r\n        this._text = new Text({ text: '', font: this._font });\r\n        const { text, pos, x, y, spriteFont, font, color } = options;\r\n        this.pos = pos !== null && pos !== void 0 ? pos : (x && y ? vec(x, y) : this.pos);\r\n        this.text = text !== null && text !== void 0 ? text : this.text;\r\n        this.font = font !== null && font !== void 0 ? font : this.font;\r\n        this.spriteFont = spriteFont !== null && spriteFont !== void 0 ? spriteFont : this.spriteFont;\r\n        this._text.color = color !== null && color !== void 0 ? color : this.color;\r\n        const gfx = this.get(GraphicsComponent);\r\n        gfx.anchor = Vector.Zero;\r\n        gfx.use(this._text);\r\n    }\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n    }\r\n    /**\r\n     * Returns the width of the text in the label (in pixels);\r\n     */\r\n    getTextWidth() {\r\n        return this._text.width;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./TileMap/IsometricMap.ts\n\r\n\r\n\r\n\r\n\r\nclass IsometricTile extends Entity {\r\n    getGraphics() {\r\n        return this._graphics;\r\n    }\r\n    /**\r\n     * Tile graphics\r\n     */\r\n    addGraphic(graphic) {\r\n        this._graphics.push(graphic);\r\n        this._gfx.visible = true;\r\n        this._gfx.localBounds = this._recalculateBounds();\r\n    }\r\n    _recalculateBounds() {\r\n        let bounds = this._tileBounds.clone();\r\n        for (const graphic of this._graphics) {\r\n            const offset = vec(this.map.graphicsOffset.x - this.map.tileWidth / 2, this.map.graphicsOffset.y - (this.map.renderFromTopOfGraphic ? 0 : (graphic.height - this.map.tileHeight)));\r\n            bounds = bounds.combine(graphic.localBounds.translate(offset));\r\n        }\r\n        return bounds;\r\n    }\r\n    removeGraphic(graphic) {\r\n        const index = this._graphics.indexOf(graphic);\r\n        if (index > -1) {\r\n            this._graphics.splice(index, 1);\r\n        }\r\n        this._gfx.localBounds = this._recalculateBounds();\r\n    }\r\n    clearGraphics() {\r\n        this._graphics.length = 0;\r\n        this._gfx.visible = false;\r\n        this._gfx.localBounds = this._recalculateBounds();\r\n    }\r\n    getColliders() {\r\n        return this._colliders;\r\n    }\r\n    /**\r\n     * Adds a collider to the IsometricTile\r\n     *\r\n     * **Note!** the [[Tile.solid]] must be set to true for it to act as a \"fixed\" collider\r\n     * @param collider\r\n     */\r\n    addCollider(collider) {\r\n        this._colliders.push(collider);\r\n        this.map.flagCollidersDirty();\r\n    }\r\n    /**\r\n     * Removes a collider from the IsometricTile\r\n     * @param collider\r\n     */\r\n    removeCollider(collider) {\r\n        const index = this._colliders.indexOf(collider);\r\n        if (index > -1) {\r\n            this._colliders.splice(index, 1);\r\n        }\r\n        this.map.flagCollidersDirty();\r\n    }\r\n    /**\r\n     * Clears all colliders from the IsometricTile\r\n     */\r\n    clearColliders() {\r\n        this._colliders.length = 0;\r\n        this.map.flagCollidersDirty();\r\n    }\r\n    /**\r\n     * Returns the top left corner of the [[IsometricTile]] in world space\r\n     */\r\n    get pos() {\r\n        return this.map.tileToWorld(vec(this.x, this.y));\r\n    }\r\n    /**\r\n     * Returns the center of the [[IsometricTile]]\r\n     */\r\n    get center() {\r\n        return this.pos.add(vec(0, this.map.tileHeight / 2));\r\n    }\r\n    /**\r\n     * Construct a new IsometricTile\r\n     * @param x tile coordinate in x (not world position)\r\n     * @param y tile coordinate in y (not world position)\r\n     * @param graphicsOffset offset that tile should be shifted by (default (0, 0))\r\n     * @param map reference to owning IsometricMap\r\n     */\r\n    constructor(x, y, graphicsOffset, map) {\r\n        super([\r\n            new TransformComponent(),\r\n            new GraphicsComponent({\r\n                offset: graphicsOffset !== null && graphicsOffset !== void 0 ? graphicsOffset : Vector.Zero,\r\n                onPostDraw: (gfx, elapsed) => this.draw(gfx, elapsed)\r\n            }),\r\n            new IsometricEntityComponent(map)\r\n        ]);\r\n        /**\r\n         * Indicates whether this tile is solid\r\n         */\r\n        this.solid = false;\r\n        this._tileBounds = new BoundingBox();\r\n        this._graphics = [];\r\n        /**\r\n         * Tile colliders\r\n         */\r\n        this._colliders = [];\r\n        this.x = x;\r\n        this.y = y;\r\n        this.map = map;\r\n        this._transform = this.get(TransformComponent);\r\n        this._isometricEntityComponent = this.get(IsometricEntityComponent);\r\n        const halfTileWidth = this.map.tileWidth / 2;\r\n        const halfTileHeight = this.map.tileHeight / 2;\r\n        // See https://clintbellanger.net/articles/isometric_math/ for formula\r\n        // The x position shifts left with every y step\r\n        const xPos = (this.x - this.y) * halfTileWidth;\r\n        // The y position needs to go down with every x step\r\n        const yPos = (this.x + this.y) * halfTileHeight;\r\n        this._transform.pos = vec(xPos, yPos);\r\n        this._isometricEntityComponent.elevation = 0;\r\n        this._gfx = this.get(GraphicsComponent);\r\n        this._gfx.visible = false; // start not visible\r\n        const totalWidth = this.map.tileWidth;\r\n        const totalHeight = this.map.tileHeight;\r\n        // initial guess at gfx bounds based on the tile\r\n        const offset = vec(0, (this.map.renderFromTopOfGraphic ? totalHeight : 0));\r\n        this._gfx.localBounds = this._tileBounds = new BoundingBox({\r\n            left: -totalWidth / 2,\r\n            top: -totalHeight,\r\n            right: totalWidth / 2,\r\n            bottom: totalHeight\r\n        }).translate(offset);\r\n    }\r\n    draw(gfx, _elapsed) {\r\n        const halfTileWidth = this.map.tileWidth / 2;\r\n        gfx.save();\r\n        // shift left origin to corner of map, not the left corner of the first sprite\r\n        gfx.translate(-halfTileWidth, 0);\r\n        for (const graphic of this._graphics) {\r\n            graphic.draw(gfx, this.map.graphicsOffset.x, this.map.graphicsOffset.y - (this.map.renderFromTopOfGraphic ? 0 : (graphic.height - this.map.tileHeight)));\r\n        }\r\n        gfx.restore();\r\n    }\r\n}\r\n/**\r\n * The IsometricMap is a special tile map that provides isometric rendering support to Excalibur\r\n *\r\n * The tileWidth and tileHeight should be the height and width in pixels of the parallelogram of the base of the tile art asset.\r\n * The tileWidth and tileHeight is not necessarily the same as your graphic pixel width and height.\r\n *\r\n * Please refer to the docs https://excaliburjs.com for more details calculating what your tile width and height should be given\r\n * your art assets.\r\n */\r\nclass IsometricMap extends Entity {\r\n    constructor(options) {\r\n        super([\r\n            new TransformComponent(),\r\n            new BodyComponent({\r\n                type: CollisionType.Fixed\r\n            }),\r\n            new ColliderComponent(),\r\n            new DebugGraphicsComponent((ctx) => this.debug(ctx), false)\r\n        ], options.name);\r\n        /**\r\n         * Render the tile graphic from the top instead of the bottom\r\n         *\r\n         * default is `false` meaning rendering from the bottom\r\n         */\r\n        this.renderFromTopOfGraphic = false;\r\n        this.graphicsOffset = vec(0, 0);\r\n        this._collidersDirty = false;\r\n        this._originalOffsets = new WeakMap();\r\n        const { pos, tileWidth, tileHeight, columns: width, rows: height, renderFromTopOfGraphic, graphicsOffset } = options;\r\n        this.transform = this.get(TransformComponent);\r\n        if (pos) {\r\n            this.transform.pos = pos;\r\n        }\r\n        this.collider = this.get(ColliderComponent);\r\n        if (this.collider) {\r\n            this.collider.set(this._composite = new CompositeCollider([]));\r\n        }\r\n        this.renderFromTopOfGraphic = renderFromTopOfGraphic !== null && renderFromTopOfGraphic !== void 0 ? renderFromTopOfGraphic : this.renderFromTopOfGraphic;\r\n        this.graphicsOffset = graphicsOffset !== null && graphicsOffset !== void 0 ? graphicsOffset : this.graphicsOffset;\r\n        this.tileWidth = tileWidth;\r\n        this.tileHeight = tileHeight;\r\n        this.columns = width;\r\n        this.rows = height;\r\n        this.tiles = new Array(width * height);\r\n        // build up tile representation\r\n        for (let y = 0; y < height; y++) {\r\n            for (let x = 0; x < width; x++) {\r\n                const tile = new IsometricTile(x, y, this.graphicsOffset, this);\r\n                this.tiles[x + y * width] = tile;\r\n                this.addChild(tile);\r\n                // TODO row/columns helpers\r\n            }\r\n        }\r\n    }\r\n    update() {\r\n        if (this._collidersDirty) {\r\n            this.updateColliders();\r\n            this._collidersDirty = false;\r\n        }\r\n    }\r\n    flagCollidersDirty() {\r\n        this._collidersDirty = true;\r\n    }\r\n    _getOrSetColliderOriginalOffset(collider) {\r\n        if (!this._originalOffsets.has(collider)) {\r\n            const originalOffset = collider.offset;\r\n            this._originalOffsets.set(collider, originalOffset);\r\n            return originalOffset;\r\n        }\r\n        else {\r\n            return this._originalOffsets.get(collider);\r\n        }\r\n    }\r\n    updateColliders() {\r\n        this._composite.clearColliders();\r\n        const pos = this.get(TransformComponent).pos;\r\n        for (const tile of this.tiles) {\r\n            if (tile.solid) {\r\n                for (const collider of tile.getColliders()) {\r\n                    const originalOffset = this._getOrSetColliderOriginalOffset(collider);\r\n                    collider.offset = this.tileToWorld(vec(tile.x, tile.y))\r\n                        .sub(pos)\r\n                        .add(originalOffset)\r\n                        .sub(vec(this.tileWidth / 2, this.tileHeight)); // We need to unshift height based on drawing\r\n                    collider.owner = this;\r\n                    this._composite.addCollider(collider);\r\n                }\r\n            }\r\n        }\r\n        this.collider.update();\r\n    }\r\n    /**\r\n     * Convert world space coordinates to the tile x, y coordinate\r\n     * @param worldCoordinate\r\n     */\r\n    worldToTile(worldCoordinate) {\r\n        worldCoordinate = worldCoordinate.sub(this.transform.globalPos);\r\n        const halfTileWidth = this.tileWidth / 2;\r\n        const halfTileHeight = this.tileHeight / 2;\r\n        // See https://clintbellanger.net/articles/isometric_math/ for formula\r\n        return vec(~~((worldCoordinate.x / halfTileWidth + (worldCoordinate.y / halfTileHeight)) / 2), ~~((worldCoordinate.y / halfTileHeight - (worldCoordinate.x / halfTileWidth)) / 2));\r\n    }\r\n    /**\r\n     * Given a tile coordinate, return the top left corner in world space\r\n     * @param tileCoordinate\r\n     */\r\n    tileToWorld(tileCoordinate) {\r\n        const halfTileWidth = this.tileWidth / 2;\r\n        const halfTileHeight = this.tileHeight / 2;\r\n        // The x position shifts left with every y step\r\n        const xPos = (tileCoordinate.x - tileCoordinate.y) * halfTileWidth;\r\n        // The y position needs to go down with every x step\r\n        const yPos = (tileCoordinate.x + tileCoordinate.y) * halfTileHeight;\r\n        return vec(xPos, yPos).add(this.transform.pos);\r\n    }\r\n    /**\r\n     * Returns the [[IsometricTile]] by its x and y coordinates\r\n     */\r\n    getTile(x, y) {\r\n        if (x < 0 || y < 0 || x >= this.columns || y >= this.rows) {\r\n            return null;\r\n        }\r\n        return this.tiles[x + y * this.columns];\r\n    }\r\n    /**\r\n     * Returns the [[IsometricTile]] by testing a point in world coordinates,\r\n     * returns `null` if no Tile was found.\r\n     */\r\n    getTileByPoint(point) {\r\n        const tileCoord = this.worldToTile(point);\r\n        const tile = this.getTile(tileCoord.x, tileCoord.y);\r\n        return tile;\r\n    }\r\n    _getMaxZIndex() {\r\n        let maxZ = Number.NEGATIVE_INFINITY;\r\n        for (const tile of this.tiles) {\r\n            const currentZ = tile.get(TransformComponent).z;\r\n            if (currentZ > maxZ) {\r\n                maxZ = currentZ;\r\n            }\r\n        }\r\n        return maxZ;\r\n    }\r\n    /**\r\n     * Debug draw for IsometricMap, called internally by excalibur when debug mode is toggled on\r\n     * @param gfx\r\n     */\r\n    debug(gfx) {\r\n        gfx.save();\r\n        gfx.z = this._getMaxZIndex() + 0.5;\r\n        for (let y = 0; y < this.rows + 1; y++) {\r\n            const left = this.tileToWorld(vec(0, y));\r\n            const right = this.tileToWorld(vec(this.columns, y));\r\n            gfx.drawLine(left, right, Color.Red, 2);\r\n        }\r\n        for (let x = 0; x < this.columns + 1; x++) {\r\n            const top = this.tileToWorld(vec(x, 0));\r\n            const bottom = this.tileToWorld(vec(x, this.rows));\r\n            gfx.drawLine(top, bottom, Color.Red, 2);\r\n        }\r\n        for (const tile of this.tiles) {\r\n            gfx.drawCircle(this.tileToWorld(vec(tile.x, tile.y)), 3, Color.Yellow);\r\n        }\r\n        gfx.restore();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./TileMap/index.ts\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Actions/Action/ActionSequence.ts\n\r\n/**\r\n * Action that can represent a sequence of actions, this can be useful in conjunction with\r\n * [[ParallelActions]] to run multiple sequences in parallel.\r\n */\r\nclass ActionSequence {\r\n    constructor(entity, actionBuilder) {\r\n        this._stopped = false;\r\n        this._sequenceBuilder = actionBuilder;\r\n        this._sequenceContext = new ActionContext(entity);\r\n        this._actionQueue = this._sequenceContext.getQueue();\r\n        this._sequenceBuilder(this._sequenceContext);\r\n    }\r\n    update(delta) {\r\n        this._actionQueue.update(delta);\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._actionQueue.isComplete();\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._stopped = false;\r\n        this._actionQueue.reset();\r\n    }\r\n    clone(entity) {\r\n        return new ActionSequence(entity, this._sequenceBuilder);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/ParallelActions.ts\n/**\r\n * Action that can run multiple [[Action]]s or [[ActionSequence]]s at the same time\r\n */\r\nclass ParallelActions {\r\n    constructor(parallelActions) {\r\n        this._actions = parallelActions;\r\n    }\r\n    update(delta) {\r\n        for (let i = 0; i < this._actions.length; i++) {\r\n            this._actions[i].update(delta);\r\n        }\r\n    }\r\n    isComplete(entity) {\r\n        return this._actions.every(a => a.isComplete(entity));\r\n    }\r\n    reset() {\r\n        this._actions.forEach(a => a.reset());\r\n    }\r\n    stop() {\r\n        this._actions.forEach(a => a.stop());\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Collision/Group/CollisionGroupManager.ts\n\r\n/**\r\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\r\n */\r\nclass CollisionGroupManager {\r\n    /**\r\n     * Create a new named collision group up to a max of 32.\r\n     * @param name Name for the collision group\r\n     * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\r\n     */\r\n    static create(name, mask) {\r\n        if (this._CURRENT_GROUP > this._MAX_GROUPS) {\r\n            throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\r\n        }\r\n        if (this._GROUPS.get(name)) {\r\n            throw new Error(`Collision group ${name} already exists`);\r\n        }\r\n        const group = new CollisionGroup(name, this._CURRENT_BIT, mask !== undefined ? mask : ~this._CURRENT_BIT);\r\n        this._CURRENT_BIT = (this._CURRENT_BIT << 1) | 0;\r\n        this._CURRENT_GROUP++;\r\n        this._GROUPS.set(name, group);\r\n        return group;\r\n    }\r\n    /**\r\n     * Get all collision groups currently tracked by excalibur\r\n     */\r\n    static get groups() {\r\n        return Array.from(this._GROUPS.values());\r\n    }\r\n    /**\r\n     * Get a collision group by it's name\r\n     * @param name\r\n     */\r\n    static groupByName(name) {\r\n        return this._GROUPS.get(name);\r\n    }\r\n    /**\r\n     * Resets the managers internal group management state\r\n     */\r\n    static reset() {\r\n        this._GROUPS = new Map();\r\n        this._CURRENT_BIT = this._STARTING_BIT;\r\n        this._CURRENT_GROUP = 1;\r\n    }\r\n}\r\n// using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\r\nCollisionGroupManager._STARTING_BIT = 0b1 | 0;\r\nCollisionGroupManager._MAX_GROUPS = 32;\r\nCollisionGroupManager._CURRENT_GROUP = 1;\r\nCollisionGroupManager._CURRENT_BIT = CollisionGroupManager._STARTING_BIT;\r\nCollisionGroupManager._GROUPS = new Map();\r\n\n;// CONCATENATED MODULE: ./Collision/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Interfaces/LifecycleEvents.ts\n/**\r\n * Type guard checking for internal initialize method\r\n * @internal\r\n * @param a\r\n */\r\nfunction has_initialize(a) {\r\n    return !!a._initialize;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasOnInitialize(a) {\r\n    return !!a.onInitialize;\r\n}\r\n/**\r\n *\r\n */\r\nfunction has_preupdate(a) {\r\n    return !!a._preupdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasOnPreUpdate(a) {\r\n    return !!a.onPreUpdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction has_postupdate(a) {\r\n    return !!a.onPostUpdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasOnPostUpdate(a) {\r\n    return !!a.onPostUpdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasPreDraw(a) {\r\n    return !!a.onPreDraw;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasPostDraw(a) {\r\n    return !!a.onPostDraw;\r\n}\r\n\n;// CONCATENATED MODULE: ./Interfaces/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/Index.ts\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Resources/Gif.ts\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The [[Texture]] object allows games built in Excalibur to load image resources.\r\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\r\n * to pre-load before starting a level or game.\r\n */\r\nclass Gif {\r\n    /**\r\n     * @param path       Path to the image resource\r\n     * @param color      Optionally set the color to treat as transparent the gif, by default [[Color.Magenta]]\r\n     * @param bustCache  Optionally load texture with cache busting\r\n     */\r\n    constructor(path, color = Color.Magenta, bustCache = false) {\r\n        this.path = path;\r\n        this.color = color;\r\n        this._stream = null;\r\n        this._gif = null;\r\n        this._textures = [];\r\n        this._animation = null;\r\n        this._transparentColor = null;\r\n        this._resource = new Resource(path, 'arraybuffer', bustCache);\r\n        this._transparentColor = color;\r\n    }\r\n    /**\r\n     * Should excalibur add a cache busting querystring? By default false.\r\n     * Must be set before loading\r\n     */\r\n    get bustCache() {\r\n        return this._resource.bustCache;\r\n    }\r\n    set bustCache(val) {\r\n        this._resource.bustCache = val;\r\n    }\r\n    /**\r\n     * Begins loading the texture and returns a promise to be resolved on completion\r\n     */\r\n    async load() {\r\n        const arraybuffer = await this._resource.load();\r\n        this._stream = new Stream(arraybuffer);\r\n        this._gif = new ParseGif(this._stream, this._transparentColor);\r\n        const images = this._gif.images.map(i => new ImageSource(i.src, false));\r\n        // Load all textures\r\n        await Promise.all(images.map(t => t.load()));\r\n        return this.data = this._textures = images;\r\n    }\r\n    isLoaded() {\r\n        return !!this.data;\r\n    }\r\n    /**\r\n     * Return a frame of the gif as a sprite by id\r\n     * @param id\r\n     */\r\n    toSprite(id = 0) {\r\n        const sprite = this._textures[id].toSprite();\r\n        return sprite;\r\n    }\r\n    /**\r\n     * Return the gif as a spritesheet\r\n     */\r\n    toSpriteSheet() {\r\n        const sprites = this._textures.map((image) => {\r\n            return image.toSprite();\r\n        });\r\n        return new SpriteSheet({ sprites });\r\n    }\r\n    /**\r\n     * Transform the GIF into an animation with duration per frame\r\n     */\r\n    toAnimation(durationPerFrameMs) {\r\n        const spriteSheet = this.toSpriteSheet();\r\n        const length = spriteSheet.sprites.length;\r\n        this._animation = Animation.fromSpriteSheet(spriteSheet, range(0, length), durationPerFrameMs);\r\n        return this._animation;\r\n    }\r\n    get readCheckBytes() {\r\n        return this._gif.checkBytes;\r\n    }\r\n}\r\nconst bitsToNum = (ba) => {\r\n    return ba.reduce(function (s, n) {\r\n        return s * 2 + n;\r\n    }, 0);\r\n};\r\nconst byteToBitArr = (bite) => {\r\n    const a = [];\r\n    for (let i = 7; i >= 0; i--) {\r\n        a.push(!!(bite & (1 << i)));\r\n    }\r\n    return a;\r\n};\r\nclass Stream {\r\n    constructor(dataArray) {\r\n        this.data = null;\r\n        this.len = 0;\r\n        this.position = 0;\r\n        this.readByte = () => {\r\n            if (this.position >= this.data.byteLength) {\r\n                throw new Error('Attempted to read past end of stream.');\r\n            }\r\n            return this.data[this.position++];\r\n        };\r\n        this.readBytes = (n) => {\r\n            const bytes = [];\r\n            for (let i = 0; i < n; i++) {\r\n                bytes.push(this.readByte());\r\n            }\r\n            return bytes;\r\n        };\r\n        this.read = (n) => {\r\n            let s = '';\r\n            for (let i = 0; i < n; i++) {\r\n                s += String.fromCharCode(this.readByte());\r\n            }\r\n            return s;\r\n        };\r\n        this.readUnsigned = () => {\r\n            // Little-endian.\r\n            const a = this.readBytes(2);\r\n            return (a[1] << 8) + a[0];\r\n        };\r\n        this.data = new Uint8Array(dataArray);\r\n        this.len = this.data.byteLength;\r\n        if (this.len === 0) {\r\n            throw new Error('No data loaded from file');\r\n        }\r\n    }\r\n}\r\nconst lzwDecode = function (minCodeSize, data) {\r\n    // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\r\n    let pos = 0; // Maybe this streaming thing should be merged with the Stream?\r\n    const readCode = function (size) {\r\n        let code = 0;\r\n        for (let i = 0; i < size; i++) {\r\n            if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\r\n                code |= 1 << i;\r\n            }\r\n            pos++;\r\n        }\r\n        return code;\r\n    };\r\n    const output = [];\r\n    const clearCode = 1 << minCodeSize;\r\n    const eoiCode = clearCode + 1;\r\n    let codeSize = minCodeSize + 1;\r\n    let dict = [];\r\n    const clear = function () {\r\n        dict = [];\r\n        codeSize = minCodeSize + 1;\r\n        for (let i = 0; i < clearCode; i++) {\r\n            dict[i] = [i];\r\n        }\r\n        dict[clearCode] = [];\r\n        dict[eoiCode] = null;\r\n    };\r\n    let code;\r\n    let last;\r\n    while (true) {\r\n        last = code;\r\n        code = readCode(codeSize);\r\n        if (code === clearCode) {\r\n            clear();\r\n            continue;\r\n        }\r\n        if (code === eoiCode) {\r\n            break;\r\n        }\r\n        if (code < dict.length) {\r\n            if (last !== clearCode) {\r\n                dict.push(dict[last].concat(dict[code][0]));\r\n            }\r\n        }\r\n        else {\r\n            if (code !== dict.length) {\r\n                throw new Error('Invalid LZW code.');\r\n            }\r\n            dict.push(dict[last].concat(dict[last][0]));\r\n        }\r\n        output.push.apply(output, dict[code]);\r\n        if (dict.length === 1 << codeSize && codeSize < 12) {\r\n            // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\r\n            codeSize++;\r\n        }\r\n    }\r\n    // I don't know if this is technically an error, but some GIFs do it.\r\n    //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\r\n    return output;\r\n};\r\n// The actual parsing; returns an object with properties.\r\nclass ParseGif {\r\n    constructor(stream, color = Color.Magenta) {\r\n        this._st = null;\r\n        this._handler = {};\r\n        this._transparentColor = null;\r\n        this.frames = [];\r\n        this.images = [];\r\n        this.globalColorTable = [];\r\n        this.checkBytes = [];\r\n        // LZW (GIF-specific)\r\n        this.parseColorTable = (entries) => {\r\n            // Each entry is 3 bytes, for RGB.\r\n            const ct = [];\r\n            for (let i = 0; i < entries; i++) {\r\n                const rgb = this._st.readBytes(3);\r\n                const rgba = '#' +\r\n                    rgb\r\n                        .map((x) => {\r\n                        const hex = x.toString(16);\r\n                        return hex.length === 1 ? '0' + hex : hex;\r\n                    })\r\n                        .join('');\r\n                ct.push(rgba);\r\n            }\r\n            return ct;\r\n        };\r\n        this.readSubBlocks = () => {\r\n            let size, data;\r\n            data = '';\r\n            do {\r\n                size = this._st.readByte();\r\n                data += this._st.read(size);\r\n            } while (size !== 0);\r\n            return data;\r\n        };\r\n        this.parseHeader = () => {\r\n            const hdr = {\r\n                sig: null,\r\n                ver: null,\r\n                width: null,\r\n                height: null,\r\n                colorRes: null,\r\n                globalColorTableSize: null,\r\n                gctFlag: null,\r\n                sorted: null,\r\n                globalColorTable: [],\r\n                bgColor: null,\r\n                pixelAspectRatio: null // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\r\n            };\r\n            hdr.sig = this._st.read(3);\r\n            hdr.ver = this._st.read(3);\r\n            if (hdr.sig !== 'GIF') {\r\n                throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\r\n            }\r\n            hdr.width = this._st.readUnsigned();\r\n            hdr.height = this._st.readUnsigned();\r\n            const bits = byteToBitArr(this._st.readByte());\r\n            hdr.gctFlag = bits.shift();\r\n            hdr.colorRes = bitsToNum(bits.splice(0, 3));\r\n            hdr.sorted = bits.shift();\r\n            hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\r\n            hdr.bgColor = this._st.readByte();\r\n            hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\r\n            if (hdr.gctFlag) {\r\n                hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\r\n                this.globalColorTable = hdr.globalColorTable;\r\n            }\r\n            if (this._handler.hdr && this._handler.hdr(hdr)) {\r\n                this.checkBytes.push(this._handler.hdr);\r\n            }\r\n        };\r\n        this.parseExt = (block) => {\r\n            const parseGCExt = (block) => {\r\n                this.checkBytes.push(this._st.readByte()); // Always 4\r\n                const bits = byteToBitArr(this._st.readByte());\r\n                block.reserved = bits.splice(0, 3); // Reserved; should be 000.\r\n                block.disposalMethod = bitsToNum(bits.splice(0, 3));\r\n                block.userInput = bits.shift();\r\n                block.transparencyGiven = bits.shift();\r\n                block.delayTime = this._st.readUnsigned();\r\n                block.transparencyIndex = this._st.readByte();\r\n                block.terminator = this._st.readByte();\r\n                if (this._handler.gce && this._handler.gce(block)) {\r\n                    this.checkBytes.push(this._handler.gce);\r\n                }\r\n            };\r\n            const parseComExt = (block) => {\r\n                block.comment = this.readSubBlocks();\r\n                if (this._handler.com && this._handler.com(block)) {\r\n                    this.checkBytes.push(this._handler.com);\r\n                }\r\n            };\r\n            const parsePTExt = (block) => {\r\n                this.checkBytes.push(this._st.readByte()); // Always 12\r\n                block.ptHeader = this._st.readBytes(12);\r\n                block.ptData = this.readSubBlocks();\r\n                if (this._handler.pte && this._handler.pte(block)) {\r\n                    this.checkBytes.push(this._handler.pte);\r\n                }\r\n            };\r\n            const parseAppExt = (block) => {\r\n                const parseNetscapeExt = (block) => {\r\n                    this.checkBytes.push(this._st.readByte()); // Always 3\r\n                    block.unknown = this._st.readByte(); // Q: Always 1? What is this?\r\n                    block.iterations = this._st.readUnsigned();\r\n                    block.terminator = this._st.readByte();\r\n                    if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\r\n                        this.checkBytes.push(this._handler.app);\r\n                    }\r\n                };\r\n                const parseUnknownAppExt = (block) => {\r\n                    block.appData = this.readSubBlocks();\r\n                    // FIXME: This won't work if a handler wants to match on any identifier.\r\n                    if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\r\n                        this.checkBytes.push(this._handler.app[block.identifier]);\r\n                    }\r\n                };\r\n                this.checkBytes.push(this._st.readByte()); // Always 11\r\n                block.identifier = this._st.read(8);\r\n                block.authCode = this._st.read(3);\r\n                switch (block.identifier) {\r\n                    case 'NETSCAPE':\r\n                        parseNetscapeExt(block);\r\n                        break;\r\n                    default:\r\n                        parseUnknownAppExt(block);\r\n                        break;\r\n                }\r\n            };\r\n            const parseUnknownExt = (block) => {\r\n                block.data = this.readSubBlocks();\r\n                if (this._handler.unknown && this._handler.unknown(block)) {\r\n                    this.checkBytes.push(this._handler.unknown);\r\n                }\r\n            };\r\n            block.label = this._st.readByte();\r\n            switch (block.label) {\r\n                case 0xf9:\r\n                    block.extType = 'gce';\r\n                    parseGCExt(block);\r\n                    break;\r\n                case 0xfe:\r\n                    block.extType = 'com';\r\n                    parseComExt(block);\r\n                    break;\r\n                case 0x01:\r\n                    block.extType = 'pte';\r\n                    parsePTExt(block);\r\n                    break;\r\n                case 0xff:\r\n                    block.extType = 'app';\r\n                    parseAppExt(block);\r\n                    break;\r\n                default:\r\n                    block.extType = 'unknown';\r\n                    parseUnknownExt(block);\r\n                    break;\r\n            }\r\n        };\r\n        this.parseImg = (img) => {\r\n            const deinterlace = (pixels, width) => {\r\n                // Of course this defeats the purpose of interlacing. And it's *probably*\r\n                // the least efficient way it's ever been implemented. But nevertheless...\r\n                const newPixels = new Array(pixels.length);\r\n                const rows = pixels.length / width;\r\n                const cpRow = (toRow, fromRow) => {\r\n                    const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\r\n                    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\r\n                };\r\n                const offsets = [0, 4, 2, 1];\r\n                const steps = [8, 8, 4, 2];\r\n                let fromRow = 0;\r\n                for (let pass = 0; pass < 4; pass++) {\r\n                    for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\r\n                        cpRow(toRow, fromRow);\r\n                        fromRow++;\r\n                    }\r\n                }\r\n                return newPixels;\r\n            };\r\n            img.leftPos = this._st.readUnsigned();\r\n            img.topPos = this._st.readUnsigned();\r\n            img.width = this._st.readUnsigned();\r\n            img.height = this._st.readUnsigned();\r\n            const bits = byteToBitArr(this._st.readByte());\r\n            img.lctFlag = bits.shift();\r\n            img.interlaced = bits.shift();\r\n            img.sorted = bits.shift();\r\n            img.reserved = bits.splice(0, 2);\r\n            img.lctSize = bitsToNum(bits.splice(0, 3));\r\n            if (img.lctFlag) {\r\n                img.lct = this.parseColorTable(1 << (img.lctSize + 1));\r\n            }\r\n            img.lzwMinCodeSize = this._st.readByte();\r\n            const lzwData = this.readSubBlocks();\r\n            img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\r\n            if (img.interlaced) {\r\n                // Move\r\n                img.pixels = deinterlace(img.pixels, img.width);\r\n            }\r\n            this.frames.push(img);\r\n            this.arrayToImage(img);\r\n            if (this._handler.img && this._handler.img(img)) {\r\n                this.checkBytes.push(this._handler);\r\n            }\r\n        };\r\n        this.parseBlock = () => {\r\n            const block = {\r\n                sentinel: this._st.readByte(),\r\n                type: ''\r\n            };\r\n            const blockChar = String.fromCharCode(block.sentinel);\r\n            switch (blockChar) {\r\n                case '!':\r\n                    block.type = 'ext';\r\n                    this.parseExt(block);\r\n                    break;\r\n                case ',':\r\n                    block.type = 'img';\r\n                    this.parseImg(block);\r\n                    break;\r\n                case ';':\r\n                    block.type = 'eof';\r\n                    if (this._handler.eof && this._handler.eof(block)) {\r\n                        this.checkBytes.push(this._handler.eof);\r\n                    }\r\n                    break;\r\n                default:\r\n                    throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\r\n            }\r\n            if (block.type !== 'eof') {\r\n                this.parseBlock();\r\n            }\r\n        };\r\n        this.arrayToImage = (frame) => {\r\n            let count = 0;\r\n            const c = document.createElement('canvas');\r\n            c.id = count.toString();\r\n            c.width = frame.width;\r\n            c.height = frame.height;\r\n            count++;\r\n            const context = c.getContext('2d');\r\n            const pixSize = 1;\r\n            let y = 0;\r\n            let x = 0;\r\n            for (let i = 0; i < frame.pixels.length; i++) {\r\n                if (x % frame.width === 0) {\r\n                    y++;\r\n                    x = 0;\r\n                }\r\n                if (this.globalColorTable[frame.pixels[i]] === this._transparentColor.toHex()) {\r\n                    context.fillStyle = `rgba(0, 0, 0, 0)`;\r\n                }\r\n                else {\r\n                    context.fillStyle = this.globalColorTable[frame.pixels[i]];\r\n                }\r\n                context.fillRect(x, y, pixSize, pixSize);\r\n                x++;\r\n            }\r\n            const img = new Image();\r\n            img.src = c.toDataURL();\r\n            this.images.push(img);\r\n        };\r\n        this._st = stream;\r\n        this._handler = {};\r\n        this._transparentColor = color;\r\n        this.parseHeader();\r\n        this.parseBlock();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Index.ts\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Graphics/Line.ts\n\r\n\r\n\r\nclass Line extends Graphic {\r\n    constructor(options) {\r\n        super();\r\n        this.color = Color.Black;\r\n        this.thickness = 1;\r\n        const { start, end, color, thickness } = options;\r\n        this.start = start;\r\n        this.end = end;\r\n        this.color = color !== null && color !== void 0 ? color : this.color;\r\n        this.thickness = thickness !== null && thickness !== void 0 ? thickness : this.thickness;\r\n        const { width, height } = BoundingBox.fromPoints([start, end]);\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    _drawImage(ctx, _x, _y) {\r\n        ctx.drawLine(this.start, this.end, this.color, this.thickness);\r\n    }\r\n    clone() {\r\n        return new Line({\r\n            start: this.start,\r\n            end: this.end,\r\n            color: this.color,\r\n            thickness: this.thickness\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Polygon.ts\n\r\n\r\n\r\n/**\r\n * A polygon [[Graphic]] for drawing arbitrary polygons to the [[ExcaliburGraphicsContext]]\r\n *\r\n * Polygons default to [[ImageFiltering.Blended]]\r\n */\r\nclass Polygon extends Raster {\r\n    get points() {\r\n        return this._points;\r\n    }\r\n    set points(points) {\r\n        this._points = points;\r\n        const min = this.minPoint;\r\n        this.width = this._points.reduce((max, p) => Math.max(p.x, max), 0) - min.x;\r\n        this.height = this._points.reduce((max, p) => Math.max(p.y, max), 0) - min.y;\r\n        this.flagDirty();\r\n    }\r\n    get minPoint() {\r\n        const minX = this._points.reduce((min, p) => Math.min(p.x, min), Infinity);\r\n        const minY = this._points.reduce((min, p) => Math.min(p.y, min), Infinity);\r\n        return vec(minX, minY);\r\n    }\r\n    constructor(options) {\r\n        super(options);\r\n        this.points = options.points;\r\n        this.filtering = ImageFiltering.Blended;\r\n        this.rasterize();\r\n    }\r\n    clone() {\r\n        return new Polygon({\r\n            points: this.points.map((p) => p.clone()),\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        if (this.points && this.points.length) {\r\n            ctx.beginPath();\r\n            // Iterate through the supplied points and construct a 'polygon'\r\n            const min = this.minPoint.negate();\r\n            const firstPoint = this.points[0].add(min);\r\n            ctx.moveTo(firstPoint.x, firstPoint.y);\r\n            this.points.forEach((point) => {\r\n                ctx.lineTo(point.x + min.x, point.y + min.y);\r\n            });\r\n            ctx.lineTo(firstPoint.x, firstPoint.y);\r\n            ctx.closePath();\r\n            if (this.color) {\r\n                ctx.fill();\r\n            }\r\n            if (this.strokeColor) {\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/index.ts\n// Graphics\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Graphics ECS\r\n\r\n\r\n\r\n\r\n\r\n// Raster graphics\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Post Processor\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Rendering\r\n\r\n\r\n\r\n\r\n\r\n// Util\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Input/Index.ts\n// This import site is deprecated\r\n// TODO remove deprecated exports in v0.29.0\r\n/**\r\n * @module\r\n * Provides support for mice, keyboards, and controllers.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Re-export hack to deprecate import site gently\r\n\r\n\n;// CONCATENATED MODULE: ./Util/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Util/Semaphore.ts\n\r\nclass AsyncWaitQueue {\r\n    constructor() {\r\n        // Code from StephenCleary https://gist.github.com/StephenCleary/ba50b2da419c03b9cba1d20cb4654d5e\r\n        this._queue = [];\r\n    }\r\n    get length() {\r\n        return this._queue.length;\r\n    }\r\n    enqueue() {\r\n        const future = new Future();\r\n        this._queue.push(future);\r\n        return future.promise;\r\n    }\r\n    dequeue(value) {\r\n        const future = this._queue.shift();\r\n        future.resolve(value);\r\n    }\r\n}\r\n/**\r\n * Semaphore allows you to limit the amount of async calls happening between `enter()` and `exit()`\r\n *\r\n * This can be useful when limiting the number of http calls, browser api calls, etc either for performance or to work\r\n * around browser limitations like max Image.decode() calls in chromium being 256.\r\n */\r\nclass Semaphore {\r\n    constructor(_count) {\r\n        this._count = _count;\r\n        this._waitQueue = new AsyncWaitQueue();\r\n    }\r\n    get count() {\r\n        return this._count;\r\n    }\r\n    get waiting() {\r\n        return this._waitQueue.length;\r\n    }\r\n    async enter() {\r\n        if (this._count !== 0) {\r\n            this._count--;\r\n            return Promise.resolve();\r\n        }\r\n        return this._waitQueue.enqueue();\r\n    }\r\n    exit(count = 1) {\r\n        if (count === 0) {\r\n            return;\r\n        }\r\n        while (count !== 0 && this._waitQueue.length !== 0) {\r\n            this._waitQueue.dequeue(null);\r\n            count--;\r\n        }\r\n        this._count += count;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./index.ts\n/**\r\n * The current Excalibur version string\r\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\r\n */\r\nconst EX_VERSION = \"0.28.0\";\r\n\r\npolyfill();\r\n// This file is used as the bundle entry point and exports everything\r\n// that will be exposed as the `ex` global variable.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ex.Events namespace\r\n\r\n\r\n// ex.Input namespace\r\n// TODO deprecated import site remove in v0.29.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ex.Util namespaces\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ex.Deprecated\r\n// import * as deprecated from './Deprecated';\r\n// export { deprecated as Deprecated };\r\n// export * from './Deprecated';\r\n\n})();\n\nvar __webpack_exports__ActionContext = __webpack_exports__.fWn;\nvar __webpack_exports__ActionQueue = __webpack_exports__.Ia8;\nvar __webpack_exports__ActionSequence = __webpack_exports__.rqv;\nvar __webpack_exports__ActionsComponent = __webpack_exports__.hLI;\nvar __webpack_exports__ActionsSystem = __webpack_exports__.yyv;\nvar __webpack_exports__ActivateEvent = __webpack_exports__.tX5;\nvar __webpack_exports__Actor = __webpack_exports__.vtX;\nvar __webpack_exports__AddedComponent = __webpack_exports__.r7K;\nvar __webpack_exports__AddedEntity = __webpack_exports__.lCh;\nvar __webpack_exports__AffineMatrix = __webpack_exports__.cE4;\nvar __webpack_exports__Animation = __webpack_exports__.fwF;\nvar __webpack_exports__AnimationDirection = __webpack_exports__.sce;\nvar __webpack_exports__AnimationEvents = __webpack_exports__.AQ6;\nvar __webpack_exports__AnimationStrategy = __webpack_exports__._c7;\nvar __webpack_exports__ArcadeSolver = __webpack_exports__.KUs;\nvar __webpack_exports__AudioContextFactory = __webpack_exports__.Ajp;\nvar __webpack_exports__Axes = __webpack_exports__.dkO;\nvar __webpack_exports__Axis = __webpack_exports__.RDh;\nvar __webpack_exports__BaseAlign = __webpack_exports__._H9;\nvar __webpack_exports__Blink = __webpack_exports__.mxs;\nvar __webpack_exports__BodyComponent = __webpack_exports__.OmD;\nvar __webpack_exports__BoundingBox = __webpack_exports__.kBf;\nvar __webpack_exports__BroadphaseStrategy = __webpack_exports__.C4F;\nvar __webpack_exports__BrowserComponent = __webpack_exports__.NQt;\nvar __webpack_exports__BrowserEvents = __webpack_exports__.JjN;\nvar __webpack_exports__Buttons = __webpack_exports__.EK_;\nvar __webpack_exports__Camera = __webpack_exports__.V1s;\nvar __webpack_exports__CameraEvents = __webpack_exports__.xHm;\nvar __webpack_exports__Canvas = __webpack_exports__.Xz7;\nvar __webpack_exports__Circle = __webpack_exports__.Cdc;\nvar __webpack_exports__CircleCollider = __webpack_exports__.FKn;\nvar __webpack_exports__Clock = __webpack_exports__.SUY;\nvar __webpack_exports__ClosestLine = __webpack_exports__.ab2;\nvar __webpack_exports__ClosestLineJumpTable = __webpack_exports__.GfZ;\nvar __webpack_exports__Collider = __webpack_exports__.YMS;\nvar __webpack_exports__ColliderComponent = __webpack_exports__.oyv;\nvar __webpack_exports__CollisionContact = __webpack_exports__.aUb;\nvar __webpack_exports__CollisionEndEvent = __webpack_exports__.SdD;\nvar __webpack_exports__CollisionGroup = __webpack_exports__.JUv;\nvar __webpack_exports__CollisionGroupManager = __webpack_exports__.jEj;\nvar __webpack_exports__CollisionJumpTable = __webpack_exports__.TFq;\nvar __webpack_exports__CollisionPostSolveEvent = __webpack_exports__.HDU;\nvar __webpack_exports__CollisionPreSolveEvent = __webpack_exports__.R_y;\nvar __webpack_exports__CollisionResolutionStrategy = __webpack_exports__.ydN;\nvar __webpack_exports__CollisionStartEvent = __webpack_exports__.t50;\nvar __webpack_exports__CollisionSystem = __webpack_exports__.s$$;\nvar __webpack_exports__CollisionType = __webpack_exports__.v2G;\nvar __webpack_exports__Color = __webpack_exports__.Ilk;\nvar __webpack_exports__ColorBlindFlags = __webpack_exports__.s9i;\nvar __webpack_exports__ColorBlindnessMode = __webpack_exports__.dxL;\nvar __webpack_exports__ColorBlindnessPostProcessor = __webpack_exports__.LLX;\nvar __webpack_exports__Component = __webpack_exports__.wA2;\nvar __webpack_exports__CompositeCollider = __webpack_exports__.R_p;\nvar __webpack_exports__Configurable = __webpack_exports__.IQ$;\nvar __webpack_exports__ConsoleAppender = __webpack_exports__.I5F;\nvar __webpack_exports__ContactConstraintPoint = __webpack_exports__.X8$;\nvar __webpack_exports__ContactEndEvent = __webpack_exports__.FR6;\nvar __webpack_exports__ContactStartEvent = __webpack_exports__.U8o;\nvar __webpack_exports__CoordPlane = __webpack_exports__.kbG;\nvar __webpack_exports__DeactivateEvent = __webpack_exports__.iS_;\nvar __webpack_exports__Debug = __webpack_exports__.cGG;\nvar __webpack_exports__DebugGraphicsComponent = __webpack_exports__.RPN;\nvar __webpack_exports__DebugSystem = __webpack_exports__.skb;\nvar __webpack_exports__DebugText = __webpack_exports__.SLU;\nvar __webpack_exports__DegreeOfFreedom = __webpack_exports__.RdJ;\nvar __webpack_exports__Delay = __webpack_exports__.cNu;\nvar __webpack_exports__Detector = __webpack_exports__.gU7;\nvar __webpack_exports__Die = __webpack_exports__.LSk;\nvar __webpack_exports__Direction = __webpack_exports__.Nmp;\nvar __webpack_exports__DisplayMode = __webpack_exports__.d1Y;\nvar __webpack_exports__DynamicTree = __webpack_exports__.xrL;\nvar __webpack_exports__DynamicTreeCollisionProcessor = __webpack_exports__.sRW;\nvar __webpack_exports__EX_VERSION = __webpack_exports__.cmV;\nvar __webpack_exports__EaseBy = __webpack_exports__.qWz;\nvar __webpack_exports__EaseTo = __webpack_exports__.N0Q;\nvar __webpack_exports__EasingFunctions = __webpack_exports__.q8b;\nvar __webpack_exports__EdgeCollider = __webpack_exports__.ynB;\nvar __webpack_exports__ElasticToActorStrategy = __webpack_exports__.jT9;\nvar __webpack_exports__EmitterType = __webpack_exports__.wAz;\nvar __webpack_exports__Engine = __webpack_exports__.D4V;\nvar __webpack_exports__EngineEvents = __webpack_exports__.NLr;\nvar __webpack_exports__EnterTriggerEvent = __webpack_exports__.N6H;\nvar __webpack_exports__EnterViewPortEvent = __webpack_exports__.W1A;\nvar __webpack_exports__Entity = __webpack_exports__.JHW;\nvar __webpack_exports__EntityEvents = __webpack_exports__.ZZ$;\nvar __webpack_exports__EntityManager = __webpack_exports__.v2K;\nvar __webpack_exports__EventDispatcher = __webpack_exports__.pBf;\nvar __webpack_exports__EventEmitter = __webpack_exports__.vpe;\nvar __webpack_exports__EventTypes = __webpack_exports__.GMl;\nvar __webpack_exports__Events = __webpack_exports__.zW2;\nvar __webpack_exports__ExResponse = __webpack_exports__.B0K;\nvar __webpack_exports__ExcaliburGraphicsContext2DCanvas = __webpack_exports__.Nv7;\nvar __webpack_exports__ExcaliburGraphicsContextWebGL = __webpack_exports__.C_p;\nvar __webpack_exports__ExitTriggerEvent = __webpack_exports__.MUA;\nvar __webpack_exports__ExitViewPortEvent = __webpack_exports__.xqU;\nvar __webpack_exports__Fade = __webpack_exports__.pTp;\nvar __webpack_exports__Flags = __webpack_exports__.vUK;\nvar __webpack_exports__Follow = __webpack_exports__.j9l;\nvar __webpack_exports__Font = __webpack_exports__.Zxw;\nvar __webpack_exports__FontCache = __webpack_exports__.v51;\nvar __webpack_exports__FontStyle = __webpack_exports__.Hdx;\nvar __webpack_exports__FontUnit = __webpack_exports__.Z$d;\nvar __webpack_exports__FpsSampler = __webpack_exports__.iqV;\nvar __webpack_exports__FrameStats = __webpack_exports__.o$7;\nvar __webpack_exports__Future = __webpack_exports__.olM;\nvar __webpack_exports__GameEvent = __webpack_exports__.Zm$;\nvar __webpack_exports__GameStartEvent = __webpack_exports__.$QH;\nvar __webpack_exports__GameStopEvent = __webpack_exports__.i78;\nvar __webpack_exports__Gamepad = __webpack_exports__.nJg;\nvar __webpack_exports__GamepadAxisEvent = __webpack_exports__.h6u;\nvar __webpack_exports__GamepadButtonEvent = __webpack_exports__.hts;\nvar __webpack_exports__GamepadConnectEvent = __webpack_exports__.j88;\nvar __webpack_exports__GamepadDisconnectEvent = __webpack_exports__.VME;\nvar __webpack_exports__Gamepads = __webpack_exports__.fy2;\nvar __webpack_exports__Gif = __webpack_exports__.nt;\nvar __webpack_exports__GlobalCoordinates = __webpack_exports__.Ukr;\nvar __webpack_exports__Graphic = __webpack_exports__.zsu;\nvar __webpack_exports__GraphicsComponent = __webpack_exports__.oA6;\nvar __webpack_exports__GraphicsGroup = __webpack_exports__.TVh;\nvar __webpack_exports__GraphicsLayer = __webpack_exports__.TwZ;\nvar __webpack_exports__GraphicsLayers = __webpack_exports__.GTT;\nvar __webpack_exports__GraphicsSystem = __webpack_exports__.xxj;\nvar __webpack_exports__HiddenEvent = __webpack_exports__.XdK;\nvar __webpack_exports__ImageFiltering = __webpack_exports__.Jmb;\nvar __webpack_exports__ImageSource = __webpack_exports__.cXo;\nvar __webpack_exports__InitializeEvent = __webpack_exports__.Dm5;\nvar __webpack_exports__Input = __webpack_exports__.IIB;\nvar __webpack_exports__InputMapper = __webpack_exports__.ebW;\nvar __webpack_exports__Integrator = __webpack_exports__.zI0;\nvar __webpack_exports__IsometricEntityComponent = __webpack_exports__.LYD;\nvar __webpack_exports__IsometricEntitySystem = __webpack_exports__.cEG;\nvar __webpack_exports__IsometricMap = __webpack_exports__.SEl;\nvar __webpack_exports__IsometricTile = __webpack_exports__.t9V;\nvar __webpack_exports__KeyEvent = __webpack_exports__.ez5;\nvar __webpack_exports__Keyboard = __webpack_exports__.N1d;\nvar __webpack_exports__Keys = __webpack_exports__.R8U;\nvar __webpack_exports__KillEvent = __webpack_exports__.SKZ;\nvar __webpack_exports__Label = __webpack_exports__.__J;\nvar __webpack_exports__LimitCameraBoundsStrategy = __webpack_exports__.RI$;\nvar __webpack_exports__Line = __webpack_exports__.x12;\nvar __webpack_exports__LineSegment = __webpack_exports__.ccz;\nvar __webpack_exports__Loader = __webpack_exports__.aNw;\nvar __webpack_exports__LoaderEvents = __webpack_exports__.XrL;\nvar __webpack_exports__LockCameraToActorAxisStrategy = __webpack_exports__.xwn;\nvar __webpack_exports__LockCameraToActorStrategy = __webpack_exports__.dNK;\nvar __webpack_exports__LogLevel = __webpack_exports__.ini;\nvar __webpack_exports__Logger = __webpack_exports__.YdH;\nvar __webpack_exports__Material = __webpack_exports__.F5T;\nvar __webpack_exports__Matrix = __webpack_exports__.y3G;\nvar __webpack_exports__MatrixLocations = __webpack_exports__.l57;\nvar __webpack_exports__MediaEvent = __webpack_exports__.xn0;\nvar __webpack_exports__Meet = __webpack_exports__.t2V;\nvar __webpack_exports__MotionComponent = __webpack_exports__.uxB;\nvar __webpack_exports__MotionSystem = __webpack_exports__.cpd;\nvar __webpack_exports__MoveBy = __webpack_exports__.fiy;\nvar __webpack_exports__MoveTo = __webpack_exports__.$XZ;\nvar __webpack_exports__NativePointerButton = __webpack_exports__.UG6;\nvar __webpack_exports__NativeSoundEvent = __webpack_exports__.uqK;\nvar __webpack_exports__NativeSoundProcessedEvent = __webpack_exports__.STE;\nvar __webpack_exports__Observable = __webpack_exports__.y$z;\nvar __webpack_exports__OffscreenSystem = __webpack_exports__.mAD;\nvar __webpack_exports__Pair = __webpack_exports__.sOq;\nvar __webpack_exports__ParallaxComponent = __webpack_exports__.hUw;\nvar __webpack_exports__ParallelActions = __webpack_exports__._0G;\nvar __webpack_exports__ParseGif = __webpack_exports__.Sqs;\nvar __webpack_exports__Particle = __webpack_exports__.hpZ;\nvar __webpack_exports__ParticleEmitter = __webpack_exports__.Vol;\nvar __webpack_exports__ParticleTransform = __webpack_exports__.vYX;\nvar __webpack_exports__Physics = __webpack_exports__.wIZ;\nvar __webpack_exports__PhysicsStats = __webpack_exports__.cBi;\nvar __webpack_exports__PhysicsWorld = __webpack_exports__.c30;\nvar __webpack_exports__PointerButton = __webpack_exports__.MPV;\nvar __webpack_exports__PointerComponent = __webpack_exports__.RFv;\nvar __webpack_exports__PointerEvent = __webpack_exports__.Ux6;\nvar __webpack_exports__PointerEventReceiver = __webpack_exports__.rxy;\nvar __webpack_exports__PointerScope = __webpack_exports__.I$c;\nvar __webpack_exports__PointerSystem = __webpack_exports__.kfC;\nvar __webpack_exports__PointerType = __webpack_exports__.VjY;\nvar __webpack_exports__Polygon = __webpack_exports__.mgq;\nvar __webpack_exports__PolygonCollider = __webpack_exports__.YVA;\nvar __webpack_exports__Pool = __webpack_exports__.Kgp;\nvar __webpack_exports__PostCollisionEvent = __webpack_exports__.HH$;\nvar __webpack_exports__PostDebugDrawEvent = __webpack_exports__.M_d;\nvar __webpack_exports__PostDrawEvent = __webpack_exports__.rgh;\nvar __webpack_exports__PostFrameEvent = __webpack_exports__.Ra6;\nvar __webpack_exports__PostKillEvent = __webpack_exports__.KhR;\nvar __webpack_exports__PostUpdateEvent = __webpack_exports__.BS5;\nvar __webpack_exports__PreCollisionEvent = __webpack_exports__.xhz;\nvar __webpack_exports__PreDebugDrawEvent = __webpack_exports__.xOq;\nvar __webpack_exports__PreDrawEvent = __webpack_exports__.a9j;\nvar __webpack_exports__PreFrameEvent = __webpack_exports__.bHk;\nvar __webpack_exports__PreKillEvent = __webpack_exports__.CgK;\nvar __webpack_exports__PreUpdateEvent = __webpack_exports__.cuY;\nvar __webpack_exports__Projection = __webpack_exports__.kvE;\nvar __webpack_exports__QuadIndexBuffer = __webpack_exports__.SBu;\nvar __webpack_exports__Query = __webpack_exports__.AE_;\nvar __webpack_exports__QueryManager = __webpack_exports__.ctO;\nvar __webpack_exports__RadiusAroundActorStrategy = __webpack_exports__.OLH;\nvar __webpack_exports__Random = __webpack_exports__.kky;\nvar __webpack_exports__Raster = __webpack_exports__.nSF;\nvar __webpack_exports__Ray = __webpack_exports__.zHn;\nvar __webpack_exports__RealisticSolver = __webpack_exports__.zwx;\nvar __webpack_exports__Rectangle = __webpack_exports__.AeJ;\nvar __webpack_exports__RemovedComponent = __webpack_exports__.hLz;\nvar __webpack_exports__RemovedEntity = __webpack_exports__.D9g;\nvar __webpack_exports__Repeat = __webpack_exports__.wA;\nvar __webpack_exports__RepeatForever = __webpack_exports__.jhr;\nvar __webpack_exports__Resolution = __webpack_exports__.GVs;\nvar __webpack_exports__Resource = __webpack_exports__._zO;\nvar __webpack_exports__ResourceEvents = __webpack_exports__.LXZ;\nvar __webpack_exports__RotateBy = __webpack_exports__.w6$;\nvar __webpack_exports__RotateTo = __webpack_exports__.mhV;\nvar __webpack_exports__RotationType = __webpack_exports__.MOD;\nvar __webpack_exports__ScaleBy = __webpack_exports__.kwd;\nvar __webpack_exports__ScaleTo = __webpack_exports__.Lmr;\nvar __webpack_exports__Scene = __webpack_exports__.xsS;\nvar __webpack_exports__SceneEvents = __webpack_exports__.K5l;\nvar __webpack_exports__Screen = __webpack_exports__.lLr;\nvar __webpack_exports__ScreenAppender = __webpack_exports__.Z$r;\nvar __webpack_exports__ScreenElement = __webpack_exports__.IXb;\nvar __webpack_exports__ScreenShader = __webpack_exports__.SGH;\nvar __webpack_exports__ScrollPreventionMode = __webpack_exports__.SMj;\nvar __webpack_exports__Semaphore = __webpack_exports__.L34;\nvar __webpack_exports__Shader = __webpack_exports__.exe;\nvar __webpack_exports__Shape = __webpack_exports__.bnF;\nvar __webpack_exports__Side = __webpack_exports__.MFA;\nvar __webpack_exports__Sound = __webpack_exports__.$uU;\nvar __webpack_exports__SoundEvents = __webpack_exports__.Sap;\nvar __webpack_exports__Sprite = __webpack_exports__.jyi;\nvar __webpack_exports__SpriteFont = __webpack_exports__.E03;\nvar __webpack_exports__SpriteSheet = __webpack_exports__.V6q;\nvar __webpack_exports__StandardClock = __webpack_exports__.rg2;\nvar __webpack_exports__StateMachine = __webpack_exports__.DVW;\nvar __webpack_exports__StrategyContainer = __webpack_exports__.nVo;\nvar __webpack_exports__Stream = __webpack_exports__.F6N;\nvar __webpack_exports__System = __webpack_exports__.xP7;\nvar __webpack_exports__SystemManager = __webpack_exports__.Odq;\nvar __webpack_exports__SystemType = __webpack_exports__.Zif;\nvar __webpack_exports__TagComponent = __webpack_exports__.ZGJ;\nvar __webpack_exports__TestClock = __webpack_exports__.MJk;\nvar __webpack_exports__Text = __webpack_exports__.xvT;\nvar __webpack_exports__TextAlign = __webpack_exports__.PHM;\nvar __webpack_exports__TextureLoader = __webpack_exports__.dpR;\nvar __webpack_exports__Tile = __webpack_exports__.n9L;\nvar __webpack_exports__TileMap = __webpack_exports__.KwO;\nvar __webpack_exports__TileMapEvents = __webpack_exports__.SxM;\nvar __webpack_exports__Timer = __webpack_exports__.B7y;\nvar __webpack_exports__Toaster = __webpack_exports__.x7r;\nvar __webpack_exports__Transform = __webpack_exports__.wx7;\nvar __webpack_exports__TransformComponent = __webpack_exports__.Uvn;\nvar __webpack_exports__TreeNode = __webpack_exports__.OFT;\nvar __webpack_exports__Trigger = __webpack_exports__.xzN;\nvar __webpack_exports__TriggerEvents = __webpack_exports__.CcZ;\nvar __webpack_exports__TwoPI = __webpack_exports__.M5Z;\nvar __webpack_exports__Util = __webpack_exports__.ZrN;\nvar __webpack_exports__Vector = __webpack_exports__.OWs;\nvar __webpack_exports__VectorView = __webpack_exports__.dF9;\nvar __webpack_exports__VertexBuffer = __webpack_exports__.oZy;\nvar __webpack_exports__VertexLayout = __webpack_exports__.rD2;\nvar __webpack_exports__VisibleEvent = __webpack_exports__.VHo;\nvar __webpack_exports__WebAudio = __webpack_exports__.ohE;\nvar __webpack_exports__WebAudioInstance = __webpack_exports__.R$E;\nvar __webpack_exports__WheelDeltaMode = __webpack_exports__.xQN;\nvar __webpack_exports__WheelEvent = __webpack_exports__.AdJ;\nvar __webpack_exports__World = __webpack_exports__.q3I;\nvar __webpack_exports__canonicalizeAngle = __webpack_exports__.Pab;\nvar __webpack_exports__clamp = __webpack_exports__.uZ5;\nvar __webpack_exports__createId = __webpack_exports__.McK;\nvar __webpack_exports__frac = __webpack_exports__.F9c;\nvar __webpack_exports__hasGraphicsTick = __webpack_exports__.k0b;\nvar __webpack_exports__hasOnInitialize = __webpack_exports__.hnT;\nvar __webpack_exports__hasOnPostUpdate = __webpack_exports__.RSJ;\nvar __webpack_exports__hasOnPreUpdate = __webpack_exports__.Mku;\nvar __webpack_exports__hasPostDraw = __webpack_exports__.h90;\nvar __webpack_exports__hasPreDraw = __webpack_exports__.rms;\nvar __webpack_exports__has_initialize = __webpack_exports__.ErP;\nvar __webpack_exports__has_postupdate = __webpack_exports__.aVg;\nvar __webpack_exports__has_preupdate = __webpack_exports__.lPc;\nvar __webpack_exports__isAddedComponent = __webpack_exports__.Z8E;\nvar __webpack_exports__isAddedSystemEntity = __webpack_exports__._N2;\nvar __webpack_exports__isRemoveSystemEntity = __webpack_exports__.yFn;\nvar __webpack_exports__isRemovedComponent = __webpack_exports__.lNv;\nvar __webpack_exports__isScreenElement = __webpack_exports__.cu9;\nvar __webpack_exports__maxMessages = __webpack_exports__.MZQ;\nvar __webpack_exports__obsolete = __webpack_exports__.FUM;\nvar __webpack_exports__pixelSnapEpsilon = __webpack_exports__.BxR;\nvar __webpack_exports__randomInRange = __webpack_exports__.vdf;\nvar __webpack_exports__randomIntInRange = __webpack_exports__.iaL;\nvar __webpack_exports__range = __webpack_exports__.w6H;\nvar __webpack_exports__resetObsoleteCounter = __webpack_exports__.Q4c;\nvar __webpack_exports__sign = __webpack_exports__.Xxe;\nvar __webpack_exports__toDegrees = __webpack_exports__.Uxb;\nvar __webpack_exports__toRadians = __webpack_exports__.Yr5;\nvar __webpack_exports__vec = __webpack_exports__.Bhw;\nvar __webpack_exports__webgl = __webpack_exports__.yOA;\nexport { __webpack_exports__ActionContext as ActionContext, __webpack_exports__ActionQueue as ActionQueue, __webpack_exports__ActionSequence as ActionSequence, __webpack_exports__ActionsComponent as ActionsComponent, __webpack_exports__ActionsSystem as ActionsSystem, __webpack_exports__ActivateEvent as ActivateEvent, __webpack_exports__Actor as Actor, __webpack_exports__AddedComponent as AddedComponent, __webpack_exports__AddedEntity as AddedEntity, __webpack_exports__AffineMatrix as AffineMatrix, __webpack_exports__Animation as Animation, __webpack_exports__AnimationDirection as AnimationDirection, __webpack_exports__AnimationEvents as AnimationEvents, __webpack_exports__AnimationStrategy as AnimationStrategy, __webpack_exports__ArcadeSolver as ArcadeSolver, __webpack_exports__AudioContextFactory as AudioContextFactory, __webpack_exports__Axes as Axes, __webpack_exports__Axis as Axis, __webpack_exports__BaseAlign as BaseAlign, __webpack_exports__Blink as Blink, __webpack_exports__BodyComponent as BodyComponent, __webpack_exports__BoundingBox as BoundingBox, __webpack_exports__BroadphaseStrategy as BroadphaseStrategy, __webpack_exports__BrowserComponent as BrowserComponent, __webpack_exports__BrowserEvents as BrowserEvents, __webpack_exports__Buttons as Buttons, __webpack_exports__Camera as Camera, __webpack_exports__CameraEvents as CameraEvents, __webpack_exports__Canvas as Canvas, __webpack_exports__Circle as Circle, __webpack_exports__CircleCollider as CircleCollider, __webpack_exports__Clock as Clock, __webpack_exports__ClosestLine as ClosestLine, __webpack_exports__ClosestLineJumpTable as ClosestLineJumpTable, __webpack_exports__Collider as Collider, __webpack_exports__ColliderComponent as ColliderComponent, __webpack_exports__CollisionContact as CollisionContact, __webpack_exports__CollisionEndEvent as CollisionEndEvent, __webpack_exports__CollisionGroup as CollisionGroup, __webpack_exports__CollisionGroupManager as CollisionGroupManager, __webpack_exports__CollisionJumpTable as CollisionJumpTable, __webpack_exports__CollisionPostSolveEvent as CollisionPostSolveEvent, __webpack_exports__CollisionPreSolveEvent as CollisionPreSolveEvent, __webpack_exports__CollisionResolutionStrategy as CollisionResolutionStrategy, __webpack_exports__CollisionStartEvent as CollisionStartEvent, __webpack_exports__CollisionSystem as CollisionSystem, __webpack_exports__CollisionType as CollisionType, __webpack_exports__Color as Color, __webpack_exports__ColorBlindFlags as ColorBlindFlags, __webpack_exports__ColorBlindnessMode as ColorBlindnessMode, __webpack_exports__ColorBlindnessPostProcessor as ColorBlindnessPostProcessor, __webpack_exports__Component as Component, __webpack_exports__CompositeCollider as CompositeCollider, __webpack_exports__Configurable as Configurable, __webpack_exports__ConsoleAppender as ConsoleAppender, __webpack_exports__ContactConstraintPoint as ContactConstraintPoint, __webpack_exports__ContactEndEvent as ContactEndEvent, __webpack_exports__ContactStartEvent as ContactStartEvent, __webpack_exports__CoordPlane as CoordPlane, __webpack_exports__DeactivateEvent as DeactivateEvent, __webpack_exports__Debug as Debug, __webpack_exports__DebugGraphicsComponent as DebugGraphicsComponent, __webpack_exports__DebugSystem as DebugSystem, __webpack_exports__DebugText as DebugText, __webpack_exports__DegreeOfFreedom as DegreeOfFreedom, __webpack_exports__Delay as Delay, __webpack_exports__Detector as Detector, __webpack_exports__Die as Die, __webpack_exports__Direction as Direction, __webpack_exports__DisplayMode as DisplayMode, __webpack_exports__DynamicTree as DynamicTree, __webpack_exports__DynamicTreeCollisionProcessor as DynamicTreeCollisionProcessor, __webpack_exports__EX_VERSION as EX_VERSION, __webpack_exports__EaseBy as EaseBy, __webpack_exports__EaseTo as EaseTo, __webpack_exports__EasingFunctions as EasingFunctions, __webpack_exports__EdgeCollider as EdgeCollider, __webpack_exports__ElasticToActorStrategy as ElasticToActorStrategy, __webpack_exports__EmitterType as EmitterType, __webpack_exports__Engine as Engine, __webpack_exports__EngineEvents as EngineEvents, __webpack_exports__EnterTriggerEvent as EnterTriggerEvent, __webpack_exports__EnterViewPortEvent as EnterViewPortEvent, __webpack_exports__Entity as Entity, __webpack_exports__EntityEvents as EntityEvents, __webpack_exports__EntityManager as EntityManager, __webpack_exports__EventDispatcher as EventDispatcher, __webpack_exports__EventEmitter as EventEmitter, __webpack_exports__EventTypes as EventTypes, __webpack_exports__Events as Events, __webpack_exports__ExResponse as ExResponse, __webpack_exports__ExcaliburGraphicsContext2DCanvas as ExcaliburGraphicsContext2DCanvas, __webpack_exports__ExcaliburGraphicsContextWebGL as ExcaliburGraphicsContextWebGL, __webpack_exports__ExitTriggerEvent as ExitTriggerEvent, __webpack_exports__ExitViewPortEvent as ExitViewPortEvent, __webpack_exports__Fade as Fade, __webpack_exports__Flags as Flags, __webpack_exports__Follow as Follow, __webpack_exports__Font as Font, __webpack_exports__FontCache as FontCache, __webpack_exports__FontStyle as FontStyle, __webpack_exports__FontUnit as FontUnit, __webpack_exports__FpsSampler as FpsSampler, __webpack_exports__FrameStats as FrameStats, __webpack_exports__Future as Future, __webpack_exports__GameEvent as GameEvent, __webpack_exports__GameStartEvent as GameStartEvent, __webpack_exports__GameStopEvent as GameStopEvent, __webpack_exports__Gamepad as Gamepad, __webpack_exports__GamepadAxisEvent as GamepadAxisEvent, __webpack_exports__GamepadButtonEvent as GamepadButtonEvent, __webpack_exports__GamepadConnectEvent as GamepadConnectEvent, __webpack_exports__GamepadDisconnectEvent as GamepadDisconnectEvent, __webpack_exports__Gamepads as Gamepads, __webpack_exports__Gif as Gif, __webpack_exports__GlobalCoordinates as GlobalCoordinates, __webpack_exports__Graphic as Graphic, __webpack_exports__GraphicsComponent as GraphicsComponent, __webpack_exports__GraphicsGroup as GraphicsGroup, __webpack_exports__GraphicsLayer as GraphicsLayer, __webpack_exports__GraphicsLayers as GraphicsLayers, __webpack_exports__GraphicsSystem as GraphicsSystem, __webpack_exports__HiddenEvent as HiddenEvent, __webpack_exports__ImageFiltering as ImageFiltering, __webpack_exports__ImageSource as ImageSource, __webpack_exports__InitializeEvent as InitializeEvent, __webpack_exports__Input as Input, __webpack_exports__InputMapper as InputMapper, __webpack_exports__Integrator as Integrator, __webpack_exports__IsometricEntityComponent as IsometricEntityComponent, __webpack_exports__IsometricEntitySystem as IsometricEntitySystem, __webpack_exports__IsometricMap as IsometricMap, __webpack_exports__IsometricTile as IsometricTile, __webpack_exports__KeyEvent as KeyEvent, __webpack_exports__Keyboard as Keyboard, __webpack_exports__Keys as Keys, __webpack_exports__KillEvent as KillEvent, __webpack_exports__Label as Label, __webpack_exports__LimitCameraBoundsStrategy as LimitCameraBoundsStrategy, __webpack_exports__Line as Line, __webpack_exports__LineSegment as LineSegment, __webpack_exports__Loader as Loader, __webpack_exports__LoaderEvents as LoaderEvents, __webpack_exports__LockCameraToActorAxisStrategy as LockCameraToActorAxisStrategy, __webpack_exports__LockCameraToActorStrategy as LockCameraToActorStrategy, __webpack_exports__LogLevel as LogLevel, __webpack_exports__Logger as Logger, __webpack_exports__Material as Material, __webpack_exports__Matrix as Matrix, __webpack_exports__MatrixLocations as MatrixLocations, __webpack_exports__MediaEvent as MediaEvent, __webpack_exports__Meet as Meet, __webpack_exports__MotionComponent as MotionComponent, __webpack_exports__MotionSystem as MotionSystem, __webpack_exports__MoveBy as MoveBy, __webpack_exports__MoveTo as MoveTo, __webpack_exports__NativePointerButton as NativePointerButton, __webpack_exports__NativeSoundEvent as NativeSoundEvent, __webpack_exports__NativeSoundProcessedEvent as NativeSoundProcessedEvent, __webpack_exports__Observable as Observable, __webpack_exports__OffscreenSystem as OffscreenSystem, __webpack_exports__Pair as Pair, __webpack_exports__ParallaxComponent as ParallaxComponent, __webpack_exports__ParallelActions as ParallelActions, __webpack_exports__ParseGif as ParseGif, __webpack_exports__Particle as Particle, __webpack_exports__ParticleEmitter as ParticleEmitter, __webpack_exports__ParticleTransform as ParticleTransform, __webpack_exports__Physics as Physics, __webpack_exports__PhysicsStats as PhysicsStats, __webpack_exports__PhysicsWorld as PhysicsWorld, __webpack_exports__PointerButton as PointerButton, __webpack_exports__PointerComponent as PointerComponent, __webpack_exports__PointerEvent as PointerEvent, __webpack_exports__PointerEventReceiver as PointerEventReceiver, __webpack_exports__PointerScope as PointerScope, __webpack_exports__PointerSystem as PointerSystem, __webpack_exports__PointerType as PointerType, __webpack_exports__Polygon as Polygon, __webpack_exports__PolygonCollider as PolygonCollider, __webpack_exports__Pool as Pool, __webpack_exports__PostCollisionEvent as PostCollisionEvent, __webpack_exports__PostDebugDrawEvent as PostDebugDrawEvent, __webpack_exports__PostDrawEvent as PostDrawEvent, __webpack_exports__PostFrameEvent as PostFrameEvent, __webpack_exports__PostKillEvent as PostKillEvent, __webpack_exports__PostUpdateEvent as PostUpdateEvent, __webpack_exports__PreCollisionEvent as PreCollisionEvent, __webpack_exports__PreDebugDrawEvent as PreDebugDrawEvent, __webpack_exports__PreDrawEvent as PreDrawEvent, __webpack_exports__PreFrameEvent as PreFrameEvent, __webpack_exports__PreKillEvent as PreKillEvent, __webpack_exports__PreUpdateEvent as PreUpdateEvent, __webpack_exports__Projection as Projection, __webpack_exports__QuadIndexBuffer as QuadIndexBuffer, __webpack_exports__Query as Query, __webpack_exports__QueryManager as QueryManager, __webpack_exports__RadiusAroundActorStrategy as RadiusAroundActorStrategy, __webpack_exports__Random as Random, __webpack_exports__Raster as Raster, __webpack_exports__Ray as Ray, __webpack_exports__RealisticSolver as RealisticSolver, __webpack_exports__Rectangle as Rectangle, __webpack_exports__RemovedComponent as RemovedComponent, __webpack_exports__RemovedEntity as RemovedEntity, __webpack_exports__Repeat as Repeat, __webpack_exports__RepeatForever as RepeatForever, __webpack_exports__Resolution as Resolution, __webpack_exports__Resource as Resource, __webpack_exports__ResourceEvents as ResourceEvents, __webpack_exports__RotateBy as RotateBy, __webpack_exports__RotateTo as RotateTo, __webpack_exports__RotationType as RotationType, __webpack_exports__ScaleBy as ScaleBy, __webpack_exports__ScaleTo as ScaleTo, __webpack_exports__Scene as Scene, __webpack_exports__SceneEvents as SceneEvents, __webpack_exports__Screen as Screen, __webpack_exports__ScreenAppender as ScreenAppender, __webpack_exports__ScreenElement as ScreenElement, __webpack_exports__ScreenShader as ScreenShader, __webpack_exports__ScrollPreventionMode as ScrollPreventionMode, __webpack_exports__Semaphore as Semaphore, __webpack_exports__Shader as Shader, __webpack_exports__Shape as Shape, __webpack_exports__Side as Side, __webpack_exports__Sound as Sound, __webpack_exports__SoundEvents as SoundEvents, __webpack_exports__Sprite as Sprite, __webpack_exports__SpriteFont as SpriteFont, __webpack_exports__SpriteSheet as SpriteSheet, __webpack_exports__StandardClock as StandardClock, __webpack_exports__StateMachine as StateMachine, __webpack_exports__StrategyContainer as StrategyContainer, __webpack_exports__Stream as Stream, __webpack_exports__System as System, __webpack_exports__SystemManager as SystemManager, __webpack_exports__SystemType as SystemType, __webpack_exports__TagComponent as TagComponent, __webpack_exports__TestClock as TestClock, __webpack_exports__Text as Text, __webpack_exports__TextAlign as TextAlign, __webpack_exports__TextureLoader as TextureLoader, __webpack_exports__Tile as Tile, __webpack_exports__TileMap as TileMap, __webpack_exports__TileMapEvents as TileMapEvents, __webpack_exports__Timer as Timer, __webpack_exports__Toaster as Toaster, __webpack_exports__Transform as Transform, __webpack_exports__TransformComponent as TransformComponent, __webpack_exports__TreeNode as TreeNode, __webpack_exports__Trigger as Trigger, __webpack_exports__TriggerEvents as TriggerEvents, __webpack_exports__TwoPI as TwoPI, __webpack_exports__Util as Util, __webpack_exports__Vector as Vector, __webpack_exports__VectorView as VectorView, __webpack_exports__VertexBuffer as VertexBuffer, __webpack_exports__VertexLayout as VertexLayout, __webpack_exports__VisibleEvent as VisibleEvent, __webpack_exports__WebAudio as WebAudio, __webpack_exports__WebAudioInstance as WebAudioInstance, __webpack_exports__WheelDeltaMode as WheelDeltaMode, __webpack_exports__WheelEvent as WheelEvent, __webpack_exports__World as World, __webpack_exports__canonicalizeAngle as canonicalizeAngle, __webpack_exports__clamp as clamp, __webpack_exports__createId as createId, __webpack_exports__frac as frac, __webpack_exports__hasGraphicsTick as hasGraphicsTick, __webpack_exports__hasOnInitialize as hasOnInitialize, __webpack_exports__hasOnPostUpdate as hasOnPostUpdate, __webpack_exports__hasOnPreUpdate as hasOnPreUpdate, __webpack_exports__hasPostDraw as hasPostDraw, __webpack_exports__hasPreDraw as hasPreDraw, __webpack_exports__has_initialize as has_initialize, __webpack_exports__has_postupdate as has_postupdate, __webpack_exports__has_preupdate as has_preupdate, __webpack_exports__isAddedComponent as isAddedComponent, __webpack_exports__isAddedSystemEntity as isAddedSystemEntity, __webpack_exports__isRemoveSystemEntity as isRemoveSystemEntity, __webpack_exports__isRemovedComponent as isRemovedComponent, __webpack_exports__isScreenElement as isScreenElement, __webpack_exports__maxMessages as maxMessages, __webpack_exports__obsolete as obsolete, __webpack_exports__pixelSnapEpsilon as pixelSnapEpsilon, __webpack_exports__randomInRange as randomInRange, __webpack_exports__randomIntInRange as randomIntInRange, __webpack_exports__range as range, __webpack_exports__resetObsoleteCounter as resetObsoleteCounter, __webpack_exports__sign as sign, __webpack_exports__toDegrees as toDegrees, __webpack_exports__toRadians as toRadians, __webpack_exports__vec as vec, __webpack_exports__webgl as webgl };\n\n//# sourceMappingURL=excalibur.js.map","/*! For license information please see excalibur-tiled.min.js.LICENSE.txt */\n!function(A,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"excalibur\")):\"function\"==typeof define&&define.amd?define([\"excalibur\"],t):\"object\"==typeof exports?exports.ex=t(require(\"excalibur\")):(A.ex=A.ex||{},A.ex.Plugin=A.ex.Plugin||{},A.ex.Plugin.Tiled=t(A.ex))}(self,(A=>(()=>{var t={\"./node_modules/fast-xml-parser/src/json2xml.js\":(A,t,e)=>{\"use strict\";const i=e(\"./node_modules/fast-xml-parser/src/util.js\").buildOptions,a={attributeNamePrefix:\"@_\",attrNodeName:!1,textNodeName:\"#text\",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:\"\\\\c\",format:!1,indentBy:\"  \",supressEmptyNode:!1,tagValueProcessor:function(A){return A},attrValueProcessor:function(A){return A}},s=[\"attributeNamePrefix\",\"attrNodeName\",\"textNodeName\",\"ignoreAttributes\",\"cdataTagName\",\"cdataPositionChar\",\"format\",\"indentBy\",\"supressEmptyNode\",\"tagValueProcessor\",\"attrValueProcessor\",\"rootNodeName\"];function o(A){this.options=i(A,a,s),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=E),this.options.cdataTagName?this.isCDATA=d:this.isCDATA=function(){return!1},this.replaceCDATAstr=g,this.replaceCDATAarr=n,this.processTextOrObjNode=r,this.options.format?(this.indentate=Q,this.tagEndChar=\">\\n\",this.newLine=\"\\n\"):(this.indentate=function(){return\"\"},this.tagEndChar=\">\",this.newLine=\"\"),this.options.supressEmptyNode?(this.buildTextNode=C,this.buildObjNode=l):(this.buildTextNode=B,this.buildObjNode=I),this.buildTextValNode=B,this.buildObjectNode=I}function r(A,t,e){const i=this.j2x(A,e+1);return void 0!==A[this.options.textNodeName]&&1===Object.keys(A).length?this.buildTextNode(i.val,t,i.attrStr,e):this.buildObjNode(i.val,t,i.attrStr,e)}function g(A,t){return A=this.options.tagValueProcessor(\"\"+A),\"\"===this.options.cdataPositionChar||\"\"===A?A+\"<![CDATA[\"+t+\"]]\"+this.tagEndChar:A.replace(this.options.cdataPositionChar,\"<![CDATA[\"+t+\"]]\"+this.tagEndChar)}function n(A,t){if(A=this.options.tagValueProcessor(\"\"+A),\"\"===this.options.cdataPositionChar||\"\"===A)return A+\"<![CDATA[\"+t.join(\"]]><![CDATA[\")+\"]]\"+this.tagEndChar;for(let e in t)A=A.replace(this.options.cdataPositionChar,\"<![CDATA[\"+t[e]+\"]]>\");return A+this.newLine}function I(A,t,e,i){return e&&-1===A.indexOf(\"<\")?this.indentate(i)+\"<\"+t+e+\">\"+A+\"</\"+t+this.tagEndChar:this.indentate(i)+\"<\"+t+e+this.tagEndChar+A+this.indentate(i)+\"</\"+t+this.tagEndChar}function l(A,t,e,i){return\"\"!==A?this.buildObjectNode(A,t,e,i):this.indentate(i)+\"<\"+t+e+\"/\"+this.tagEndChar}function B(A,t,e,i){return this.indentate(i)+\"<\"+t+e+\">\"+this.options.tagValueProcessor(A)+\"</\"+t+this.tagEndChar}function C(A,t,e,i){return\"\"!==A?this.buildTextValNode(A,t,e,i):this.indentate(i)+\"<\"+t+e+\"/\"+this.tagEndChar}function Q(A){return this.options.indentBy.repeat(A)}function E(A){return!!A.startsWith(this.options.attributeNamePrefix)&&A.substr(this.attrPrefixLen)}function d(A){return A===this.options.cdataTagName}o.prototype.parse=function(A){return Array.isArray(A)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(A={[this.options.rootNodeName]:A}),this.j2x(A,0).val},o.prototype.j2x=function(A,t){let e=\"\",i=\"\";for(let a in A)if(void 0===A[a]);else if(null===A[a])i+=this.indentate(t)+\"<\"+a+\"/\"+this.tagEndChar;else if(A[a]instanceof Date)i+=this.buildTextNode(A[a],a,\"\",t);else if(\"object\"!=typeof A[a]){const s=this.isAttribute(a);s?e+=\" \"+s+'=\"'+this.options.attrValueProcessor(\"\"+A[a])+'\"':this.isCDATA(a)?A[this.options.textNodeName]?i+=this.replaceCDATAstr(A[this.options.textNodeName],A[a]):i+=this.replaceCDATAstr(\"\",A[a]):a===this.options.textNodeName?A[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(\"\"+A[a])):i+=this.buildTextNode(A[a],a,\"\",t)}else if(Array.isArray(A[a]))if(this.isCDATA(a))i+=this.indentate(t),A[this.options.textNodeName]?i+=this.replaceCDATAarr(A[this.options.textNodeName],A[a]):i+=this.replaceCDATAarr(\"\",A[a]);else{const e=A[a].length;for(let s=0;s<e;s++){const e=A[a][s];void 0===e||(i+=null===e?this.indentate(t)+\"<\"+a+\"/\"+this.tagEndChar:\"object\"==typeof e?this.processTextOrObjNode(e,a,t):this.buildTextNode(e,a,\"\",t))}}else if(this.options.attrNodeName&&a===this.options.attrNodeName){const t=Object.keys(A[a]),i=t.length;for(let s=0;s<i;s++)e+=\" \"+t[s]+'=\"'+this.options.attrValueProcessor(\"\"+A[a][t[s]])+'\"'}else i+=this.processTextOrObjNode(A[a],a,t);return{attrStr:e,val:i}},A.exports=o},\"./node_modules/fast-xml-parser/src/nimndata.js\":(A,t,e)=>{\"use strict\";const i=function(A){return String.fromCharCode(A)},a={nilChar:i(176),missingChar:i(201),nilPremitive:i(175),missingPremitive:i(200),emptyChar:i(178),emptyValue:i(177),boundryChar:i(179),objStart:i(198),arrStart:i(204),arrayEnd:i(185)},s=[a.nilChar,a.nilPremitive,a.missingChar,a.missingPremitive,a.boundryChar,a.emptyChar,a.emptyValue,a.arrayEnd,a.objStart,a.arrStart],o=function(A,t,e){if(\"string\"==typeof t)return A&&A[0]&&void 0!==A[0].val?r(A[0].val,t):r(A,t);{const s=void 0===(i=A)?a.missingChar:null===i?a.nilChar:!(i.child&&0===Object.keys(i.child).length&&(!i.attrsMap||0===Object.keys(i.attrsMap).length))||a.emptyChar;if(!0===s){let i=\"\";if(Array.isArray(t)){i+=a.arrStart;const s=t[0],n=A.length;if(\"string\"==typeof s)for(let t=0;t<n;t++){const e=r(A[t].val,s);i=g(i,e)}else for(let t=0;t<n;t++){const a=o(A[t],s,e);i=g(i,a)}i+=a.arrayEnd}else{i+=a.objStart;const s=Object.keys(t);Array.isArray(A)&&(A=A[0]);for(let a in s){const r=s[a];let n;n=!e.ignoreAttributes&&A.attrsMap&&A.attrsMap[r]?o(A.attrsMap[r],t[r],e):r===e.textNodeName?o(A.val,t[r],e):o(A.child[r],t[r],e),i=g(i,n)}}return i}return s}var i},r=function(A){switch(A){case void 0:return a.missingPremitive;case null:return a.nilPremitive;case\"\":return a.emptyValue;default:return A}},g=function(A,t){return n(t[0])||n(A[A.length-1])||(A+=a.boundryChar),A+t},n=function(A){return-1!==s.indexOf(A)},I=e(\"./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js\"),l=e(\"./node_modules/fast-xml-parser/src/util.js\").buildOptions;t.convert2nimn=function(A,t,e){return e=l(e,I.defaultOptions,I.props),o(A,t,e)}},\"./node_modules/fast-xml-parser/src/node2json.js\":(A,t,e)=>{\"use strict\";const i=e(\"./node_modules/fast-xml-parser/src/util.js\"),a=function(A,t,e){const s={};if(!t.alwaysCreateTextNode&&(!A.child||i.isEmptyObject(A.child))&&(!A.attrsMap||i.isEmptyObject(A.attrsMap)))return i.isExist(A.val)?A.val:\"\";if(i.isExist(A.val)&&(\"string\"!=typeof A.val||\"\"!==A.val&&A.val!==t.cdataPositionChar)){const a=i.isTagNameInArrayMode(A.tagname,t.arrayMode,e);s[t.textNodeName]=a?[A.val]:A.val}i.merge(s,A.attrsMap,t.arrayMode);const o=Object.keys(A.child);for(let r=0;r<o.length;r++){const g=o[r];if(A.child[g]&&A.child[g].length>1){s[g]=[];for(let e in A.child[g])A.child[g].hasOwnProperty(e)&&s[g].push(a(A.child[g][e],t,g))}else{const o=a(A.child[g][0],t,g),r=!0===t.arrayMode&&\"object\"==typeof o||i.isTagNameInArrayMode(g,t.arrayMode,e);s[g]=r?[o]:o}}return s};t.convertToJson=a},\"./node_modules/fast-xml-parser/src/node2json_str.js\":(A,t,e)=>{\"use strict\";const i=e(\"./node_modules/fast-xml-parser/src/util.js\"),a=e(\"./node_modules/fast-xml-parser/src/util.js\").buildOptions,s=e(\"./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js\"),o=function(A,t,e){let a=\"{\";const s=Object.keys(A.child);for(let e=0;e<s.length;e++){const i=s[e];if(A.child[i]&&A.child[i].length>1){a+='\"'+i+'\" : [ ';for(let e in A.child[i])a+=o(A.child[i][e],t)+\" , \";a=a.substr(0,a.length-1)+\" ] \"}else a+='\"'+i+'\" : '+o(A.child[i][0],t)+\" ,\"}return i.merge(a,A.attrsMap),i.isEmptyObject(a)?i.isExist(A.val)?A.val:\"\":(i.isExist(A.val)&&(\"string\"!=typeof A.val||\"\"!==A.val&&A.val!==t.cdataPositionChar)&&(a+='\"'+t.textNodeName+'\" : '+(!0!==(r=A.val)&&!1!==r&&isNaN(r)?'\"'+r+'\"':r)),\",\"===a[a.length-1]&&(a=a.substr(0,a.length-2)),a+\"}\");var r};t.convertToJsonString=function(A,t){return(t=a(t,s.defaultOptions,s.props)).indentBy=t.indentBy||\"\",o(A,t,0)}},\"./node_modules/fast-xml-parser/src/parser.js\":(A,t,e)=>{\"use strict\";const i=e(\"./node_modules/fast-xml-parser/src/node2json.js\"),a=e(\"./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js\"),s=e(\"./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js\"),o=e(\"./node_modules/fast-xml-parser/src/util.js\").buildOptions,r=e(\"./node_modules/fast-xml-parser/src/validator.js\");t.parse=function(A,t={},e){if(e){!0===e&&(e={});const t=r.validate(A,e);if(!0!==t)throw Error(t.err.msg)}t.parseTrueNumberOnly&&!1!==t.parseNodeValue&&!t.numParseOptions&&(t.numParseOptions={leadingZeros:!1});let g=o(t,s.defaultOptions,s.props);const n=a.getTraversalObj(A,g);return i.convertToJson(n,g)},t.convertTonimn=e(\"./node_modules/fast-xml-parser/src/nimndata.js\").convert2nimn,t.getTraversalObj=a.getTraversalObj,t.convertToJson=i.convertToJson,t.convertToJsonString=e(\"./node_modules/fast-xml-parser/src/node2json_str.js\").convertToJsonString,t.validate=r.validate,t.j2xParser=e(\"./node_modules/fast-xml-parser/src/json2xml.js\"),t.parseToNimn=function(A,e,i){return t.convertTonimn(t.getTraversalObj(A,i),e,i)}},\"./node_modules/fast-xml-parser/src/util.js\":(A,t)=>{\"use strict\";const e=\"[:A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*\",i=new RegExp(\"^\"+e+\"$\");t.isExist=function(A){return void 0!==A},t.isEmptyObject=function(A){return 0===Object.keys(A).length},t.merge=function(A,t,e){if(t){const i=Object.keys(t),a=i.length;for(let s=0;s<a;s++)A[i[s]]=\"strict\"===e?[t[i[s]]]:t[i[s]]}},t.getValue=function(A){return t.isExist(A)?A:\"\"},t.buildOptions=function(A,t,e){let i={};if(!A)return t;for(let a=0;a<e.length;a++)void 0!==A[e[a]]?i[e[a]]=A[e[a]]:i[e[a]]=t[e[a]];return i},t.isTagNameInArrayMode=function(A,t,e){return!1!==t&&(t instanceof RegExp?t.test(A):\"function\"==typeof t?!!t(A,e):\"strict\"===t)},t.isName=function(A){return!(null==i.exec(A))},t.getAllMatches=function(A,t){const e=[];let i=t.exec(A);for(;i;){const a=[];a.startIndex=t.lastIndex-i[0].length;const s=i.length;for(let A=0;A<s;A++)a.push(i[A]);e.push(a),i=t.exec(A)}return e},t.nameRegexp=e},\"./node_modules/fast-xml-parser/src/validator.js\":(A,t,e)=>{\"use strict\";const i=e(\"./node_modules/fast-xml-parser/src/util.js\"),a={allowBooleanAttributes:!1},s=[\"allowBooleanAttributes\"];function o(A,t){const e=t;for(;t<A.length;t++)if(\"?\"!=A[t]&&\" \"!=A[t]);else{const i=A.substr(e,t-e);if(t>5&&\"xml\"===i)return B(\"InvalidXml\",\"XML declaration allowed only at the start of the document.\",Q(A,t));if(\"?\"==A[t]&&\">\"==A[t+1]){t++;break}}return t}function r(A,t){if(A.length>t+5&&\"-\"===A[t+1]&&\"-\"===A[t+2]){for(t+=3;t<A.length;t++)if(\"-\"===A[t]&&\"-\"===A[t+1]&&\">\"===A[t+2]){t+=2;break}}else if(A.length>t+8&&\"D\"===A[t+1]&&\"O\"===A[t+2]&&\"C\"===A[t+3]&&\"T\"===A[t+4]&&\"Y\"===A[t+5]&&\"P\"===A[t+6]&&\"E\"===A[t+7]){let e=1;for(t+=8;t<A.length;t++)if(\"<\"===A[t])e++;else if(\">\"===A[t]&&(e--,0===e))break}else if(A.length>t+9&&\"[\"===A[t+1]&&\"C\"===A[t+2]&&\"D\"===A[t+3]&&\"A\"===A[t+4]&&\"T\"===A[t+5]&&\"A\"===A[t+6]&&\"[\"===A[t+7])for(t+=8;t<A.length;t++)if(\"]\"===A[t]&&\"]\"===A[t+1]&&\">\"===A[t+2]){t+=2;break}return t}function g(A,t){let e=\"\",i=\"\",a=!1;for(;t<A.length;t++){if('\"'===A[t]||\"'\"===A[t])\"\"===i?i=A[t]:i!==A[t]||(i=\"\");else if(\">\"===A[t]&&\"\"===i){a=!0;break}e+=A[t]}return\"\"===i&&{value:e,index:t,tagClosed:a}}t.validate=function(A,t){t=i.buildOptions(t,a,s);const e=[];let n=!1,C=!1;\"\\ufeff\"===A[0]&&(A=A.substr(1));for(let a=0;a<A.length;a++)if(\"<\"===A[a]&&\"?\"===A[a+1]){if(a+=2,a=o(A,a),a.err)return a}else{if(\"<\"!==A[a]){if(\" \"===A[a]||\"\\t\"===A[a]||\"\\n\"===A[a]||\"\\r\"===A[a])continue;return B(\"InvalidChar\",\"char '\"+A[a]+\"' is not expected.\",Q(A,a))}{let s=a;if(a++,\"!\"===A[a]){a=r(A,a);continue}{let d=!1;\"/\"===A[a]&&(d=!0,a++);let h=\"\";for(;a<A.length&&\">\"!==A[a]&&\" \"!==A[a]&&\"\\t\"!==A[a]&&\"\\n\"!==A[a]&&\"\\r\"!==A[a];a++)h+=A[a];if(h=h.trim(),\"/\"===h[h.length-1]&&(h=h.substring(0,h.length-1),a--),E=h,!i.isName(E)){let t;return t=0===h.trim().length?\"Invalid space after '<'.\":\"Tag '\"+h+\"' is an invalid name.\",B(\"InvalidTag\",t,Q(A,a))}const c=g(A,a);if(!1===c)return B(\"InvalidAttr\",\"Attributes for '\"+h+\"' have open quote.\",Q(A,a));let u=c.value;if(a=c.index,\"/\"===u[u.length-1]){const e=a-u.length;u=u.substring(0,u.length-1);const i=I(u,t);if(!0!==i)return B(i.err.code,i.err.msg,Q(A,e+i.err.line));n=!0}else if(d){if(!c.tagClosed)return B(\"InvalidTag\",\"Closing tag '\"+h+\"' doesn't have proper closing.\",Q(A,a));if(u.trim().length>0)return B(\"InvalidTag\",\"Closing tag '\"+h+\"' can't have attributes or invalid starting.\",Q(A,s));{const t=e.pop();if(h!==t.tagName){let e=Q(A,t.tagStartPos);return B(\"InvalidTag\",\"Expected closing tag '\"+t.tagName+\"' (opened in line \"+e.line+\", col \"+e.col+\") instead of closing tag '\"+h+\"'.\",Q(A,s))}0==e.length&&(C=!0)}}else{const i=I(u,t);if(!0!==i)return B(i.err.code,i.err.msg,Q(A,a-u.length+i.err.line));if(!0===C)return B(\"InvalidXml\",\"Multiple possible root nodes found.\",Q(A,a));e.push({tagName:h,tagStartPos:s}),n=!0}for(a++;a<A.length;a++)if(\"<\"===A[a]){if(\"!\"===A[a+1]){a++,a=r(A,a);continue}if(\"?\"!==A[a+1])break;if(a=o(A,++a),a.err)return a}else if(\"&\"===A[a]){const t=l(A,a);if(-1==t)return B(\"InvalidChar\",\"char '&' is not expected.\",Q(A,a));a=t}\"<\"===A[a]&&a--}}}var E;return n?1==e.length?B(\"InvalidTag\",\"Unclosed tag '\"+e[0].tagName+\"'.\",Q(A,e[0].tagStartPos)):!(e.length>0)||B(\"InvalidXml\",\"Invalid '\"+JSON.stringify(e.map((A=>A.tagName)),null,4).replace(/\\r?\\n/g,\"\")+\"' found.\",{line:1,col:1}):B(\"InvalidXml\",\"Start tag expected.\",1)};const n=new RegExp(\"(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*(['\\\"])(([\\\\s\\\\S])*?)\\\\5)?\",\"g\");function I(A,t){const e=i.getAllMatches(A,n),a={};for(let A=0;A<e.length;A++){if(0===e[A][1].length)return B(\"InvalidAttr\",\"Attribute '\"+e[A][2]+\"' has no space in starting.\",E(e[A]));if(void 0===e[A][3]&&!t.allowBooleanAttributes)return B(\"InvalidAttr\",\"boolean attribute '\"+e[A][2]+\"' is not allowed.\",E(e[A]));const i=e[A][2];if(!C(i))return B(\"InvalidAttr\",\"Attribute '\"+i+\"' is an invalid name.\",E(e[A]));if(a.hasOwnProperty(i))return B(\"InvalidAttr\",\"Attribute '\"+i+\"' is repeated.\",E(e[A]));a[i]=1}return!0}function l(A,t){if(\";\"===A[++t])return-1;if(\"#\"===A[t])return function(A,t){let e=/\\d/;for(\"x\"===A[t]&&(t++,e=/[\\da-fA-F]/);t<A.length;t++){if(\";\"===A[t])return t;if(!A[t].match(e))break}return-1}(A,++t);let e=0;for(;t<A.length;t++,e++)if(!(A[t].match(/\\w/)&&e<20)){if(\";\"===A[t])break;return-1}return t}function B(A,t,e){return{err:{code:A,msg:t,line:e.line||e,col:e.col}}}function C(A){return i.isName(A)}function Q(A,t){const e=A.substring(0,t).split(/\\r?\\n/);return{line:e.length,col:e[e.length-1].length+1}}function E(A){return A.startIndex+A[1].length}},\"./node_modules/fast-xml-parser/src/xmlNode.js\":A=>{\"use strict\";A.exports=function(A,t,e){this.tagname=A,this.parent=t,this.child={},this.attrsMap={},this.val=e,this.addChild=function(A){Array.isArray(this.child[A.tagname])?this.child[A.tagname].push(A):this.child[A.tagname]=[A]}}},\"./node_modules/fast-xml-parser/src/xmlstr2xmlnode.js\":(A,t,e)=>{\"use strict\";const i=e(\"./node_modules/fast-xml-parser/src/util.js\"),a=e(\"./node_modules/fast-xml-parser/src/util.js\").buildOptions,s=e(\"./node_modules/fast-xml-parser/src/xmlNode.js\"),o=e(\"./node_modules/strnum/strnum.js\");\"<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)\".replace(/NAME/g,i.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={attributeNamePrefix:\"@_\",attrNodeName:!1,textNodeName:\"#text\",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:\"\\\\c\",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(A,t){return A},attrValueProcessor:function(A,t){return A},stopNodes:[],alwaysCreateTextNode:!1};t.defaultOptions=r;const g=[\"attributeNamePrefix\",\"attrNodeName\",\"textNodeName\",\"ignoreAttributes\",\"ignoreNameSpace\",\"allowBooleanAttributes\",\"parseNodeValue\",\"parseAttributeValue\",\"arrayMode\",\"trimValues\",\"cdataTagName\",\"cdataPositionChar\",\"tagValueProcessor\",\"attrValueProcessor\",\"parseTrueNumberOnly\",\"numParseOptions\",\"stopNodes\",\"alwaysCreateTextNode\"];function n(A,t,e){return t&&(e.trimValues&&(t=t.trim()),t=l(t=e.tagValueProcessor(t,A),e.parseNodeValue,e.numParseOptions)),t}function I(A,t){if(t.ignoreNameSpace){const t=A.split(\":\"),e=\"/\"===A.charAt(0)?\"/\":\"\";if(\"xmlns\"===t[0])return\"\";2===t.length&&(A=e+t[1])}return A}function l(A,t,e){if(t&&\"string\"==typeof A){const t=A.trim();return\"true\"===t||\"false\"!==t&&o(A,e)}return i.isExist(A)?A:\"\"}t.props=g;const B=new RegExp(\"([^\\\\s=]+)\\\\s*(=\\\\s*(['\\\"])(.*?)\\\\3)?\",\"g\");function C(A,t){if(!t.ignoreAttributes&&\"string\"==typeof A){A=A.replace(/\\r?\\n/g,\" \");const e=i.getAllMatches(A,B),a=e.length,s={};for(let A=0;A<a;A++){const i=I(e[A][1],t);i.length&&(void 0!==e[A][4]?(t.trimValues&&(e[A][4]=e[A][4].trim()),e[A][4]=t.attrValueProcessor(e[A][4],i),s[t.attributeNamePrefix+i]=l(e[A][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(s[t.attributeNamePrefix+i]=!0))}if(!Object.keys(s).length)return;if(t.attrNodeName){const A={};return A[t.attrNodeName]=s,A}return s}}function Q(A,t){let e,i=\"\";for(let a=t;a<A.length;a++){let t=A[a];if(e)t===e&&(e=\"\");else if('\"'===t||\"'\"===t)e=t;else{if(\">\"===t)return{data:i,index:a};\"\\t\"===t&&(t=\" \")}i+=t}}function E(A,t,e,i){const a=A.indexOf(t,e);if(-1===a)throw new Error(i);return a+t.length-1}t.getTraversalObj=function(A,t){A=A.replace(/\\r\\n?/g,\"\\n\"),t=a(t,r,g);const e=new s(\"!xml\");let o=e,I=\"\";for(let e=0;e<A.length;e++)if(\"<\"===A[e])if(\"/\"===A[e+1]){const a=E(A,\">\",e,\"Closing Tag is not closed.\");let s=A.substring(e+2,a).trim();if(t.ignoreNameSpace){const A=s.indexOf(\":\");-1!==A&&(s=s.substr(A+1))}o&&(o.val?o.val=i.getValue(o.val)+\"\"+n(s,I,t):o.val=n(s,I,t)),t.stopNodes.length&&t.stopNodes.includes(o.tagname)&&(o.child=[],null==o.attrsMap&&(o.attrsMap={}),o.val=A.substr(o.startIndex+1,e-o.startIndex-1)),o=o.parent,I=\"\",e=a}else if(\"?\"===A[e+1])e=E(A,\"?>\",e,\"Pi Tag is not closed.\");else if(\"!--\"===A.substr(e+1,3))e=E(A,\"--\\x3e\",e,\"Comment is not closed.\");else if(\"!D\"===A.substr(e+1,2)){const t=E(A,\">\",e,\"DOCTYPE is not closed.\");e=A.substring(e,t).indexOf(\"[\")>=0?A.indexOf(\"]>\",e)+1:t}else if(\"![\"===A.substr(e+1,2)){const a=E(A,\"]]>\",e,\"CDATA is not closed.\")-2,r=A.substring(e+9,a);if(I&&(o.val=i.getValue(o.val)+\"\"+n(o.tagname,I,t),I=\"\"),t.cdataTagName){const A=new s(t.cdataTagName,o,r);o.addChild(A),o.val=i.getValue(o.val)+t.cdataPositionChar,r&&(A.val=r)}else o.val=(o.val||\"\")+(r||\"\");e=a+2}else{const a=Q(A,e+1);let r=a.data;const g=a.index,l=r.indexOf(\" \");let B=r,E=!0;if(-1!==l&&(B=r.substr(0,l).replace(/\\s\\s*$/,\"\"),r=r.substr(l+1)),t.ignoreNameSpace){const A=B.indexOf(\":\");-1!==A&&(B=B.substr(A+1),E=B!==a.data.substr(A+1))}if(o&&I&&\"!xml\"!==o.tagname&&(o.val=i.getValue(o.val)+\"\"+n(o.tagname,I,t)),r.length>0&&r.lastIndexOf(\"/\")===r.length-1){\"/\"===B[B.length-1]?(B=B.substr(0,B.length-1),r=B):r=r.substr(0,r.length-1);const A=new s(B,o,\"\");B!==r&&(A.attrsMap=C(r,t)),o.addChild(A)}else{const A=new s(B,o);t.stopNodes.length&&t.stopNodes.includes(A.tagname)&&(A.startIndex=g),B!==r&&E&&(A.attrsMap=C(r,t)),o.addChild(A),o=A}I=\"\",e=g}else I+=A[e];return e}},\"./node_modules/pako/index.js\":(A,t,e)=>{\"use strict\";var i={};(0,e(\"./node_modules/pako/lib/utils/common.js\").assign)(i,e(\"./node_modules/pako/lib/deflate.js\"),e(\"./node_modules/pako/lib/inflate.js\"),e(\"./node_modules/pako/lib/zlib/constants.js\")),A.exports=i},\"./node_modules/pako/lib/deflate.js\":(A,t,e)=>{\"use strict\";var i=e(\"./node_modules/pako/lib/zlib/deflate.js\"),a=e(\"./node_modules/pako/lib/utils/common.js\"),s=e(\"./node_modules/pako/lib/utils/strings.js\"),o=e(\"./node_modules/pako/lib/zlib/messages.js\"),r=e(\"./node_modules/pako/lib/zlib/zstream.js\"),g=Object.prototype.toString;function n(A){if(!(this instanceof n))return new n(A);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:\"\"},A||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var e=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==e)throw new Error(o[e]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var I;if(I=\"string\"==typeof t.dictionary?s.string2buf(t.dictionary):\"[object ArrayBuffer]\"===g.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(e=i.deflateSetDictionary(this.strm,I)))throw new Error(o[e]);this._dict_set=!0}}function I(A,t){var e=new n(t);if(e.push(A,!0),e.err)throw e.msg||o[e.err];return e.result}n.prototype.push=function(A,t){var e,o,r=this.strm,n=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,\"string\"==typeof A?r.input=s.string2buf(A):\"[object ArrayBuffer]\"===g.call(A)?r.input=new Uint8Array(A):r.input=A,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(n),r.next_out=0,r.avail_out=n),1!==(e=i.deflate(r,o))&&0!==e)return this.onEnd(e),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==o&&2!==o)||(\"string\"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&1!==e);return 4===o?(e=i.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,0===e):2!==o||(this.onEnd(0),r.avail_out=0,!0)},n.prototype.onData=function(A){this.chunks.push(A)},n.prototype.onEnd=function(A){0===A&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},t.Deflate=n,t.deflate=I,t.deflateRaw=function(A,t){return(t=t||{}).raw=!0,I(A,t)},t.gzip=function(A,t){return(t=t||{}).gzip=!0,I(A,t)}},\"./node_modules/pako/lib/inflate.js\":(A,t,e)=>{\"use strict\";var i=e(\"./node_modules/pako/lib/zlib/inflate.js\"),a=e(\"./node_modules/pako/lib/utils/common.js\"),s=e(\"./node_modules/pako/lib/utils/strings.js\"),o=e(\"./node_modules/pako/lib/zlib/constants.js\"),r=e(\"./node_modules/pako/lib/zlib/messages.js\"),g=e(\"./node_modules/pako/lib/zlib/zstream.js\"),n=e(\"./node_modules/pako/lib/zlib/gzheader.js\"),I=Object.prototype.toString;function l(A){if(!(this instanceof l))return new l(A);this.options=a.assign({chunkSize:16384,windowBits:0,to:\"\"},A||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||A&&A.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var e=i.inflateInit2(this.strm,t.windowBits);if(e!==o.Z_OK)throw new Error(r[e]);if(this.header=new n,i.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=s.string2buf(t.dictionary):\"[object ArrayBuffer]\"===I.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=i.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(r[e])}function B(A,t){var e=new l(t);if(e.push(A,!0),e.err)throw e.msg||r[e.err];return e.result}l.prototype.push=function(A,t){var e,r,g,n,l,B=this.strm,C=this.options.chunkSize,Q=this.options.dictionary,E=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,\"string\"==typeof A?B.input=s.binstring2buf(A):\"[object ArrayBuffer]\"===I.call(A)?B.input=new Uint8Array(A):B.input=A,B.next_in=0,B.avail_in=B.input.length;do{if(0===B.avail_out&&(B.output=new a.Buf8(C),B.next_out=0,B.avail_out=C),(e=i.inflate(B,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&Q&&(e=i.inflateSetDictionary(this.strm,Q)),e===o.Z_BUF_ERROR&&!0===E&&(e=o.Z_OK,E=!1),e!==o.Z_STREAM_END&&e!==o.Z_OK)return this.onEnd(e),this.ended=!0,!1;B.next_out&&(0!==B.avail_out&&e!==o.Z_STREAM_END&&(0!==B.avail_in||r!==o.Z_FINISH&&r!==o.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(g=s.utf8border(B.output,B.next_out),n=B.next_out-g,l=s.buf2string(B.output,g),B.next_out=n,B.avail_out=C-n,n&&a.arraySet(B.output,B.output,g,n,0),this.onData(l)):this.onData(a.shrinkBuf(B.output,B.next_out)))),0===B.avail_in&&0===B.avail_out&&(E=!0)}while((B.avail_in>0||0===B.avail_out)&&e!==o.Z_STREAM_END);return e===o.Z_STREAM_END&&(r=o.Z_FINISH),r===o.Z_FINISH?(e=i.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===o.Z_OK):r!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),B.avail_out=0,!0)},l.prototype.onData=function(A){this.chunks.push(A)},l.prototype.onEnd=function(A){A===o.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},t.Inflate=l,t.inflate=B,t.inflateRaw=function(A,t){return(t=t||{}).raw=!0,B(A,t)},t.ungzip=B},\"./node_modules/pako/lib/utils/common.js\":(A,t)=>{\"use strict\";var e=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;function i(A,t){return Object.prototype.hasOwnProperty.call(A,t)}t.assign=function(A){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if(\"object\"!=typeof e)throw new TypeError(e+\"must be non-object\");for(var a in e)i(e,a)&&(A[a]=e[a])}}return A},t.shrinkBuf=function(A,t){return A.length===t?A:A.subarray?A.subarray(0,t):(A.length=t,A)};var a={arraySet:function(A,t,e,i,a){if(t.subarray&&A.subarray)A.set(t.subarray(e,e+i),a);else for(var s=0;s<i;s++)A[a+s]=t[e+s]},flattenChunks:function(A){var t,e,i,a,s,o;for(i=0,t=0,e=A.length;t<e;t++)i+=A[t].length;for(o=new Uint8Array(i),a=0,t=0,e=A.length;t<e;t++)s=A[t],o.set(s,a),a+=s.length;return o}},s={arraySet:function(A,t,e,i,a){for(var s=0;s<i;s++)A[a+s]=t[e+s]},flattenChunks:function(A){return[].concat.apply([],A)}};t.setTyped=function(A){A?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(e)},\"./node_modules/pako/lib/utils/strings.js\":(A,t,e)=>{\"use strict\";var i=e(\"./node_modules/pako/lib/utils/common.js\"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(A){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){s=!1}for(var o=new i.Buf8(256),r=0;r<256;r++)o[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;function g(A,t){if(t<65534&&(A.subarray&&s||!A.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(A,t));for(var e=\"\",o=0;o<t;o++)e+=String.fromCharCode(A[o]);return e}o[254]=o[254]=1,t.string2buf=function(A){var t,e,a,s,o,r=A.length,g=0;for(s=0;s<r;s++)55296==(64512&(e=A.charCodeAt(s)))&&s+1<r&&56320==(64512&(a=A.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(a-56320),s++),g+=e<128?1:e<2048?2:e<65536?3:4;for(t=new i.Buf8(g),o=0,s=0;o<g;s++)55296==(64512&(e=A.charCodeAt(s)))&&s+1<r&&56320==(64512&(a=A.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(a-56320),s++),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|63&e):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|63&e):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|63&e);return t},t.buf2binstring=function(A){return g(A,A.length)},t.binstring2buf=function(A){for(var t=new i.Buf8(A.length),e=0,a=t.length;e<a;e++)t[e]=A.charCodeAt(e);return t},t.buf2string=function(A,t){var e,i,a,s,r=t||A.length,n=new Array(2*r);for(i=0,e=0;e<r;)if((a=A[e++])<128)n[i++]=a;else if((s=o[a])>4)n[i++]=65533,e+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&e<r;)a=a<<6|63&A[e++],s--;s>1?n[i++]=65533:a<65536?n[i++]=a:(a-=65536,n[i++]=55296|a>>10&1023,n[i++]=56320|1023&a)}return g(n,i)},t.utf8border=function(A,t){var e;for((t=t||A.length)>A.length&&(t=A.length),e=t-1;e>=0&&128==(192&A[e]);)e--;return e<0||0===e?t:e+o[A[e]]>t?e:t}},\"./node_modules/pako/lib/zlib/adler32.js\":A=>{\"use strict\";A.exports=function(A,t,e,i){for(var a=65535&A|0,s=A>>>16&65535|0,o=0;0!==e;){e-=o=e>2e3?2e3:e;do{s=s+(a=a+t[i++]|0)|0}while(--o);a%=65521,s%=65521}return a|s<<16|0}},\"./node_modules/pako/lib/zlib/constants.js\":A=>{\"use strict\";A.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},\"./node_modules/pako/lib/zlib/crc32.js\":A=>{\"use strict\";var t=function(){for(var A,t=[],e=0;e<256;e++){A=e;for(var i=0;i<8;i++)A=1&A?3988292384^A>>>1:A>>>1;t[e]=A}return t}();A.exports=function(A,e,i,a){var s=t,o=a+i;A^=-1;for(var r=a;r<o;r++)A=A>>>8^s[255&(A^e[r])];return-1^A}},\"./node_modules/pako/lib/zlib/deflate.js\":(A,t,e)=>{\"use strict\";var i,a=e(\"./node_modules/pako/lib/utils/common.js\"),s=e(\"./node_modules/pako/lib/zlib/trees.js\"),o=e(\"./node_modules/pako/lib/zlib/adler32.js\"),r=e(\"./node_modules/pako/lib/zlib/crc32.js\"),g=e(\"./node_modules/pako/lib/zlib/messages.js\"),n=-2,I=258,l=262,B=103,C=113,Q=666;function E(A,t){return A.msg=g[t],t}function d(A){return(A<<1)-(A>4?9:0)}function h(A){for(var t=A.length;--t>=0;)A[t]=0}function c(A){var t=A.state,e=t.pending;e>A.avail_out&&(e=A.avail_out),0!==e&&(a.arraySet(A.output,t.pending_buf,t.pending_out,e,A.next_out),A.next_out+=e,t.pending_out+=e,A.total_out+=e,A.avail_out-=e,t.pending-=e,0===t.pending&&(t.pending_out=0))}function u(A,t){s._tr_flush_block(A,A.block_start>=0?A.block_start:-1,A.strstart-A.block_start,t),A.block_start=A.strstart,c(A.strm)}function f(A,t){A.pending_buf[A.pending++]=t}function p(A,t){A.pending_buf[A.pending++]=t>>>8&255,A.pending_buf[A.pending++]=255&t}function w(A,t){var e,i,a=A.max_chain_length,s=A.strstart,o=A.prev_length,r=A.nice_match,g=A.strstart>A.w_size-l?A.strstart-(A.w_size-l):0,n=A.window,B=A.w_mask,C=A.prev,Q=A.strstart+I,E=n[s+o-1],d=n[s+o];A.prev_length>=A.good_match&&(a>>=2),r>A.lookahead&&(r=A.lookahead);do{if(n[(e=t)+o]===d&&n[e+o-1]===E&&n[e]===n[s]&&n[++e]===n[s+1]){s+=2,e++;do{}while(n[++s]===n[++e]&&n[++s]===n[++e]&&n[++s]===n[++e]&&n[++s]===n[++e]&&n[++s]===n[++e]&&n[++s]===n[++e]&&n[++s]===n[++e]&&n[++s]===n[++e]&&s<Q);if(i=I-(Q-s),s=Q-I,i>o){if(A.match_start=t,o=i,i>=r)break;E=n[s+o-1],d=n[s+o]}}}while((t=C[t&B])>g&&0!=--a);return o<=A.lookahead?o:A.lookahead}function m(A){var t,e,i,s,g,n,I,B,C,Q,E=A.w_size;do{if(s=A.window_size-A.lookahead-A.strstart,A.strstart>=E+(E-l)){a.arraySet(A.window,A.window,E,E,0),A.match_start-=E,A.strstart-=E,A.block_start-=E,t=e=A.hash_size;do{i=A.head[--t],A.head[t]=i>=E?i-E:0}while(--e);t=e=E;do{i=A.prev[--t],A.prev[t]=i>=E?i-E:0}while(--e);s+=E}if(0===A.strm.avail_in)break;if(n=A.strm,I=A.window,B=A.strstart+A.lookahead,C=s,Q=void 0,(Q=n.avail_in)>C&&(Q=C),e=0===Q?0:(n.avail_in-=Q,a.arraySet(I,n.input,n.next_in,Q,B),1===n.state.wrap?n.adler=o(n.adler,I,Q,B):2===n.state.wrap&&(n.adler=r(n.adler,I,Q,B)),n.next_in+=Q,n.total_in+=Q,Q),A.lookahead+=e,A.lookahead+A.insert>=3)for(g=A.strstart-A.insert,A.ins_h=A.window[g],A.ins_h=(A.ins_h<<A.hash_shift^A.window[g+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[g+3-1])&A.hash_mask,A.prev[g&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=g,g++,A.insert--,!(A.lookahead+A.insert<3)););}while(A.lookahead<l&&0!==A.strm.avail_in)}function y(A,t){for(var e,i;;){if(A.lookahead<l){if(m(A),A.lookahead<l&&0===t)return 1;if(0===A.lookahead)break}if(e=0,A.lookahead>=3&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,e=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),0!==e&&A.strstart-e<=A.w_size-l&&(A.match_length=w(A,e)),A.match_length>=3)if(i=s._tr_tally(A,A.strstart-A.match_start,A.match_length-3),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=3){A.match_length--;do{A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,e=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart}while(0!=--A.match_length);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else i=s._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(i&&(u(A,!1),0===A.strm.avail_out))return 1}return A.insert=A.strstart<2?A.strstart:2,4===t?(u(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(u(A,!1),0===A.strm.avail_out)?1:2}function D(A,t){for(var e,i,a;;){if(A.lookahead<l){if(m(A),A.lookahead<l&&0===t)return 1;if(0===A.lookahead)break}if(e=0,A.lookahead>=3&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,e=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=2,0!==e&&A.prev_length<A.max_lazy_match&&A.strstart-e<=A.w_size-l&&(A.match_length=w(A,e),A.match_length<=5&&(1===A.strategy||3===A.match_length&&A.strstart-A.match_start>4096)&&(A.match_length=2)),A.prev_length>=3&&A.match_length<=A.prev_length){a=A.strstart+A.lookahead-3,i=s._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-3),A.lookahead-=A.prev_length-1,A.prev_length-=2;do{++A.strstart<=a&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,e=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart)}while(0!=--A.prev_length);if(A.match_available=0,A.match_length=2,A.strstart++,i&&(u(A,!1),0===A.strm.avail_out))return 1}else if(A.match_available){if((i=s._tr_tally(A,0,A.window[A.strstart-1]))&&u(A,!1),A.strstart++,A.lookahead--,0===A.strm.avail_out)return 1}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(i=s._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<2?A.strstart:2,4===t?(u(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(u(A,!1),0===A.strm.avail_out)?1:2}function _(A,t,e,i,a){this.good_length=A,this.max_lazy=t,this.nice_length=e,this.max_chain=i,this.func=a}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(A){var t;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=2,(t=A.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:C,A.adler=2===t.wrap?0:1,t.last_flush=0,s._tr_init(t),0):E(A,n)}function v(A){var t,e=k(A);return 0===e&&((t=A.state).window_size=2*t.w_size,h(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),e}function F(A,t,e,i,s,o){if(!A)return n;var r=1;if(-1===t&&(t=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),s<1||s>9||8!==e||i<8||i>15||t<0||t>9||o<0||o>4)return E(A,n);8===i&&(i=9);var g=new b;return A.state=g,g.strm=A,g.wrap=r,g.gzhead=null,g.w_bits=i,g.w_size=1<<g.w_bits,g.w_mask=g.w_size-1,g.hash_bits=s+7,g.hash_size=1<<g.hash_bits,g.hash_mask=g.hash_size-1,g.hash_shift=~~((g.hash_bits+3-1)/3),g.window=new a.Buf8(2*g.w_size),g.head=new a.Buf16(g.hash_size),g.prev=new a.Buf16(g.w_size),g.lit_bufsize=1<<s+6,g.pending_buf_size=4*g.lit_bufsize,g.pending_buf=new a.Buf8(g.pending_buf_size),g.d_buf=1*g.lit_bufsize,g.l_buf=3*g.lit_bufsize,g.level=t,g.strategy=o,g.method=e,v(A)}i=[new _(0,0,0,0,(function(A,t){var e=65535;for(e>A.pending_buf_size-5&&(e=A.pending_buf_size-5);;){if(A.lookahead<=1){if(m(A),0===A.lookahead&&0===t)return 1;if(0===A.lookahead)break}A.strstart+=A.lookahead,A.lookahead=0;var i=A.block_start+e;if((0===A.strstart||A.strstart>=i)&&(A.lookahead=A.strstart-i,A.strstart=i,u(A,!1),0===A.strm.avail_out))return 1;if(A.strstart-A.block_start>=A.w_size-l&&(u(A,!1),0===A.strm.avail_out))return 1}return A.insert=0,4===t?(u(A,!0),0===A.strm.avail_out?3:4):(A.strstart>A.block_start&&(u(A,!1),A.strm.avail_out),1)})),new _(4,4,8,4,y),new _(4,5,16,8,y),new _(4,6,32,32,y),new _(4,4,16,16,D),new _(8,16,32,32,D),new _(8,16,128,128,D),new _(8,32,128,256,D),new _(32,128,258,1024,D),new _(32,258,258,4096,D)],t.deflateInit=function(A,t){return F(A,t,8,15,8,0)},t.deflateInit2=F,t.deflateReset=v,t.deflateResetKeep=k,t.deflateSetHeader=function(A,t){return A&&A.state?2!==A.state.wrap?n:(A.state.gzhead=t,0):n},t.deflate=function(A,t){var e,a,o,g;if(!A||!A.state||t>5||t<0)return A?E(A,n):n;if(a=A.state,!A.output||!A.input&&0!==A.avail_in||a.status===Q&&4!==t)return E(A,0===A.avail_out?-5:n);if(a.strm=A,e=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)A.adler=0,f(a,31),f(a,139),f(a,8),a.gzhead?(f(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),f(a,255&a.gzhead.time),f(a,a.gzhead.time>>8&255),f(a,a.gzhead.time>>16&255),f(a,a.gzhead.time>>24&255),f(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),f(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(f(a,255&a.gzhead.extra.length),f(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(A.adler=r(A.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(f(a,0),f(a,0),f(a,0),f(a,0),f(a,0),f(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),f(a,3),a.status=C);else{var l=8+(a.w_bits-8<<4)<<8;l|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(l|=32),l+=31-l%31,a.status=C,p(a,l),0!==a.strstart&&(p(a,A.adler>>>16),p(a,65535&A.adler)),A.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(A.adler=r(A.adler,a.pending_buf,a.pending-o,o)),c(A),o=a.pending,a.pending!==a.pending_buf_size));)f(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(A.adler=r(A.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(A.adler=r(A.adler,a.pending_buf,a.pending-o,o)),c(A),o=a.pending,a.pending===a.pending_buf_size)){g=1;break}g=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,f(a,g)}while(0!==g);a.gzhead.hcrc&&a.pending>o&&(A.adler=r(A.adler,a.pending_buf,a.pending-o,o)),0===g&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(A.adler=r(A.adler,a.pending_buf,a.pending-o,o)),c(A),o=a.pending,a.pending===a.pending_buf_size)){g=1;break}g=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,f(a,g)}while(0!==g);a.gzhead.hcrc&&a.pending>o&&(A.adler=r(A.adler,a.pending_buf,a.pending-o,o)),0===g&&(a.status=B)}else a.status=B;if(a.status===B&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&c(A),a.pending+2<=a.pending_buf_size&&(f(a,255&A.adler),f(a,A.adler>>8&255),A.adler=0,a.status=C)):a.status=C),0!==a.pending){if(c(A),0===A.avail_out)return a.last_flush=-1,0}else if(0===A.avail_in&&d(t)<=d(e)&&4!==t)return E(A,-5);if(a.status===Q&&0!==A.avail_in)return E(A,-5);if(0!==A.avail_in||0!==a.lookahead||0!==t&&a.status!==Q){var w=2===a.strategy?function(A,t){for(var e;;){if(0===A.lookahead&&(m(A),0===A.lookahead)){if(0===t)return 1;break}if(A.match_length=0,e=s._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,e&&(u(A,!1),0===A.strm.avail_out))return 1}return A.insert=0,4===t?(u(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(u(A,!1),0===A.strm.avail_out)?1:2}(a,t):3===a.strategy?function(A,t){for(var e,i,a,o,r=A.window;;){if(A.lookahead<=I){if(m(A),A.lookahead<=I&&0===t)return 1;if(0===A.lookahead)break}if(A.match_length=0,A.lookahead>=3&&A.strstart>0&&(i=r[a=A.strstart-1])===r[++a]&&i===r[++a]&&i===r[++a]){o=A.strstart+I;do{}while(i===r[++a]&&i===r[++a]&&i===r[++a]&&i===r[++a]&&i===r[++a]&&i===r[++a]&&i===r[++a]&&i===r[++a]&&a<o);A.match_length=I-(o-a),A.match_length>A.lookahead&&(A.match_length=A.lookahead)}if(A.match_length>=3?(e=s._tr_tally(A,1,A.match_length-3),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0):(e=s._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++),e&&(u(A,!1),0===A.strm.avail_out))return 1}return A.insert=0,4===t?(u(A,!0),0===A.strm.avail_out?3:4):A.last_lit&&(u(A,!1),0===A.strm.avail_out)?1:2}(a,t):i[a.level].func(a,t);if(3!==w&&4!==w||(a.status=Q),1===w||3===w)return 0===A.avail_out&&(a.last_flush=-1),0;if(2===w&&(1===t?s._tr_align(a):5!==t&&(s._tr_stored_block(a,0,0,!1),3===t&&(h(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),c(A),0===A.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(f(a,255&A.adler),f(a,A.adler>>8&255),f(a,A.adler>>16&255),f(a,A.adler>>24&255),f(a,255&A.total_in),f(a,A.total_in>>8&255),f(a,A.total_in>>16&255),f(a,A.total_in>>24&255)):(p(a,A.adler>>>16),p(a,65535&A.adler)),c(A),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},t.deflateEnd=function(A){var t;return A&&A.state?42!==(t=A.state.status)&&69!==t&&73!==t&&91!==t&&t!==B&&t!==C&&t!==Q?E(A,n):(A.state=null,t===C?E(A,-3):0):n},t.deflateSetDictionary=function(A,t){var e,i,s,r,g,I,l,B,C=t.length;if(!A||!A.state)return n;if(2===(r=(e=A.state).wrap)||1===r&&42!==e.status||e.lookahead)return n;for(1===r&&(A.adler=o(A.adler,t,C,0)),e.wrap=0,C>=e.w_size&&(0===r&&(h(e.head),e.strstart=0,e.block_start=0,e.insert=0),B=new a.Buf8(e.w_size),a.arraySet(B,t,C-e.w_size,e.w_size,0),t=B,C=e.w_size),g=A.avail_in,I=A.next_in,l=A.input,A.avail_in=C,A.next_in=0,A.input=t,m(e);e.lookahead>=3;){i=e.strstart,s=e.lookahead-2;do{e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+3-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++}while(--s);e.strstart=i,e.lookahead=2,m(e)}return e.strstart+=e.lookahead,e.block_start=e.strstart,e.insert=e.lookahead,e.lookahead=0,e.match_length=e.prev_length=2,e.match_available=0,A.next_in=I,A.input=l,A.avail_in=g,e.wrap=r,0},t.deflateInfo=\"pako deflate (from Nodeca project)\"},\"./node_modules/pako/lib/zlib/gzheader.js\":A=>{\"use strict\";A.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},\"./node_modules/pako/lib/zlib/inffast.js\":A=>{\"use strict\";A.exports=function(A,t){var e,i,a,s,o,r,g,n,I,l,B,C,Q,E,d,h,c,u,f,p,w,m,y,D,_;e=A.state,i=A.next_in,D=A.input,a=i+(A.avail_in-5),s=A.next_out,_=A.output,o=s-(t-A.avail_out),r=s+(A.avail_out-257),g=e.dmax,n=e.wsize,I=e.whave,l=e.wnext,B=e.window,C=e.hold,Q=e.bits,E=e.lencode,d=e.distcode,h=(1<<e.lenbits)-1,c=(1<<e.distbits)-1;A:do{Q<15&&(C+=D[i++]<<Q,Q+=8,C+=D[i++]<<Q,Q+=8),u=E[C&h];t:for(;;){if(C>>>=f=u>>>24,Q-=f,0==(f=u>>>16&255))_[s++]=65535&u;else{if(!(16&f)){if(0==(64&f)){u=E[(65535&u)+(C&(1<<f)-1)];continue t}if(32&f){e.mode=12;break A}A.msg=\"invalid literal/length code\",e.mode=30;break A}p=65535&u,(f&=15)&&(Q<f&&(C+=D[i++]<<Q,Q+=8),p+=C&(1<<f)-1,C>>>=f,Q-=f),Q<15&&(C+=D[i++]<<Q,Q+=8,C+=D[i++]<<Q,Q+=8),u=d[C&c];e:for(;;){if(C>>>=f=u>>>24,Q-=f,!(16&(f=u>>>16&255))){if(0==(64&f)){u=d[(65535&u)+(C&(1<<f)-1)];continue e}A.msg=\"invalid distance code\",e.mode=30;break A}if(w=65535&u,Q<(f&=15)&&(C+=D[i++]<<Q,(Q+=8)<f&&(C+=D[i++]<<Q,Q+=8)),(w+=C&(1<<f)-1)>g){A.msg=\"invalid distance too far back\",e.mode=30;break A}if(C>>>=f,Q-=f,w>(f=s-o)){if((f=w-f)>I&&e.sane){A.msg=\"invalid distance too far back\",e.mode=30;break A}if(m=0,y=B,0===l){if(m+=n-f,f<p){p-=f;do{_[s++]=B[m++]}while(--f);m=s-w,y=_}}else if(l<f){if(m+=n+l-f,(f-=l)<p){p-=f;do{_[s++]=B[m++]}while(--f);if(m=0,l<p){p-=f=l;do{_[s++]=B[m++]}while(--f);m=s-w,y=_}}}else if(m+=l-f,f<p){p-=f;do{_[s++]=B[m++]}while(--f);m=s-w,y=_}for(;p>2;)_[s++]=y[m++],_[s++]=y[m++],_[s++]=y[m++],p-=3;p&&(_[s++]=y[m++],p>1&&(_[s++]=y[m++]))}else{m=s-w;do{_[s++]=_[m++],_[s++]=_[m++],_[s++]=_[m++],p-=3}while(p>2);p&&(_[s++]=_[m++],p>1&&(_[s++]=_[m++]))}break}}break}}while(i<a&&s<r);i-=p=Q>>3,C&=(1<<(Q-=p<<3))-1,A.next_in=i,A.next_out=s,A.avail_in=i<a?a-i+5:5-(i-a),A.avail_out=s<r?r-s+257:257-(s-r),e.hold=C,e.bits=Q}},\"./node_modules/pako/lib/zlib/inflate.js\":(A,t,e)=>{\"use strict\";var i=e(\"./node_modules/pako/lib/utils/common.js\"),a=e(\"./node_modules/pako/lib/zlib/adler32.js\"),s=e(\"./node_modules/pako/lib/zlib/crc32.js\"),o=e(\"./node_modules/pako/lib/zlib/inffast.js\"),r=e(\"./node_modules/pako/lib/zlib/inftrees.js\"),g=-2,n=12,I=30;function l(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(A){var t;return A&&A.state?(t=A.state,A.total_in=A.total_out=t.total=0,A.msg=\"\",t.wrap&&(A.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):g}function Q(A){var t;return A&&A.state?((t=A.state).wsize=0,t.whave=0,t.wnext=0,C(A)):g}function E(A,t){var e,i;return A&&A.state?(i=A.state,t<0?(e=0,t=-t):(e=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,Q(A))):g}function d(A,t){var e,i;return A?(i=new B,A.state=i,i.window=null,0!==(e=E(A,t))&&(A.state=null),e):g}var h,c,u=!0;function f(A){if(u){var t;for(h=new i.Buf32(512),c=new i.Buf32(32),t=0;t<144;)A.lens[t++]=8;for(;t<256;)A.lens[t++]=9;for(;t<280;)A.lens[t++]=7;for(;t<288;)A.lens[t++]=8;for(r(1,A.lens,0,288,h,0,A.work,{bits:9}),t=0;t<32;)A.lens[t++]=5;r(2,A.lens,0,32,c,0,A.work,{bits:5}),u=!1}A.lencode=h,A.lenbits=9,A.distcode=c,A.distbits=5}function p(A,t,e,a){var s,o=A.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),a>=o.wsize?(i.arraySet(o.window,t,e-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>a&&(s=a),i.arraySet(o.window,t,e-a,s,o.wnext),(a-=s)?(i.arraySet(o.window,t,e-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}t.inflateReset=Q,t.inflateReset2=E,t.inflateResetKeep=C,t.inflateInit=function(A){return d(A,15)},t.inflateInit2=d,t.inflate=function(A,t){var e,B,C,Q,E,d,h,c,u,w,m,y,D,_,b,k,v,F,G,x,N,S,L,R,M=0,U=new i.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return g;(e=A.state).mode===n&&(e.mode=13),E=A.next_out,C=A.output,h=A.avail_out,Q=A.next_in,B=A.input,d=A.avail_in,c=e.hold,u=e.bits,w=d,m=h,S=0;A:for(;;)switch(e.mode){case 1:if(0===e.wrap){e.mode=13;break}for(;u<16;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(2&e.wrap&&35615===c){e.check=0,U[0]=255&c,U[1]=c>>>8&255,e.check=s(e.check,U,2,0),c=0,u=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&c)<<8)+(c>>8))%31){A.msg=\"incorrect header check\",e.mode=I;break}if(8!=(15&c)){A.msg=\"unknown compression method\",e.mode=I;break}if(u-=4,N=8+(15&(c>>>=4)),0===e.wbits)e.wbits=N;else if(N>e.wbits){A.msg=\"invalid window size\",e.mode=I;break}e.dmax=1<<N,A.adler=e.check=1,e.mode=512&c?10:n,c=0,u=0;break;case 2:for(;u<16;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(e.flags=c,8!=(255&e.flags)){A.msg=\"unknown compression method\",e.mode=I;break}if(57344&e.flags){A.msg=\"unknown header flags set\",e.mode=I;break}e.head&&(e.head.text=c>>8&1),512&e.flags&&(U[0]=255&c,U[1]=c>>>8&255,e.check=s(e.check,U,2,0)),c=0,u=0,e.mode=3;case 3:for(;u<32;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}e.head&&(e.head.time=c),512&e.flags&&(U[0]=255&c,U[1]=c>>>8&255,U[2]=c>>>16&255,U[3]=c>>>24&255,e.check=s(e.check,U,4,0)),c=0,u=0,e.mode=4;case 4:for(;u<16;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}e.head&&(e.head.xflags=255&c,e.head.os=c>>8),512&e.flags&&(U[0]=255&c,U[1]=c>>>8&255,e.check=s(e.check,U,2,0)),c=0,u=0,e.mode=5;case 5:if(1024&e.flags){for(;u<16;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),512&e.flags&&(U[0]=255&c,U[1]=c>>>8&255,e.check=s(e.check,U,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&((y=e.length)>d&&(y=d),y&&(e.head&&(N=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),i.arraySet(e.head.extra,B,Q,y,N)),512&e.flags&&(e.check=s(e.check,B,y,Q)),d-=y,Q+=y,e.length-=y),e.length))break A;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(0===d)break A;y=0;do{N=B[Q+y++],e.head&&N&&e.length<65536&&(e.head.name+=String.fromCharCode(N))}while(N&&y<d);if(512&e.flags&&(e.check=s(e.check,B,y,Q)),d-=y,Q+=y,N)break A}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(0===d)break A;y=0;do{N=B[Q+y++],e.head&&N&&e.length<65536&&(e.head.comment+=String.fromCharCode(N))}while(N&&y<d);if(512&e.flags&&(e.check=s(e.check,B,y,Q)),d-=y,Q+=y,N)break A}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;u<16;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(c!==(65535&e.check)){A.msg=\"header crc mismatch\",e.mode=I;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),A.adler=e.check=0,e.mode=n;break;case 10:for(;u<32;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}A.adler=e.check=l(c),c=0,u=0,e.mode=11;case 11:if(0===e.havedict)return A.next_out=E,A.avail_out=h,A.next_in=Q,A.avail_in=d,e.hold=c,e.bits=u,2;A.adler=e.check=1,e.mode=n;case n:if(5===t||6===t)break A;case 13:if(e.last){c>>>=7&u,u-=7&u,e.mode=27;break}for(;u<3;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}switch(e.last=1&c,u-=1,3&(c>>>=1)){case 0:e.mode=14;break;case 1:if(f(e),e.mode=20,6===t){c>>>=2,u-=2;break A}break;case 2:e.mode=17;break;case 3:A.msg=\"invalid block type\",e.mode=I}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){A.msg=\"invalid stored block lengths\",e.mode=I;break}if(e.length=65535&c,c=0,u=0,e.mode=15,6===t)break A;case 15:e.mode=16;case 16:if(y=e.length){if(y>d&&(y=d),y>h&&(y=h),0===y)break A;i.arraySet(C,B,Q,y,E),d-=y,Q+=y,h-=y,E+=y,e.length-=y;break}e.mode=n;break;case 17:for(;u<14;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(e.nlen=257+(31&c),c>>>=5,u-=5,e.ndist=1+(31&c),c>>>=5,u-=5,e.ncode=4+(15&c),c>>>=4,u-=4,e.nlen>286||e.ndist>30){A.msg=\"too many length or distance symbols\",e.mode=I;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;u<3;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}e.lens[J[e.have++]]=7&c,c>>>=3,u-=3}for(;e.have<19;)e.lens[J[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,L={bits:e.lenbits},S=r(0,e.lens,0,19,e.lencode,0,e.work,L),e.lenbits=L.bits,S){A.msg=\"invalid code lengths set\",e.mode=I;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;k=(M=e.lencode[c&(1<<e.lenbits)-1])>>>16&255,v=65535&M,!((b=M>>>24)<=u);){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(v<16)c>>>=b,u-=b,e.lens[e.have++]=v;else{if(16===v){for(R=b+2;u<R;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(c>>>=b,u-=b,0===e.have){A.msg=\"invalid bit length repeat\",e.mode=I;break}N=e.lens[e.have-1],y=3+(3&c),c>>>=2,u-=2}else if(17===v){for(R=b+3;u<R;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}u-=b,N=0,y=3+(7&(c>>>=b)),c>>>=3,u-=3}else{for(R=b+7;u<R;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}u-=b,N=0,y=11+(127&(c>>>=b)),c>>>=7,u-=7}if(e.have+y>e.nlen+e.ndist){A.msg=\"invalid bit length repeat\",e.mode=I;break}for(;y--;)e.lens[e.have++]=N}}if(e.mode===I)break;if(0===e.lens[256]){A.msg=\"invalid code -- missing end-of-block\",e.mode=I;break}if(e.lenbits=9,L={bits:e.lenbits},S=r(1,e.lens,0,e.nlen,e.lencode,0,e.work,L),e.lenbits=L.bits,S){A.msg=\"invalid literal/lengths set\",e.mode=I;break}if(e.distbits=6,e.distcode=e.distdyn,L={bits:e.distbits},S=r(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,L),e.distbits=L.bits,S){A.msg=\"invalid distances set\",e.mode=I;break}if(e.mode=20,6===t)break A;case 20:e.mode=21;case 21:if(d>=6&&h>=258){A.next_out=E,A.avail_out=h,A.next_in=Q,A.avail_in=d,e.hold=c,e.bits=u,o(A,m),E=A.next_out,C=A.output,h=A.avail_out,Q=A.next_in,B=A.input,d=A.avail_in,c=e.hold,u=e.bits,e.mode===n&&(e.back=-1);break}for(e.back=0;k=(M=e.lencode[c&(1<<e.lenbits)-1])>>>16&255,v=65535&M,!((b=M>>>24)<=u);){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(k&&0==(240&k)){for(F=b,G=k,x=v;k=(M=e.lencode[x+((c&(1<<F+G)-1)>>F)])>>>16&255,v=65535&M,!(F+(b=M>>>24)<=u);){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}c>>>=F,u-=F,e.back+=F}if(c>>>=b,u-=b,e.back+=b,e.length=v,0===k){e.mode=26;break}if(32&k){e.back=-1,e.mode=n;break}if(64&k){A.msg=\"invalid literal/length code\",e.mode=I;break}e.extra=15&k,e.mode=22;case 22:if(e.extra){for(R=e.extra;u<R;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;k=(M=e.distcode[c&(1<<e.distbits)-1])>>>16&255,v=65535&M,!((b=M>>>24)<=u);){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(0==(240&k)){for(F=b,G=k,x=v;k=(M=e.distcode[x+((c&(1<<F+G)-1)>>F)])>>>16&255,v=65535&M,!(F+(b=M>>>24)<=u);){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}c>>>=F,u-=F,e.back+=F}if(c>>>=b,u-=b,e.back+=b,64&k){A.msg=\"invalid distance code\",e.mode=I;break}e.offset=v,e.extra=15&k,e.mode=24;case 24:if(e.extra){for(R=e.extra;u<R;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){A.msg=\"invalid distance too far back\",e.mode=I;break}e.mode=25;case 25:if(0===h)break A;if(y=m-h,e.offset>y){if((y=e.offset-y)>e.whave&&e.sane){A.msg=\"invalid distance too far back\",e.mode=I;break}y>e.wnext?(y-=e.wnext,D=e.wsize-y):D=e.wnext-y,y>e.length&&(y=e.length),_=e.window}else _=C,D=E-e.offset,y=e.length;y>h&&(y=h),h-=y,e.length-=y;do{C[E++]=_[D++]}while(--y);0===e.length&&(e.mode=21);break;case 26:if(0===h)break A;C[E++]=e.length,h--,e.mode=21;break;case 27:if(e.wrap){for(;u<32;){if(0===d)break A;d--,c|=B[Q++]<<u,u+=8}if(m-=h,A.total_out+=m,e.total+=m,m&&(A.adler=e.check=e.flags?s(e.check,C,m,E-m):a(e.check,C,m,E-m)),m=h,(e.flags?c:l(c))!==e.check){A.msg=\"incorrect data check\",e.mode=I;break}c=0,u=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;u<32;){if(0===d)break A;d--,c+=B[Q++]<<u,u+=8}if(c!==(4294967295&e.total)){A.msg=\"incorrect length check\",e.mode=I;break}c=0,u=0}e.mode=29;case 29:S=1;break A;case I:S=-3;break A;case 31:return-4;default:return g}return A.next_out=E,A.avail_out=h,A.next_in=Q,A.avail_in=d,e.hold=c,e.bits=u,(e.wsize||m!==A.avail_out&&e.mode<I&&(e.mode<27||4!==t))&&p(A,A.output,A.next_out,m-A.avail_out)?(e.mode=31,-4):(w-=A.avail_in,m-=A.avail_out,A.total_in+=w,A.total_out+=m,e.total+=m,e.wrap&&m&&(A.adler=e.check=e.flags?s(e.check,C,m,A.next_out-m):a(e.check,C,m,A.next_out-m)),A.data_type=e.bits+(e.last?64:0)+(e.mode===n?128:0)+(20===e.mode||15===e.mode?256:0),(0===w&&0===m||4===t)&&0===S&&(S=-5),S)},t.inflateEnd=function(A){if(!A||!A.state)return g;var t=A.state;return t.window&&(t.window=null),A.state=null,0},t.inflateGetHeader=function(A,t){var e;return A&&A.state?0==(2&(e=A.state).wrap)?g:(e.head=t,t.done=!1,0):g},t.inflateSetDictionary=function(A,t){var e,i=t.length;return A&&A.state?0!==(e=A.state).wrap&&11!==e.mode?g:11===e.mode&&a(1,t,i,0)!==e.check?-3:p(A,t,i,i)?(e.mode=31,-4):(e.havedict=1,0):g},t.inflateInfo=\"pako inflate (from Nodeca project)\"},\"./node_modules/pako/lib/zlib/inftrees.js\":(A,t,e)=>{\"use strict\";var i=e(\"./node_modules/pako/lib/utils/common.js\"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],r=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];A.exports=function(A,t,e,g,n,I,l,B){var C,Q,E,d,h,c,u,f,p,w=B.bits,m=0,y=0,D=0,_=0,b=0,k=0,v=0,F=0,G=0,x=0,N=null,S=0,L=new i.Buf16(16),R=new i.Buf16(16),M=null,U=0;for(m=0;m<=15;m++)L[m]=0;for(y=0;y<g;y++)L[t[e+y]]++;for(b=w,_=15;_>=1&&0===L[_];_--);if(b>_&&(b=_),0===_)return n[I++]=20971520,n[I++]=20971520,B.bits=1,0;for(D=1;D<_&&0===L[D];D++);for(b<D&&(b=D),F=1,m=1;m<=15;m++)if(F<<=1,(F-=L[m])<0)return-1;if(F>0&&(0===A||1!==_))return-1;for(R[1]=0,m=1;m<15;m++)R[m+1]=R[m]+L[m];for(y=0;y<g;y++)0!==t[e+y]&&(l[R[t[e+y]]++]=y);if(0===A?(N=M=l,c=19):1===A?(N=a,S-=257,M=s,U-=257,c=256):(N=o,M=r,c=-1),x=0,y=0,m=D,h=I,k=b,v=0,E=-1,d=(G=1<<b)-1,1===A&&G>852||2===A&&G>592)return 1;for(;;){u=m-v,l[y]<c?(f=0,p=l[y]):l[y]>c?(f=M[U+l[y]],p=N[S+l[y]]):(f=96,p=0),C=1<<m-v,D=Q=1<<k;do{n[h+(x>>v)+(Q-=C)]=u<<24|f<<16|p|0}while(0!==Q);for(C=1<<m-1;x&C;)C>>=1;if(0!==C?(x&=C-1,x+=C):x=0,y++,0==--L[m]){if(m===_)break;m=t[e+l[y]]}if(m>b&&(x&d)!==E){for(0===v&&(v=b),h+=D,F=1<<(k=m-v);k+v<_&&!((F-=L[k+v])<=0);)k++,F<<=1;if(G+=1<<k,1===A&&G>852||2===A&&G>592)return 1;n[E=x&d]=b<<24|k<<16|h-I|0}}return 0!==x&&(n[h+x]=m-v<<24|64<<16|0),B.bits=b,0}},\"./node_modules/pako/lib/zlib/messages.js\":A=>{\"use strict\";A.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},\"./node_modules/pako/lib/zlib/trees.js\":(A,t,e)=>{\"use strict\";var i=e(\"./node_modules/pako/lib/utils/common.js\");function a(A){for(var t=A.length;--t>=0;)A[t]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],n=new Array(576);a(n);var I=new Array(60);a(I);var l=new Array(512);a(l);var B=new Array(256);a(B);var C=new Array(29);a(C);var Q,E,d,h=new Array(30);function c(A,t,e,i,a){this.static_tree=A,this.extra_bits=t,this.extra_base=e,this.elems=i,this.max_length=a,this.has_stree=A&&A.length}function u(A,t){this.dyn_tree=A,this.max_code=0,this.stat_desc=t}function f(A){return A<256?l[A]:l[256+(A>>>7)]}function p(A,t){A.pending_buf[A.pending++]=255&t,A.pending_buf[A.pending++]=t>>>8&255}function w(A,t,e){A.bi_valid>16-e?(A.bi_buf|=t<<A.bi_valid&65535,p(A,A.bi_buf),A.bi_buf=t>>16-A.bi_valid,A.bi_valid+=e-16):(A.bi_buf|=t<<A.bi_valid&65535,A.bi_valid+=e)}function m(A,t,e){w(A,e[2*t],e[2*t+1])}function y(A,t){var e=0;do{e|=1&A,A>>>=1,e<<=1}while(--t>0);return e>>>1}function D(A,t,e){var i,a,s=new Array(16),o=0;for(i=1;i<=15;i++)s[i]=o=o+e[i-1]<<1;for(a=0;a<=t;a++){var r=A[2*a+1];0!==r&&(A[2*a]=y(s[r]++,r))}}function _(A){var t;for(t=0;t<286;t++)A.dyn_ltree[2*t]=0;for(t=0;t<30;t++)A.dyn_dtree[2*t]=0;for(t=0;t<19;t++)A.bl_tree[2*t]=0;A.dyn_ltree[512]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0}function b(A){A.bi_valid>8?p(A,A.bi_buf):A.bi_valid>0&&(A.pending_buf[A.pending++]=A.bi_buf),A.bi_buf=0,A.bi_valid=0}function k(A,t,e,i){var a=2*t,s=2*e;return A[a]<A[s]||A[a]===A[s]&&i[t]<=i[e]}function v(A,t,e){for(var i=A.heap[e],a=e<<1;a<=A.heap_len&&(a<A.heap_len&&k(t,A.heap[a+1],A.heap[a],A.depth)&&a++,!k(t,i,A.heap[a],A.depth));)A.heap[e]=A.heap[a],e=a,a<<=1;A.heap[e]=i}function F(A,t,e){var i,a,r,g,n=0;if(0!==A.last_lit)do{i=A.pending_buf[A.d_buf+2*n]<<8|A.pending_buf[A.d_buf+2*n+1],a=A.pending_buf[A.l_buf+n],n++,0===i?m(A,a,t):(m(A,(r=B[a])+256+1,t),0!==(g=s[r])&&w(A,a-=C[r],g),m(A,r=f(--i),e),0!==(g=o[r])&&w(A,i-=h[r],g))}while(n<A.last_lit);m(A,256,t)}function G(A,t){var e,i,a,s=t.dyn_tree,o=t.stat_desc.static_tree,r=t.stat_desc.has_stree,g=t.stat_desc.elems,n=-1;for(A.heap_len=0,A.heap_max=573,e=0;e<g;e++)0!==s[2*e]?(A.heap[++A.heap_len]=n=e,A.depth[e]=0):s[2*e+1]=0;for(;A.heap_len<2;)s[2*(a=A.heap[++A.heap_len]=n<2?++n:0)]=1,A.depth[a]=0,A.opt_len--,r&&(A.static_len-=o[2*a+1]);for(t.max_code=n,e=A.heap_len>>1;e>=1;e--)v(A,s,e);a=g;do{e=A.heap[1],A.heap[1]=A.heap[A.heap_len--],v(A,s,1),i=A.heap[1],A.heap[--A.heap_max]=e,A.heap[--A.heap_max]=i,s[2*a]=s[2*e]+s[2*i],A.depth[a]=(A.depth[e]>=A.depth[i]?A.depth[e]:A.depth[i])+1,s[2*e+1]=s[2*i+1]=a,A.heap[1]=a++,v(A,s,1)}while(A.heap_len>=2);A.heap[--A.heap_max]=A.heap[1],function(A,t){var e,i,a,s,o,r,g=t.dyn_tree,n=t.max_code,I=t.stat_desc.static_tree,l=t.stat_desc.has_stree,B=t.stat_desc.extra_bits,C=t.stat_desc.extra_base,Q=t.stat_desc.max_length,E=0;for(s=0;s<=15;s++)A.bl_count[s]=0;for(g[2*A.heap[A.heap_max]+1]=0,e=A.heap_max+1;e<573;e++)(s=g[2*g[2*(i=A.heap[e])+1]+1]+1)>Q&&(s=Q,E++),g[2*i+1]=s,i>n||(A.bl_count[s]++,o=0,i>=C&&(o=B[i-C]),r=g[2*i],A.opt_len+=r*(s+o),l&&(A.static_len+=r*(I[2*i+1]+o)));if(0!==E){do{for(s=Q-1;0===A.bl_count[s];)s--;A.bl_count[s]--,A.bl_count[s+1]+=2,A.bl_count[Q]--,E-=2}while(E>0);for(s=Q;0!==s;s--)for(i=A.bl_count[s];0!==i;)(a=A.heap[--e])>n||(g[2*a+1]!==s&&(A.opt_len+=(s-g[2*a+1])*g[2*a],g[2*a+1]=s),i--)}}(A,t),D(s,n,A.bl_count)}function x(A,t,e){var i,a,s=-1,o=t[1],r=0,g=7,n=4;for(0===o&&(g=138,n=3),t[2*(e+1)+1]=65535,i=0;i<=e;i++)a=o,o=t[2*(i+1)+1],++r<g&&a===o||(r<n?A.bl_tree[2*a]+=r:0!==a?(a!==s&&A.bl_tree[2*a]++,A.bl_tree[32]++):r<=10?A.bl_tree[34]++:A.bl_tree[36]++,r=0,s=a,0===o?(g=138,n=3):a===o?(g=6,n=3):(g=7,n=4))}function N(A,t,e){var i,a,s=-1,o=t[1],r=0,g=7,n=4;for(0===o&&(g=138,n=3),i=0;i<=e;i++)if(a=o,o=t[2*(i+1)+1],!(++r<g&&a===o)){if(r<n)do{m(A,a,A.bl_tree)}while(0!=--r);else 0!==a?(a!==s&&(m(A,a,A.bl_tree),r--),m(A,16,A.bl_tree),w(A,r-3,2)):r<=10?(m(A,17,A.bl_tree),w(A,r-3,3)):(m(A,18,A.bl_tree),w(A,r-11,7));r=0,s=a,0===o?(g=138,n=3):a===o?(g=6,n=3):(g=7,n=4)}}a(h);var S=!1;function L(A,t,e,a){w(A,0+(a?1:0),3),function(A,t,e,a){b(A),p(A,e),p(A,~e),i.arraySet(A.pending_buf,A.window,t,e,A.pending),A.pending+=e}(A,t,e)}t._tr_init=function(A){S||(function(){var A,t,e,i,a,g=new Array(16);for(e=0,i=0;i<28;i++)for(C[i]=e,A=0;A<1<<s[i];A++)B[e++]=i;for(B[e-1]=i,a=0,i=0;i<16;i++)for(h[i]=a,A=0;A<1<<o[i];A++)l[a++]=i;for(a>>=7;i<30;i++)for(h[i]=a<<7,A=0;A<1<<o[i]-7;A++)l[256+a++]=i;for(t=0;t<=15;t++)g[t]=0;for(A=0;A<=143;)n[2*A+1]=8,A++,g[8]++;for(;A<=255;)n[2*A+1]=9,A++,g[9]++;for(;A<=279;)n[2*A+1]=7,A++,g[7]++;for(;A<=287;)n[2*A+1]=8,A++,g[8]++;for(D(n,287,g),A=0;A<30;A++)I[2*A+1]=5,I[2*A]=y(A,5);Q=new c(n,s,257,286,15),E=new c(I,o,0,30,15),d=new c(new Array(0),r,0,19,7)}(),S=!0),A.l_desc=new u(A.dyn_ltree,Q),A.d_desc=new u(A.dyn_dtree,E),A.bl_desc=new u(A.bl_tree,d),A.bi_buf=0,A.bi_valid=0,_(A)},t._tr_stored_block=L,t._tr_flush_block=function(A,t,e,i){var a,s,o=0;A.level>0?(2===A.strm.data_type&&(A.strm.data_type=function(A){var t,e=4093624447;for(t=0;t<=31;t++,e>>>=1)if(1&e&&0!==A.dyn_ltree[2*t])return 0;if(0!==A.dyn_ltree[18]||0!==A.dyn_ltree[20]||0!==A.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==A.dyn_ltree[2*t])return 1;return 0}(A)),G(A,A.l_desc),G(A,A.d_desc),o=function(A){var t;for(x(A,A.dyn_ltree,A.l_desc.max_code),x(A,A.dyn_dtree,A.d_desc.max_code),G(A,A.bl_desc),t=18;t>=3&&0===A.bl_tree[2*g[t]+1];t--);return A.opt_len+=3*(t+1)+5+5+4,t}(A),a=A.opt_len+3+7>>>3,(s=A.static_len+3+7>>>3)<=a&&(a=s)):a=s=e+5,e+4<=a&&-1!==t?L(A,t,e,i):4===A.strategy||s===a?(w(A,2+(i?1:0),3),F(A,n,I)):(w(A,4+(i?1:0),3),function(A,t,e,i){var a;for(w(A,t-257,5),w(A,e-1,5),w(A,i-4,4),a=0;a<i;a++)w(A,A.bl_tree[2*g[a]+1],3);N(A,A.dyn_ltree,t-1),N(A,A.dyn_dtree,e-1)}(A,A.l_desc.max_code+1,A.d_desc.max_code+1,o+1),F(A,A.dyn_ltree,A.dyn_dtree)),_(A),i&&b(A)},t._tr_tally=function(A,t,e){return A.pending_buf[A.d_buf+2*A.last_lit]=t>>>8&255,A.pending_buf[A.d_buf+2*A.last_lit+1]=255&t,A.pending_buf[A.l_buf+A.last_lit]=255&e,A.last_lit++,0===t?A.dyn_ltree[2*e]++:(A.matches++,t--,A.dyn_ltree[2*(B[e]+256+1)]++,A.dyn_dtree[2*f(t)]++),A.last_lit===A.lit_bufsize-1},t._tr_align=function(A){w(A,2,3),m(A,256,n),function(A){16===A.bi_valid?(p(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):A.bi_valid>=8&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(A)}},\"./node_modules/pako/lib/zlib/zstream.js\":A=>{\"use strict\";A.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},\"./node_modules/strnum/strnum.js\":A=>{const t=/^[-+]?0x[a-fA-F0-9]+$/,e=/^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/,i={hex:!0,leadingZeros:!0,decimalPoint:\".\"};A.exports=function(A,a={}){if(a=Object.assign({},i,a),!A||\"string\"!=typeof A)return A;let s=A.trim();if(void 0!==a.skipLike&&a.skipLike.test(s))return A;if(a.hex&&t.test(s))return Number.parseInt(s,16);{const t=e.exec(s);if(t){t[1];const e=t[2],i=t[3];return t[4]||t[6],1===e.length&&\".\"===i[0]?Number(A):!a.leadingZeros&&e.length>0?A:Number(s)}return A}}},\"./src/index.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{FLIPPED_DIAGONALLY_FLAG:()=>o.FLIPPED_DIAGONALLY_FLAG,FLIPPED_HORIZONTALLY_FLAG:()=>o.FLIPPED_HORIZONTALLY_FLAG,FLIPPED_VERTICALLY_FLAG:()=>o.FLIPPED_VERTICALLY_FLAG,TiledEntity:()=>s.TiledEntity,TiledLayer:()=>o.TiledLayer,TiledLayerComponent:()=>I.TiledLayerComponent,TiledMap:()=>a.TiledMap,TiledMapFormat:()=>i.TiledMapFormat,TiledMapResource:()=>i.TiledMapResource,TiledObject:()=>r.TiledObject,TiledObjectComponent:()=>n.TiledObjectComponent,TiledObjectGroup:()=>r.TiledObjectGroup,TiledTileset:()=>g.TiledTileset,TiledTilesetTile:()=>g.TiledTilesetTile,getCanonicalGid:()=>o.getCanonicalGid,getProperty:()=>s.getProperty,isFlippedDiagonally:()=>o.isFlippedDiagonally,isFlippedHorizontally:()=>o.isFlippedHorizontally,isFlippedVertically:()=>o.isFlippedVertically,parseExternalJson:()=>g.parseExternalJson,parseExternalTsx:()=>g.parseExternalTsx}),e(\"./src/tiled-types.ts\");var i=e(\"./src/tiled-map-resource.ts\"),a=e(\"./src/tiled-map-parser.ts\"),s=e(\"./src/tiled-entity.ts\"),o=e(\"./src/tiled-layer.ts\"),r=e(\"./src/tiled-object.ts\"),g=e(\"./src/tiled-tileset.ts\"),n=e(\"./src/tiled-object-component.ts\"),I=e(\"./src/tiled-layer-component.ts\");e(\"./src/raw-tiled-layer.ts\"),e(\"./src/raw-tiled-map.ts\"),e(\"./src/raw-tiled-object.ts\"),e(\"./src/raw-tiled-text.ts\"),e(\"./src/raw-tiled-tileset.ts\"),e(\"./src/raw-tileset-tile.ts\")},\"./src/raw-tiled-layer.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./src/raw-tiled-map.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./src/raw-tiled-object.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./src/raw-tiled-text.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./src/raw-tiled-tileset.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./src/raw-tileset-tile.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./src/tiled-entity.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledEntity:()=>a,getProperty:()=>i});const i=(A,t)=>{if(Array.isArray(A))return null==A?void 0:A.filter((A=>{var e;return(null===(e=A.name)||void 0===e?void 0:e.toLocaleLowerCase())===t.toLocaleLowerCase()}))[0]};class a{constructor(){this.properties=[]}getProperty(A){return i(this.properties,A)}}},\"./src/tiled-layer-component.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledLayerComponent:()=>a});var i=e(\"excalibur\");class a extends i.Component{constructor(A){super(),this.layer=A,this.type=\"ex.tiledlayer\"}}},\"./src/tiled-layer.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{FLIPPED_DIAGONALLY_FLAG:()=>r,FLIPPED_HORIZONTALLY_FLAG:()=>s,FLIPPED_VERTICALLY_FLAG:()=>o,TiledLayer:()=>B,getCanonicalGid:()=>l,isFlippedDiagonally:()=>I,isFlippedHorizontally:()=>g,isFlippedVertically:()=>n});var i=e(\"./src/tiled-entity.ts\"),a=e(\"excalibur\");const s=2147483648,o=1073741824,r=536870912,g=A=>!!(A&s),n=A=>!!(A&o),I=A=>!!(A&r),l=A=>A&~(s|o|r);class B extends i.TiledEntity{constructor(){super(...arguments),this.offset=a.Vector.Zero,this.parallaxFactor=null,this.encoding=\"csv\"}static parse(A){var t,e,i,s,o,r;if(\"tilelayer\"!==A.type)throw Error(\"Cannot parse a non tilelayer type layer\");const g=new B;return g.id=+A.id,g.name=A.name,g.data=A.data,g.offset=(0,a.vec)(null!==(t=A.offsetx)&&void 0!==t?t:0,null!==(e=A.offsety)&&void 0!==e?e:0),g.parallaxFactor=A.parallaxx||A.parallaxy?(0,a.vec)(null!==(i=A.parallaxx)&&void 0!==i?i:1,null!==(s=A.parallaxy)&&void 0!==s?s:1):null,g.width=A.width,g.height=A.height,g.encoding=null!==(o=A.encoding)&&void 0!==o?o:\"csv\",g.compression=A.compression,g.order=A.order,g.properties=null!==(r=A.properties)&&void 0!==r?r:[],g.rawLayer=A,g}}},\"./src/tiled-map-parser.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledMap:()=>I});var i=e(\"./node_modules/fast-xml-parser/src/parser.js\"),a=e(\"./node_modules/pako/index.js\"),s=e(\"./node_modules/zstddec/dist/zstddec.modern.js\"),o=e(\"./src/tiled-layer.ts\"),r=e(\"./src/tiled-object.ts\"),g=e(\"./src/tiled-tileset.ts\"),n=function(A,t,e,i){return new(e||(e=Promise))((function(a,s){function o(A){try{g(i.next(A))}catch(A){s(A)}}function r(A){try{g(i.throw(A))}catch(A){s(A)}}function g(A){var t;A.done?a(A.value):(t=A.value,t instanceof e?t:new e((function(A){A(t)}))).then(o,r)}g((i=i.apply(A,t||[])).next())}))};class I{constructor(){this.layers=[],this.tileSets=[],this.objectGroups=[]}getExcaliburObjects(){return this.getObjectLayerByProperty(\"excalibur\",!0)}getObjects(){var A;return null!==(A=this.objectGroups.filter((A=>{var t;return!(null===(t=A.getProperty(\"excalibur-exclude\"))||void 0===t?void 0:t.value)})))&&void 0!==A?A:[]}getObjectLayerByName(A){return this.objectGroups.filter((t=>t.name===A))[0]}getObjectLayerByProperty(A,t){return this.objectGroups.filter((e=>{var i;return(null===(i=e.getProperty(A))||void 0===i?void 0:i.value)===t}))}getTileLayerByName(A){return this.layers.filter((t=>t.name===A))[0]}getTileLayersByProperty(A,t){return this.layers.filter((e=>{var i;return(null===(i=e.getProperty(A))||void 0===i?void 0:i.value)===t}))}static fromTmx(A){var t,e,a,s,o,r,g,l,B,C,Q,E,d,h,c,u;return n(this,void 0,void 0,(function*(){const n=(A,t,e=!1)=>{A[t]?(A[t+(e?\"s\":\"\")]=Array.isArray(A[t])?A[t]:[A[t]],e&&delete A[t]):A[t+(e?\"s\":\"\")]=[]},f=i.parse(A,{attributeNamePrefix:\"\",textNodeName:\"#text\",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,parseTrueNumberOnly:!1,arrayMode:!1,stopNodes:[\"parse-me-as-string\"]}).map;n(f,\"layer\",!0);for(let A of f.layers)A.type=null!==(t=A.type)&&void 0!==t?t:\"tilelayer\",A.encoding=A.data.encoding,A.compression=A.data.compression,\"csv\"===A.encoding?A.data=A.data[\"#text\"].split(\",\").map((A=>+A)):A.data=A.data[\"#text\"],A.properties=null!==(a=null===(e=A.properties)||void 0===e?void 0:e.property)&&void 0!==a?a:[],n(A,\"properties\");f.objectgroup=null!==(s=f.objectgroup)&&void 0!==s?s:[];let p=Array.isArray(f.objectgroup)?f.objectgroup:[f.objectgroup];for(let A of p)if(A.type=null!==(o=A.type)&&void 0!==o?o:\"objectgroup\",A.properties=null!==(g=null===(r=A.properties)||void 0===r?void 0:r.property)&&void 0!==g?g:[],n(A,\"properties\"),A.object){A.objects=Array.isArray(A.object)?A.object:[A.object],A.objects.forEach((A=>{var t,e;return A.properties=null!==(e=null===(t=A.properties)||void 0===t?void 0:t.property)&&void 0!==e?e:[]})),A.objects.forEach((A=>n(A,\"properties\"))),delete A.object;for(let t of A.objects)t.text&&(t.text.text=t.text[\"#text\"],t.text.halign=null!==(l=t.text.halign)&&void 0!==l?l:\"left\",t.text.valign=null!==(B=t.text.valign)&&void 0!==B?B:\"top\",t.text.fontfamily=null!==(C=t.text.fontfamily)&&void 0!==C?C:\"sans-serif\",t.text.pixelsize=+(null!==(Q=t.text.pixelsize)&&void 0!==Q?Q:16),t.text.kerning=!!t.text.kerning,t.text.italic=!!t.text.italic,t.text.bold=!!t.text.bold,t.text.underline=!!t.text.underline,t.text.strikeout=!!t.text.strikeout,t.text.color=null!==(E=t.text.color)&&void 0!==E?E:\"#000000\"),\"\"===t.point&&(t.point=!0),\"\"===t.ellipse&&(t.ellipse=!0),t.polyline&&(t.polyline=t.polyline.points.split(\" \").map((A=>{const t=A.split(\",\");return{x:+t[0],y:+t[1]}}))),t.polygon&&(t.polygon=t.polygon.points.split(\" \").map((A=>{const t=A.split(\",\");return{x:+t[0],y:+t[1]}})));f.layers.push(A)}delete f.objectgroup,n(f,\"imagelayer\",!0);for(let A of f.imagelayers)A.type=null!==(d=A.type)&&void 0!==d?d:\"imagelayer\",A.image=A.image.source,A.properties=null!==(c=null===(h=A.properties)||void 0===h?void 0:h.property)&&void 0!==c?c:[],n(A,\"properties\"),f.layers.push(A);delete f.imagelayer,n(f,\"tileset\",!0);for(let A of f.tilesets)A.source||(A.image&&(A.imagewidth=A.image.width,A.imageheight=A.image.height,A.image=A.image.source),A.objectalignment=null!==(u=A.objectalignment)&&void 0!==u?u:\"unspecified\",n(A,\"tile\",!0),A.tiles.forEach((A=>{var t;(null===(t=A.image)||void 0===t?void 0:t.source)&&(A.image=A.image.source),A.objectgroup&&(A.objectgroup.type=\"objectgroup\",n(A.objectgroup,\"object\",!0))})));return yield I._fromRawTiledMap(f)}))}static fromJson(A){return n(this,void 0,void 0,(function*(){return yield I._fromRawTiledMap(A)}))}static _fromRawTiledMap(A){return n(this,void 0,void 0,(function*(){yield I._decompresslayers(A);const t=new I;t.orientation=A.orientation,t.rawMap=A,t.width=+A.width,t.height=+A.height,t.tileWidth=+A.tilewidth,t.tileHeight=+A.tileheight,l(A);for(let e of A.layers)\"tilelayer\"==e.type&&t.layers.push(o.TiledLayer.parse(e)),\"objectgroup\"==e.type&&t.objectGroups.push(r.TiledObjectGroup.parse(e));for(let e of A.tilesets)e.source||t.tileSets.push(g.TiledTileset.parse(e));return t}))}static _decompresslayers(A){var t;return n(this,void 0,void 0,(function*(){if(A.layers)for(var e of A.layers)\"string\"==typeof e.data?\"base64\"===e.encoding&&(e.data=yield B.decompressBase64(e.data,e.encoding,null!==(t=e.compression)&&void 0!==t?t:\"\")):e.data=B.decompressCsv(e.data);return A}))}}const l=A=>{let t=0;for(let e of A.layers)e.order=t++},B={decompressCsv:A=>A,decompressBase64:(A,t,e)=>{var i,o,r,g,n,I;if(A.length%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var l=\"+\".charCodeAt(0),B=\"/\".charCodeAt(0),C=\"0\".charCodeAt(0),Q=\"a\".charCodeAt(0),E=\"A\".charCodeAt(0),d=\"-\".charCodeAt(0),h=\"_\".charCodeAt(0);function c(A){var t=A.charCodeAt(0);if(t===l||t===d)return 62;if(t===B||t===h)return 63;if(t<C)return-1;if(t<C+10)return t-C+26+26;if(t<E+26)return t-E;if(t<Q+26)return t-Q+26;throw Error(\"Could not decode elt\")}var u=A.length;n=\"=\"===A.charAt(u-2)?2:\"=\"===A.charAt(u-1)?1:0,I=new Uint8Array(3*A.length/4-n),r=n>0?A.length-4:A.length;var f=0;function p(A){I[f++]=A}for(i=0,o=0;i<r;i+=4,o+=3)p((16711680&(g=c(A.charAt(i))<<18|c(A.charAt(i+1))<<12|c(A.charAt(i+2))<<6|c(A.charAt(i+3))))>>16),p((65280&g)>>8),p(255&g);return 2===n?p(255&(g=c(A.charAt(i))<<2|c(A.charAt(i+1))>>4)):1===n&&(p((g=c(A.charAt(i))<<10|c(A.charAt(i+1))<<4|c(A.charAt(i+2))>>2)>>8&255),p(255&g)),new Promise((A=>{const t=function(A){for(var t=0,e=A.length-1;e>=0;e--)t=256*t+1*A[e];return t};if(\"zlib\"===e||\"gzip\"===e){var o=(I=(0,a.inflate)(I)).length/4,r=new Array(o);for(i=0;i<o;i++)r[i]=t(I.slice(4*i,4*i+4));A(r)}if(\"zstd\"===e){const e=new s.ZSTDDecoder;e.init().then((()=>{var a=(I=e.decode(I)).length/4,s=new Array(a);for(i=0;i<a;i++)s[i]=t(I.slice(4*i,4*i+4));A(s)}))}if(!e){for(o=I.length/4,r=new Array(o),i=0;i<o;i++)r[i]=t(I.slice(4*i,4*i+4));A(r)}}))}}},\"./src/tiled-map-resource.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledMapFormat:()=>i,TiledMapResource:()=>B});var i,a=e(\"excalibur\"),s=e(\"./src/tiled-map-parser.ts\"),o=e(\"./src/tiled-tileset.ts\"),r=e(\"./src/tiled-layer.ts\"),g=e(\"./src/tiled-entity.ts\"),n=e(\"./src/tiled-object-component.ts\"),I=e(\"./src/tiled-layer-component.ts\"),l=function(A,t,e,i){return new(e||(e=Promise))((function(a,s){function o(A){try{g(i.next(A))}catch(A){s(A)}}function r(A){try{g(i.throw(A))}catch(A){s(A)}}function g(A){var t;A.done?a(A.value):(t=A.value,t instanceof e?t:new e((function(A){A(t)}))).then(o,r)}g((i=i.apply(A,t||[])).next())}))};!function(A){A.TMX=\"TMX\",A.JSON=\"JSON\"}(i||(i={}));class B{constructor(A,t){this.path=A,this.layers=[],this.isoLayers=[],this._layerZIndexStart=-1,this._mapToRawLayer=new Map;const{mapFormatOverride:e,startingLayerZIndex:s}=Object.assign({},t);this._layerZIndexStart=null!=s?s:this._layerZIndexStart;const o=null!=e?e:A.includes(\".tmx\")?i.TMX:i.JSON;switch(o){case i.TMX:this._resource=new a.Resource(A,\"text\");break;case i.JSON:this._resource=new a.Resource(A,\"json\");break;default:throw`The format ${o} is not currently supported. Please export Tiled map as JSON.`}this.mapFormat=o,this.ex={},this.imageMap={},this.sheetMap={},this.tileImageMap={},this.convertPath=(A,t)=>{if(0===t.indexOf(\"/\"))return t;const e=A.split(\"/\"),i=t.split(\"/\");return e[e.length-1].includes(\".\")&&e.pop(),e.concat(i).join(\"/\")}}_addTiledCamera(A){const t=this.ex.camera;if(t){let e=(0,a.vec)(t.x,t.y);this.isIsometric()&&(e=this._isoTileToScreenCoords(t.x,t.y)),A.camera.x=e.x,A.camera.y=e.y,A.camera.zoom=t.zoom}}_addTiledColliders(A){var t;const e=this.ex.colliders;if(e)for(let i of e){const e=new a.Actor({pos:(0,a.vec)(i.x,i.y),name:i.name,collisionType:null!==(t=i.collisionType)&&void 0!==t?t:a.CollisionType.Fixed});if(i.color&&(e.color=a.Color.fromHex(i.color.value)),\"box\"===i.type)if(this.isIsometric()){e.pos=this._isoTileToScreenCoords(i.x,i.y);const A=new a.BoundingBox({left:0,top:0,right:i.width,bottom:i.height}).getPoints().map((A=>this._isoTileToScreenCoords(A.x,A.y)));e.collider.usePolygonCollider(A,a.Vector.Zero)}else e.collider.useBoxCollider(i.width,i.height,a.Vector.Zero);\"circle\"===i.type&&e.collider.useCircleCollider(i.radius),e.addComponent(new n.TiledObjectComponent(i.tiled)),A.add(e),i.zIndex&&(e.z=i.zIndex)}}_isoTileToScreenCoords(A,t){if(this.isIsometric()){const e=this.isoLayers[0],i=e.tileWidth,s=e.tileHeight,o=0,r=t/s,g=A/s;return(0,a.vec)((g-r)*i/2+o,(g+r)*s/2)}return(0,a.vec)(A,t)}_addTiledText(A){var t,e,i,s,o,r,g,I,l,B,C,Q;const E=null===(t=this.data)||void 0===t?void 0:t.getObjects();if(E&&E.length>0)for(const t of E){const E=t.getText();for(const d of E){let E=(0,a.vec)(d.x,d.y+((null!==(e=d.height)&&void 0!==e?e:0)-(null!==(s=null===(i=d.text)||void 0===i?void 0:i.pixelSize)&&void 0!==s?s:0)));this.isIsometric()&&(E=this._isoTileToScreenCoords(d.x,d.y));const h=new a.Label({anchor:a.Vector.Zero,x:E.x,y:E.y,text:null!==(r=null===(o=d.text)||void 0===o?void 0:o.text)&&void 0!==r?r:\"\",name:this._getEntityName(d),font:new a.Font({family:null===(g=d.text)||void 0===g?void 0:g.fontFamily,size:null===(I=d.text)||void 0===I?void 0:I.pixelSize,unit:a.FontUnit.Px})});if(h.font.textAlign=a.TextAlign.Left,h.font.baseAlign=a.BaseAlign.Top,h.rotation=d.rotation,h.color=a.Color.fromHex(null!==(B=null===(l=d.text)||void 0===l?void 0:l.color)&&void 0!==B?B:\"#000000\"),h.collider.set(a.Shape.Box(null!==(C=d.width)&&void 0!==C?C:0,null!==(Q=d.height)&&void 0!==Q?Q:0)),h.body.collisionType=a.CollisionType.PreventCollision,h.addComponent(new n.TiledObjectComponent(d)),h.z=this._calculateZIndex(d,t),this.isIsometric()){const A=new a.IsometricEntityComponent(this.isoLayers[0]);h.addComponent(A),A.elevation=t.order}A.add(h)}}}_addTiledInsertedTiles(A){var t,e,i;const s=null===(t=this.data)||void 0===t?void 0:t.getObjects();if(s&&s.length>0)for(const t of s){const s=t.getInsertedTiles();for(const o of s){const s=o.getProperty(\"collisionType\");let r=a.CollisionType.PreventCollision;s&&(r=s.value);let g=(0,a.vec)(o.x,o.y);if(this.isIsometric()&&(g=this._isoTileToScreenCoords(o.x,o.y)),o.gid){const s=this.getSpriteForGid(o.gid),I=this.getCollidersForGid(o.gid),l=new a.Actor({x:g.x,y:g.y,width:o.width,height:o.height,anchor:this.isIsometric()?(0,a.vec)(.5,1):(0,a.vec)(0,1),rotation:o.rotation,collisionType:r,name:this._getEntityName(o)});if(this.isIsometric()){const A=this.isoLayers[0];for(let t of I)t.offset=(0,a.vec)(-A.tileWidth/2,2*-A.tileHeight)}if(I.length&&(l.collider.clear(),l.collider.set(new a.CompositeCollider(I))),l.addComponent(new n.TiledObjectComponent(o)),l.graphics.anchor=this.isIsometric()?(0,a.vec)(.5,1):(0,a.vec)(0,1),s.destSize.width=null!==(e=o.width)&&void 0!==e?e:s.destSize.width,s.destSize.height=null!==(i=o.height)&&void 0!==i?i:s.destSize.height,l.graphics.use(s),this.isIsometric()){const A=new a.IsometricEntityComponent(this.isoLayers[0]);l.addComponent(A),A.elevation=t.order}A.add(l),l.z=this._calculateZIndex(o,t)}}}}useSolidLayers(){var A,t,e;let i=this.getTileMapLayers();i=i.concat(this.isoLayers);for(const a of i){const i=this._mapToRawLayer.get(a);if(i&&null!==(t=null===(A=(0,g.getProperty)(i.properties,\"solid\"))||void 0===A?void 0:A.value)&&void 0!==t&&t)for(let A=0;A<i.data.length;A++)(e=a.tiles[A]).solid||(e.solid=!!i.data[A])}}addTiledMapToScene(A){const t=this.getTileMapLayers();for(const e of t)A.add(e);for(const t of this.isoLayers)A.add(t);this._addTiledCamera(A),this._addTiledColliders(A),this._addTiledText(A),this._addTiledInsertedTiles(A),this.useSolidLayers()}_parseExcaliburInfo(){var A,t,e,i,s,o,r,g,n,I;const l=null===(A=this.data)||void 0===A?void 0:A.getObjects(),B={};if(l.length>0){B.camera=null===(t=l.find((A=>A.getObjectByClass(\"camera\"))))||void 0===t?void 0:t.getCamera(),B.colliders=[];for(let A of l){const t=A.getObjectsByClass(\"boxcollider\");for(let o of t){const t=o.getProperty(\"collisiontype\"),r=o.getProperty(\"color\"),g=this._calculateZIndex(o,A);B.colliders.push(Object.assign(Object.assign({},o),{width:+(null!==(e=o.width)&&void 0!==e?e:0),height:+(null!==(i=o.height)&&void 0!==i?i:0),collisionType:null!==(s=null==t?void 0:t.value)&&void 0!==s?s:a.CollisionType.Fixed,color:r,zIndex:g,radius:0,type:\"box\",tiled:o,name:this._getEntityName(o)}))}const l=A.getObjectsByClass(\"circlecollider\");for(let t of l){const e=t.getProperty(\"collisiontype\"),i=t.getProperty(\"color\"),s=this._calculateZIndex(t,A);B.colliders.push({x:t.x,y:t.y,radius:Math.max(null!==(o=t.width)&&void 0!==o?o:0,null!==(r=t.height)&&void 0!==r?r:0),collisionType:null!==(g=null==e?void 0:e.value)&&void 0!==g?g:a.CollisionType.Fixed,color:i,zIndex:s,width:null!==(n=t.width)&&void 0!==n?n:0,height:null!==(I=t.height)&&void 0!==I?I:0,type:\"circle\",tiled:t,name:this._getEntityName(t)})}}}this.ex=B}isLoaded(){return!!this.data}isIsometric(){return!!this.isoLayers.length}load(){return l(this,void 0,void 0,(function*(){const A=yield this._resource.load(),t=yield this._importMapData(A);let e=[];return t.rawMap.tilesets.forEach((A=>{if(A.source){const s=A.source.includes(\".tsx\")?\"text\":\"json\";var i=new a.Resource(this.convertPath(this.path,A.source),s);e.push(i.load().then((e=>{e=\"text\"===s?(0,o.parseExternalTsx)(e,A.firstgid,A.source):(0,o.parseExternalJson)(e,A.firstgid,A.source),Object.assign(A,e),t.tileSets.push(e)}),(()=>{a.Logger.getInstance().error(`[Tiled] Error loading external tileset file ${i.path}`)})))}})),yield Promise.all(e).then((()=>{let A=[];return t.rawMap.tilesets.forEach((t=>{let e=[];if(t.image){e=t.source?[this.convertPath(t.source,t.image)]:[this.convertPath(this.path,t.image)];for(let i of e){const e=new a.ImageSource(i);this.imageMap[t.firstgid]=e,A.push(e.load()),a.Logger.getInstance().debug(\"[Tiled] Loading associated tileset image: \"+t.image)}}else for(let e of t.tiles){let i;i=t.source?this.convertPath(t.source,e.image):this.convertPath(this.path,e.image);const s=new a.ImageSource(i);A.push(s.load()),this.tileImageMap[t.firstgid]||(this.tileImageMap[t.firstgid]=[]),this.tileImageMap[t.firstgid].push([e,s]),a.Logger.getInstance().debug(\"[Tiled] Loading associated tileset image: \"+i)}})),Promise.all(A).then((()=>{this._createTileMap()}),(()=>{a.Logger.getInstance().error(\"[Tiled] Error loading tileset images\")}))})),this._parseExcaliburInfo(),t}))}_importMapData(A){return l(this,void 0,void 0,(function*(){if(void 0===A)throw`Tiled map resource ${this.path} is empty`;switch(this.mapFormat){case i.TMX:return this.data=yield s.TiledMap.fromTmx(A);case i.JSON:return this.data=yield s.TiledMap.fromJson(A);default:throw new Error(\"Unknown map format: \"+this.mapFormat)}}))}getTilesetForTile(A){if(this.data)for(var t=this.data.tileSets.length-1;t>=0;t--){var e=this.data.tileSets[t];if(A>=e.firstGid&&A<=e.firstGid+e.tileCount-1)return e}throw Error(`No tileset exists for tiled gid [${A}]!`)}getSpriteForGid(A){const t=(0,r.isFlippedHorizontally)(A),e=(0,r.isFlippedVertically)(A),i=(0,r.isFlippedDiagonally)(A),s=(0,r.getCanonicalGid)(A),o=this.getTilesetForTile(s),g=s-o.firstGid,n=this.sheetMap[o.firstGid.toString()];if(n){let A=n.sprites[g];return(i||t||e)&&(A=A.clone()),i&&(A.rotation=-Math.PI/2,A.scale=(0,a.vec)(-1,1)),t&&(A.scale=(0,a.vec)((i?1:-1)*A.scale.x,(i?-1:1)*A.scale.y)),e&&(A.scale=(0,a.vec)((i?-1:1)*A.scale.x,(i?1:-1)*A.scale.y)),A}throw new Error(`Could not find sprite for gid: [${A}] normalized gid: [${s}]`)}_transformPoints(A,t,e){const i=(0,r.isFlippedHorizontally)(e),a=(0,r.isFlippedVertically)(e);return(0,r.isFlippedDiagonally)(e)&&(A=A.map((A=>t.diagonalFlipTransform.multiply(A)))),i&&(A=A.map((A=>t.horizontalFlipTransform.multiply(A)))),a&&(A=A.map((A=>t.verticalFlipTransform.multiply(A)))),A}getCollidersForGid(A){const t=(0,r.getCanonicalGid)(A),e=this.getTilesetForTile(t),i=t-e.firstGid,s=e.tiles.find((A=>A.id===i));if(s&&s.objectgroup){const t=[];for(const i of s.objectgroup.getPolygons()){const s=(0,a.vec)(i.x,i.y),o=i.polygon.points.split(\" \").map((A=>{const t=A.split(\",\");return(0,a.vec)(Number.parseFloat(t[0]),Number.parseFloat(t[1])).add(s)})),r=a.Shape.Polygon(o);r.points=this._transformPoints(r.points,e,A),t.push(r)}for(const i of s.objectgroup.getBoxes()){const s=a.Shape.Box(i.width,i.height,a.Vector.Zero);s.points=s.points.map((A=>A.add((0,a.vec)(i.x,i.y)))),s.points=this._transformPoints(s.points,e,A),t.push(s)}for(const A of s.objectgroup.getEllipses()){const e=a.Shape.Circle(Math.min(A.width/2,A.height/2),(0,a.vec)(A.width/2,A.height/2).add((0,a.vec)(A.x,A.y)));t.push(e)}return t}return[]}getAnimationForGid(A){const t=(0,r.getCanonicalGid)(A),e=this.getTilesetForTile(t),i=t-e.firstGid,a=e.tiles.find((A=>A.id===i));return a&&a.hasAnimation()?a.getAnimation(this):null}_calculateZIndex(A,t){var e,i,a;let s=null!==(i=null===(e=A.getProperty(\"z\"))||void 0===e?void 0:e.value)&&void 0!==i?i:null===(a=A.getProperty(\"zindex\"))||void 0===a?void 0:a.value;return null!=s||(s=t.order+this._layerZIndexStart),+s}_getEntityName(A){return A.name}_createTileMap(){var A,t,e,i,s,o,r,g,n;for(const o of this.data.rawMap.tilesets){const r=null!==(A=o.spacing)&&void 0!==A?A:0,g=Math.floor((o.imagewidth+r)/(o.tilewidth+r)),n=Math.floor((o.imageheight+r)/(o.tileheight+r));if(this.imageMap[o.firstgid]){const A=a.SpriteSheet.fromImageSource({image:this.imageMap[o.firstgid],grid:{columns:g,rows:n,spriteWidth:o.tilewidth,spriteHeight:o.tileheight},spacing:{originOffset:{x:null!==(t=o.margin)&&void 0!==t?t:0,y:null!==(e=o.margin)&&void 0!==e?e:0},margin:{x:null!==(i=o.spacing)&&void 0!==i?i:0,y:null!==(s=o.spacing)&&void 0!==s?s:0}}});this.sheetMap[o.firstgid.toString()]=A}else{const A=this.tileImageMap[o.firstgid].map((([A,t])=>t.toSprite())),t=new a.SpriteSheet({sprites:A});this.sheetMap[o.firstgid.toString()]=t}}for(var l of this.data.layers)if(\"tilelayer\"===l.rawLayer.type){if(\"orthogonal\"===this.data.orientation){const A=l.rawLayer,t=new a.TileMap({name:l.rawLayer.name,pos:(0,a.vec)(l.offset.x,l.offset.y),tileWidth:this.data.rawMap.tilewidth,tileHeight:this.data.rawMap.tileheight,columns:this.data.width,rows:this.data.height});if(t.addComponent(new I.TiledLayerComponent(l)),l.rawLayer.parallaxx||l.rawLayer.parallaxy){const A=(0,a.vec)(null!==(o=l.rawLayer.parallaxx)&&void 0!==o?o:1,null!==(r=l.rawLayer.parallaxy)&&void 0!==r?r:1);t.addComponent(new a.ParallaxComponent(A))}t.z=this._calculateZIndex(l,l);for(let e=0;e<A.data.length;e++){let i=A.data[e];if(0!==i){const A=this.getSpriteForGid(i);t.tiles[e].addGraphic(A);const a=this.getCollidersForGid(i);for(let A of a)t.tiles[e].addCollider(A);const s=this.getAnimationForGid(i);s&&(t.tiles[e].clearGraphics(),t.tiles[e].addGraphic(s))}}this._mapToRawLayer.set(t,A),null===(g=this.layers)||void 0===g||g.push(t)}if(\"isometric\"===this.data.orientation){const A=l.rawLayer,t=new a.IsometricMap({name:l.rawLayer.name,pos:(0,a.vec)(l.offset.x,l.offset.y),columns:this.data.width,rows:this.data.height,tileWidth:this.data.tileWidth,tileHeight:this.data.tileHeight}),e=t.get(a.TransformComponent);e&&(e.z=this._calculateZIndex(l,l));for(let e=0;e<A.data.length;e++){let i=A.data[e];if(0!==i){const A=this.getSpriteForGid(i);t.tiles[e].addGraphic(A);const s=this.getCollidersForGid(i);for(let A of s)t.tiles[e].addCollider(A);const o=t.tiles[e].get(a.IsometricEntityComponent);o&&(o.elevation=l.order)}}t.updateColliders(),this._mapToRawLayer.set(t,A),null===(n=this.isoLayers)||void 0===n||n.push(t)}}}getTileMapLayers(){var A;return(null===(A=this.layers)||void 0===A?void 0:A.length)?this.layers:[]}getIsometricMapLayers(){var A;return(null===(A=this.isoLayers)||void 0===A?void 0:A.length)?this.isoLayers:[]}_lookupTile(A,t,e){const i=A.tiles.indexOf(t),a=this.data.getTileLayerByName(e),s=(0,r.getCanonicalGid)(a.data[i]);if(0===s)return null;const o=this.getTilesetForTile(s);return o.tiles.find((A=>A.id===s-1))||{id:s-1,tileset:o,properties:{}}}getTileByPoint(A,t){const e=this.getTileMapLayers().find((t=>t.name===A));if(e){const i=e.getTileByPoint(t);return this._lookupTile(e,i,A)}return null}getTileByCoordinate(A,t,e){const i=this.getTileMapLayers().find((t=>t.name===A));if(i){const a=i.getTile(t,e);return this._lookupTile(i,a,A)}return null}}},\"./src/tiled-object-component.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledObjectComponent:()=>a});var i=e(\"excalibur\");class a extends i.Component{constructor(A){super(),this.object=A,this.type=\"ex.tiledobject\"}}},\"./src/tiled-object.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledObject:()=>o,TiledObjectGroup:()=>s});var i=e(\"./src/tiled-entity.ts\"),a=e(\"excalibur\");class s extends i.TiledEntity{constructor(){super(...arguments),this.objects=[]}getCamera(){var A;const t=this.getObjectByClass(\"camera\");if(t){const e=t.getProperty(\"zoom\");return{x:t.x,y:t.y,zoom:e?+(null!==(A=null==e?void 0:e.value)&&void 0!==A?A:1):1}}}getObjectByType(A){return this.getObjectsByType(A)[0]}getObjectByClass(A){return this.getObjectsByClass(A)[0]}getObjectsByType(A){return this.objects.filter((t=>{var e;return(null===(e=t.type)||void 0===e?void 0:e.toLocaleLowerCase())===A.toLocaleLowerCase()}))}getObjectsByClass(A){return this.objects.filter((t=>{var e,i;return(null===(e=t.class)||void 0===e?void 0:e.toLocaleLowerCase())===A.toLocaleLowerCase()||(null===(i=t.type)||void 0===i?void 0:i.toLocaleLowerCase())===A.toLocaleLowerCase()}))}getObjectByName(A){return this.getObjectsByName(A)[0]}getObjectsByName(A){return this.objects.filter((t=>{var e;return(null===(e=t.name)||void 0===e?void 0:e.toString().toLocaleLowerCase())===A.toString().toLocaleLowerCase()}))}getPoints(){return this.objects.filter((A=>!!A.point))}getEllipses(){return this.objects.filter((A=>!!A.ellipse))}getText(){return this.objects.filter((A=>!!A.text))}getPolyLines(){return this.objects.filter((A=>!!A.polyline))}getPolygons(){return this.objects.filter((A=>!!A.polygon))}getBoxes(){return this.objects.filter((A=>!!A.width&&!!A.height&&!A.ellipse))}getInsertedTiles(){return this.objects.filter((A=>!!A.gid))}static parse(A){var t;if(\"objectgroup\"!==A.type)throw Error(\"Cannot parse non objectgroup type layer\");const e=new s;e.id=+A.id,e.name=A.name,e.properties=null!==(t=A.properties)&&void 0!==t?t:[],e.rawObjectGroup=A,e.order=A.order;for(let t of A.objects)e.objects.push(o.parse(t));return e}}class o extends i.TiledEntity{static parse(A){var t,e,i,s;const r=new o;return r.id=+A.id,r.gid=A.gid,r.visible=null===(t=A.visible)||void 0===t||t,r.name=A.name,r.type=A.type,r.class=A.class,r.x=+A.x,r.y=+A.y,r.rotation=A.rotation?(0,a.toRadians)(A.rotation):0,r.width=null!==(e=A.width)&&void 0!==e?e:0,r.height=null!==(i=A.height)&&void 0!==i?i:0,r.point=A.point,r.ellipse=!0===A.ellipse||\"\"===A.ellipse,r.polyline=A.polyline,r.polygon=A.polygon,r.rawObject=A,A.text&&(r.text=Object.assign(Object.assign({},A.text),{pixelSize:A.text.pixelsize,fontFamily:A.text.fontfamily})),r.properties=null!==(s=A.properties)&&void 0!==s?s:[],r}}},\"./src/tiled-tileset.ts\":(A,t,e)=>{\"use strict\";e.r(t),e.d(t,{TiledTileset:()=>r,TiledTilesetTile:()=>g,parseExternalJson:()=>I,parseExternalTsx:()=>n});var i=e(\"excalibur\"),a=e(\"./node_modules/fast-xml-parser/src/parser.js\"),s=e(\"./src/index.ts\"),o=e(\"./src/tiled-entity.ts\");class r{constructor(){this.tiles=[]}static parse(A){var t,e;const a=new r;let s=[];if(Array.isArray(A.tiles))s=(null!==(t=A.tiles)&&void 0!==t?t:[]).map((A=>g.parse(A,a)));else for(let t in A.tiles)s.push(g.parse(Object.assign(Object.assign({},A.tiles[t]),{id:+t}),a));return a.tiles=s,a.firstGid=A.firstgid,a.tileWidth=A.tilewidth,a.tileHeight=A.tileheight,a.tileCount=A.tilecount,a.tileOffset=A.tileoffset,a.tiledVersion=A.tiledversion,a.backgroundColor=A.backgroundcolor,a.transparentColor=A.transparentcolor,a.wangSets=A.wangsets,a.imageWidth=A.imagewidth,a.imageHeight=A.imageheight,a.objectAlignment=null!==(e=A.objectalignment)&&void 0!==e?e:\"unspecified\",a.image=A.image,a.spacing=isNaN(A.spacing)?0:A.spacing,a.horizontalFlipTransform=i.Matrix.identity().translate(a.tileWidth,0).scale(-1,1),a.verticalFlipTransform=i.Matrix.identity().translate(0,a.tileHeight).scale(1,-1),a.diagonalFlipTransform=i.Matrix.identity().translate(0,0).rotate(-Math.PI/2).scale(-1,1),a}}class g{hasAnimation(){return!!this.animation}getAnimation(A){var t;if(this.animation){let e=[];for(let t of this.animation)e.push({graphic:A.getSpriteForGid(t.tileid+this.tileset.firstGid),duration:t.duration});return new i.Animation({frames:e,strategy:null!==(t=this.animationStrategy)&&void 0!==t?t:i.AnimationStrategy.Loop})}return null}static parse(A,t){var e,a,r;const n=new g;if(n.id=+A.id,n.image=A.image,n.tileset=t,n.properties=Array.isArray(A.properties)?A.properties:null!==(a=null===(e=A.properties)||void 0===e?void 0:e.property)&&void 0!==a?a:[],A.objectgroup&&(n.objectgroup=s.TiledObjectGroup.parse(A.objectgroup)),A.terrain&&(n.terrain=A.terrain),A.animation&&(n.animation=Array.isArray(A.animation)?A.animation:[...A.animation.frame],n.properties)){const A=null===(r=(0,o.getProperty)(n.properties,\"animationstrategy\"))||void 0===r?void 0:r.value;switch(null==A?void 0:A.toLowerCase()){case i.AnimationStrategy.End.toLowerCase():n.animationStrategy=i.AnimationStrategy.End;break;case i.AnimationStrategy.Freeze.toLowerCase():n.animationStrategy=i.AnimationStrategy.Freeze;break;case i.AnimationStrategy.Loop.toLowerCase():n.animationStrategy=i.AnimationStrategy.Loop;break;case i.AnimationStrategy.PingPong.toLowerCase():n.animationStrategy=i.AnimationStrategy.PingPong;break;default:n.animationStrategy=i.AnimationStrategy.Loop}}return n}}const n=(A,t,e)=>{var s,o,r,n,I;const l=(A,t,e=!1)=>{A[t]?(A[t+(e?\"s\":\"\")]=Array.isArray(A[t])?A[t]:[A[t]],e&&delete A[t]):A[t+(e?\"s\":\"\")]=[]},B=a.parse(A,{attributeNamePrefix:\"\",textNodeName:\"#text\",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,parseTrueNumberOnly:!1,arrayMode:!1,stopNodes:[\"parse-me-as-string\"]}).tileset,C=B;C.firstgid=t,C.source=e,C.imagewidth=null===(s=B.image)||void 0===s?void 0:s.width,C.imageheight=null===(o=B.image)||void 0===o?void 0:o.height,C.objectalignment=null!==(r=B.objectalignment)&&void 0!==r?r:\"unspecified\",C.image=null===(n=B.image)||void 0===n?void 0:n.source,C.spacing=isNaN(B.spacing)?0:B.spacing,l(B,\"tile\",!0),B.tiles.forEach((A=>{var t;(null===(t=A.image)||void 0===t?void 0:t.source)&&(A.image=A.image.source),A.objectgroup&&(A.objectgroup.type=\"objectgroup\",l(A.objectgroup,\"object\",!0))})),C.tiles=B.tiles;const Q=Object.assign(Object.assign({},C),{tiles:[],firstGid:C.firstgid,tileWidth:C.tilewidth,tileHeight:C.tileheight,tileCount:C.tilecount,tileOffset:C.tileoffset,tiledVersion:C.tiledversion,backgroundColor:C.backgroundcolor,transparentColor:C.transparentcolor,wangSets:C.wangsets,imageWidth:C.imagewidth,imageHeight:C.imageheight,objectAlignment:null!==(I=C.objectalignment)&&void 0!==I?I:\"unspecified\",image:C.image,spacing:isNaN(C.spacing)?0:C.spacing,horizontalFlipTransform:i.Matrix.identity().translate(C.tilewidth,0).scale(-1,1),verticalFlipTransform:i.Matrix.identity().translate(0,C.tileheight).scale(1,-1),diagonalFlipTransform:i.Matrix.identity().translate(C.tilewidth,C.tileheight).rotate(-Math.PI/2).scale(-1,1)});return Q.tiles=C.tiles.map((A=>g.parse(A,Q))),Q},I=(A,t,e)=>{var a,s;let o=[];A.tiles=null!==(a=A.tiles)&&void 0!==a?a:[],(0,i.vec)(A.tilewidth/2,A.tileheight/2);const r=Object.assign(Object.assign({},A),{source:e,tiles:o,firstGid:t,tileWidth:A.tilewidth,tileHeight:A.tileheight,tileCount:A.tilecount,tileOffset:A.tileoffset,tiledVersion:A.tiledversion,backgroundColor:A.backgroundcolor,transparentColor:A.transparentcolor,wangSets:A.wangsets,imageWidth:A.imagewidth,imageHeight:A.imageheight,spacing:isNaN(A.spacing)?0:A.spacing,objectAlignment:null!==(s=A.objectalignment)&&void 0!==s?s:\"unspecified\",image:A.image,horizontalFlipTransform:i.Matrix.identity().translate(A.tilewidth,0).scale(-1,1),verticalFlipTransform:i.Matrix.identity().translate(0,A.tileheight).scale(1,-1),diagonalFlipTransform:i.Matrix.identity().translate(A.tilewidth,A.tileheight).rotate(-Math.PI/2).scale(-1,1)});for(let t in A.tiles)o.push(g.parse(Object.assign(Object.assign({},A.tiles[t]),{id:+t}),r));return r}},\"./src/tiled-types.ts\":(A,t,e)=>{\"use strict\";e.r(t)},\"./node_modules/zstddec/dist/zstddec.modern.js\":(A,t,e)=>{\"use strict\";let i,a,s;e.r(t),e.d(t,{ZSTDDecoder:()=>r});const o={env:{emscripten_notify_memory_growth:function(A){s=new Uint8Array(a.exports.memory.buffer)}}};class r{init(){return i||(i=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+g).then((A=>A.arrayBuffer())).then((A=>WebAssembly.instantiate(A,o))).then(this._init):WebAssembly.instantiate(Buffer.from(g,\"base64\"),o).then(this._init),i)}_init(A){a=A.instance,o.env.emscripten_notify_memory_growth(0)}decode(A,t=0){if(!a)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const e=A.byteLength,i=a.exports.malloc(e);s.set(A,i),t=t||Number(a.exports.ZSTD_findDecompressedSize(i,e));const o=a.exports.malloc(t),r=a.exports.ZSTD_decompress(o,t,i,e),g=s.slice(o,o+r);return a.exports.free(i),a.exports.free(o),g}}const g=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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\"},excalibur:t=>{\"use strict\";t.exports=A}},e={};function i(A){var a=e[A];if(void 0!==a)return a.exports;var s=e[A]={exports:{}};return t[A](s,s.exports,i),s.exports}return i.n=A=>{var t=A&&A.__esModule?()=>A.default:()=>A;return i.d(t,{a:t}),t},i.d=(A,t)=>{for(var e in t)i.o(t,e)&&!i.o(A,e)&&Object.defineProperty(A,e,{enumerable:!0,get:t[e]})},i.o=(A,t)=>Object.prototype.hasOwnProperty.call(A,t),i.r=A=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(A,\"__esModule\",{value:!0})},i(\"./src/index.ts\")})()));\n//# sourceMappingURL=excalibur-tiled.min.js.map","export default \"__VITE_ASSET__823d4947__\"","export default \"__VITE_ASSET__aef2c27f__\"","export default \"__VITE_ASSET__93c0bd7a__\"","export default \"__VITE_ASSET__e76e8316__\"","export default \"__VITE_ASSET__d90515b5__\"","import { ImageFiltering, ImageSource, Loadable, Loader, Resource, TileMap } from \"excalibur\";\nimport { TiledMapResource } from '@excaliburjs/plugin-tiled';\n\n// Import paths to work with Vite\n// Note the ?url suffix\nimport heroPath from '../img/Solaria Demo Pack Update 03/Solaria Demo Pack Update 03/16x16/Sprites/Hero 01.png?url';\nimport tilesetPath from '../img/Solaria Demo Pack Update 03/Solaria Demo Pack Update 03/16x16/Tilesets/Solaria Demo Update 01.png?url';\nimport tmxPath from '../res/first-level.tmx?url';\nimport tsxPath from '../res/tileset.tsx?url';\nimport tssxPath from '../res/tileset.tssx?url';\n\nexport const Resources = {\n    HeroSpriteSheetPng: new ImageSource(heroPath, false, ImageFiltering.Pixel),\n    TiledMap: new TiledMapResource(tmxPath),\n    TsxResource: new Resource(tsxPath, 'text'),\n    TssxResource: new Resource(tssxPath, 'text')\n}\n\n// Patch @excalibur/plugin-tile path resolution to work around Vite\nconst convertPath = Resources.TiledMap.convertPath;\nResources.TiledMap.convertPath = (originalPath, relativePath) => {\n  if (relativePath.includes('.tmx')) {\n    return tmxPath;\n  }\n  if (relativePath.includes('.tsx')) {\n    return tsxPath;\n  }\n  if (relativePath.includes('.png')) {\n    return tilesetPath;\n  }\n  return convertPath(originalPath, relativePath);\n}\n\nexport const loader = new Loader();\nfor (let resource of Object.values(Resources)) {\n    loader.addResource(resource);\n}","export const Config = {\n    PlayerSpeed: 16*2, // pixels/sec\n    PlayerFrameSpeed: 200, // ms\n}","import * as ex from 'excalibur';\nimport { Resources } from './resources';\nimport { Config } from './config';\n\nexport class Player extends ex.Actor {\n    constructor(pos: ex.Vector) {\n        super({\n            pos,\n            width: 16,\n            height: 16,\n            collisionType: ex.CollisionType.Active\n        })\n    }\n\n    onInitialize(engine: ex.Engine): void {\n        const playerSpriteSheet = ex.SpriteSheet.fromImageSource({\n            image: Resources.HeroSpriteSheetPng as ex.ImageSource,\n            grid: {\n                spriteWidth: 16,\n                spriteHeight: 16,\n                rows: 8,\n                columns: 8\n            }\n        });\n\n        const leftIdle = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 1) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 1) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 1) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 1) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        })\n        this.graphics.add('left-idle', leftIdle);\n\n        const rightIdle = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 2) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 2) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 2) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 2) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        })\n        this.graphics.add('right-idle', rightIdle);\n\n\n        const upIdle = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 3) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 3) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 3) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 3) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        })\n        this.graphics.add('up-idle', upIdle);\n\n        const downIdle = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 0) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 0) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 0) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 0) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        })\n        this.graphics.add('down-idle', downIdle);\n\n        const leftWalk = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 5) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 5) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 5) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 5) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        })\n        this.graphics.add('left-walk', leftWalk);\n\n        const rightWalk = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 6) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 6) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 6) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 6) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        });\n        this.graphics.add('right-walk', rightWalk);\n\n        const upWalk = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 7) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 7) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 7) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 7) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        });\n        this.graphics.add('up-walk', upWalk);\n\n        const downWalk = new ex.Animation({\n            frames: [\n                {graphic: playerSpriteSheet.getSprite(0, 4) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(1, 4) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(2, 4) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n                {graphic: playerSpriteSheet.getSprite(3, 4) as ex.Sprite, duration: Config.PlayerFrameSpeed},\n            ]\n        });\n        this.graphics.add('down-walk', downWalk);\n    }\n\n    onPreUpdate(engine: ex.Engine, elapsedMs: number): void {\n        this.vel = ex.Vector.Zero;\n\n        this.graphics.use('down-idle');\n        if (engine.input.keyboard.isHeld(ex.Input.Keys.ArrowRight)) {\n            this.vel = ex.vec(Config.PlayerSpeed, 0);\n            this.graphics.use('right-walk');\n        }\n        if (engine.input.keyboard.isHeld(ex.Input.Keys.ArrowLeft)) {\n            this.vel = ex.vec(-Config.PlayerSpeed, 0);\n            this.graphics.use('left-walk');\n        }\n        if (engine.input.keyboard.isHeld(ex.Input.Keys.ArrowUp)) {\n            this.vel = ex.vec(0, -Config.PlayerSpeed);\n            this.graphics.use('up-walk');\n        }\n        if (engine.input.keyboard.isHeld(ex.Input.Keys.ArrowDown)) {\n            this.vel = ex.vec(0, Config.PlayerSpeed);\n            this.graphics.use('down-walk');\n        }\n\n    }\n}","import * as ex from 'excalibur';\nimport { Resources, loader } from './resources';\nimport { Player } from './player';\n\nconst game = new ex.Engine({\n    width: 800,\n    height: 600,\n    canvasElementId: 'game',\n    antialiasing: false\n});\n\ngame.start(loader).then(() => {\n    const objects = Resources.TiledMap.data.getObjectLayerByName(\"Objects\");\n    const camera = objects.getObjectByName(\"Camera\");\n    if (camera) {\n        game.currentScene.camera.pos = ex.vec(camera.x, camera.y);\n        game.currentScene.camera.zoom = camera.getProperty<number>('zoom')?.value ?? 1.0;\n    }\n\n    const player = objects.getObjectByName(\"Player\");\n    if (player) {\n        const playerActor = new Player(ex.vec(player.x, player.y));\n        game.currentScene.add(playerActor);\n        playerActor.z = 100;\n    }\n    Resources.TiledMap.addTiledMapToScene(game.currentScene);\n});"],"names":["__webpack_modules__","module","__unused_webpack_exports","__webpack_require__","entryUnbind","path","isCallable","tryToString","$TypeError","argument","isObject","$String","toIndexedObject","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","el","fromIndex","O","length","index","value","fails","METHOD_NAME","method","createProperty","$Array","max","start","end","k","fin","result","n","arraySlice","floor","mergeSort","array","comparefn","middle","insertionSort","merge","i","element","j","left","right","llength","rlength","lindex","rindex","uncurryThis","toString","stringSlice","it","TO_STRING_TAG_SUPPORT","classofRaw","wellKnownSymbol","TO_STRING_TAG","$Object","CORRECT_ARGUMENTS","tryGet","key","tag","hasOwn","ownKeys","getOwnPropertyDescriptorModule","definePropertyModule","target","source","exceptions","keys","defineProperty","getOwnPropertyDescriptor","DESCRIPTORS","createPropertyDescriptor","object","bitmap","toPropertyKey","propertyKey","makeBuiltIn","defineGlobalProperty","options","simple","name","global","documentAll","IS_HTMLDDA","document","EXISTS","userAgent","firefox","UA","process","Deno","versions","v8","match","version","webkit","CONSTRUCTOR","METHOD","createNonEnumerableProperty","defineBuiltIn","copyConstructorProperties","isForced","TARGET","GLOBAL","STATIC","FORCED","targetProperty","sourceProperty","descriptor","exec","test","NATIVE_BIND","call","FunctionPrototype","getDescriptor","PROPER","CONFIGURABLE","uncurryThisWithBind","fn","aFunction","namespace","aCallable","isNullOrUndefined","V","func","check","toObject","hasOwnProperty","createElement","classof","split","store","functionToString","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","TypeError","WeakMap","set","get","has","enforce","getterFor","TYPE","state","metadata","STATE","$documentAll","replacement","feature","detection","data","normalize","POLYFILL","NATIVE","string","getBuiltIn","isPrototypeOf","USE_SYMBOL_AS_UID","$Symbol","toLength","obj","CONFIGURABLE_FUNCTION_NAME","inspectSource","InternalStateModule","enforceInternalState","getInternalState","replace","join","CONFIGURABLE_LENGTH","TEMPLATE","ceil","x","__unused_webpack_module","exports","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","anObject","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","P","Attributes","current","propertyIsEnumerableModule","internalObjectKeys","enumBugKeys","indexOf","push","names","$propertyIsEnumerable","NASHORN_BUG","input","pref","val","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","concat","getOwnPropertySymbols","uid","SHARED","IS_PURE","V8_VERSION","symbol","toIntegerOrInfinity","min","integer","IndexedObject","requireObjectCoercible","trunc","number","isSymbol","getMethod","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","id","postfix","NATIVE_SYMBOL","Symbol","WellKnownSymbolsStore","createWellKnownSymbol","$","deletePropertyOrThrow","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","nativeSort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","a","b","getSortCompare","y","items","arrayLength","itemsLength","nativeKeys","FAILS_ON_PRIMITIVES","__webpack_exports__","__WEBPACK_DEFAULT_EXPORT__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default","___CSS_LOADER_EXPORT___","cssWithMappingToString","list","item","content","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","_k","cssMapping","base64","sourceMapping","__webpack_module_cache__","moduleId","cachedModule","getter","definition","prop","ActionContext","ActionQueue","ActionSequence","ActionsComponent","ActionsSystem","ActivateEvent","Actor","AddedComponent","AddedEntity","AffineMatrix","Animation","AnimationDirection","AnimationEvents","AnimationStrategy","ArcadeSolver","AudioContextFactory","Axes","Axis","BaseAlign","Blink","BodyComponent","BoundingBox","BroadphaseStrategy","BrowserComponent","BrowserEvents","Buttons","Camera","CameraEvents","Canvas","Circle","CircleCollider","Clock","ClosestLine","ClosestLineJumpTable","Collider","ColliderComponent","CollisionContact","CollisionEndEvent","CollisionGroup","CollisionGroupManager","CollisionJumpTable","CollisionPostSolveEvent","CollisionPreSolveEvent","CollisionResolutionStrategy","CollisionStartEvent","CollisionSystem","CollisionType","Color","ColorBlindFlags","ColorBlindnessMode","ColorBlindnessPostProcessor","Component","CompositeCollider","Configurable","ConsoleAppender","ContactConstraintPoint","ContactEndEvent","ContactStartEvent","CoordPlane","DeactivateEvent","Debug","DebugGraphicsComponent","DebugSystem","DebugText","DegreeOfFreedom","Delay","Detector","Die","Direction","DisplayMode","DynamicTree","DynamicTreeCollisionProcessor","EX_VERSION","EaseBy","EaseTo","EasingFunctions","EdgeCollider","ElasticToActorStrategy","EmitterType","Engine","EngineEvents","EnterTriggerEvent","EnterViewPortEvent","Entity","EntityEvents","EntityManager","EventDispatcher","EventEmitter","EventTypes","Events_namespaceObject","ExResponse","ExcaliburGraphicsContext2DCanvas","ExcaliburGraphicsContextWebGL","ExitTriggerEvent","ExitViewPortEvent","Fade","Flags","Follow","Font","FontCache","FontStyle","FontUnit","FpsSampler","FrameStats","Future","GameEvent","GameStartEvent","GameStopEvent","Gamepad","GamepadAxisEvent","GamepadButtonEvent","GamepadConnectEvent","GamepadDisconnectEvent","Gamepads","Gif","GlobalCoordinates","Graphic","GraphicsComponent","GraphicsGroup","GraphicsLayer","GraphicsLayers","GraphicsSystem","HiddenEvent","ImageFiltering","ImageSource","InitializeEvent","Input_Index_namespaceObject","InputMapper","Integrator","IsometricEntityComponent","IsometricEntitySystem","IsometricMap","IsometricTile","KeyEvent","Keyboard","Keys","KillEvent","Label","LimitCameraBoundsStrategy","Line","LineSegment","Loader","LoaderEvents","LockCameraToActorAxisStrategy","LockCameraToActorStrategy","LogLevel","Logger","Material","Matrix","MatrixLocations","MediaEvent","Meet","MotionComponent","MotionSystem","MoveBy","MoveTo","NativePointerButton","NativeSoundEvent","NativeSoundProcessedEvent","Observable","OffscreenSystem","Pair","ParallaxComponent","ParallelActions","ParseGif","Particle","ParticleEmitter","ParticleTransform","Physics","PhysicsStats","PhysicsWorld","PointerButton","PointerComponent","PointerEvent","PointerEventReceiver","PointerScope","PointerSystem","PointerType","Polygon","PolygonCollider","Pool","PostCollisionEvent","PostDebugDrawEvent","PostDrawEvent","PostFrameEvent","PostKillEvent","PostUpdateEvent","PreCollisionEvent","PreDebugDrawEvent","PreDrawEvent","PreFrameEvent","PreKillEvent","PreUpdateEvent","Projection","QuadIndexBuffer","Query","QueryManager","RadiusAroundActorStrategy","Random","Raster","Ray","RealisticSolver","Rectangle","RemovedComponent","RemovedEntity","Repeat","RepeatForever","Resolution","Resource","ResourceEvents","RotateBy","RotateTo","RotationType","ScaleBy","ScaleTo","Scene","SceneEvents","Screen","ScreenAppender","ScreenElement","ScreenShader","ScrollPreventionMode","Semaphore","Shader","Shape","Side","Sound","SoundEvents","Sprite","SpriteFont","SpriteSheet","StandardClock","StateMachine","StrategyContainer","Stream","System","SystemManager","SystemType","TagComponent","TestClock","Text","TextAlign","TextureLoader","Tile","TileMap","TileMapEvents","Timer","Toaster","Transform","TransformComponent","TreeNode","Trigger","TriggerEvents","TwoPI","Util_Index_namespaceObject","Vector","VectorView","VertexBuffer","VertexLayout","VisibleEvent","WebAudio","WebAudioInstance","WheelDeltaMode","WheelEvent","World","canonicalizeAngle","clamp","createId","frac","hasGraphicsTick","hasOnInitialize","hasOnPostUpdate","hasOnPreUpdate","hasPostDraw","hasPreDraw","has_initialize","has_postupdate","has_preupdate","isAddedComponent","isAddedSystemEntity","isRemoveSystemEntity","isRemovedComponent","isScreenElement","maxMessages","obsolete","pixelSnapEpsilon","randomInRange","randomIntInRange","range","resetObsoleteCounter","sign","toDegrees","toRadians","vec","webgl_util_namespaceObject","getAttributeComponentSize","getAttributePointerType","getGlTypeSizeBytes","DrawUtil_namespaceObject","circle","line","point","roundRect","vector","addItemToArray","contains","delay","fail","getPosition","removeItemFromArray","polyfill","callback","replaceMe","arrayBuffer","resolve","reject","flagName","type","eventName","handler","_a","_b","_c","_d","listenerIndex","onceIndex","event","onces","pipe","emitter","ctx","delta","engine","prevStats","stats","gamepad","button","axis","actor","other","side","intersection","contact","context","config","pad","axesLength","buttonLength","gamepads","bi","ai","p","pads","arr","len","clonedPad","threshold","axes","buttonIndex","axesIndex","appender","level","args","consoleArgs","width","height","message","pos","opacity","isCrossOriginIframe","noop","originalEvent","ev","keyEvent","keyboardOptions","grabWindowFocus","character","BITMASK32","seed","s","mag01","likelihood","numPicks","allowDuplicates","currentPick","tempArray","swap","randomIndex","angle","tmpAngle","radians","degrees","from","to","_x","random","vec1","vec2","tolerance","v","deltaX","deltaY","magnitude","size","newSize","newLength","d","sizeOrScale","dest","num","anchor","sinAngle","cosAngle","fixed","r","g","rgbaRegEx","hex","hexRegEx","h","l","HSLColor","factor","temp","color","newR","newG","newB","newA","color1","color2","format","c","q","t","getOpposite","fromDirection","direction","directions","directionEnum","maxIndex","leftOrOptions","top","bottom","points","minX","minY","maxX","maxY","scale","shifted","matrix","xa1","xa2","xb1","xb2","ya1","ya2","yb1","yb2","matrixPos","wx","wy","results","ray","farClipDistance","tmin","tmax","xinv","yinv","tx1","tx2","ty1","ty2","epsilon","e","totalBoundingBox","overlapX","overlapY","bb","intersect","ex","error","oLeft","oTop","calcOffsetLeft","parent","calcOffsetTop","milliseconds","clock","future","near","far","mat","sx","sy","angleRadians","vectorOrMatrix","resultX","resultY","a11","a21","a31","a41","a12","a22","a32","a42","a13","a23","a33","a43","a14","a24","a34","a44","b11","b21","b31","b41","b12","b22","b32","b42","b13","b23","b33","b43","b14","b24","b34","b44","z","w","sine","cosine","currentScale","xscale","yscale","inverseDet","m","tx","ty","TransformStack","StateStack","responseType","bustCache","uri","request","watch","change","watchAny","_e","_f","scaleDirX","scaleDirY","origin","image","newWidth","newHeight","nativeWidth","nativeHeight","gl","filtering","forceUpdate","tex","filterMode","originalSrc","url","blob","loadedFuture","sprites","rows","columns","spriteIndex","sourceView","cols","spriteWidth","spriteHeight","originOffset","margin","offsetDefaults","marginDefaults","sprite","alphabet","spriteSheet","caseInsensitive","spacing","shadow","text","textToRender","letterIndex","letter","letterSprite","maxWidth","lines","maxWidthLine","xCursor","yCursor","_color","bounds","newLine","debug_font","RenderSource","_gl","_texture","RenderTarget","attachmentPoint","line_vertex","line_fragment","vertexSource","fragmentSource","vertexShader","fragmentShader","attributes","attribute","uniforms","uniform","uniformCount","uniformLocation","attributeCount","attributeLocation","slotNumber","texture","uniformType","location","program","typeName","shader","errorInfo","errorLineStart","errorLineEnd","_","error2","count","vertexBuffer","shaderAttributes","attrib","componentsPerVertex","vertAttribute","typeSize","uploadBuffer","offset","vert","GraphicsDiagnostics","LineRenderer","transform","finalStart","finalEnd","point_vertex","point_fragment","PointRenderer","snapToPixel","finalPoint","screen_vertex","screen_fragment","ScreenPassPainter","postprocessor","numberOfQuads","useUint16","totalVertices","maxUint16Index","currentQuad","image_renderer_frag","image_renderer_vert","ImageRenderer","transformedFrag","maxTextures","newSource","texturePickerBuilder","maybeFiltering","force","maybeTexture","swidth","sheight","dx","dy","dwidth","dheight","view","sw","sh","topLeft","topRight","bottomLeft","bottomRight","tint","textureId","imageWidth","imageHeight","uvx0","uvy0","uvx1","uvy1","rectangle_renderer_frag","rectangle_renderer_vert","RectangleRenderer","thickness","dir","normal","halfThick","startTop","startBottom","endTop","endBottom","stroke","strokeThickness","circle_renderer_frag","circle_renderer_vert","CircleRenderer","radius","builder","recycler","maxObjects","objects","poolIndex","DrawCall","defaultVertexSource","_context","MaterialRenderer","material","vertexIndex","ExcaliburGraphicsContextWebGLDebug","_webglCtx","rectOptions","lineOptions","pointOptions","dim","supported","instance","canvasElement","enableTransparency","smoothing","backgroundColor","useDrawSorting","renderer","rendererName","drawCall","resolution","u","originalSort","firstIndex","dc","zIndex","originalSortOrder","priority","oldTransform","oldState","currentRendererName","currentRenderer","ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon","ExcaliburGraphicsContext2DCanvasDebug","_ex","_resolution","_m","_postprocessor","_delta","_options","viewport","camera","isSmooth","elementId","maybeElement","newX","newY","screenHeight","screenMarginY","screenWidth","screenMarginX","screen","aspect","adjustedWidth","adjustedHeight","vw","vh","clip","scaleX","scaleY","maxScaleFactor","zoomedWidth","zoomedHeight","isLegacyWebAudioSource","unlockTimeoutTimer","audioContext","buffer","ended","x1","y1","x2","y2","cap","fill","br","defaultRadius","Loader_logo","Loader_0","_g","_h","_j","bitmapWidth","bitmapHeight","maybeCtx","machineDescription","machine","stateName","transitionState","eventData","potentialNewState","elapsedMs","saveKey","duration","_src","position","playStarted","pausedAt","startedAt","playbackRate","_value","_val","_name","_actor","track","_processedData","canPlayFile","file","filetype","paths","arraybuffer","audiobuffer","volume","trackId","resumed","complete","newTrack","existingRoot","loadables","buttonElement","loadable","resizeHandler","evt","startButtonHandler","_engine","resource","buttonWidth","buttonHeight","canvasHeight","canvasWidth","logoY","logoX","oldAntialias","loadingX","loadingY","progress","progressWidth","REPORTED_FEATURES","elem","xhr","style","msg","failedCritical","warning","obsoleteMessage","logMessage","suppressObsoleteMessages","property","DecoratedClass","__decorate","decorators","desc","WatchVector","original","localPos","rotation","canonRotation","inverseRotation","inverseScale","globalScaleX","globalScaleY","hasClone","newComponent","observer","observersLength","subscriptionsLength","child","childTxComponent","owner","_previousOwner","oldz","component","category","mask","collisionGroups","combinedName","combinedCategory","combinedMask","colliderA","colliderB","bodyA","bodyB","collider","idA","idB","projection","worldBounds","leaf","leafAABB","currentRoot","area","combinedArea","cost","inheritanceCost","leftCost","leftCombined","newArea","oldArea","rightCost","rightCombined","oldParent","newParent","currentNode","grandParent","sibling","node","body","multdx","multdy","f","balance","helper","numerator","divisor","time","maxDistance","collisionGroup","searchAllColliders","maybeBody","hit","colliders","hash","targets","seconds","potentialColliders","pair","updateDistance","minDimension","updateVec","centerPoint","furthestPoint","minCollider","minTranslate","hitPoint","translate","shift","pairs","contacts","newContacts","updated","acc","furthestPoints","bestPoint","distance","mass","totalInertia","otherColliders","potentialCollider","maybeLine","minLength","minLine","minPoint","minDistance","projs","proj","newProjection","begin","sideVector","clipTime","signed","x0","y0","aMinusP","currPoint","dxc","dyc","dx1","dy1","cross","p0","q0","w0","denom","sDenom","tDenom","tClosestParallel","sClosest","tClosest","polygonA","polygonB","otherWorldPos","otherDirection","thisDirection","rayTowardsOther","rayTowardsThis","thisPoint","otherPoint","thisFace","otherFace","polygon","edge","edgeLine","edgeStart","edgeVector","circlex","circley","circleA","circleB","circleWorlPos","edgeA","edgeB","edgeLineA","edgeStartA","edgeVectorA","edgeLineB","edgeStartB","edgeVectorB","orig","discriminant","toi","toi1","toi2","positiveToi","mintoi","shape","scalars","dotProduct","mtv","tangent","localPoints","info","SeparatingAxis","polyA","polyB","bestSeparation","bestSide","bestAxis","bestSideIndex","bestOtherPoint","sides","localSides","vertB","vertSeparation","polyDir","closestPointOnPoly","minOverlap","minAxis","minIndex","proj1","proj2","overlap","circleAPos","circleBPos","combinedRadius","separation","mvt","local","cc","edgeWorld","localSide","da","dda","db","ddb","den","pointOnEdge","dd","pc","linePoly","separationA","separationB","incident","reference","refDir","clipRight","clipLeft","xf","localPoint","shapeA","txA","shapeB","txB","worldPoint","circlePoint","dist","transformedBegin","transformedEnd","padding","edgeNormal","sum","oldPoint","newPoint","oldDirection","orientation","angleSum","polygons","getItem","isPointInTriangle","ab","bc","ca","ap","bp","cp","cross1","cross2","cross3","triangles","vertices","indices","va","vb","vc","leftArm","isEar","vertIndex","currentSide","mostDirection","testRay","accum","pts","faceIndex","denominator","iplusone","crossTerm","minContactTime","contactIndex","contactTime","scalar","firstPoint","logger","flipped","entity","precollision","postcollision","center","poly","newMass","sleeping","currentMotion","bias","maybeCollider","scaleFactor","impulse","finalImpulse","distanceFromCenter","components","added","removed","queue","curr","newEntity","templateEntity","ctor","constuctorType","componentOrType","graphic","_graphics","nameOrGraphic","gfx","order","graphicsComponent","_component","graphicsLayerKeys","layers","visible","graphics","copyGraphics","onPreDraw","onPostDraw","graphicToSet","offsetX","offsetY","elapsed","idempotencyToken","lineWidth","easing","currentTime","startValue","endValue","action","repeatBuilder","repeat","speed","destx","desty","rotationType","distance1","distance2","distanceTraveled","angleRadiansOffset","speedX","speedY","directionX","directionY","scaleOffsetX","scaleOffsetY","CallMethod","easingFcn","timeVisible","timeNotVisible","numBlinks","endOpacity","entityToFollow","followDistance","actorToFollowSpeed","actorToMeet","actorToMeetSpeed","xOrPos","yOrSpeed","speedOrUndefined","xOffsetOrVector","yOffsetOrSpeed","xOffset","yOffset","sizeXOrVector","sizeYOrSpeed","speedXOrUndefined","speedYOrUndefined","sizeX","sizeY","sizeOffsetXOrVector","sizeOffsetYOrSpeed","sizeOffsetX","sizeOffsetY","times","FontTextInstance","font","metrics","textHeight","lineAdjustedHeight","bottomBounds","textBounds","includeColor","lineHeight","textImages","currentX","currentY","canvas","hashCode","frag","measurement","textInstance","deferred","currentHashCodes","newTextMeasurementCache","_l","_o","_p","_q","_r","_s","_t","_u","_y","colorOverride","thePos","theVel","theAcc","theAngle","angularVelocity","isDraggable","currentGraphic","pe","coordPlane","vel","collisionType","clone","_scene","newZ","globalPos","recurse","geom","containment","otherCollider","me","useWorld","coords","fcn","interval","repeats","numberOfRepeats","randomRange","newInterval","newNumberOfRepeats","parallaxFactor","draw","useTransform","currentCol","cd","originalOffset","tile","prev","xEnd","yEnd","graphicsIndex","graphicsLen","maybeParallax","oneMinusFactor","parallaxOffset","grayish","cameraElasticity","cameraFriction","box","_cam","_eng","cam","currentFocus","focus","cameraVel","stretch","friction","focusX","focusY","easingFn","magnitudeX","magnitudeY","cameraStrategy","currentRes","res","zoomEasing","newZoom","lerpPoint","newCanvasWidth","newCanvasHeight","cameraPos","triggerDefaults","opts","_entityAddedOrRemoved","_world","idOrEntity","buildTypeKey","types","T","sort","typesOrEntity","matches","query","queryType","maybeExistingQuery","systemType","system","systems","entities","entityOrSystem","EulerIntegrator","motion","totalAcc","optionalBody","aDist","bDist","opposite","velAdj","aToContactNormal","bToContactNormal","aToContactTangent","bToContactTangent","velA","finishedContactIds","contactPoints","pointIndex","aToContact","bToContact","normalMass","tangentMass","restitution","relativeVelocity","normalImpulse","tangentImpulse","constraints","steeringConstant","maxCorrection","slop","steeringForce","impulseForce","impulseDelta","maxFriction","newImpulse","normalVelocity","physics","colliderComponent","scene","colliderComp","compositeColliders","compositeId","maybeFrame","frameIndices","durationPerFrameMs","strategy","invalidIndices","frameCoordinates","reverse","defaultDuration","frames","coord","frameNumber","currentFrame","next","elapsedMilliseconds","member","maybeAnimation","base","props","ParticleImpl","emitterOrConfig","life","beginColor","endColor","velocity","acceleration","startSize","endSize","tmpColor","accel","isEmitting","minVel","maxVel","minAngle","maxAngle","emitRate","particleLife","fadeFlag","focusAccel","minSize","maxSize","particleSprite","emitterType","particleRotationalVelocity","particleTransform","randomRotation","particle","particleCount","ranX","ranY","entityAddedOrRemoved","_entities","parallax","particleOpacity","flipHorizontal","flipVertical","oldFlipHorizontal","oldFlipVertical","ancestors","ancestor","interpolatedPos","interpolatedScale","interpolatedRotation","blend","filterSettings","entitySettings","txSettings","motionSettings","colliderSettings","physicsSettings","graphicsSettings","debugDraw","bodySettings","cameraSettings","cursor","pointerId","pointers","pointer","graphicBounds","lastDownPerPointer","lastUpPerPointer","lastMovePerPointer","lastUpDownMoveEvents","lastFrameEntities","currentFrameEntities","entitiesWithEvents","actions","map","iso","entityOffscreen","transformedBounds","_ctx","timer","screenElements","_ui","color_blind_fragment","_colorBlindnessMode","simulate","colorBlindMode","colorBlindness","wasRunning","testClock","currentClock","standardClock","otherStats","fs","ps","nativeComponent","_windowGlobal","_documentGlobal","yOrEngine","engineOrUndefined","pageX","pageY","pagePos","screenPos","worldPos","pointerType","coordinates","nativeEvent","screenX","screenY","deltaZ","deltaMode","PointerAbstraction","isTouchEvent","isPointerEvent","eventReceiver","ids","native","normalized","wheelOptions","grabFocus","nativePointerId","eventCoords","touch","world","ScrollWheelNormalizationFactor","we","page","pointerSystem","transformEntities","cb","timeoutMs","scheduledTime","overrideUpdateMs","now","fpsInterval","leftover","mainloop","numberOfSteps","Util_Toaster","toastMessage","linkTarget","linkName","toast","messageFragments","link","finalMessage","dismissBtn","keydownHandler","first","inputs","command","inputHandler","commandHandler","shouldSnapToPixel","detector","testMessage","displayMode","useCanvasGraphicsContext","allow","showPlayerMessage","total","average","newCanvas","pointerTarget","previousScene","nextScene","deferredScene","toggle","loader","frameId","beforeUpdate","fixedTimestepMs","afterUpdate","afterDraw","preserveHiDPIResolution","finalWidth","finalHeight","screenshot","raw","eventHandler","eventHandlers","metaHandler","eventDispatcher","newFont","sf","spriteFont","graphicsOffset","halfTileWidth","halfTileHeight","xPos","yPos","totalWidth","totalHeight","_elapsed","tileWidth","tileHeight","renderFromTopOfGraphic","worldCoordinate","tileCoordinate","tileCoord","maxZ","currentZ","actionBuilder","parallelActions","group","images","bitsToNum","ba","byteToBitArr","bite","dataArray","bytes","lzwDecode","minCodeSize","readCode","output","clearCode","eoiCode","codeSize","dict","clear","last","stream","entries","ct","rgba","hdr","bits","block","parseGCExt","parseComExt","parsePTExt","parseAppExt","parseNetscapeExt","parseUnknownAppExt","parseUnknownExt","img","deinterlace","pixels","newPixels","cpRow","toRow","fromRow","fromPixels","offsets","steps","pass","lzwData","frame","pixSize","AsyncWaitQueue","_count","__webpack_exports__ActionContext","__webpack_exports__ActionQueue","__webpack_exports__ActionSequence","__webpack_exports__ActionsComponent","__webpack_exports__ActionsSystem","__webpack_exports__ActivateEvent","__webpack_exports__Actor","__webpack_exports__AddedComponent","__webpack_exports__AddedEntity","__webpack_exports__AffineMatrix","__webpack_exports__Animation","__webpack_exports__AnimationDirection","__webpack_exports__AnimationEvents","__webpack_exports__AnimationStrategy","__webpack_exports__ArcadeSolver","__webpack_exports__AudioContextFactory","__webpack_exports__Axes","__webpack_exports__Axis","__webpack_exports__BaseAlign","__webpack_exports__Blink","__webpack_exports__BodyComponent","__webpack_exports__BoundingBox","__webpack_exports__BroadphaseStrategy","__webpack_exports__BrowserComponent","__webpack_exports__BrowserEvents","__webpack_exports__Buttons","__webpack_exports__Camera","__webpack_exports__CameraEvents","__webpack_exports__Canvas","__webpack_exports__Circle","__webpack_exports__CircleCollider","__webpack_exports__Clock","__webpack_exports__ClosestLine","__webpack_exports__ClosestLineJumpTable","__webpack_exports__Collider","__webpack_exports__ColliderComponent","__webpack_exports__CollisionContact","__webpack_exports__CollisionEndEvent","__webpack_exports__CollisionGroup","__webpack_exports__CollisionGroupManager","__webpack_exports__CollisionJumpTable","__webpack_exports__CollisionPostSolveEvent","__webpack_exports__CollisionPreSolveEvent","__webpack_exports__CollisionResolutionStrategy","__webpack_exports__CollisionStartEvent","__webpack_exports__CollisionSystem","__webpack_exports__CollisionType","__webpack_exports__Color","__webpack_exports__ColorBlindFlags","__webpack_exports__ColorBlindnessMode","__webpack_exports__ColorBlindnessPostProcessor","__webpack_exports__Component","__webpack_exports__CompositeCollider","__webpack_exports__Configurable","__webpack_exports__ConsoleAppender","__webpack_exports__ContactConstraintPoint","__webpack_exports__ContactEndEvent","__webpack_exports__ContactStartEvent","__webpack_exports__CoordPlane","__webpack_exports__DeactivateEvent","__webpack_exports__Debug","__webpack_exports__DebugGraphicsComponent","__webpack_exports__DebugSystem","__webpack_exports__DebugText","__webpack_exports__DegreeOfFreedom","__webpack_exports__Delay","__webpack_exports__Detector","__webpack_exports__Die","__webpack_exports__Direction","__webpack_exports__DisplayMode","__webpack_exports__DynamicTree","__webpack_exports__DynamicTreeCollisionProcessor","__webpack_exports__EX_VERSION","__webpack_exports__EaseBy","__webpack_exports__EaseTo","__webpack_exports__EasingFunctions","__webpack_exports__EdgeCollider","__webpack_exports__ElasticToActorStrategy","__webpack_exports__EmitterType","__webpack_exports__Engine","__webpack_exports__EngineEvents","__webpack_exports__EnterTriggerEvent","__webpack_exports__EnterViewPortEvent","__webpack_exports__Entity","__webpack_exports__EntityEvents","__webpack_exports__EntityManager","__webpack_exports__EventDispatcher","__webpack_exports__EventEmitter","__webpack_exports__EventTypes","__webpack_exports__Events","__webpack_exports__ExResponse","__webpack_exports__ExcaliburGraphicsContext2DCanvas","__webpack_exports__ExcaliburGraphicsContextWebGL","__webpack_exports__ExitTriggerEvent","__webpack_exports__ExitViewPortEvent","__webpack_exports__Fade","__webpack_exports__Flags","__webpack_exports__Follow","__webpack_exports__Font","__webpack_exports__FontCache","__webpack_exports__FontStyle","__webpack_exports__FontUnit","__webpack_exports__FpsSampler","__webpack_exports__FrameStats","__webpack_exports__Future","__webpack_exports__GameEvent","__webpack_exports__GameStartEvent","__webpack_exports__GameStopEvent","__webpack_exports__Gamepad","__webpack_exports__GamepadAxisEvent","__webpack_exports__GamepadButtonEvent","__webpack_exports__GamepadConnectEvent","__webpack_exports__GamepadDisconnectEvent","__webpack_exports__Gamepads","__webpack_exports__Gif","__webpack_exports__GlobalCoordinates","__webpack_exports__Graphic","__webpack_exports__GraphicsComponent","__webpack_exports__GraphicsGroup","__webpack_exports__GraphicsLayer","__webpack_exports__GraphicsLayers","__webpack_exports__GraphicsSystem","__webpack_exports__HiddenEvent","__webpack_exports__ImageFiltering","__webpack_exports__ImageSource","__webpack_exports__InitializeEvent","__webpack_exports__Input","__webpack_exports__InputMapper","__webpack_exports__Integrator","__webpack_exports__IsometricEntityComponent","__webpack_exports__IsometricEntitySystem","__webpack_exports__IsometricMap","__webpack_exports__IsometricTile","__webpack_exports__KeyEvent","__webpack_exports__Keyboard","__webpack_exports__Keys","__webpack_exports__KillEvent","__webpack_exports__Label","__webpack_exports__LimitCameraBoundsStrategy","__webpack_exports__Line","__webpack_exports__LineSegment","__webpack_exports__Loader","__webpack_exports__LoaderEvents","__webpack_exports__LockCameraToActorAxisStrategy","__webpack_exports__LockCameraToActorStrategy","__webpack_exports__LogLevel","__webpack_exports__Logger","__webpack_exports__Material","__webpack_exports__Matrix","__webpack_exports__MatrixLocations","__webpack_exports__MediaEvent","__webpack_exports__Meet","__webpack_exports__MotionComponent","__webpack_exports__MotionSystem","__webpack_exports__MoveBy","__webpack_exports__MoveTo","__webpack_exports__NativePointerButton","__webpack_exports__NativeSoundEvent","__webpack_exports__NativeSoundProcessedEvent","__webpack_exports__Observable","__webpack_exports__OffscreenSystem","__webpack_exports__Pair","__webpack_exports__ParallaxComponent","__webpack_exports__ParallelActions","__webpack_exports__ParseGif","__webpack_exports__Particle","__webpack_exports__ParticleEmitter","__webpack_exports__ParticleTransform","__webpack_exports__Physics","__webpack_exports__PhysicsStats","__webpack_exports__PhysicsWorld","__webpack_exports__PointerButton","__webpack_exports__PointerComponent","__webpack_exports__PointerEvent","__webpack_exports__PointerEventReceiver","__webpack_exports__PointerScope","__webpack_exports__PointerSystem","__webpack_exports__PointerType","__webpack_exports__Polygon","__webpack_exports__PolygonCollider","__webpack_exports__Pool","__webpack_exports__PostCollisionEvent","__webpack_exports__PostDebugDrawEvent","__webpack_exports__PostDrawEvent","__webpack_exports__PostFrameEvent","__webpack_exports__PostKillEvent","__webpack_exports__PostUpdateEvent","__webpack_exports__PreCollisionEvent","__webpack_exports__PreDebugDrawEvent","__webpack_exports__PreDrawEvent","__webpack_exports__PreFrameEvent","__webpack_exports__PreKillEvent","__webpack_exports__PreUpdateEvent","__webpack_exports__Projection","__webpack_exports__QuadIndexBuffer","__webpack_exports__Query","__webpack_exports__QueryManager","__webpack_exports__RadiusAroundActorStrategy","__webpack_exports__Random","__webpack_exports__Raster","__webpack_exports__Ray","__webpack_exports__RealisticSolver","__webpack_exports__Rectangle","__webpack_exports__RemovedComponent","__webpack_exports__RemovedEntity","__webpack_exports__Repeat","__webpack_exports__RepeatForever","__webpack_exports__Resolution","__webpack_exports__Resource","__webpack_exports__ResourceEvents","__webpack_exports__RotateBy","__webpack_exports__RotateTo","__webpack_exports__RotationType","__webpack_exports__ScaleBy","__webpack_exports__ScaleTo","__webpack_exports__Scene","__webpack_exports__SceneEvents","__webpack_exports__Screen","__webpack_exports__ScreenAppender","__webpack_exports__ScreenElement","__webpack_exports__ScreenShader","__webpack_exports__ScrollPreventionMode","__webpack_exports__Semaphore","__webpack_exports__Shader","__webpack_exports__Shape","__webpack_exports__Side","__webpack_exports__Sound","__webpack_exports__SoundEvents","__webpack_exports__Sprite","__webpack_exports__SpriteFont","__webpack_exports__SpriteSheet","__webpack_exports__StandardClock","__webpack_exports__StateMachine","__webpack_exports__StrategyContainer","__webpack_exports__Stream","__webpack_exports__System","__webpack_exports__SystemManager","__webpack_exports__SystemType","__webpack_exports__TagComponent","__webpack_exports__TestClock","__webpack_exports__Text","__webpack_exports__TextAlign","__webpack_exports__TextureLoader","__webpack_exports__Tile","__webpack_exports__TileMap","__webpack_exports__TileMapEvents","__webpack_exports__Timer","__webpack_exports__Toaster","__webpack_exports__Transform","__webpack_exports__TransformComponent","__webpack_exports__TreeNode","__webpack_exports__Trigger","__webpack_exports__TriggerEvents","__webpack_exports__TwoPI","__webpack_exports__Util","__webpack_exports__Vector","__webpack_exports__VectorView","__webpack_exports__VertexBuffer","__webpack_exports__VertexLayout","__webpack_exports__VisibleEvent","__webpack_exports__WebAudio","__webpack_exports__WebAudioInstance","__webpack_exports__WheelDeltaMode","__webpack_exports__WheelEvent","__webpack_exports__World","__webpack_exports__canonicalizeAngle","__webpack_exports__clamp","__webpack_exports__createId","__webpack_exports__frac","__webpack_exports__hasGraphicsTick","__webpack_exports__hasOnInitialize","__webpack_exports__hasOnPostUpdate","__webpack_exports__hasOnPreUpdate","__webpack_exports__hasPostDraw","__webpack_exports__hasPreDraw","__webpack_exports__has_initialize","__webpack_exports__has_postupdate","__webpack_exports__has_preupdate","__webpack_exports__isAddedComponent","__webpack_exports__isAddedSystemEntity","__webpack_exports__isRemoveSystemEntity","__webpack_exports__isRemovedComponent","__webpack_exports__isScreenElement","__webpack_exports__maxMessages","__webpack_exports__obsolete","__webpack_exports__pixelSnapEpsilon","__webpack_exports__randomInRange","__webpack_exports__randomIntInRange","__webpack_exports__range","__webpack_exports__resetObsoleteCounter","__webpack_exports__sign","__webpack_exports__toDegrees","__webpack_exports__toRadians","__webpack_exports__vec","__webpack_exports__webgl","A","require$$0","o","E","Q","C","B","I","D","F","G","N","S","L","R","M","U","J","heroPath","tilesetPath","tmxPath","tsxPath","tssxPath","Resources","TiledMapResource","convertPath","originalPath","relativePath","Config","Player","ex.Actor","ex.CollisionType","playerSpriteSheet","ex.SpriteSheet","leftIdle","ex.Animation","rightIdle","upIdle","downIdle","leftWalk","rightWalk","upWalk","downWalk","ex.Vector","ex.Input","ex.vec","game","ex.Engine","player","playerActor"],"mappings":"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sBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAqBC,GAC1B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,GAAI,IAAsBC,GAC1B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,GAAI,IAAsBC,GAC1B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,EAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IAAK,IAAsBC,GAC3B,IA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","x_google_ignoreList":[0,1]}